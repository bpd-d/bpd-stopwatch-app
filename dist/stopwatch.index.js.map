{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/app/push/push.ts","webpack:///./src/core/models.ts","webpack:///./src/core/statics.ts","webpack:///./src/core/helpers.ts","webpack:///./src/ui/routes.ts","webpack:///./src/api/routes/routes.ts","webpack:///./src/ui/components/home/list.tsx","webpack:///./src/ui/components/home/home.tsx","webpack:///./src/ui/error.tsx","webpack:///./src/ui/components/common/NavbarLink.tsx","webpack:///./src/ui/components/navbar/navbar.tsx","webpack:///./src/ui/hooks/NavbarTitle.tsx","webpack:///./src/ui/components/offacanvas/offcanvas.tsx","webpack:///./src/app/flow/actions.ts","webpack:///./src/core/validators.ts","webpack:///./src/ui/components/common/BpdDialog.tsx","webpack:///./src/ui/components/common/ErrorsList.tsx","webpack:///./src/ui/components/common/BpdActionIcon.tsx","webpack:///./src/ui/components/actions/ActionTypeRadioChooser.tsx","webpack:///./src/ui/components/actions/AddActionDialog.tsx","webpack:///./src/ui/components/common/PageHeader.tsx","webpack:///./src/ui/components/common/ClearableInput.tsx","webpack:///./src/ui/components/trainings/IconLabel.tsx","webpack:///./src/ui/components/common/BpdConfirmDrop.tsx","webpack:///./src/ui/components/actions/ActionsEditGrid.tsx","webpack:///./src/ui/components/actions/StopwatchActionsComponent.tsx","webpack:///./src/app/flow/trainings.ts","webpack:///./src/ui/components/common/GoBack.tsx","webpack:///./src/ui/components/common/NotFound.tsx","webpack:///./src/ui/components/trainings/ButtonBar.tsx","webpack:///./src/ui/components/common/BpdActionLabel.tsx","webpack:///./src/ui/components/actions/ActionSelectDropdown.tsx","webpack:///./src/ui/components/trainings/EditRoundDialog.tsx","webpack:///./src/ui/components/trainings/EditRoundListItem.tsx","webpack:///./src/ui/components/common/BpdDialogFooter.tsx","webpack:///./src/ui/components/trainings/QuickRoundDialog.tsx","webpack:///./src/ui/components/trainings/EditTraining.tsx","webpack:///./src/ui/components/common/Dialogs.ts","webpack:///./src/api/screen/screen.ts","webpack:///./src/api/stopwatch/stopwatch.ts","webpack:///./src/ui/components/perform/CountDownTimer.tsx","webpack:///./src/app/flow/settings.ts","webpack:///./src/ui/hooks/settings.tsx","webpack:///./src/ui/hooks/useResize.tsx","webpack:///./src/ui/components/common/IconButton.tsx","webpack:///./src/ui/components/perform/PerformTraining.tsx","webpack:///./src/ui/hooks/loading.tsx","webpack:///./src/ui/components/settings/SettingsDevTools.tsx","webpack:///./src/ui/components/settings/SettingsSwitchListItem.tsx","webpack:///./src/ui/components/settings/StopwatchSettings.tsx","webpack:///./src/ui/components/about/About.tsx","webpack:///./src/ui/components/footer/Footer.tsx","webpack:///./src/ui/components/tutorial/TutorialDialog.tsx","webpack:///./src/ui/components/help/help.tsx","webpack:///./src/ui/app.tsx","webpack:///./src/core/services/storage.tsx","webpack:///../cui-light/dist/esm/managers/element.js","webpack:///../cui-light/dist/esm/builders/dialog.js","webpack:///../cui-light/dist/esm/handlers/alert.js","webpack:///../cui-light/dist/esm/observers/move.js","webpack:///../cui-light/dist/esm/managers/toast.js","webpack:///../cui-light/dist/esm/helpers/collection.js","webpack:///../cui-light/dist/esm/managers/collection.js","webpack:///../cui-light/dist/esm/managers/plugins.js","webpack:///../cui-light/dist/esm/instance.js","webpack:///../cui-light/dist/esm/initializer.js","webpack:///../cui-light/dist/esm/init.js","webpack:///./src/core/services/push.ts","webpack:///./src/index.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","PUSH_ACTIONS","PushServiceFlow","service","this","title","setNavbarTitle","bg","StopwatchActionType","TrainingState","DefaultActions","id","duration","type","removable","editable","ERROR_CODES","getDefaultRoundName","index","DefaultSettings","darkMode","soundEnabled","isWelcome","simpleView","showMessage","message","$cui","alert","showToast","toast","calculateDuration","actions","is","reduce","Number","parseInt","getUserDisplayNotation","seconds","getSimplifiedDuration","format","restSeconds","Math","floor","secondsLeft","getDisplayTimerValue","setDarkMode","getUtils","setLightMode","calculateProgress","current","max","getTotalDuration","training","rounds","getBgClassByType","move","collection","from","to","size","amount","el","newLength","newTo","buildQuickRoundActions","exerciseCount","stopwatchActions","warmup","exercise","cooldown","setPageTitle","text","document","$push","perform","MAPPIGNS","routes","undefined","route","getRoute","url","attributes","uri","getUrl","enumerateObject","prop","replace","icon","TrainingList","props","className","list","map","item","TrainingListItem","onDelete","history","useHistory","React","deleteSubscription","$flow","subscribe","finish","unsubscribe","onClick","renderUrl","toUpperCase","getActionsDuration","cui-icon","cui-tooltip","Home","state","updateList","onDeleteTrainingComplete","deleteTraining","subscription","onDeleteSubscription","elementIdx","findIndex","onYes","flag","setState","NoTrainings","ErrorRoute","NavbarLink","shouldClose","emit","exact","activeClassName","isIcon","IconNavLabel","Navbar","currentLocation","useLocation","currentSite","location","setLocation","init","setTitle","onUpdate","pushServiceTitleSub","useNavbarTitle","split","pathname","toLocaleUpperCase","goBack","cui-open","class","getName","OffCanvas","cui-off-canvas","href","cui-close","ACTIONS_FLOW_ACTIONS","ActionsFlow","getAllActions","action","setAction","removeAction","clearActions","ValidatorBase","status","errors","performValidation","e","errorMsg","console","error","TrainingValidator","RoundValidator","ActionValidator","CompleteTrainingValidator","err","validate","validateRounds","len","validateActions","BpdDialog","cui-dialog","body","footer","ErrorsList","BpdActionIcon","ActionTypeRadioChooser","groupId","radioId","setActions","onChange","ev","target","checked","found","find","act","matches","buildItem","htmlFor","AddActionDialog","setErrors","onValueChange","event","placeholder","min","onSave","actionValidator","dialogCui","PageHeader","description","ClearableInput","setValue","changeValue","IconLabel","label","BpdConfirmDrop","cancelLabel","confirmLabel","cui-drop","onCancel","onConfirm","ActionsEditGrid","filter","match","toLowerCase","matchesName","option","onEdit","onOption","defaultAction","StopwatchActionsComponent","setFilter","onGetAll","onAddOrEditClick","getAllSub","$actionsFlow","setActionSub","removeActionSub","ACTIONS","TrainingsFlow","getAllTrainings","addTraining","updateTraining","getTraining","getDraft","setDraft","clearDraft","draft","clearTrainings","withRouter","NotFound","classes","ButtonBar","items","ButtonBarItem","modifiers","BpdActionLabel","ActionSelectDropdown","DropTrigger","onSelect","EditRoundDialog","useState","selected","setStateRoundData","definedActions","round","currentCount","are","copy","onSwapAction","newActions","onDeleteAction","validation","EditRoundListItem","isFirst","onMoveUp","isLast","onMoveDown","onClone","BpdDialogFooter","QuickRoundDialog","groupedActions","out","groupActionsByType","break","setExerciseCount","QuickRoundDialogBody","count","onCounterUpdate","updateCounter","QuickRoundDialogSelect","EditTrainingSection","currentIndex","currentRound","setDefinedActions","onRoundEdit","onRoundDelete","updateRoundsState","onRoundDown","onRoundUp","onRoundClone","idx","cloned","clone","insert","updateOrInsertRound","onFormChange","includes","getDefinedActions","getDefinedActionsSub","rows","arr","buttonNavItems","setIsLoading","useParams","onUpdateTraining","onGetTraining","onGetDraft","onTrainingSave","validaton","join","onDeleteTraining","onDeleteTrainingSub","updateTrainingSub","getTrainingSub","getDraftSub","deleteTraininSub","pushDraft","KeepAwakeToggle","screen","keepAwake","LoopLockScreen","element","createElement","appendChild","remove","src","newEl","autoplay","muted","loop","classList","add","textContent","KeepScreenAwakeFeature","getToggle","activate","release","StopWatchStateOptions","StopWatch","callback","setTimeout","tick","stop","clearTimeout","CountDownTimer","cui-circle-progress","watchState","trainingProgress","roundProgress","progress","actionIdx","timerCls","timer","SimpleCountDownTimer","roundIdx","roundTotal","SETTINGS_FLOW_ACTIONS","SettingsFlow","isSoundEnabled","setSoundEnabled","isDarkMode","setSettings","getSettings","isWelcomeSet","setIsWelcome","clearSettings","useSettings","settings","onSaveSettings","$settingsFlow","onGetSettings","settingsSub","settingsUpdateSub","useIsFullscreen","onResize","addEventListener","removeEventListener","useResize","setIsFullscreen","isElementFullscreen","isFullscreen","clientHeight","availHeight","height","clientWidth","availWidth","width","IconButton","PerfromTraining","loading","log","isLoading","getTrainingSubscription","PerformTrainingElement","stopwatch","setStopwatch","actionTotal","roundDuration","totalDuration","setWatchState","startBtnText","startBtnCls","pauseBtnText","isPauseVisible","startBtnIcon","pauseBtnIcon","currentPlayStateControls","setCurrentPlayStateControls","errorMessage","setErrorMessage","trainingRef","watchStateRef","settingsRef","countdownSound","exerciseSound","warmupSound","breakSound","cooldownSound","endSound","mainViewRef","setDefaultWatchState","onStopwatchTick","currentTime","total","actionDuration","ct","playSound","updateStopWatchState","getState","time","nextActionIdx","newAction","nextRoundIdx","newRound","setNextAction","reset","watchstate","timeData","calculateRoundCurrentTime","trainginProgress","calculateTrainingProgress","updatePlayStateControls","play","wakeLock","onTick","ref","pause","resume","start","closeFullscreen","openFullscreen","SettingsDevTools","onClear","onSettingsUpdate","settingsClearSub","actionsClearSub","trainingsClearSub","SettingsSwitchListItem","StopwatchSettings","newSettings","About","Footer","Date","getFullYear","TutorialDialog","setIsLast","switchElement","onSwitched","ids","on","forEach","detach","cui-switch","cui-switcher","Help","AppBase","path","App","welcomeDialogHandle","onDarkMode","onWelcomeScreen","welcomeDialogCloseEventIds","onWelcomeDialogClose","darkModeSub","welcomeScreenGetSub","component","EditTraining","_elements","_isLocked","_logger","_cDt","_utils","_actionsHelper","TrainingsStorageService","BpdStorage","getTrainings","onAction","getNextIndex","trainings","getAny","setAny","removeItem","Error","getNumber","NaN","setNumber","setTrainings","ActionStorageService","getActionsFromStorage","existingIndex","getIndex","setActionsToStorage","val","SettingsService","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","step","next","rejected","done","then","__classPrivateFieldSet","receiver","privateMap","has","TypeError","set","__classPrivateFieldGet","elements","utils","now","interactions","contains","fetch","mutate","attributeName","attr","getAttribute","attributeValue","setAttribute","removeAttribute","hasAttribute","eventName","functionName","lock","unlock","timeout","delay","setup","animationTime","change","animProgress","openClass","animationClass","performAction","closeClass","args","cuid","$cuid","debug","bus","warning","cuiElement","disposeId","WeakMap","_header","_body","_footer","_prefix","_switches","_reverse","prefix","reverse","switches","headerBuilder","setClasses","build","titleElement","getPrefixedString","appendChildrens","dialog","setId","setAttributes","container","parent","str","_callbacks","_manager","_attid","_id_1","_id_2","_id_3","onNo","onOk","content","closeStr","iconStr","root","getElementById","updateElement","onClose","querySelector","innerHTML","arg","_a","super","dialogBuilder","createHeader","createBody","createFooter","_bus","_moveListener","_eventId","_firstEvent","setCallback","onMove","isAttached","attach","MOVE_LOCK","onMoveLock","GLOBAL_MOVE","_interactions","_selector","_className","_activeCls","_animationTime","_lock","_animClsIn","_animClsOut","interaction","toastElement","_log","_toggleClass","currentElement","nextElement","animIn","animOut","newIndex","animClassIn","animClassOut","addAnimationClass","setFinalClasses","_helper","setElements","setToggle","check","newIdx","getCurrentIndex","verifyIndex","setCurrent","setCurrentWithAnimation","_plugins","_mutated","plugins","plugin","mutation","tasks","all","_mutationObserver","_toastManager","_components","_rootElement","_moveObserver","_mutatedAttributes","components","logLevel","MutationObserver","animationTimeLong","x","attribute","initElements","querySelectorAll","exception","setComponents","setPlugins","setProperty","animationTimeShort","INSTANCE_INITIALIZED","INSTANCE_FINISHED","selector","show","nodes","detachAll","popup","_window","_b","assign","appPrefix","app","icons","swipeAnimations","animation","_isInitialized","initializer","pluginList","autoLight","autoPrint","componentList","appPlugins","PushService","loadingIndicator","setText","requestAnimationFrame","response","json","rootElement","CuiSetupInit","busSetup","eventsDef","handler","priority","cuiSetup","CuiIconsPack","traningsFlow","actionsService","actionsFlow","settingsService","settingsFlow","pushService","FlowFactory","getActions","CuiInit","ReactDOM","onDataFetch"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAKlC,IAFGe,GAAqBA,EAAoBhB,GAEtCO,EAASC,QACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrBiB,EAAG,GAGAZ,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU8B,QAGnC,IAAIC,EAASH,EAAiB5B,GAAY,CACzCK,EAAGL,EACHgC,GAAG,EACHF,QAAS,IAUV,OANAhB,EAAQd,GAAUW,KAAKoB,EAAOD,QAASC,EAAQA,EAAOD,QAASJ,GAG/DK,EAAOC,GAAI,EAGJD,EAAOD,QAKfJ,EAAoBO,EAAInB,EAGxBY,EAAoBQ,EAAIN,EAGxBF,EAAoBS,EAAI,SAASL,EAASM,EAAMC,GAC3CX,EAAoBY,EAAER,EAASM,IAClC5B,OAAO+B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEX,EAAoBgB,EAAI,SAASZ,GACX,oBAAXa,QAA0BA,OAAOC,aAC1CpC,OAAO+B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DrC,OAAO+B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKzC,OAAO0C,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBzC,OAAO+B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBS,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAL,EAAoBS,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRX,EAAoBY,EAAI,SAASgB,EAAQC,GAAY,OAAO/C,OAAOC,UAAUC,eAAeC,KAAK2C,EAAQC,IAGzG7B,EAAoB8B,EAAI,IAExB,IAAIC,EAAaC,OAAqB,aAAIA,OAAqB,cAAK,GAChEC,EAAmBF,EAAW5C,KAAKuC,KAAKK,GAC5CA,EAAW5C,KAAOf,EAClB2D,EAAaA,EAAWG,QACxB,IAAI,IAAIvD,EAAI,EAAGA,EAAIoD,EAAWlD,OAAQF,IAAKP,EAAqB2D,EAAWpD,IAC3E,IAAIU,EAAsB4C,EAI1B1C,EAAgBJ,KAAK,CAAC,GAAG,IAElBM,I,6YCrJF,IAAM0C,EACS,mBADTA,EAEM,gB,cAONC,EAAb,WAEI,WAAYC,I,4FAAuB,gD,mOAC/B,CAAAC,KAAA,EAAgBD,G,UAHxB,O,EAAA,G,EAAA,oCAMiB,aACT,cACKF,GAAgC,SAACI,GAC9B,O,4IAAO,GAAI,GAAUC,eAAeD,MAF5C,IAIKJ,GAA6B,SAACM,GAC3B,OAAOA,KALf,O,2BAPR,KCXO,IAAMC,EACC,WADDA,EAEF,QAFEA,EAGC,WAHDA,EAID,SAGCC,EACF,QADEA,EAEA,UAFAA,EAGJ,MCRIC,EAAoC,CAAC,CAC9CC,GAAI,OACJnC,KAAM,SACNoC,SAAU,IACVC,KAAML,EACNM,WAAW,EACXC,UAAU,GAEd,CACIJ,GAAI,OACJnC,KAAM,WACNoC,SAAU,KACVC,KAAML,EACNM,WAAW,EACXC,UAAU,GAEd,CACIJ,GAAI,OACJnC,KAAM,QACNoC,SAAU,KACVC,KAAML,EACNM,WAAW,EACXC,UAAU,GAEd,CACIJ,GAAI,OACJnC,KAAM,WACNoC,SAAU,KACVC,KAAML,EACNM,WAAW,EACXC,UAAU,IAGDC,EAEF,mBAFEA,EAGF,oBAHEA,EAIF,gCAJEA,EAKF,yBALEA,EAMF,iBANEA,EAOF,uBAPEA,EAQF,wBAREA,EASF,kBATEA,EAUF,8BAVEA,EAWF,8BAXEA,EAYF,iCAIJ,SAASC,EAAoBC,GAChC,MAAO,SAAWA,EAGf,IAAMC,EAA4B,CACrCC,UAAU,EACVC,cAAc,EACdC,WAAW,EACXC,YAAY,G,0uBCtDT,SAASC,EAAYnB,EAAeoB,GACvC3B,OAAO4B,KAAKC,MAAM,qBAAsB,OAAQ,CAC5CtB,MAAOA,EACPoB,QAASA,IAIV,SAASG,EAAUH,GACtB3B,OAAO4B,KAAKG,MAAMJ,GAGf,SAASK,EAAkBC,GAC9B,OAAOC,YAAGD,GAAWA,EAAQE,QAAe,SAACzE,EAAgByB,GACzD,OAAOzB,EAAS0E,OAAOC,SAASlD,EAAM2B,YACvC,GAAK,EA6BL,SAASwB,EAAuBC,GACnC,OAAOC,EAAsBD,GAAS,SAACpD,EAAe4B,GAClD,OAAQA,GACJ,IAAK,OACD,gBAAU5B,EAAV,KACJ,IAAK,SACD,gBAAUA,EAAV,KACJ,QACI,gBAAUA,EAAV,SAKT,SAASqD,EAAsBD,EAAiBE,GACnD,GAAIF,EAAU,GACV,OAAOE,EAAOF,EAAS,UACpB,GAAIA,EAAU,KAAM,CACvB,IACIG,EAAcH,EAAU,GAC5B,OAAOE,EAFOE,KAAKC,MAAML,EAAU,IAEZ,UAAYC,EAAsBE,EAAaD,GAEtE,IACII,EAAcN,EAAU,KAC5B,OAAOE,EAFKE,KAAKC,MAAML,EAAU,MAEZ,SAAWC,EAAsBK,EAAaJ,GAMpE,SAASK,EAAqB3D,GACjC,OAAIA,EAAQ,GAAKA,EAAQ,GACd,QAEJA,EAAQ,GAAK,IAAMA,EAAQ,GAAKA,EAKpC,SAAS4D,EAAYzB,GACpBtB,OAAO4B,MACK5B,OAAO4B,KAAKoB,WAClBC,aAAa3B,EAAW,OAAS,SAIxC,SAAS4B,EAAkBC,EAAiBC,GAC/C,OAAOT,KAAKC,MAAiB,IAAVO,EAAiBC,GAQjC,SAASC,EAAiBC,GAC7B,OAAOA,EAASC,OAAOpB,QAAyB,SAACzE,EAA0ByF,GACvE,MAAO,CAACzF,EAAO,GAAKyF,EAAQlB,QAAQpF,OAAQa,EAAO,GAAKsE,EAAkBmB,EAAQlB,YACnF,CAAC,EAAG,IAGJ,SAASuB,EAAiBzC,GAC7B,MAAO,qBAAuBA,EAyC3B,SAAS0C,EAAQC,EAAiBC,EAAcC,EAAYC,GAC/D,IAAKH,GAA6B,OAAfA,GAAuBC,EAAO,EAC7C,OAAOD,EAEX,IAAII,EAASD,UAAQ,EACjBhH,EAAS6G,EAAW7G,OACxB,GAAIA,EAAS,GAAK8G,GAAQ9G,EACtB,SAAW6G,GAEf,IAAMK,EAAKL,EAAW3F,OAAO4F,EAAMG,GAC7BE,EAAYnH,EAASiH,EACrBG,EAAQL,EAEd,OAAIK,GAAS,EACT,YAAWF,GAAX,EAAkBL,IAElBO,GAASD,EACT,YAAWN,GAAX,EAA0BK,KAE9BL,EAAW3F,OAAX,MAAA2F,EAAU,CAAQO,EAAO,GAAf,SAAqBF,KAC/B,EAAWL,IAgBR,SAASQ,EAAuBjC,EAAuBkC,GAC1D,IAAMC,EAAsC,GAI5C,GAHInC,EAAQoC,QACRD,EAAiBjH,KAAK8E,EAAQoC,QAE9BpC,EAAQqC,SACR,IAAK,IAAI3H,EAAI,EAAGA,EAAIwH,EAAexH,IAC/ByH,EAAiBjH,KAAK8E,EAAQqC,UAC1BrC,EAAO,OAAUtF,EAAIwH,EAAgB,GACrCC,EAAiBjH,KAAK8E,EAAO,OAOzC,OAHIA,EAAQsC,UACRH,EAAiBjH,KAAK8E,EAAQsC,UAE3BH,EAGJ,SAASI,EAAaC,GACrBvC,YAAGuC,GACHC,SAASnE,MAAT,UDjJgB,gBCiJhB,cAAkCkE,GAGtCC,SAASnE,MDpJW,gBCuJjB,SAASC,EAAeiE,GAC3BzE,OAAO2E,MAAMC,QAAQzE,EAA+BsE,G,wLCpN3CI,EAAW,ICcxB,WAEI,WAAYC,I,4FAAuB,gD,mOAC/B,CAAAxE,KAAA,EAAgBwE,G,UAHxB,O,EAAA,G,EAAA,gCAMajE,GACL,OAAOqB,YAAGrB,G,4IAAM,CAAAP,KAAA,GAAcO,QAAMkE,IAP5C,6BAUWlE,GACH,IAAImE,EAAQ1E,KAAK2E,SAASpE,GAC1B,OAAOqB,YAAG8C,GAASA,EAAME,SAAMH,IAZvC,8BAeYlE,GACJ,IAAImE,EAAQ1E,KAAK2E,SAASpE,GAC1B,OAAOqB,YAAG8C,GAASA,EAAMtG,UAAOqG,IAjBxC,gCAmBclE,EAAYsE,GAClB,IAAIC,EAAM9E,KAAK+E,OAAOxE,GACtB,OAAKqB,YAAGiD,IAGRG,YAAgBH,GAAY,SAACI,EAAcpG,GACvCiG,EAAMA,EAAII,QAAQ,IAAMD,EAAMpG,MAE3BiG,GALIA,O,2BAtBnB,KDdwB,CAAe,CACnC,KAAQ,CAAEF,IAAK,IAAKxG,KAAM,OAAQ+G,KAAM,QACxC,MAAS,CAAEP,IAAK,SAAUxG,KAAM,QAAS+G,KAAM,QAC/C,SAAY,CAAEP,IAAK,YAAaxG,KAAM,WAAY+G,KAAM,YACxD,QAAW,CAAEP,IAAK,WAAYxG,KAAM,UAAW+G,KAAM,QACrD,KAAQ,CAAEP,IAAK,QAASxG,KAAM,OAAQ+G,KAAM,eAC5C,YAAe,CAAEP,IAAK,sBAAuBxG,KAAM,gBACnD,aAAgB,CAAEwG,IAAK,sBAAuBxG,KAAM,iBACpD,QAAW,CAAEwG,IAAK,yBAA0BxG,KAAM,sB,28BES/C,SAASgH,GAAaC,GACzB,OAAO,sBAAIC,UAAU,sBAChBD,EAAME,MAAQF,EAAME,KAAKC,KAAI,SAACC,EAAM3E,GACjC,OAAO,sBAAI3B,IAAKsG,EAAKlF,GAAI+E,UAAU,4CAA2C,gBAACI,GAAD,CAAkB3J,KAAM0J,EAAME,SAAUN,EAAMM,SAAU7E,MAAOA,SAKlJ,SAAS4E,GAAiBL,GAC7B,IASoBrC,EAAoB,EARpC4C,EAAUC,cA2Bd,OAVAC,aAAgB,WACZ,IAAMC,EAAqBrG,OAAOsG,MAAMC,UAnBf,mBAmB+CC,QAAO,SAAC9I,GAC5EsC,OAAOsG,MAAM1B,QAAQ,oBAGzB,OAAO,WACH5E,OAAOsG,MAAMG,YAxBQ,kBAwB0BJ,EAAmBxF,QAInE,uBAAK+E,UAAW,gFACnB,uBAAKA,UAAU,gBAAgBc,QAfnC,WACIR,EAAQ/I,KAAK0H,EAAS8B,UAAU,UAAW,CAAE9F,GAAI8E,EAAMtJ,KAAKwE,QAexD,uBAAK+E,UAAU,kCACX,uBAAKA,UAAU,2BACX,wBAAMA,UAAU,iBAAiBD,EAAMtJ,KAAKqC,KAAK,GAAGkI,gBAExD,uBAAKhB,UAAU,iCACX,4BAAOD,EAAMtJ,KAAKqC,MAClB,uBAAKkH,UAAU,wDACX,6BA5BAtC,EA4BkBqC,EAAMtJ,MA5BJ,KANxC,SAA4BiH,GACxB,OAAOA,EAASC,OAAOpB,QAAyB,SAACzE,EAA0ByF,GACvE,MAAO,CAACzF,EAAO,GAAKyF,EAAQlB,QAAQpF,OAAQa,EAAO,GAAKsE,EAAkBmB,EAAQlB,YACnF,CAAC,EAAG,IAIqB4E,CAAmBvD,GADX,OAE7BhB,EAF6B,YAgCpC,uBAAKsD,UAAU,mBACX,2BACI,gBAAC,IAAD,CAAMhC,GAAIiB,EAAS8B,UAAU,eAAgB,CAAE,GAAMhB,EAAMtJ,KAAKwE,KAAO+E,UAAU,kBAAkBkB,WAAS,OAAOC,cAAY,qB,uoFCvDxI,IAAMC,GAAb,a,mOAAA,U,MAAA,QAKI,WAAYrB,GAAkB,a,4FAAA,eAC1B,cAAMA,IADoB,gHAE1B,EAAKsB,MAAQ,CACTpB,KAAM,IAGV,EAAKqB,WAAa,EAAKA,WAAWxH,KAAhB,OAClB,EAAKyH,yBAA2B,EAAKA,yBAAyBzH,KAA9B,OAChC,EAAK0H,eAAiB,EAAKA,eAAe1H,KAApB,OARI,EALlC,O,EAAA,G,EAAA,2CAkBQ8E,EAAa,QACblE,KAAK+G,aAAerH,OAAOsG,MAAMC,UAAU,qBAC3CjG,KAAK+G,aAAab,OAAOlG,KAAK4G,YAC9B5G,KAAKgH,qBAAuBtH,OAAOsG,MAAMC,UAAU,kBAAmB,CAAEC,OAAQlG,KAAK6G,2BACrFnH,OAAOsG,MAAM1B,QAAQ,uBAtB7B,6CA0BQ5E,OAAOsG,MAAMG,YAAY,oBAAqBnG,KAAK+G,aAAaxG,IAChEb,OAAOsG,MAAMG,YAAY,kBAAmBnG,KAAKgH,qBAAqBzG,MA3B9E,qCA8BmBA,GACX,IAAIgF,EAAO,GAAIvF,KAAK2G,MAAMpB,MACtB0B,EAAa1B,EAAK2B,WAAU,SAAAzB,GAAI,OAAIA,EAAKlF,KAAOA,KAChD0G,GAAc,EACdvH,OAAO4B,KAAKC,MAAM,yBAA0B,cAAe,CACvDtB,MAAO,kBACPoB,QAAS,0CAA4CkE,EAAK0B,GAAY7I,KAAO,IAC7E+I,MAAO,WACHzH,OAAOsG,MAAM1B,QAAQ,kBAAmB/D,MAIhDa,EAAY,kBAAmB,+DA1C3C,+CAgD6BgG,GACjBA,EACA1H,OAAOsG,MAAM1B,QAAQ,qBAErBlD,EAAY,kBAAmB,uCApD3C,iCAwDemE,GACPvF,KAAKqH,SAAL,SACOrH,KAAK2G,OADZ,IAEIpB,KAAMA,OA3DlB,+BAkEQ,OAAO,uBAAKD,UAAU,yBAClB,uBAAKA,UAAU,+CACX,2BACI,wBAAMA,UAAU,0BAA0BkB,WAAS,cACnD,sBAAIlB,UAAU,+DAAd,eAGR,uBAAKA,UAAU,yBACX,uBAAKA,UAAU,2CACVtF,KAAK2G,MAAMpB,KAAKhJ,OAAS,EAAI,gBAAC6I,GAAD,CAAcG,KAAMvF,KAAK2G,MAAMpB,KAAMI,SAAU3F,KAAK8G,iBAAqB,gBAACQ,GAAD,QAG/G,uBAAKhC,UAAU,mHACX,gBAAC,IAAD,CAAMhC,GAAIiB,EAAS8B,UAAU,eAAgBf,UAAU,kEAAkEkB,WAAS,gB,6BA/ElJ,GAA0BV,aAqFnB,SAASwB,KACZ,OAAO,uBAAKhC,UAAU,4BAClB,qBAAGA,UAAU,kCAAb,oCAA+E,gBAAC,IAAD,CAAMA,UAAU,sBAAsBhC,GAAIiB,EAAS8B,UAAU,gBAA7D,WAA/E,sC,stCC/FD,IAAMkB,GAAb,a,mOAAA,U,MAAA,QACI,WAAYlC,GAAmB,O,4FAAA,qBACrBA,GAFd,O,EAAA,G,EAAA,gCAKQ,OAAO,uBAAKC,UAAU,uDAClB,uBAAKA,UAAU,sBACX,uBAAKA,UAAU,kCACX,wBAAMA,UAAU,kBAAhB,UAEJ,uBAAKA,UAAU,iBAAf,6GAIA,uBAAKA,UAAU,sCACX,gBAAC,IAAD,CAAMhC,GAAG,IAAIgC,UAAU,YAAvB,mB,6BAfpB,GAAgCQ,a,2tCCIzB,IAAM0B,GAAb,a,mOAAA,U,MAAA,QACI,WAAYnC,GAAwB,a,4FAAA,UAChC,cAAMA,IACDe,QAAU,EAAKA,QAAQhH,KAAb,OAFiB,EADxC,O,EAAA,G,EAAA,iCAOYY,KAAKqF,MAAMoC,aACK/H,OAAO4B,KAAK7C,IAAI,kBACtBiJ,KAAK,WAT3B,+BAcQ,OAAO,gBAAC,IAAD,CAASC,OAAK,EAACC,gBAAgB,aAAatC,UAAWtF,KAAKqF,MAAL,MAAkB/B,GAAItD,KAAKqF,MAAMT,IAAKwB,QAASpG,KAAKoG,SAAUpG,KAAKqF,MAAMwC,OAAS,gBAACC,GAAD,CAAc1J,KAAM4B,KAAKqF,MAAMjH,KAAM+G,KAAMnF,KAAKqF,MAAMF,OAAWnF,KAAKqF,MAAMjH,W,6BAdpO,GAAgC0H,aAuBzB,SAASgC,GAAazC,GACzB,OAAQ,wBAAMC,UAAU,uBAAsB,wBAAMkB,WAAUnB,EAAMF,OAAa,wBAAMG,UAAU,yBAAyBD,EAAMjH,O,s5DCjB7H,SAAS2J,GAAO1C,GACnB,IAAM2C,EAAkBC,cADe,KAEbnC,WAA4B,CAClDoC,YAAa,GACblH,UAAU,EACVC,cAAc,IALqB,mBAOP6E,WAAe,IAPR,IAOhCqC,EAPgC,KAOtBC,EAPsB,KAQjCnI,ECxBH,SAAwBoI,GAAsB,SACvBvC,WAAeuC,GADQ,GAC1CpI,EAD0C,KACnCqI,EADmC,KAGjD,SAASC,EAAS1J,GACdyJ,EAASzJ,GAQb,OANAiH,aAAgB,WACZ,IAAM0C,EAAsB9I,OAAO2E,MAAM4B,UAAUpG,EAA+B,CAAEqG,OAAQqC,IAC5F,OAAO,WACH7I,OAAO2E,MAAM8B,YAAYtG,EAA+B2I,EAAoBjI,QAG7EN,EDYOwI,CAAe,IACvB7C,EAAUC,cAkBhB,OATAC,aAAgB,WACZ,IAAI4C,EAAQV,EAAgBW,SAASD,MAAM,KAI3C,OAHAN,EAAYM,EAAMnM,OAAS,EAAImM,EAAM,GAAGE,oBAAsB,IAGvD,eAGR,CAACZ,IACG,uBAAK1C,UAAW,qEACnB,uBAAKA,UAAU,kFAAkF/E,GAAG,eAChG,0BACK4H,GAAY,gCAAE,0BAAI,qBAAG3B,WAAS,qBAAqBJ,QAAS,WAAQR,EAAQiD,aACzE,0BAAI,gBAAC,IAAD,CAAMvD,UAAU,WAAWhC,GAAIiB,EAAS8B,UAAU,QAASG,WAAS,qBACxE,0BAAI,4BAAOvG,MAGnB,qBAAGqF,UAAU,gDAAgDkB,WAAS,OAAOsC,WAAS,4BAG1F,sBAAIxD,UAAU,oCACV,0BAAI,gBAAC,GAAD,CAAYyD,MAAM,kBAAkBnE,IAAKL,EAAS8B,UAAU,QAASjI,KAAMmG,EAASyE,QAAQ,WAChG,0BAAI,gBAAC,GAAD,CAAYD,MAAM,kBAAkBnE,IAAKL,EAAS8B,UAAU,WAAYjI,KAAMmG,EAASyE,QAAQ,cACnG,0BAAI,gBAAC,GAAD,CAAYD,MAAM,kBAAkBnE,IAAKL,EAAS8B,UAAU,YAAajI,KAAMmG,EAASyE,QAAQ,eACpG,0BAAI,gBAAC,GAAD,CAAYD,MAAM,kBAAkBnE,IAAKL,EAAS8B,UAAU,QAASjI,KAAMmG,EAASyE,QAAQ,WAChG,0BAAI,gBAAC,GAAD,CAAYD,MAAM,kBAAkBnE,IAAKL,EAAS8B,UAAU,SAAUjI,KAAMmG,EAASyE,QAAQ,c,stCEpDtG,IAAMC,GAAb,a,mOAAA,U,MAAA,QACI,WAAY5D,GAAuB,O,4FAAA,qBACzBA,GAFd,O,EAAA,G,EAAA,gCAMQ,OAAO,uBAAKC,UAAU,iBAAiB/E,GAAG,gBAAgB2I,iBAAe,4BACrE,uBAAK5D,UAAU,0FACX,uBAAKA,UAAU,+DACX,qBAAG6D,KAAK,IAAI7D,UAAU,WAAWkB,WAAS,QAAQ4C,YAAU,MAEhE,uBAAK9D,UAAU,oFACX,uBAAKA,UAAU,iBACX,sBAAIA,UAAU,0BAAd,QACA,sBAAIA,UAAU,oDACV,0BAAI,gBAAC,GAAD,CAAYV,IAAKL,EAAS8B,UAAU,QAASjI,KAAMmG,EAASyE,QAAQ,QAAS7D,KAAK,OAAOsC,aAAa,EAAMI,QAAQ,KACxH,0BAAI,gBAAC,GAAD,CAAYjD,IAAKL,EAAS8B,UAAU,WAAYjI,KAAMmG,EAASyE,QAAQ,WAAY7D,KAAK,OAAOsC,aAAa,EAAMI,QAAQ,KAC9H,0BAAI,gBAAC,GAAD,CAAYjD,IAAKL,EAAS8B,UAAU,YAAajI,KAAMmG,EAASyE,QAAQ,YAAa7D,KAAK,QAAQsC,aAAa,EAAMI,QAAQ,KACjI,0BAAI,gBAAC,GAAD,CAAYjD,IAAKL,EAAS8B,UAAU,QAASjI,KAAMmG,EAASyE,QAAQ,QAAS7D,KAAK,cAAcsC,aAAa,EAAMI,QAAQ,KAC/H,0BAAI,gBAAC,GAAD,CAAYjD,IAAKL,EAAS8B,UAAU,SAAUjI,KAAMmG,EAASyE,QAAQ,SAAU7D,KAAK,OAAOsC,aAAa,EAAMI,QAAQ,e,6BAnBtJ,GAA+B/B,a,+aCPxB,IAAMuD,GACA,UADAA,GAEG,aAFHA,GAGM,gBAHNA,GAIM,gB,eAMNC,GAAb,WAEI,WAAYvJ,I,4FAA0B,iD,mOAClC,CAAAC,KAAA,GAAgBD,G,UAHxB,O,EAAA,G,EAAA,oCAKiB,aACT,eACKsJ,IAA+B,WAC5B,OAAO,KAAI,IAAUE,mBAF7B,KAIKF,IAAkC,SAACG,GAChC,OAAO,KAAI,IAAUC,UAAUD,MALvC,KAOKH,IAAqC,SAACG,GACnC,OAAO,KAAI,IAAUE,aAAaF,MAR1C,KAUKH,IAAqC,WAElC,OADA,KAAI,IAAUM,gBACP,KAZf,O,6BANR,K,y9DCCO,IAAeC,GAAtB,+EACa9K,GACL,IAAM1B,EAA2B,CAAEyM,QAAQ,GAC3C,IACI,IAAIC,EAAS9J,KAAK+J,kBAAkBjL,GAChCgL,GAAUA,EAAOvN,OAAS,IAC1Ba,EAAOyM,QAAS,EAChBzM,EAAO0M,OAASA,GAEtB,MAAOE,GACL,IAAIC,EAAW,qCACfC,QAAQC,MAAMF,GACdC,QAAQC,MAAMH,GACd5M,EAAOyM,QAAS,EAChBzM,EAAO0M,OAAS,CAACG,EAAW,KAAOD,EAAE3I,SAEzC,OAAOjE,MAhBf,KAsBagN,GAAb,gCACI,aAAc,+BADlB,qDAKgCtL,GACxB,IAAK8C,YAAG9C,GACJ,MAAQ,CAAC8B,GAEb,IAAIkJ,EAAS,GAOb,OANKlI,YAAG9C,EAAEV,OACN0L,EAAOjN,KAAK+D,GAEXgB,YAAG9C,EAAEmE,SACN6G,EAAOjN,KAAK+D,GAETkJ,MAhBf,GAAuCF,IAsB1BS,GAAb,gCACI,aAAc,+BADlB,qDAKgCvL,GACxB,IAAK8C,YAAG9C,GACJ,MAAQ,CAAC8B,GAEb,IAAIkJ,EAAS,GAKb,OAJKlI,YAAG9C,EAAEV,OACN0L,EAAOjN,KAAK+D,GACXgB,YAAG9C,EAAE6C,UACNmI,EAAOjN,KAAK+D,GACTkJ,MAdf,GAAoCF,IAkBvBU,GAAb,gCACI,aAAc,+BADlB,qDAKgCxL,GACxB,IAAK8C,YAAG9C,GACJ,MAAQ,CAAC8B,GAEb,IAAIkJ,EAAS,GAUb,OATKlI,YAAG9C,EAAEV,OACN0L,EAAOjN,KAAK+D,GAEXgB,YAAG9C,EAAE2B,OACNqJ,EAAOjN,KAAK+D,GAEXgB,YAAG9C,EAAE0B,WACNsJ,EAAOjN,KAAK+D,GAETkJ,MAnBf,GAAqCF,I,6CAuBxBW,GAAb,gCAII,aAAc,wBACV,eADU,2HAEV,YAA0B,IAAIH,IAC9B,YAAuB,IAAIC,IAC3B,YAAwB,IAAIC,IAJlB,EAJlB,qDAUgCxL,GACxB,IAAI0L,EAAM,GAAAxK,KAAA,IAAwByK,SAAS3L,GAC3C,GAAI0L,EAAIX,OACJ,IACIW,EAAMxK,KAAK0K,eAAe5L,EAAEmE,QAC9B,MAAO+G,GACL,MAAO,CAACpJ,GAGhB,OAAO4J,EAAIV,SAnBnB,qCAsB2B7G,GAGnB,IAFA,IAAIuH,EAAwB,KACxBG,EAAM1H,EAAO1G,OACRF,EAAI,EAAGA,EAAIsO,MAChBH,EAAM,GAAAxK,KAAA,IAAqByK,SAASxH,EAAO5G,KACnCwN,SACJW,EAAMxK,KAAK4K,gBAAgB3H,EAAO5G,GAAGsF,UAC5BkI,QAJQxN,KASzB,OAAOmO,IAlCf,sCAqC4B7I,GAGpB,IAFA,IAAI6I,EAAwB,KACxBG,EAAMhJ,EAAQpF,OACTF,EAAI,EAAGA,EAAIsO,EAAKtO,IAErB,KADAmO,EAAM,GAAAxK,KAAA,IAAsByK,SAAS9I,EAAQtF,KACpCwN,OACL,OAGR,OAAOW,MA9Cf,GAA+CZ,ICzFxC,SAASiB,GAAUxF,GAAuB,MAG7C,OAFAS,aAAgB,cACb,CAACT,IACI,uBAAKC,UAAS,+BAAgBD,EAAMC,iBAAtB,QAAmC,IAAMwF,aAAW,cAAcvK,GAAI8E,EAAM9E,IAC9F,uBAAK+E,UAAU,wBACX,uBAAKA,UAAU,qBACX,wBAAMA,UAAU,oBAAoBD,EAAMpF,OAC1C,qBAAGqF,UAAU,WAAWkB,WAAS,QAAQ4C,YAAU,MAEvD,uBAAK9D,UAAU,mBACVD,EAAM0F,MAGV1F,EAAM2F,QAAW,uBAAK1F,UAAU,qBAC5BD,EAAM2F,UCjBhB,SAASC,GAAW5F,GACvB,OACI,gCACKA,EAAMyE,QACHzE,EAAMyE,OAAOvN,OAAS,GACtB,sBAAI+I,UAAU,YAEND,EAAMyE,OAAOtE,KAAI,SAAC2E,EAAerJ,GAC7B,OAAO,sBAAI3B,IAAK2B,EAAOwE,UAAU,yBAAwB,wBAAMA,UAAU,kBAAkB6E,SCRhH,SAASe,GAAc7F,GAA2B,MACrD,OACI,wBAAMC,UAAW,uBAAeD,EAAMC,iBAArB,QAAkC,IAAKkB,WAAA,oBAAuBnB,EAAM5E,Q,28BCStF,SAAS0K,GAAuB9F,GACnC,IAAM+F,EAAU,cAAgB/F,EAAM9E,GAChC8K,EAAU,SAAWhG,EAAM9E,GAFsC,KAGzCuF,WAAmC,IAHM,GAGhEnE,EAHgE,KAGvD2J,EAHuD,KAKvE,SAASC,EAASC,GACd,GAAInG,EAAMkG,UAAYC,EAAGC,OAAOC,QAAS,CACrC,IAAIC,EAAQhK,EAAQiK,MAAK,SAAAC,GAAG,OAAIA,EAAItL,KAAOiL,EAAGC,OAAOlL,MACjDqB,YAAG+J,IAAUA,EAAMvN,OAASiH,EAAMxG,OAClCwG,EAAMkG,SAASI,EAAMvN,OAKjC,SAAS0N,EAAQrL,GACb,OAAO4E,EAAMxG,QAAU4B,EAG3B,SAASsL,EAAUtL,EAAcK,GAC7B,MAAO,CACH1C,KAAMqC,EACNiL,QAASI,EAAQrL,GACjBF,GAAI8K,EAAUvK,GAetB,OAXAgF,aAAgB,WAQZ,OAPAwF,EAAW,CACPS,EAAU3L,EAA4B,GACtC2L,EAAU3L,EAA8B,GACxC2L,EAAU3L,EAA2B,GACrC2L,EAAU3L,EAA8B,KAGrC,eAER,CAACiF,EAAMxG,QACF,uBAAK0B,GAAI8E,EAAM9E,GAAI+E,UAAU,qCAChC3D,EAAQ6D,KAAI,SAAAgE,GACT,OAAO,uBAAKrK,IAAKqK,EAAOjJ,IAAI,uBAAK+E,UAAU,kCACvC,yBAAO7E,KAAK,QAAQF,GAAIiJ,EAAOjJ,GAAInC,KAAMgN,EAASM,QAASlC,EAAOkC,QAASH,SAAUA,IACrF,yBAAOS,QAASxC,EAAOjJ,GAAI+E,UAAU,+CACjC,uBAAKA,UAAU,uBAAsB,gBAAC4F,GAAD,CAAezK,KAAM+I,EAAOpL,QACjE,uBAAKkH,UAAU,uBAAsB,wBAAMA,UAAU,kBAAkBkE,EAAOpL,c,woDC/C3F,SAAS6N,GAAgB5G,GAA6B,SAC/BS,WAAgC,CACtDvF,QAAIkE,EACJrG,KAAM,GACNoC,SAAU,IACVE,WAAW,EACXC,UAAU,EACVF,KAAML,IAP+C,GAClDuG,EADkD,KAC3CU,EAD2C,UAU7BvB,WAAyB,IAVI,GAUlDgE,EAVkD,KAU1CoC,EAV0C,KAYzD,SAASC,EAAcC,GACPA,EAAMX,OAAO5M,MAAzB,IACIT,EAAOgO,EAAMX,OAAOrN,KACxB,OAAQA,GACJ,IAAK,OACL,IAAK,WACL,IAAK,OACDiJ,EAAS,SAAKV,GAAN,SAAcvI,EAAOgO,EAAMX,OAAO5M,SAC1C,MACJ,IAAK,YACL,IAAK,WACDwI,EAAS,SAAKV,GAAN,SAAcvI,EAAOgO,EAAMX,OAAOC,YAiCtD,OAXA5F,aAAgB,WAOZ,OANIT,EAAMmE,SACNnC,EAAS,MACFhC,EAAMmE,SAEb0C,EAAU,KAEP,eAGR,CAAC7G,EAAMmE,SACF,gBAACqB,GAAD,CACJ5K,MAAM,UACNM,GAAG,oBACHwK,KAAM,gCACF,uBAAKzF,UAAU,YACX,yBAAOA,UAAU,kBAAjB,QACA,yBAAOA,UAAU,kCAAkC7E,KAAK,OAAOrC,KAAK,OAAOS,MAAO8H,EAAMvI,KAAMiO,YAAY,OAAOd,SAAUY,KAE/H,uBAAK7G,UAAU,2BACX,yBAAOA,UAAU,kBAAjB,YACA,yBAAOA,UAAU,kCAAkC7E,KAAK,SAAS6L,IAAI,IAAIxJ,IAAI,MAAM1E,KAAK,WAAWS,MAAO8H,EAAMnG,SAAU6L,YAAY,WAAWd,SAAUY,KAE/J,uBAAK7G,UAAU,2BACX,yBAAOA,UAAU,kBAAjB,QAOA,uBAAKA,UAAU,wCACX,gBAAC6F,GAAD,CAAwB5K,GAAG,aAAa1B,MAAO8H,EAAMlG,KAAM8K,SAjD3E,SAA4B/B,GACxBnC,EAAS,SAAKV,GAAN,IAAa,KAAQ6C,UAmDzB,uBAAKlE,UAAU,2DACX,yBAAO7E,KAAK,WAAW6E,UAAU,eAAe/E,GAAG,eAAenC,KAAK,WAAWsN,QAAS/E,EAAMhG,SAAU4K,SAAUY,IACrH,yBAAOH,QAAQ,gBAAf,cAEJ,uBAAK1G,UAAU,2DACX,yBAAO7E,KAAK,WAAW6E,UAAU,eAAe/E,GAAG,eAAenC,KAAK,YAAYsN,QAAS/E,EAAMjG,UAAW6K,SAAUY,IACvH,yBAAOH,QAAQ,gBAAf,eAEJ,gBAACf,GAAD,CAAYnB,OAAQA,KAGxBkB,OACI,uBAAK1F,UAAU,sBACX,0BAAQA,UAAU,oCAAoC8D,YAAU,IAAhE,UACA,0BAAQ9D,UAAU,wBAAwBc,QA9DtD,WACI,GAAIf,EAAMkH,OAAQ,CACd,IAAI/C,EAA0B,MAAK7C,GAC/B6F,GAAkB,IAAIlC,IAAkBG,SAASjB,GACrD,GAAIgD,EAAgB3C,OAAQ,CACxB,IAAI4C,EAAY/M,OAAO4B,KAAK7C,IAAI,sBAChC4G,EAAMkH,OAAO/C,GACbiD,EAAU/E,KAAK,SAEnBwE,EAAUM,EAAgB1C,WAqDtB,WCnGT,SAAS4C,GAAWrH,GACvB,OAAQ,uBAAKC,UAAU,kDACnB,2BACKD,EAAMF,MAAQ,uBAAKG,UAAU,qCAAoC,wBAAMkB,WAAUnB,EAAMF,QACxF,sBAAIG,UAAU,6DAA6DD,EAAMpF,OACjF,qBAAGqF,UAAU,0FAA0FD,EAAMsH,e,28BCJlH,SAASC,GAAevH,GAA4B,SAC7BS,WAAuB,IADM,GAChDjH,EADgD,KACzCgO,EADyC,KAOvD,SAASC,EAAYjO,GACjBgO,EAAShO,GACL+C,YAAGyD,EAAMkD,WACTlD,EAAMkD,SAAS1J,GAIvB,OAAQ,uBAAKyG,UAAW,iBAAmBD,EAAMC,WAC7C,yBAAO7E,KAAK,OAAO6E,UAAU,YAAY+G,YAAY,SAASxN,MAAOA,EAAO0M,SAZhF,SAAuBC,GACnBsB,EAAYtB,EAAGC,OAAO5M,UAYrB+C,YAAG/C,IAAU,qBAAGyG,UAAU,WAAWkB,WAAS,QAAQJ,QAAS,kBAAM0G,EAAY,QCtBnF,SAASC,GAAU1H,GACtB,OAAQ,wBAAMC,UAAU,yCAAyCD,EAAM2H,OCMpE,SAASC,GAAe5H,GAA2B,QAChD6H,EAAmB,UAAG7H,EAAM6H,mBAAT,QAAwB,SAC3CC,EAAoB,UAAG9H,EAAM8H,oBAAT,QAAyB,KAYnD,OAAQ,uBAAK7H,UAAU,0CAA0C8H,WAAS,4BAA4B7M,GAAI8E,EAAM9E,IAC5G,yBAAI8E,EAAMhE,SACV,uBAAKiE,UAAU,qCACX,0BAAQA,UAAU,uBAAuBc,QAAS,WAbtD1G,OAAO4B,KAAK7C,IAAI,IAAM4G,EAAM9E,IAAImH,KAAK,SACjCrC,EAAMgI,UACNhI,EAAMgI,aAWmEH,GACzE,0BAAQ5H,UAAU,wDAAwDc,QAAS,WARvF1G,OAAO4B,KAAK7C,IAAI,IAAM4G,EAAM9E,IAAImH,KAAK,SACrCrC,EAAMiI,cAOyGH,KCdhH,SAASI,GAAgBlI,GAoB5B,OAAQ,uBAAKC,UAAU,mHAClB1D,YAAGyD,EAAM1D,UAAY0D,EAAM1D,QAAQ6D,KAAI,SAACgE,EAAyB1I,GAC9D,OArBR,SAAqB1C,GACjB,IAAKwD,YAAGyD,EAAMmI,QACV,OAAO,EAEX,IAAIC,EAAQrP,EAAKsP,cAAcD,MAAMpI,EAAMmI,OAAOE,eAClD,OAAO9L,YAAG6L,GAgBEE,CAAYnE,EAAOpL,OACvB,uBAAKe,IAAK2B,GAEN,uBAAKwE,UAAW,8CAAgDpC,EAAiBsG,EAAO/I,OACpF,uBAAK6E,UAAU,8DACX,wBAAMA,UAAU,wDAAwDkE,EAAOpL,MAC/E,gBAAC8M,GAAD,CAAe5F,UAAU,oBAAoB7E,KAAM+I,EAAO/I,QAE9D,uBAAK6E,UAAU,mEACX,uBAAKA,UAAU,qCACX,uBAAKA,UAAU,qBAAoB,4BAAOkE,EAAOhJ,SAAd,cAGvC,uBAAK8E,UAAU,mBACX,sBAAIA,UAAU,gBACTkE,EAAO7I,UAAY,0BAAI,qBAAG2E,UAAU,WAAWkB,WAAS,OAAOJ,QAAS,YA5BzG,SAAkBwH,EAAgBpE,GAC9B,OAAQoE,GACJ,IAAK,OACDvI,EAAMwI,OAAOrE,GACb,MACJ,IAAK,SACDnE,EAAMM,SAAS6D,IAsBsFsE,CAAS,OAAQtE,KAAY,gBAACuD,GAAD,CAAWC,MAAM,WAC9HxD,EAAO9I,WAAa,8BAAK,uBAAK4E,UAAU,oBACrC,qBAAGA,UAAU,WAAWkB,WAAS,SAAQ,gBAACuG,GAAD,CAAWC,MAAM,YAC1D,gBAACC,GAAD,CAAgB5L,QAAQ,4CAA4C6L,YAAY,KAAKC,aAAa,MAAM5M,GAAG,qBAAqB+M,UAAW,WAAQjI,EAAMM,SAAS6D,iB,29DCzC1M,IAAMuE,GAAiC,CACnCxN,QAAIkE,EACJrG,KAAM,GACNqC,KAAM,WACND,SAAU,IACVE,WAAW,EACXC,UAAU,GAaP,SAASqN,KAA4B,SACdlI,WAAsC,CAC5DnE,QAAS,GAAIrB,GACbuC,QAAS,OAH2B,GACjC8D,EADiC,KAC1BU,EAD0B,UAMZvB,WAAuB,IANX,GAMjC0H,EANiC,KAMzBS,EANyB,KAgBxC,SAASC,EAASvM,GACd0F,EAAS,SACFV,GADC,IAEJhF,QAAS,GAAF,UAAMrB,GAAN,GAAyBqB,OAIxC,SAASwM,EAAiB3E,GACtBnC,EAAS,SACFV,GADC,IAEJ9D,QAAS2G,GAAU,MAAKuE,OAEZrO,OAAO4B,KAAK7C,IAAI,sBACtBiJ,KAAK,QA8BnB,OAfA5B,aAAgB,WACZ5B,EAAa,WACbhE,EAAe,WACf,IAAMkO,EAAY1O,OAAO2O,aAAapI,UAAUoD,GAA8B,CAAEnD,OAAQgI,IAClFI,EAAe5O,OAAO2O,aAAapI,UAAUoD,IAC7CkF,EAAkB7O,OAAO2O,aAAapI,UAAUoD,IAEtD,OADA3J,OAAO2O,aAAa/J,QAAQ+E,IACrB,WAEH3J,OAAO2O,aAAalI,YAAYkD,GAA8B+E,EAAU7N,IACxEb,OAAO2O,aAAalI,YAAYkD,GAAiCiF,EAAa/N,IAC9Eb,OAAO2O,aAAalI,YAAYkD,GAAoCkF,EAAgBhO,OAEzF,CAACoG,EAAMhF,UAEF,gCAAE,uBAAK2D,UAAU,2BACrB,gBAACoH,GAAD,CAAYzM,MAAM,aAAa0M,YAAY,0DAA0DxH,KAAK,SAC1G,uBAAKG,UAAU,wEACX,gBAACsH,GAAD,CAAgB/N,MAAO2O,EAAQjF,SA9BvC,SAAsB1J,GAClBoP,EAAUpP,IA6BiDyG,UAAU,qDAErE,gBAACiI,GAAD,CAAiBC,OAAQA,EAAQ7L,QAASgF,EAAMhF,QAASkM,OAAQM,EAAkBxI,SApDvF,SAAkB6D,GACd9J,OAAO2O,aAAa/J,QAAQ+E,GAAoCG,MAoDhE,uBAAKlE,UAAU,mHACX,0BAAQA,UAAU,kEAAkEkB,WAAS,OAAOJ,QAAS,WAAQ+H,SAGzH,gBAAClC,GAAD,CAAiBzC,OAAQ7C,EAAM9D,QAAS0J,OA7D5C,SAAsB/C,GAClB9J,OAAO2O,aAAa/J,QAAQ+E,GAAiCG,O,+aCtC9D,IAAMgF,GACU,oBADVA,GAEK,eAFLA,GAGQ,kBAHRA,GAIQ,kBAJRA,GAKK,eALLA,GAMQ,kBANRA,GAOE,YAPFA,GAQE,YARFA,GASI,cATJA,GAUK,e,eAMLC,GAAb,WAEI,WAAY1O,I,4FAA4B,iD,mOACpC,CAAAC,KAAA,GAAgBD,G,UAHxB,O,EAAA,G,EAAA,oCAMiB,aACT,eACKyO,IAA4B,WACzB,OAAO,KAAI,IAAUE,qBAF7B,KAIKF,IAAuB,SAAC1P,GACrB,OAAO,KAAI,IAAU6P,YAAY7P,MALzC,KAOK0P,IAA0B,SAAC1P,GACxB,OAAO,KAAI,IAAU8P,eAAe9P,MAR5C,KAUK0P,IAA0B,SAACjO,GACxB,OAAO,KAAI,IAAUuG,eAAevG,MAX5C,KAaKiO,IAAuB,SAACjO,GACrB,OAAO,KAAI,IAAUsO,YAAYtO,MAdzC,KAgBKiO,IAAoB,WACjB,OAAO,KAAI,IAAUM,cAjB7B,KAmBKN,IAAoB,SAACxL,GAClB,OAAO,KAAI,IAAU+L,SAAS/L,MApBtC,KAsBKwL,IAAsB,WACnB,OAAO,KAAI,IAAUQ,gBAvB7B,KAyBKR,IAAuB,SAACjO,GACrB,IAAI0O,EAAQ,KAAI,IAAUH,WAC1B,OAAIlN,YAAGqN,IAAUA,EAAM1O,KAAOA,EACnB0O,EAENrN,YAAGrB,KAAOqB,YAAGqN,EAAM1O,IAGjB,KAAI,IAAUsO,YAAYtO,QAHjC,KA9BR,KAmCKiO,IAA0B,WAEvB,OADA,KAAI,IAAUU,kBACP,KArCf,O,6BAPR,KCXeC,oBANf,SAAgB9J,GAAY,IAChBO,EAAYP,EAAZO,QACR,OAAQ,0BAAQN,UAAU,wBAAwBc,QAAS,kBAAMR,EAAQiD,WAAjE,cCKL,SAASuG,GAAS/J,GAAsB,MAC3C,OAAQ,uBAAKC,UAAWD,EAAMgK,SAC1B,2BACI,sBAAI/J,UAAU,yCAAyCD,EAAMhE,SAC7D,uBAAKiE,UAAU,IACX,uBAAKA,UAAU,uBACX,gBAAC,IAAD,CAAMhC,GAAG,IAAIgC,UAAU,qCAAvB,WADJ,UAEKD,EAAMwD,cAFX,QAEqB,gBAAC,GAAD,UCT9B,SAASyG,GAAUjK,GAItB,OAHAS,aAAgB,cAEb,CAACT,EAAMkK,QACF,sBAAIjK,UAAU,uBACjBD,EAAMkK,OAASlK,EAAMkK,MAAMhT,OAAS,GAAK8I,EAAMkK,MAAM/J,KAAI,SAACC,EAA0B3E,GACjF,OAAO,gBAAC0O,GAAD,CAAerQ,IAAKsG,EAAKN,KAAMA,KAAMM,EAAKN,KAAM6H,MAAOvH,EAAKuH,MAAO5G,QAASX,EAAKW,QAASqJ,UAAWhK,EAAKgK,gBAatH,SAASD,GAAcnK,GAA2B,MACjDgK,EAAU,qCAA6BhK,EAAMoK,iBAAnC,QAAgD,IAC9D,OAAQ,sBAAInK,UAAU,gCAClB,qBAAGA,UAAW+J,EAAS7I,WAAUnB,EAAMF,KAAMiB,QAASf,EAAMe,SAAS,gBAAC2G,GAAD,CAAWC,MAAO3H,EAAM2H,UCvB9F,SAAS0C,GAAerK,GAC3B,OACI,uBAAKC,UAAU,uBACX,uBAAKA,UAAU,oCACX,gBAAC4F,GAAD,CAAezK,KAAM4E,EAAMmE,OAAO/I,QAEtC,uBAAK6E,UAAU,iBACX,uBAAKA,UAAU,IAAID,EAAMmE,OAAOpL,MAChC,uBAAKkH,UAAU,kBAAf,SAAuCD,EAAMmE,OAAOhJ,SAApD,cCTT,SAASmP,GAAqBtK,GAQjC,OAAQ,uBAAKC,UAAU,8BACnB,qBAAGA,UAAU,sBACT,gBAACsK,GAAD,CAAapG,OAAQnE,EAAMxG,SAE/B,uBAAKyG,UAAU,2BAA2B8H,WAAS,eAAe7M,GAAI8E,EAAM9E,IACxE,sBAAI+E,UAAU,+BACTD,EAAM1D,SAAW0D,EAAM1D,QAAQ6D,KAAI,SAAAgE,GAChC,OAAO,sBAAIrK,IAAKqK,EAAOjJ,IAAI,qBAAG+E,UAAU,wCAAwCc,QAAS,YAdzG,SAAkBoD,IACVnE,EAAMwK,UAAcxK,EAAMxG,OAASwG,EAAMxG,MAAM0B,KAAOiJ,EAAOjJ,IAC7D8E,EAAMwK,SAASrG,GAEnB9J,OAAO4B,KAAK7C,IAAI,IAAM4G,EAAM9E,IAAImH,KAAK,SAUwE6D,CAAS/B,KAAW,gBAACkG,GAAD,CAAgBlG,OAAQA,YAW1J,SAASoG,GAAYvK,GACxB,OACI,uBAAKC,UAAU,qCACX,uBAAKA,UAAU,iBAAiBD,EAAMmE,OAAS,gBAACkG,GAAD,CAAgBlG,OAAQnE,EAAMmE,SAAa,wBAAMlE,UAAU,sCAAhB,uBAC1F,wBAAMkB,WAAS,wB,29DCPpB,SAASsJ,GAAgBzK,GAA6B,SAC/B0K,mBAA+B,CACrDpO,QAAS,GACTqO,SAAU,KACVlG,OAAQ,GACR1L,KAAM,KAL+C,GAClDuI,EADkD,KAC3CU,EAD2C,KAsDzD,SAAS4I,EAAkBtO,EAA4BvD,GAAe,MAClEiJ,EAAS,SACFV,GADC,IAEJhF,QAASA,EACTqO,SAAQ,UAAErJ,EAAMqJ,gBAAR,QAAoB3K,EAAM6K,eAAe,GACjDpG,OAAQ,GACR1L,KAAMA,GAAcuI,EAAMvI,QAqClC,OAPA0H,aAAgB,WACZ,IAAI1H,EAAOiH,EAAM8K,OAAS9K,EAAM8K,MAAM/R,KAAOiH,EAAM8K,MAAM/R,KAAOyC,EAAoBwE,EAAM+K,cAG1F,OADAH,EADcrO,YAAGyD,EAAM8K,OAAS9K,EAAM8K,MAAMxO,QAAU,GAC3BvD,GACpB,eAER,CAACiH,EAAM8K,MAAO9K,EAAM6K,eAAgB7K,EAAM+K,eACrC,gBAACvF,GAAD,CACJtK,GAAG,oBACHN,MAAM,aACN8K,KAAM,gCACF,uBAAKzF,UAAU,IACX,uBAAKA,UAAU,YACX,yBAAO0G,QAAQ,GAAG1G,UAAU,kBAA5B,cACA,yBAAO7E,KAAK,OAAO6E,UAAU,YAAY+G,YAAY,aAAaxN,MAAO8H,EAAMvI,KAAMmN,SAxCrG,SAAyBC,GACrB,IAAIpN,EAAOoN,EAAGC,OAAO5M,MACjBiL,EAAS,GACRlI,YAAGxD,IACJ0L,EAAOjN,KAAK,wBAEhBwK,EAAS,SACFV,GADC,IAEJmD,OAAQA,EACR1L,KAAMA,SAiCF,uBAAKkH,UAAU,kBAAf,WACA,sBAAIA,UAAU,kDACTqB,EAAMhF,SAAWgF,EAAMhF,QAAQ6D,KAAI,SAACC,EAAuB3E,GACxD,OAAO,sBAAI3B,IAAKsG,EAAKlF,GAAKO,EAAOwE,UAAU,qBACvC,uBAAKA,UAAU,uBACX,uBAAKA,UAAU,iBACX,gBAACoK,GAAD,CAAgBlG,OAAQ/D,KAE5B,sBAAIH,UAAU,gBACV,0BAAI,qBAAGA,UAAU,WAAWkB,WAAS,OAAOJ,QAAS,YAtCrF,SAAsBtF,GAClB,GAAKuP,YAAI1J,EAAMqJ,SAAUrJ,EAAMhF,SAA/B,CAGA,IAAI2O,EAAO,GAAI3J,EAAMhF,SACrB2O,EAAKxP,GAAS6F,EAAMqJ,SACpB3I,EAAS,SACFV,GADC,IAEJhF,QAAS2O,MA8B4EC,CAAazP,OAC1E,0BAAI,qBAAGwE,UAAU,WAAWkB,WAAS,QAAQJ,QAAS,YApEtF,SAAwBtF,GACpB,IAAI0P,EAAa,GAAI7J,EAAMhF,SAC3B6O,EAAW/S,OAAOqD,EAAO,GACzBmP,EAAkBO,GAiEwEC,CAAe3P,cAMjG,uBAAKwE,UAAU,iDACX,uBAAKA,UAAU,iBACX,gBAACqK,GAAD,CAAsB9Q,MAAO8H,EAAMqJ,SAAUrO,QAAS0D,EAAM6K,eAAgBL,SA3FhG,SAA8BrG,GACtBA,GACAnC,EAAS,SACFV,GADC,IAEJqJ,SAAUxG,MAuF0GpL,KAAK,YAAYmC,GAAG,uBAEpI,uBAAK+E,UAAU,0BACX,0BAAQkB,WAAS,OAAOlB,UAAU,2BAA2Bc,QArFjF,WACQO,EAAMqJ,UACNC,EAAkB,GAAD,UAAKtJ,EAAMhF,SAAX,CAAoBgF,EAAMqJ,iBAsFvC,gBAAC/E,GAAD,CAAYnB,OAAQnD,EAAMmD,WAIlCkB,OACI,uBAAK1F,UAAU,sBACX,0BAAQA,UAAU,oCAAoC8D,YAAU,IAAhE,UACA,0BAAQ9D,UAAU,wBAAwBc,QAjItD,WACI,GAAIf,EAAMkH,OAAQ,CACd,IAAI4D,EAAe,CACfxO,QAAS,GAAIgF,EAAMhF,SACnBvD,KAAMuI,EAAMvI,MAEZsS,GAAa,IAAIrG,IAAiBI,SAAS0F,GAC/C,GAAIO,EAAW7G,OAQX,OAPAxE,EAAMkH,OAAO4D,EAAO9K,EAAMvE,YAC1BuG,EAAS,SACFV,GADC,IAEJvI,KAAMyC,EAAoBwE,EAAM+K,aAAe,GAC/CJ,SAAU,KACVrO,QAAS,MAIjB0F,EAAS,SACFV,GADC,IAEJmD,OAAQ4G,EAAW5G,aA8GnB,WCpJT,SAAS6G,GAAkBtL,GAE9B,OACI,uBAAKC,UAAU,kCACX,uBAAKA,UAAU,iBACX,2BAAK,wBAAMA,UAAU,iBAAiBD,EAAM8K,MAAM/R,OAClD,uBAAKkH,UAAU,kDAAiD,4BAAQD,EAAM8K,MAAMxO,QAAQpF,OAA5B,aAA8CyF,EAAuBN,EAAkB2D,EAAM8K,MAAMxO,aAIvK,sBAAI2D,UAAU,iCACRD,EAAMuL,SAAW,0BAAI,qBAAGtL,UAAU,WAAWkB,WAAS,aAAaJ,QAAS,WAAQf,EAAMwL,SAASxL,EAAM8K,MAAO9K,EAAMvE,QAAU2F,cAAY,cAC5IpB,EAAMyL,QAAU,0BAAI,qBAAGxL,UAAU,WAAWkB,WAAS,eAAeJ,QAAS,WAAQf,EAAM0L,WAAW1L,EAAM8K,MAAO9K,EAAMvE,QAAU2F,cAAY,eACjJ,0BAAI,qBAAGnB,UAAU,WAAWkB,WAAS,OAAOJ,QAAS,WAAQf,EAAM2L,QAAQ3L,EAAM8K,MAAO9K,EAAMvE,QAAU2F,cAAY,WACpH,0BAAI,qBAAGnB,UAAU,WAAWkB,WAAS,OAAOJ,QAAS,WAAQf,EAAMwI,OAAOxI,EAAM8K,MAAO9K,EAAMvE,QAAU2F,cAAY,UACnH,0BAAI,uBAAKnB,UAAU,oBACf,qBAAGA,UAAU,WAAWkB,WAAS,UACjC,gBAACyG,GAAD,CAAgB1M,GAAG,sBAAsBc,QAAQ,2CAA2C6L,YAAY,KAAKC,aAAa,MAAMG,UAAW,WACvIjI,EAAMM,SAASN,EAAM8K,MAAO9K,EAAMvE,cC5BnD,SAASmQ,GAAgB5L,GAC5B,OAAQ,uBAAKC,UAAU,iCACnB,0BAAQA,UAAU,aAAac,QAASf,EAAMgI,UAA9C,UACA,0BAAQ/H,UAAU,8CAA8Cc,QAASf,EAAMiI,WAAYjI,EAAM8H,e,woDCGlG,SAAS+D,GAAiB7L,GAC7B,IAAM8L,EAAiBrL,WAA4B,WAC/C,OhC8JD,SAA4BnE,GAC/B,OAAOA,EAAQE,QAAqB,SAACuP,EAAmB3L,GAA0B,MACxEhF,EAAI,UAAGgF,EAAKhF,YAAR,QAAgB,UAM1B,OALK2Q,EAAI3Q,GAGL2Q,EAAI3Q,GAAM5D,KAAK4I,GAFf2L,EAAI3Q,GAAQ,CAACgF,GAIV2L,IACR,IgCvKQC,CAAmBhM,EAAM1D,WACjC,CAAC0D,EAAM1D,UAHiD,KAK7BmE,WAA6B,CACvD/B,OAAQoN,EAAc,OAAaA,EAAc,OAAW,GAAK,KACjEnN,SAAUmN,EAAc,SAAeA,EAAc,SAAa,GAAK,KACvEG,MAAOH,EAAc,MAAYA,EAAc,MAAU,GAAK,KAC9DlN,SAAUkN,EAAc,SAAeA,EAAc,SAAa,GAAK,OAThB,GAKpDxP,EALoD,KAK3C2J,EAL2C,UAYjBxF,WAAe,GAZE,GAYpDjC,EAZoD,KAYrC0N,EAZqC,KAqD3D,OAXAzL,aAAgB,WAOZ,OANAwF,EAAW,CACPvH,OAAQoN,EAAc,OAAaA,EAAc,OAAW,GAAK,KACjEG,MAAOH,EAAc,MAAYA,EAAc,MAAU,GAAK,KAC9DnN,SAAUmN,EAAc,SAAeA,EAAc,SAAa,GAAK,KACvElN,SAAUkN,EAAc,SAAeA,EAAc,SAAa,GAAK,OAEpE,eAGR,CAAC9L,EAAM1D,UACF,gBAACkJ,GAAD,CAAW5K,MAAM,cACrBM,GAAI8E,EAAM9E,GACVwK,KAAM,gBAACyG,GAAD,CAAsB7P,QAASwP,EAAgB5I,SAzCzD,SAAkBxM,EAAuB0E,GACrC6K,EAAW,SACJ3J,GADG,SAELlB,EAAO1E,MAsC6DA,KAAM4F,EAAS8P,MAAO5N,EAAe6N,gBAhClH,SAAyB7S,GACrB0S,EAAiB1S,MAgCjBmM,OAAQ,gBAACiG,GAAD,CAAiB9D,aAAa,OAAOE,SA7BjD,WACI3N,OAAO4B,KAAK7C,IAAI,IAAM4G,EAAM9E,IAAImH,KAAK,UA4BkC4F,UAzB3E,WACI,KAAIzJ,EAAgB,GAApB,CAGA,IAAIsM,EAAe,CACf/R,KAAM,QACNuD,QAASiC,EAAuBjC,EAASkC,IAE7CwB,EAAMkH,OAAO4D,SA8Bd,SAASqB,GAAqBnM,GAEjC,SAASsM,EAAcF,GACfA,EAAQ,GAAKA,EAAQ,IACrBpM,EAAMqM,gBAAgBD,GAI9B,OAAO,gCACH,2BACI,gBAACG,GAAD,CAAwBjQ,QAAS0D,EAAM1D,QAAQvB,GAA6BvB,MAAOwG,EAAMtJ,KAAKgI,OAAQwE,SAAUlD,EAAMkD,SAAU9H,KAAML,EAA4BG,GAAG,qBAAqBnC,KAAK,mBAEnM,uBAAKkH,UAAU,kBACX,gBAACsM,GAAD,CAAwBjQ,QAAS0D,EAAM1D,QAAQvB,GAA+BvB,MAAOwG,EAAMtJ,KAAKiI,SAAUuE,SAAUlD,EAAMkD,SAAU9H,KAAML,EAA8BG,GAAG,uBAAuBnC,KAAK,qBAE3M,uBAAKkH,UAAU,2BACX,gBAACsM,GAAD,CAAwBjQ,QAAS0D,EAAM1D,QAAQvB,GAA4BvB,MAAOwG,EAAMtJ,KAAN,MAAkBwM,SAAUlD,EAAMkD,SAAU9H,KAAML,EAA2BG,GAAG,oBAAoBnC,KAAK,kBAE/L,uBAAKkH,UAAU,kBACX,gBAACsM,GAAD,CAAwBjQ,QAAS0D,EAAM1D,QAAQvB,GAA+BvB,MAAOwG,EAAMtJ,KAAKkI,SAAUsE,SAAUlD,EAAMkD,SAAU9H,KAAML,EAA8BG,GAAG,uBAAuBnC,KAAK,qBAE3M,uBAAKkH,UAAU,2BACX,yBAAOA,UAAU,kBAAjB,uBACA,uBAAKA,UAAU,4CACX,0BAAQA,UAAU,kBAAkBkB,WAAS,QAAQJ,QAAS,kBAAMuL,EAActM,EAAMoM,MAAQ,MAChG,wBAAMnM,UAAU,yBAAyBD,EAAMoM,OAC/C,0BAAQnM,UAAU,kBAAkBkB,WAAS,OAAOJ,QAAS,kBAAMuL,EAActM,EAAMoM,MAAQ,SAexG,SAASG,GAAuBvM,GACnC,OAAQ,gCACJ,wBAAMC,UAAU,qCAAqCD,EAAM5E,MAC3D,uBAAK6E,UAAU,4CACX,uBAAKA,UAAU,iBACX,gBAACqK,GAAD,CAAsB9Q,MAAOwG,EAAMxG,MAAO8C,QAAS0D,EAAM1D,QAASkO,SAAU,SAAChR,GAAYwG,EAAMkD,SAAS1J,EAAOwG,EAAM5E,OAASrC,KAAMiH,EAAMjH,KAAMmC,GAAI8E,EAAM9E,MAE9J,0BAAQ+E,UAAU,kBAAkBkB,WAAS,QAAQJ,QAAS,WAAQf,EAAMkD,SAAS,KAAM,iB,29DC6EvG,SAASsJ,GAAoBxM,GAAiC,SAChCS,WAAyC,CAC/DgM,cAAe,EACf1B,aAAc,EACd2B,aAAc,OAJwC,GACnDpL,EADmD,KAC5CU,EAD4C,UAOdvB,WAA2C,CACnFnE,QAAS,KAR6C,GAOnDuO,EAPmD,KAOnC8B,EAPmC,KAY1D,SAASC,EAAY9B,EAAcrP,GAC/BuG,EAAS,SACFV,GADC,IAEJmL,aAAchR,EACdiR,aAAc5B,EACdC,aAAc/K,EAAMrC,UAAYqC,EAAMrC,SAASC,OAASoC,EAAMrC,SAASC,OAAO1G,OAAS,KAE3FmD,OAAO4B,KAAK7C,IAAI,sBAAsBiJ,KAAK,QAG/C,SAASwK,EAAc/B,EAAcrP,GACjC,IAAImC,EAAS,GAAIoC,EAAMrC,SAASC,QAChCA,EAAOxF,OAAOqD,EAAO,GACrBqR,EAAkBlP,GAGtB,SAASmP,EAAYjC,EAAcrP,GAC/BqR,EAAkBhP,EAAKkC,EAAMrC,SAASC,OAAQnC,EAAOA,EAAQ,IAIjE,SAASuR,EAAUlC,EAAcrP,GAC7BqR,EAAkBhP,EAAKkC,EAAMrC,SAASC,OAAQnC,EAAOA,EAAQ,IAGjE,SAASwR,EAAanC,EAAcrP,GAChC,IAAIyR,EAAMzR,EAAQ,EACd0R,EAASC,YAAMtC,GACnBgC,EjClHD,SAAmB/O,EAAiBtC,GAA+B,2BAAbhC,EAAa,iCAAbA,EAAa,kBACtE,IAAKsE,GAA6B,OAAfA,IAAwBtE,GAAW,OAANA,GAA2B,IAAbA,EAAEvC,OAC5D,OAAO6G,EAEX,IAAI7G,EAAS6G,EAAW7G,OAExB,OAAKuE,GAAmB,IAAVA,GAAeA,GAASvE,EAClC,YAAW6G,GAAetE,GAE1BgC,GAAS,EACT,UAAWhC,EAAX,EAAiBsE,KAErBA,EAAW3F,OAAX,MAAA2F,EAAU,CAAQtC,EAAO,GAAf,OAAqBhC,IAC/B,EAAWsE,IiCqGWsP,CAAOrN,EAAMrC,SAASC,OAAQsP,EAAKC,IAQzD,SAASG,EAAoBxC,EAAcrP,GACvC,IAAImC,EAAS,GAOb,OANInC,GAAS,GACTmC,EAAS,GAAIoC,EAAMrC,SAASC,SACrBnC,GAASqP,EAEhBlN,EAAS,GAAH,UAAOoC,EAAMrC,SAASC,QAAtB,CAA8BkN,IAEjClN,EAGX,SAASkP,EAAkBlP,GACvBoC,EAAMkD,SAAN,SAEWlD,EAAMrC,UAFjB,IAGQC,OAAQA,KAKpB,SAAS2P,EAAapH,GAClB,IAAIpN,EAAOoN,EAAGC,OAAOrN,KACjB,CAAC,OAAQ,eAAeyU,SAASzU,IACjCiH,EAAMkD,SAAN,SACOlD,EAAMrC,UADb,SAEK5E,EAAOoN,EAAGC,OAAO5M,SAc9B,SAASiU,EAAkBnR,GACvBqQ,EAAkB,CACdrQ,QAAS,GAAF,UAAMrB,GAAN,GAAyBqB,MAgBxC,OAZAmE,aAAgB,WACZ,IAAMiN,EAAuBrT,OAAO2O,aAAapI,UAAUoD,GAA8B,CAAEnD,OAAQ4M,IAKnG,OAJApT,OAAO2O,aAAa/J,QAAQ+E,IAC5BhC,EAAS,MACFV,IAEA,WACHjH,OAAO2O,aAAalI,YAAYkD,GAA8B0J,EAAqBxS,OAGxF,CAAC8E,EAAMrC,WAEF,gCACJ,uBAAKsC,UAAU,kGACX,uBAAKA,UAAU,2BAEX,uBAAKA,UAAU,YACX,yBAAO0G,QAAQ,GAAG1G,UAAU,kBAA5B,QACA,yBAAO7E,KAAK,OAAO6E,UAAU,kCAAkC+G,YAAY,OAAOjO,KAAK,OAAOS,MAAOwG,EAAMrC,SAAS5E,KAAMmN,SAAUqH,KAExI,uBAAKtN,UAAU,2BACX,yBAAO0G,QAAQ,GAAG1G,UAAU,kBAA5B,eACA,4BAAUA,UAAU,yDAAyD+G,YAAY,cAAcjO,KAAK,cAAc4U,KAAM,EAAGnU,MAAOwG,EAAMrC,SAAS2J,YAAapB,SAAUqH,MAGxL,uBAAKtN,UAAU,0BAEX,sBAAIA,UAAU,YACTD,EAAMrC,UAAYqC,EAAMrC,SAASC,OAAOuC,KAAI,SAAC2K,EAAcrP,EAAemS,GACvE,OAAO,sBAAI9T,IAAK2B,EAAOwE,UAAU,qBAAoB,gBAACqL,GAAD,CACjD7P,MAAOA,EACPqP,MAAOA,EACPtC,OAAQoE,EACRtM,SAAUuM,EACVrB,SAAUwB,EACVtB,WAAYqB,EACZpB,QAASsB,EACT1B,QAAmB,IAAV9P,EACTgQ,OAAQhQ,IAAUmS,EAAI1W,OAAS,QAGvC,0BACI,uBAAK+I,UAAU,mDACX,uBAAKA,UAAU,IACX,0BAAQA,UAAU,gEAAgEkB,WAAS,OAAOJ,QAAS,WACvG6L,EAAY,MAAO,KADvB,cAIJ,2BACI,0BAAQ3M,UAAU,+DAA+DkB,WAAS,OAAOJ,QAhE7H,WACI1G,OAAO4B,KAAK7C,IAAI,uBAAuBiJ,KAAK,UA+DpB,qBAOxB,gBAACoI,GAAD,CAAiBhP,MAAO6F,EAAMmL,aAAc3B,MAAOxJ,EAAMoL,aAAcxF,OA1G3E,SAAqB4D,EAAcrP,GAC/BqR,EAAkBQ,EAAoBxC,EAAOrP,IAC7CpB,OAAO4B,KAAK7C,IAAI,sBAAsBiJ,KAAK,UAwGiD0I,aAAczJ,EAAMyJ,aAAcF,eAAgBA,EAAevO,UAC7J,gBAACuP,GAAD,CAAkB3Q,GAAG,qBAAqBoB,QAASuO,EAAevO,QAAS4K,OApE/E,SAA0B4D,GACtBgC,EAAkBQ,EAAoBxC,GAAQ,IAC9CzQ,OAAO4B,KAAK7C,IAAI,uBAAuBiJ,KAAK,aAsErCyH,oBA9Tf,SAAsB9J,GAA0B,IAoGlC6N,EApGkC,KACVpN,YAAe,GADL,GAC1BqN,GAD0B,gBAElBrN,WAAkC,CACxD9C,SAAU,CACN5E,KAAM,GACN6E,OAAQ,GACR0D,MAAOtG,KAN6B,GAErCsG,EAFqC,KAE9BU,EAF8B,KAUpC9G,EAAO6S,cAAP7S,GAgBR,SAAS8S,EAAiBjW,GACjBA,GAGDoE,EAAU,SACVqH,KAHAzH,EAAY,OAAQ,0BAO5B,SAASyH,IACDxD,EAAMO,SACNP,EAAMO,QAAQiD,SAItB,SAASyK,EAActQ,GACfA,GACAkB,EAAa,QAAUlB,EAAS5E,MAChCiJ,EAAS,CACLrE,SAAU,MAAKA,MAGnB5B,EAAY,OAAQ,0BAI5B,SAASmS,EAAWvQ,GAChBmQ,GAAa,GACTnQ,IAAapB,YAAGoB,EAASzC,KACzB8G,EAAS,CACLrE,SAAU,MAAKA,KAa3B,SAASwQ,IACL,IAAIC,GAAY,IAAIrJ,IAAoBK,SAAS9D,EAAM3D,UACnDyQ,EAAU5J,OACVnK,OAAOsG,MAAM1B,QAAQkK,GAAyB7H,EAAM3D,UAEpD5B,EAAY,qBAAsBqS,EAAU3J,OAAO4J,KAAK,OAIhE,SAASC,IC1HN,IAAgCvV,EAAckP,ED2HzC1L,YAAG+E,EAAM3D,SAASzC,KAAOoG,EAAM3D,SAAS2D,QAAUtG,GC3HvBjC,ED4HJuI,EAAM3D,SAAS5E,KC5HGkP,ED4HGnG,EC3HpDzH,OAAO4B,KAAKC,MAAM,yBAA0B,cAAe,CACvDtB,MAAO,kBACPoB,QAAS,0CAA4CjD,EAAO,IAC5D+I,MAAOmG,MD0HH9L,EAAU,iBAEV9B,OAAOsG,MAAM1B,QAAQkK,IACrB3F,KAKR,SAAS1B,IACLzH,OAAOsG,MAAM1B,QAAQ,kBAAmBqC,EAAM3D,SAASzC,IAG3D,SAASqT,EAAoBxW,GACzBoE,EAAU,WACVqH,IA6CJ,OAnBA/C,aAAgB,WACZ5B,EAAa,iBACbhE,EAAe,iBACf,IAAM2T,EAAoBnU,OAAOsG,MAAMC,UAAU,kBAAmB,CAAEC,OAAQmN,IACxES,EAAiBpU,OAAOsG,MAAMC,UAAUuI,GAAsB,CAAEtI,OAAQoN,IACxES,EAAcrU,OAAOsG,MAAMC,UAAU,YAAa,CAAEC,OAAQqN,IAC5DS,EAAmBtU,OAAOsG,MAAMC,UAAU,kBAAmB,CAC/DC,OAAQ0N,IAIZ,OAvHAT,GAAa,GACT5S,EACAb,OAAOsG,MAAM1B,QAAQkK,GAAsBjO,GAE3Cb,OAAOsG,MAAM1B,QAAQkK,IAmHlB,WACH9O,OAAOsG,MAAMG,YAAY,kBAAmB0N,EAAkBtT,IAC9Db,OAAOsG,MAAMG,YAAYqI,GAAsBsF,EAAevT,IAC9Db,OAAOsG,MAAMG,YAAY,kBAAmB6N,EAAiBzT,IAC7Db,OAAOsG,MAAMG,YAAY,YAAa4N,EAAYxT,OAEvD,CAACoG,EAAM3D,SAASzC,KAEX,gCACJ,uBAAK+E,UAAU,kBACX,uBAAKA,UAAU,8CACX,uBAAKA,UAAU,yCACX,gBAACoH,GAAD,CAAYzM,MA9BnB2B,YAAG+E,EAAM3D,WAAcpB,YAAG+E,EAAM3D,SAAS5E,MAI9C,iBAAiBuI,EAAM3D,SAAS2D,QAAUtG,EAAsB,QAAU,WAA1E,YAAwFsG,EAAM3D,SAAS5E,MAH5F,kBA6BmCuO,YAAY,mCAAmCxH,KAAK,cAE1F,uBAAKG,UAAU,IACVqB,EAAM3D,SACH,gBAAC6O,GAAD,CAAqB7O,SAAU2D,EAAM3D,SAAUuF,SA/HnE,SAAkBvF,IAuClB,SAAmBA,GAEftD,OAAOsG,MAAM1B,QAAQkK,GAAmBxL,GACxCqE,EAAS,CACLrE,SAAU,SAAKA,GAAP,IAAiB2D,MAAOtG,MA1CpC4T,CAAUjR,IA8HyEqK,SAAUxE,IAC7E,gBAACuG,GAAD,CAAU/N,QAAQ,kDAAkDgO,QAAQ,OAGxF,uBAAK/J,UAAU,yHACX,uBAAKA,UAAU,0DACX,gBAACgK,GAAD,CAAWC,OAvDjB2D,EAAuC,GAEzCtR,YAAG+E,EAAM3D,SAASzC,KAClB2S,EAAerW,KAAK,CAAEsI,KAAM,aAAc6H,MAAO,MAAO5G,QAAS,WAAQf,EAAMO,QAAQ/I,KAAK0H,EAAS8B,UAAU,UAAW,CAAE9F,GAAIoG,EAAM3D,SAASzC,SAG/IoG,EAAM3D,SAAS2D,QAAUtG,GACzB6S,EAAerW,KAAK,CAAEsI,KAAM,QAAS6H,MAAO,SAAU5G,QAAS,WAAQuN,OAG3ET,EAAerW,KAAK,CAAEsI,KAAM,YAAa6H,MAAO,OAAQ5G,QAASoN,EAAgB/D,UAAW,gBACrFyD,Y,20BEtJFgB,GAAb,WAEI,aAAc,mDACV,GAAAlU,KAAA,GAAemU,QAHvB,8CAOQ,GAAAnU,KAAA,IAAaoU,WAAY,IAPjC,gCAWQ,GAAApU,KAAA,IAAaoU,WAAY,MAXjC,KAoCaC,GAAb,WAGI,aAAc,qCACVrU,KAAKsU,aAAU7P,EAJvB,8CAQYzE,KAAKsU,UAGTtU,KAAKsU,QAAUtU,KAAKuU,cAAc,4BAClCnQ,SAAS2G,KAAKyJ,YAAYxU,KAAKsU,YAZvC,gCAgBatU,KAAKsU,UAGVtU,KAAKsU,QAAQG,SACbzU,KAAKsU,aAAU7P,KApBvB,oCAuB0BiQ,GAClB,IAAIC,EAAQvQ,SAASmQ,cAAc,SAOnC,OANAI,EAAMC,UAAW,EACjBD,EAAME,OAAQ,EACdF,EAAMG,MAAO,EACbH,EAAMD,IAAMA,EACZC,EAAMI,UAAUC,IAAI,eACpBL,EAAMM,YAAc,gBACbN,MA/Bf,K,eAoCaO,GAAb,WAGI,aAAc,mDACV,GAAAlV,KAAA,GAAeA,KAAKmV,aAJ5B,8CAOQ,GAAAnV,KAAA,IAAaoV,aAPrB,gCAUQ,GAAApV,KAAA,IAAaqV,YAVrB,kCAaQ,MAAI,cAAelB,OACR,IAAID,GAEJ,IAAIG,OAhBvB,K,oiBC7EO,IAAMiB,GACA,UADAA,GAEA,UAFAA,GAGD,S,0FAkBCC,GAAb,WAOI,c,4FAAc,yPACV,GAAAvV,KAAA,GAAgB,GAChB,GAAAA,KAAA,GAAc,GACd,GAAAA,KAAA,IAAgB,GAChB,GAAAA,KAAA,GAAcsV,IACd,GAAAtV,KAAA,QAAWyE,G,UAZnB,O,EAAA,G,EAAA,8BAeW+Q,GACH,GAAAxV,KAAA,GAAiBwV,KAhBzB,6BAmBW,WACH,GAAAxV,KAAA,GAAWyV,YAAW,WAClB,IACQ,KAAI,MAAYH,IAAhB,GAAiD,EAAjD,SAAiD,EAAjD,GAAgE,EAAhE,OAA+E,EAA/E,IAA4F,IAC5F,GAAI,EAAJ,KACI,KAAI,GAAY,GAChB,KAAI,IAAY,KAEhB,KAAI,MAAJ,EAAI,IAAa,GACjB,KAAI,MAAJ,EAAI,IAAW,IAEnB,EAAKI,QACE,KAAI,MAAYJ,IACvB,EAAKK,OAEX,MAAO3L,GACLE,QAAQC,MAAM,sCACdD,QAAQC,MAAMH,GACd,EAAK2L,UAEV,QAvCX,8BA2CQ,GAAA3V,KAAA,IAAgB,KA3CxB,8BA+CQ,OAAI,GAAAA,KAAA,MAAgBsV,KAGpB,GAAAtV,KAAA,GAAgB,GAChB,GAAAA,KAAA,GAAcsV,IACdtV,KAAK0V,QACE,KArDf,6BAyDQ,OAAI,GAAA1V,KAAA,MAAgBsV,KAChBtV,KAAKkG,SACL,GAAAlG,KAAA,GAAcsV,KACP,KA5DnB,8BAkEQ,OAAI,GAAAtV,KAAA,MAAgBsV,KAChB,GAAAtV,KAAA,GAAcsV,KACP,KApEnB,+BA0EQ,OAAI,GAAAtV,KAAA,MAAgBsV,KAChB,GAAAtV,KAAA,GAAcsV,IACdtV,KAAK0V,QACE,KA7EnB,+BAmFQ,GAAI1V,KAAJ,MACI4V,aAAa,GAAA5V,KAAD,KACZ,GAAAA,KAAA,QAAWyE,IAEf,GAAAzE,KAAA,GAAgB,GAChB,GAAAA,KAAA,GAAc,KAxFtB,iCA2FQ,UAAOA,KAAP,S,6BA3FR,KCbO,SAAS6V,GAAexQ,GAC3B,OAAQ,wBAAMC,UAAU,gCAAgCwQ,sBAAqBzQ,EAAM0Q,WAAWC,kBAC1F,uBAAK1Q,UAAU,IACX,wBAAMA,UAAU,kCAAkCwQ,sBAAqBzQ,EAAM0Q,WAAWE,eACpF,2BACI,wBAAM3Q,UAAU,oCAAoCwQ,sBAAqBzQ,EAAM0Q,WAAWG,UACtF,2BACI,wBAAM5Q,UAAU,4BAA4BD,EAAM8Q,UAAY,GAC9D,sBAAI7Q,UAAW,4BAA8BD,EAAM0Q,WAAWK,UAAW/Q,EAAM0Q,WAAWM,aA0B/G,SAASC,GAAqBjR,GAA4B,QAC7D,OACI,2BACI,qBAAGC,UAAU,qBAAb,UAAkCD,EAAM0Q,WAAW5F,aAAnD,aAAkC,EAAwB/R,MAC1D,qBAAGkH,UAAU,mDAAb,SAAsED,EAAM0Q,WAAWQ,SAAW,EAAlG,OAAyGlR,EAAM0Q,WAAWS,YAC1H,wBAAMlR,UAAU,4BAA4BD,EAAM8Q,UAAY,GAC9D,sBAAI7Q,UAAW,iDAAmDD,EAAM0Q,WAAWK,UAAW/Q,EAAM0Q,WAAWM,OAC/G,sBAAI/Q,UAAW,WAAf,UAA2BD,EAAM0Q,WAAWvM,cAA5C,aAA2B,EAAyBpL,O,+aC7CzD,IAAMqY,GACM,gBADNA,GAEM,gBAFNA,GAGU,oBAHVA,GAIU,oBAJVA,GAKK,eALLA,GAMK,eANLA,GAOO,iBAPPA,GAQO,iBARPA,GASQ,kBATRA,GAUO,iB,eAMPC,GAAb,WAEI,WAAY3W,I,4FAA2B,iD,mOACnC,CAAAC,KAAA,GAAgBD,G,UAHxB,O,EAAA,G,EAAA,oCAKiB,aACT,eACK0W,IAA0C,WACvC,OAAO,KAAI,IAAUE,oBAF7B,KAIKF,IAA0C,SAACrP,GACxC,KAAI,IAAUwP,gBAAgBxP,MALtC,KAOKqP,IAAsC,WACnC,OAAO,KAAI,IAAUI,gBAR7B,KAUKJ,IAAsC,SAACrP,GACpC,KAAI,IAAU3E,YAAY2E,MAXlC,KAaKqP,IAAqC,SAAC5X,GACnC,KAAI,IAAUiY,YAAYjY,MAdlC,KAgBK4X,IAAqC,WAClC,OAAO,KAAI,IAAUM,iBAjB7B,KAmBKN,IAAuC,WACpC,OAAO,KAAI,IAAUO,kBApB7B,KAsBKP,IAAwC,WAErC,OADW,KAAI,IAAUM,cACb5V,cAxBpB,KA0BKsV,IAAuC,SAACrP,GACrC,KAAI,IAAU6P,aAAa7P,MA3BnC,KA6BKqP,IAAuC,WAEpC,OADA,KAAI,IAAUS,iBACP,KA/Bf,O,6BANR,K,myCCdO,SAASC,KAAwD,SACpCrR,W,kWAAA,IACzB/E,IAF6D,GAC7DqW,EAD6D,KACnDN,EADmD,KAKpE,SAASO,IAEL3X,OAAO4X,cAAchT,QAAQmS,IAGjC,SAASc,EAAcH,GACnBN,EAAYM,GACZ3U,EAAY2U,EAASpW,UAiBzB,OAVA8E,aAAgB,WACZ,IAAM0R,EAAc9X,OAAO4X,cAAcrR,UAAUwQ,GAAoC,CAAEvQ,OAAQqR,IAC3FE,EAAoB/X,OAAO4X,cAAcrR,UAAUwQ,GAAoC,CAAEvQ,OAAQmR,IAEvG,OADAA,IACO,WACH3X,OAAO4X,cAAcnR,YAAYsQ,GAAoCe,EAAYjX,IACjFb,OAAO4X,cAAcnR,YAAYsQ,GAAoCgB,EAAkBlX,OAE5F,CAAC6W,EAASpW,SAAUoW,EAASnW,eAEzB,CAACmW,EAdR,SAAwBA,GACpB1X,OAAO4X,cAAchT,QAAQmS,GAAoCW,K,28BCGlE,SAASM,GAAgBpD,IAtBzB,SAAmBA,EAA2BkB,GACjD,SAASmC,IACDnC,GAAYlB,GACZkB,EAASlB,GAIjBxO,aAAgB,WAKZ,OAJIwO,GACA5U,OAAOkY,iBAAiB,SAAUD,GAG/B,WACCrD,GACA5U,OAAOmY,oBAAoB,SAAUF,MAI9C,CAACrD,IAKawD,CAAUxD,GAG3B,SAAkBA,GACV1S,YAAG0S,IACHyD,EAAgBC,EAAoB1D,OAL5C,IAD8C,KAENxO,WAAekS,EAAoB1D,IAF7B,GAEvC2D,EAFuC,KAEzBF,EAFyB,KAS9C,SAASC,EAAoB1D,GACzB,QAAK1S,YAAG0S,KAGDA,GAAWA,EAAQ4D,eAAkB/D,OAAOgE,aAAehE,OAAOiE,QAAU,IAAO9D,EAAQ+D,cAAiBlE,OAAOmE,YAAcnE,OAAOoE,OAAS,IAI5J,OADAzS,aAAgB,cAAW,CAACmS,IACrBA,EClBJ,SAASO,GAAWnT,GACvB,IAAIgK,EAAU,2BAId,OAHIhK,EAAMoK,YACNJ,GAAW,IAAMhK,EAAMoK,WAEnB,0BAAQnK,UAAW+J,EAASjJ,QAASf,EAAMe,QAASI,WAAUnB,EAAMF,O,woDC4BzE,SAASsT,KAAkB,ICvDLpQ,EACnBqQ,EDsDwB,KACJ5S,WAAqC,CAC3D9C,cAAUyB,IAFgB,GACvBkC,EADuB,KAChBU,EADgB,WCvDLgB,GD4DsB,EC3DzCqQ,EAAU5S,SAAauC,GAQ7BvC,aAAgB,WACZ4S,EAAQ7V,QAAUwF,IACnB,IACI,CAACqQ,EAAQ7V,QAThB,SAAsBuE,GAClB8C,QAAQyO,IAAI,SAAWvR,EAAO,cAAgBsR,GAC1CA,EAAQ7V,SAAWuE,IACnBsR,EAAQ7V,QAAUuE,MDiDI,GAKvBwR,EALuB,KAKZzF,EALY,KAOtB5S,EAAO6S,cAAP7S,GAER,SAAS+S,EAActQ,GACnB,IAAI0N,GAAa,IAAInG,IAA4BE,SAASzH,GACrD0N,EAAW7G,QAIhBsJ,GAAa,GACb9L,EAAS,CACLrE,SAAUA,KALV5B,EAAY,qBAAD,mCAAmDsP,EAAW5G,OAAO4J,KAAK,QAyB7F,OAhBA5N,aAAgB,WACZ5B,EAAa,oBAEb,IAAM2U,EAA0BnZ,OAAOsG,MAAMC,UAAU,eAAgB,CAAEC,OAAQoN,IAOjF,OALI/S,GAAM,IACN4S,GAAa,GACbzT,OAAOsG,MAAM1B,QAAQ,eAAgB/D,IAGlC,WACHb,OAAOsG,MAAMG,YAAY,eAAgB0S,EAAwBtY,OAItE,CAACA,IACI,gCACHqY,EAAY,uBAAKtT,UAAU,kCAAf,cACRqB,EAAM3D,SACH,gBAAC8V,GAAD,CAAwB9V,SAAU2D,EAAM3D,WAD1B,gBAACoM,GAAD,CAAU/N,QAAQ,4BAA4BgO,QAAQ,oCAW7E,SAASyJ,GAAuBzT,GAAoC,SAErCS,gBAA0BrB,GAFW,GAEhEsU,EAFgE,KAErDC,EAFqD,UAInClT,WAA+B,CAC/DuQ,MAAO,IACP1P,MAAO2O,GACPc,SAAU,GACVF,SAAU,IACVD,cAAe,IACfD,iBAAkB,IAClBO,SAAU,EACVC,WAAY,EACZL,UAAW,EACX8C,YAAa,EACbC,cAAe,EACfC,cAAe,EACf3P,YAAQ/E,EACR0L,WAAO1L,IAlB4D,GAIhEsR,EAJgE,KAIpDqD,EAJoD,UAqBPtT,WAAqC,CACjGuT,aAAc,QACdC,YAAa,aACbC,aAAc,QACdC,gBAAgB,EAChBC,aAAc,aACdC,aAAc,gBA3BqD,GAqBhEC,EArBgE,KAqBtCC,EArBsC,UA+BvCzC,KA/BuC,GA+BhEC,EA/BgE,KA+BtDN,EA/BsD,UAiC/BhR,WAAe,IAjCgB,GAiChE+T,EAjCgE,KAiClDC,EAjCkD,KAoCjEC,EAAcjU,SAAaT,EAAMrC,UACvC+W,EAAYlX,QAAUwC,EAAMrC,SAC5B,IAAMgX,EAAgBlU,SAAaiQ,GACnCiE,EAAcnX,QAAUkT,EACxB,IAAMkE,EAAcnU,SAAasR,GACjC6C,EAAYpX,QAAUuU,EAGtB,IA+N4B5N,EA/NtB0Q,EAAiBpU,SAAa,MAC9BqU,EAAgBrU,SAAa,MAC7BsU,EAActU,SAAa,MAC3BuU,EAAavU,SAAa,MAC1BwU,EAAgBxU,SAAa,MAC7ByU,EAAWzU,SAAa,MACxB0U,EAAc1U,SAAa,MAE3BmS,EAAeP,GAAgB8C,EAAY3X,SAEjD,SAAS4X,EAAqBzX,GAC1B,IAAImN,EAAQnN,EAASC,OAAO,GACxBuG,EAAS2G,EAAMxO,QAAQ,GAC3ByX,EAAc,SACPrD,GADM,IAET5F,MAAOA,EACPoG,SAAU,EACVC,WAAYxT,EAASC,OAAO1G,OAC5B2c,cAAexX,EAAkByO,EAAMxO,SACvCwU,UAAW,EACX3M,OAAQA,EACRyP,YAAa9I,EAAMxO,QAAQpF,OAC3B4c,cAAepW,EAAiBC,GAAU,MAmClD,SAAS0X,EAAgBC,EAAqBC,EAAe7B,GACzD,IAAI8B,EAAiB9Y,SAASiY,EAAcnX,QAAQ2G,OAAOhJ,UACvDsa,EAAKD,EAAiBF,EACtBzE,EAAWtT,EAAkB+X,EAAaE,GAI9C,OAHoB,IAAhBF,GACAI,EAAUf,EAAcnX,QAAQ2G,OAAO/I,MAEvCqa,EAAK,GAELE,EAAqBjC,EAAUkC,WAAY,CACvCC,KAAMJ,EACN5E,SAAU,IAAMA,EAChB4E,GAAIH,EACJC,MAAOA,IAGPE,GAAM,GACNC,EAAU,cAEP,GAlDf,WACI,IAAII,EAAgBnB,EAAcnX,QAAQsT,UAAY,EACtD,GAAI6D,EAAcnX,QAAQsN,MAAMxO,QAAQpF,OAAS4e,EAAe,CAC5D,IAAIC,EAAYpB,EAAcnX,QAAQsN,MAAMxO,QAAQwZ,GAMpD,OALA/B,EAAc,SACPY,EAAcnX,SADR,IAETsT,UAAWgF,EACX3R,OAAQ4R,MAEL,EAEX,IAAIC,EAAerB,EAAcnX,QAAQ0T,SAAW,EACpD,GAAIwD,EAAYlX,QAAQI,OAAO1G,OAAS8e,EAAc,CAClD,IAAIC,EAAWvB,EAAYlX,QAAQI,OAAOoY,GACtCD,EAAYE,EAAS3Z,QAAQ,GAWjC,OATAyX,EAAc,SACPY,EAAcnX,SADR,IAETsT,UAAW,EACX3M,OAAQ4R,EACRnC,YAAaqC,EAAS3Z,QAAQpF,OAC9B4T,MAAOmL,EACP/E,SAAU8E,EACVnC,cAAexX,EAAkB4Z,EAAS3Z,aAEvC,EAGX,OADA8Y,EAAqBV,EAAYlX,UAC1B,EAyBE0Y,IAQLR,EAAU,aACVC,EAAqB1F,GAA+B,CAAE4F,KAAM,EAAGhF,SAAU,EAAG4E,GAAIA,EAAIF,MAAOA,IAC3F7B,EAAUyC,SACH,IATHT,EAAU,OACVC,EAAqB1F,GAA+B,CAChD4F,KAAM,EAAGhF,SAAU,IAAK4E,GAAI,EAAGF,MAAO,KAEnC,GA2BnB,SAASI,EAAqBS,EAAmCC,GAC7D,IAAK9Z,YAAG8Z,IAAaA,EAASR,KAAO,EACjC9B,EAAc,SACPY,EAAcnX,SADR,IAET8D,MAAO8U,SAER,CACH,IAAIxF,EAyBD,IAAMrT,EAVjB,SAAmCkY,GAC/B,OAAOd,EAAcnX,QAAQsN,MAAMxO,QAAQE,QAAe,SAACzE,EAAgByO,EAAsB0G,GAC7F,OAAIA,EAAMyH,EAAcnX,QAAQsT,UACrB/Y,EAAS2E,SAAS8J,EAAIrL,UAE1BpD,IACR,GAAK0d,EAIuBa,CAzBgBD,EAASZ,IAyBMd,EAAcnX,QAAQqW,eAxB5E0C,EA2BZ,SAAmCd,GAC/B,OAAO,IAAMlY,EAAkBkY,EAAId,EAAcnX,QAAQsW,eA5B9B0C,CAA0BH,EAASd,OAC1DxB,EAAc,SACPY,EAAcnX,SADR,IAETwT,O1C5PiBpU,E0C4POyZ,EAASR,K1C3PzCjZ,EAAU,EACH,QAEJC,EAAsBD,GAAS,SAACpD,EAAe4B,GAClD,OAAQA,GACJ,IAAK,OACL,IAAK,SACD,OAAO+B,EAAqB3D,GAAS,IACzC,QACI,OAAO2D,EAAqB3D,Q0CmP5BuX,UA2DSC,EA3DaqF,EAASR,KA2DPvU,EA3Da8U,EA4DtC9U,IAAU2O,IAAiCe,GAAS,GAAKA,EAAQ,EAAI,yCAA2C,IA3D/G1P,MAAO8U,EACPvF,SAAUwF,EAASxF,SACnBD,cAAeA,EACfD,iBAAkB4F,KAuD9B,IAAqBvF,EAAe1P,E1CxTP1E,G0C4T7B,SAAiC0E,GAC7B,OAAQA,GACJ,KAAK2O,GACDsE,EAA4B,CACxBN,YAAa,YACbG,aAAc,aACdJ,aAAc,OACdG,gBAAgB,EAChBE,aAAc,cACdH,aAAc,UAElB,MACJ,KAAKjE,GACDsE,EAA4B,CACxBN,YAAa,YACbG,aAAc,aACdJ,aAAc,OACdG,gBAAgB,EAChBE,aAAc,aACdH,aAAc,WAElB,MACJ,KAAKjE,GACDsE,EAA4B,CACxBN,YAAa,aACbG,aAAc,aACdJ,aAAc,QACdG,gBAAgB,EAChBE,aAAc,cACdH,aAAc,WArF1BuC,CAAwBL,GAoB5B,SAASV,EAAUta,GACf,GAAKwZ,EAAYpX,QAAQ5B,aAAzB,CAGA,IAAIqT,OAAU7P,EACd,OAAQhE,GACJ,IAAK,YACD6T,EAAU4F,EAAerX,QACzB,MACJ,IAAK,MACDyR,EAAUiG,EAAS1X,QACnB,MACJ,IAAK,WACDyR,EAAU6F,EAActX,QACxB,MACJ,IAAK,SACDyR,EAAU8F,EAAYvX,QACtB,MACJ,IAAK,QACDyR,EAAU+F,EAAWxX,QACrB,MACJ,IAAK,WACDyR,EAAUgG,EAAczX,QAI5ByR,IACAA,EAAQqG,YAAc,EACtBrG,EAAQyH,SAmFhB,OAzBAjW,aAAgB,WACZ5B,EAAa,oBACb,IAAM8X,EAAW,IAAI9G,GACrB,GAAI7P,EAAMrC,SAAU,CAChBkB,EAAamB,EAAMrC,SAAS5E,MAC5B8B,EAAemF,EAAMrC,SAAS5E,MAC9Bqc,EAAqBpV,EAAMrC,UAE3B,IACIgZ,EAAS5G,WACX,MAAOpL,GACL8P,EAAgB,gGAEpB,IAAInE,EAAO,IAAIJ,GACfI,EAAKsG,OAAOvB,GACZ1B,EAAarD,GAGjB,OAAO,WACCoD,GACAA,EAAUpD,OAEdqG,EAAS3G,aAEd,CAAChQ,EAAMrC,SAAUoU,EAASnW,eACrB,uBAAKqE,UAAU,kDAAkD4W,IAAK1B,GAC1E,uBAAKlV,UAAW,sEAxCQkE,EAwCkFuM,EAAWvM,OAvC7G5H,YAAG4H,GAAetG,EAAiBsG,EAAO/I,MAA7B,KAwCjB,uBAAK6E,UAAU,6EACV8R,EAASjW,WAAa,gBAACmV,GAAD,CAAsBH,UAAWJ,EAAWI,UAAWJ,WAAYA,IAAiB,gBAACF,GAAD,CAAgBM,UAAWJ,EAAWI,UAAWJ,WAAYA,MAIhL,uBAAKzQ,UAAU,yBACX,qBAAGA,UAAU,+CAA+CkB,WAAU4Q,EAASnW,aAAe,UAAY,eAAgBmF,QAAS,WAC/H0Q,EAAY,SACLM,GADI,IAEPnW,cAAemW,EAASnW,mBAG/B0Y,EAAyBH,gBAAkB,gBAAChB,GAAD,CAAYrT,KAAMwU,EAAyBD,aAActT,QA5K7G,WACQ2P,EAAWpP,QAAU2O,IAAiCyD,EAAUoD,QAChEnB,EAAqB1F,IACdS,EAAWpP,QAAU2O,IAAgCyD,GAAaA,EAAUqD,UACnFpB,EAAqB1F,KAwKuG7F,UAAU,2CACtI,gBAAC+I,GAAD,CAAYrT,KAAMwU,EAAyBF,aAAcrT,QAvLjE,WACQ2P,EAAWpP,QAAU2O,IAAiCyD,EAAUsD,QAChErB,EAAqB1F,IACdS,EAAWpP,QAAU2O,IAAiCyD,EAAUpD,SACvE8E,EAAqBpV,EAAMrC,UAC3BgY,EAAqB1F,GAA+B,CAAE4F,KAAM,EAAGhF,SAAU,IAAK4E,GAAI,EAAGF,MAAO,MAkLZnL,UAAW,aAAekK,EAAyBL,cACnI,qBAAGhU,UAAU,+CAA+CkB,WAAUyR,EAAe,SAAW,SAAU7R,QAnDlH,WACSoU,EAAY3X,UAGboV,GACAqE,cAEJC,YAAe/B,EAAY3X,cA+C1BjB,YAAGiY,IACA,uBAAKvU,UAAU,+FAA8F,wBAAMA,UAAU,iCAAiCkB,WAAS,MAAMC,cAAaoT,KAC9L,yBAAOqC,IAAKhC,EAAgB3Z,GAAG,sBAAsBmU,IAAI,0CACzD,yBAAOwH,IAAK/B,EAAe5Z,GAAG,qBAAqBmU,IAAI,yCACvD,yBAAOwH,IAAK9B,EAAa7Z,GAAG,mBAAmBmU,IAAI,uCACnD,yBAAOwH,IAAK7B,EAAY9Z,GAAG,kBAAkBmU,IAAI,sCACjD,yBAAOwH,IAAK5B,EAAe/Z,GAAG,qBAAqBmU,IAAI,yCACvD,yBAAOwH,IAAK3B,EAAUha,GAAG,qBAAqBmU,IAAI,qCElbnD,SAAS8H,KACZ,SAASC,IACL/c,OAAO4B,KAAKG,MAAM,gBAGtB,SAASib,IACLxS,QAAQyO,IAAI,oBACZjZ,OAAO4X,cAAchT,QAAQmS,IAgBjC,OAbA3Q,aAAgB,WACZ,IAAM6W,EAAmBjd,OAAO4X,cAAcrR,UAAUwQ,GAAsC,CAAEvQ,OAAQwW,IAClGE,EAAkBld,OAAO2O,aAAapI,UAAUoD,GAAoC,CAAEnD,OAAQuW,IAC9FI,EAAoBnd,OAAOsG,MAAMC,UAAUuI,GAAyB,CAAEtI,OAAQuW,IAGpF,OAAO,WAEH/c,OAAO4X,cAAcnR,YAAYsQ,GAAsCkG,EAAiBpc,IACxFb,OAAO2O,aAAalI,YAAYkD,GAAoCuT,EAAgBrc,IACpFb,OAAOsG,MAAMG,YAAYqI,GAAyBqO,EAAkBtc,OAEzE,IACK,uBAAK+E,UAAU,eACnB,sBAAIA,UAAU,UAAd,aACA,uBAAKA,UAAU,IACX,4BACA,0BAAQA,UAAU,2CAA2Cc,QAAS,WAAQ1G,OAAO2O,aAAa/J,QAAQ+E,MAA1G,uBACE,2BACF,0BAAQ/D,UAAU,0CAA0Cc,QAAS,WAAQ1G,OAAOsG,MAAM1B,QAAQkK,MAAlG,yBACE,2BACF,0BAAQlJ,UAAU,0CAA0Cc,QAAS,WAAQ1G,OAAO4X,cAAchT,QAAQmS,MAA1G,wBACE,2BACF,0BAAQnR,UAAU,wCAAwCc,QAAS,WAC/D1G,OAAO2O,aAAa/J,QAAQ+E,IAC5B3J,OAAOsG,MAAM1B,QAAQkK,IACrB9O,OAAO4X,cAAchT,QAAQmS,MAHjC,gBCzBL,SAASqG,GAAuBzX,GAWnC,OAHAS,aAAgB,cAEb,CAACT,EAAMxG,MAAOwG,EAAMjH,OAEnB,uBAAKkH,UAAU,yCACX,uBAAKA,UAAU,iBAAiBD,EAAM2H,OACtC,uBAAK1H,UAAU,oBACX,yBAAO7E,KAAK,WAAWF,GAAI8E,EAAMjH,KAAMA,KAAMiH,EAAMjH,KAAMsN,QAASrG,EAAMxG,MAAO0M,SAd3F,SAAkBC,GACd,IAAIC,EAASD,EAAGC,OACZpG,EAAMkD,UACNlD,EAAMkD,SAASkD,EAAOrN,KAAMqN,EAAOC,YAY/B,yBAAOM,QAAS3G,EAAMjH,KAAMkH,UAAU,kB,woDCjB/C,SAASyX,KAAoB,SACA5F,KADA,GACzBC,EADyB,KACfN,EADe,KAIhC,SAAS3K,EAAc/N,EAAcS,GAEjC,GAAa,iBAATT,GAAoC,aAATA,GAAgC,eAATA,EAAtD,CAGA,IAAI4e,EAAc,SACX5F,GADQ,SAEVhZ,EAAOS,IAEZiY,EAAYkG,IAShB,OALAlX,aAAgB,WACZ5B,EAAa,YACbhE,EAAe,cAEhB,CAACkX,EAASpW,SAAUoW,EAASnW,eACxB,gCAAE,uBAAKqE,UAAU,2BACrB,gBAACoH,GAAD,CAAYzM,MAAM,WAAW0M,YAAY,2BAA2BxH,KAAK,UACzE,uBAAKG,UAAU,eACX,sBAAIA,UAAU,YACV,0BACI,gBAACwX,GAAD,CAAwB9P,MAAM,YAAY5O,KAAK,WAAWS,MAAOuY,EAASpW,SAAUuH,SAAU4D,KAElG,0BACI,gBAAC2Q,GAAD,CAAwB9P,MAAM,aAAa5O,KAAK,eAAeS,MAAOuY,EAASnW,aAAcsH,SAAU4D,KAE3G,0BACI,gBAAC2Q,GAAD,CAAwB9P,MAAM,oBAAoB5O,KAAK,aAAaS,MAAOuY,EAASjW,WAAYoH,SAAU4D,KAE9G,oDAA4BiL,EAASlW,UAAY,MAAQ,OAE7D,uBAAKoE,UAAU,eACX,0BAAQA,UAAU,yBAAyBc,QAAS,WAChD1G,OAAO4B,KAAK7C,IAAI,mBAAmBiJ,KAAK,UAD5C,0BAKR,gBAAC8U,GAAD,QCnDD,SAASS,KAGZ,OAFA/Y,EAAa,SACbhE,EAAe,SACP,gCAAE,uBAAKoF,UAAU,2BACrB,gBAACoH,GAAD,CAAYzM,MAAM,QAAQ0M,YAAY,qCAAqCxH,KAAK,SAChF,uBAAKG,UAAU,IACX,uBAAKA,UAAU,kBACX,sBAAIA,UAAU,UAAd,WACA,qBAAGA,UAAU,IAAb,0CAAuD,wBAAMA,UAAU,iCAAhB,SAAvD,KAAqH,qBAAG6D,KAAK,2BAA2B7D,UAAU,uBAA7C,gBAArH,MAEJ,uBAAKA,UAAU,kBACX,sBAAIA,UAAU,UAAd,cACA,qBAAGA,UAAU,IAAb,gEAA6E,qBAAGA,UAAU,sBAAsB6D,KAAK,8CAAxC,uBAEjF,uBAAK7D,UAAU,iBACX,sBAAIA,UAAU,UAAd,SACA,qBAAGA,UAAU,IAAb,4DACA,sBAAIA,UAAU,YACV,0BACI,uBAAKA,UAAU,IACX,uBAAKA,UAAU,IACX,sCAEJ,qBAAG6D,KAAK,oCAAoC7D,UAAU,YAAtD,UACA,qBAAG6D,KAAK,uBAAuB7D,UAAU,4BAAzC,wBAGR,0BACI,uBAAKA,UAAU,IACX,uBAAKA,UAAU,IACX,0CAEJ,qBAAG6D,KAAK,qCAAqC7D,UAAU,YAAvD,uBACA,qBAAG6D,KAAK,sCAAsC7D,UAAU,4BAAxD,wBACA,qBAAG6D,KAAK,qCAAqC7D,UAAU,4BAAvD,yBAER,0BACI,uBAAKA,UAAU,IACX,uBAAKA,UAAU,IACX,yCAEJ,qBAAG6D,KAAK,oCAAoC7D,UAAU,YAAtD,YAIR,0BACI,uBAAKA,UAAU,IACX,uBAAKA,UAAU,IACX,4CAEJ,qBAAG6D,KAAK,uCAAuC7D,UAAU,YAAzD,iBChDrB,SAAS4X,GAAO7X,GAInB,OACI,uBAAKC,UAAU,kDACX,uBAAKA,UAAU,yBACX,wBAAMA,UAAU,0BAAhB,eALD,IAAI6X,MAAOC,cAAgB,IAM1B,qBAAGjU,KAAK,2BAA2BsC,OAAO,SAASnG,UAAU,uBAA7D,UACgB,gBAAfD,EAAMtG,MAA0B,wBAAMuG,UAAU,iCAAhB,S,28BCV1C,SAAS+X,KAAiB,SACDvX,YAAe,GADd,GACtBgL,EADsB,KACdwM,EADc,KAEvBC,EAAgBzX,SAA6B,MACnD,SAAS0X,EAAWzhB,GACZ6F,YAAG7F,IAAS6F,YAAG7F,EAAK+E,QAAyB,IAAf/E,EAAK+E,MACnCwc,GAAU,GAGdA,GAAU,GA2Bd,OAbAxX,aAAgB,WACZyX,EAAc1a,QAAUnD,OAAO4B,KAAK7C,IAAI,mBACxC,IAAMgf,EAAgBF,EAAc1a,QAAQ6a,GAAG,WAAYF,GAC3D,OAAO,WACC5b,YAAG6b,IACHA,EAAIE,SAAQ,SAAApd,GACRgd,EAAc1a,QAAQ+a,OAAO,WAAYrd,SAMtD,CAACuQ,IAEA,gBAACjG,GAAD,CAAWtK,GAAG,iBAAiBN,MAAM,UACjC8K,KACI,sBAAIxK,GAAG,iBAAiBsd,aAAW,sDAC/B,sBAAIvY,UAAU,cAAa,yCAAgB,wBAAMA,UAAU,iCAAhB,iBAAhB,qHAC3B,0BAAI,0CAAiB,wBAAMA,UAAU,iCAAhB,WAAjB,0HAAsM,wBAAMA,UAAU,iBAAhB,UAAtM,QAAwP,wBAAMA,UAAU,iBAAhB,UAAxP,+GACgB,wBAAMA,UAAU,mBAAhB,UADhB,KACiE,wBAAMA,UAAU,mBAAhB,YADjE,KACoH,wBAAMA,UAAU,mBAAhB,SADpH,QACuK,wBAAMA,UAAU,mBAAhB,YADvK,6IAEJ,0BAAI,wCAAe,wBAAMA,UAAU,iCAAhB,YAAf,2BAAsG,wBAAMA,UAAU,4BAAhB,eAAtG,gBAAgL,wBAAMA,UAAU,4BAAhB,UAAhL,0EACuB,wBAAMA,UAAU,mBAAhB,iBADvB,KAC+E,wBAAMA,UAAU,mBAAhB,UAD/E,OACkI,wBAAMA,UAAU,mBAAhB,WADlI,OAIZ0F,OACI,uBAAK1F,UAAU,uBACX,sBAAI/E,GAAG,yBAAyB+E,UAAU,uCAAuCwY,eAAa,2BAC1F,0BAAI,2BACJ,0BAAI,2BACJ,0BAAI,4BAER,2BACI,0BAAQxY,UAAU,aAAac,QA3CnD,WACQ0K,EACApR,OAAO4B,KAAK7C,IAAI,mBAAmBiJ,KAAK,SAG5C6V,EAAc1a,QAAQ6E,KAAK,SAAU,UAsCiCoJ,EAAS,QAAU,YCvD1F,SAASiN,KAGZ,OAFA7Z,EAAa,QACbhE,EAAe,QACP,uBAAKoF,UAAU,2BACnB,gBAACoH,GAAD,CAAYzM,MAAM,OAAO0M,YAAY,qCAAqCxH,KAAK,gBAC/E,uBAAKG,UAAU,iCAAf,wBCkBD,SAAS0Y,GAAQ3Y,GACpB,OAAQ,gBAAC,IAAD,KACJ,gBAAC,IAAD,CAAO4Y,KAAK,KACR,gBAACC,GAAD,CAAKnf,KAAMsG,EAAMtG,SAKtB,SAASmf,GAAI7Y,GAEhB,IAAI8Y,EACAhW,EAAWF,cACf,SAASmW,EAAWhX,GAChB3E,EAAY2E,GAGhB,SAASiX,EAAgBjX,GAAe,WAC/BA,GACDqO,YAAW,WACP,EAAK0I,oBAAsBze,OAAO4B,KAAK7C,IAAI,mBAC3C,EAAK6f,2BAA6B,EAAKH,oBAAoBT,GAAG,QAAS,EAAKa,qBAAqBnf,KAAK,IACtGM,OAAO4B,KAAK7C,IAAI,mBAAmBiJ,KAAK,UACzC,KAKX,SAAS6W,IACL7e,OAAO4X,cAAchT,QAAQmS,IAAsC,GAuBvE,OAnBA3Q,aAAgB,WACZ,IAAM0Y,EAAc9e,OAAO4X,cAAcrR,UAAUwQ,GAAqC,CAAEvQ,OAAQkY,IAC5FK,EAAsB/e,OAAO4X,cAAcrR,UAAUwQ,GAAsC,CAAEvQ,OAAQmY,IAErGC,GADNH,EAAsBze,OAAO4B,KAAK7C,IAAI,oBACiBif,GAAG,QAASa,GAInE,OAHA7e,OAAO4X,cAAchT,QAAQmS,IAC7B/W,OAAO4X,cAAchT,QAAQmS,IAEtB,WACH/W,OAAO4X,cAAcnR,YAAYsQ,GAAqC+H,EAAYje,IAClFb,OAAO4X,cAAcnR,YAAYsQ,GAAsCgI,EAAoBle,IAEvFqB,YAAG0c,IACHA,EAA2BX,SAAQ,SAACpd,GAChC4d,EAAoBP,OAAO,QAASrd,UAMhD,uBAAK+E,UAAU,yBACX,gBAACyC,GAAD,MACA,uBAAKzC,UAAU,gDACX,gBAAC,IAAD,CAAQ6C,SAAUA,GACd,gBAAC,IAAD,CAAO8V,KAAM1Z,EAASQ,OAAO,WAAY2Z,UAAWjG,KACpD,gBAAC,IAAD,CAAOwF,KAAM1Z,EAASQ,OAAO,eAAgB2Z,UAAWC,KACxD,gBAAC,IAAD,CAAOV,KAAM1Z,EAASQ,OAAO,gBAAiB2Z,UAAWC,KACzD,gBAAC,IAAD,CAAOV,KAAM1Z,EAASQ,OAAO,WAAY2Z,UAAW1Q,KACpD,gBAAC,IAAD,CAAOiQ,KAAM1Z,EAASQ,OAAO,YAAa2Z,UAAW3B,KACrD,gBAAC,IAAD,CAAOkB,KAAM1Z,EAASQ,OAAO,SAAU2Z,UAAWzB,KAClD,gBAAC,IAAD,CAAOgB,KAAM1Z,EAASQ,OAAO,QAAS2Z,UAAWX,KACjD,gBAAC,IAAD,CAAOE,KAAM1Z,EAASQ,OAAO,QAAS2Z,UAAWhY,KACjD,gBAAC,IAAD,KACI,gBAAC,GAAD,SAIZ,gBAACwW,GAAD,CAAQne,KAAMsG,EAAMtG,OACpB,gBAAC,GAAD,MACA,gBAACse,GAAD,O,qyDC3FZ,ICeIuB,GAAWC,GAAWC,GAASC,GAAMC,GAAQC,G,8BDZpCC,GAAb,WAII,aAAc,2FACV,GAAAlf,KAAA,GAAgB,IAAImf,cAAW,QAAS,kBAExC,GAAAnf,KAAA,GAAkB,IAAIoK,IAP9B,qDAYQ,OAAOpK,KAAKof,iBAZpB,kCAegBpc,GAA6B,WACjC5F,GAAS,EAiBb,OAfI4C,KAAKyK,SAASzH,IACdhD,KAAKqf,UAAS,SAACvgB,GACX,OAAK8C,YAAGoB,EAASzC,IAUV,MATCyC,EAAS2D,QAAUtG,GACnB,EAAK2O,aAEThM,EAASzC,GAAK,KAAO,EAAK+e,eAC1Btc,EAAS2D,MAAQtG,EACjBvB,EAAEjC,KAAKmG,GACP5F,GAAS,EACF0B,MAKZ1B,IAjCf,qCAoCmB4F,GAA6B,WACpC5F,GAAS,EAqBb,OAnBI4C,KAAKyK,SAASzH,KACTpB,YAAGoB,EAASzC,IAGbP,KAAKqf,UAAS,SAACvgB,GACX,IAAIyT,EAAMzT,EAAEoI,WAAU,SAAAzB,GAAI,OAAIA,EAAKlF,KAAOyC,EAASzC,MACnD,OAAIgS,GAAO,GACHvP,EAAS2D,QAAUtG,GACnB,EAAK2O,aAEThM,EAAS2D,MAAQtG,EACjBvB,EAAEyT,GAAOvP,EACT5F,GAAS,EACF0B,GAEJ,QAbX1B,EAAS4C,KAAK2O,YAAY3L,IAiB3B5F,IA1Df,qCAiEmBmD,GACX,IAAInD,GAAS,EACb,QAAKwE,YAAGrB,KAGRP,KAAKqf,UAAS,SAACvgB,GACX,IAAIyT,EAAMzT,EAAEoI,WAAU,SAAAzB,GAAI,OAAIA,EAAKlF,KAAOA,KAC1C,OAAIgS,GAAO,GACPzT,EAAErB,OAAO8U,EAAK,GACdnV,GAAS,EACF0B,GAEJ,QAEJ1B,KA/Ef,kCAkFgBmD,GACR,IAAIyC,OAAWyB,EAKf,OAJAzE,KAAKqf,UAAS,SAACvgB,GAEX,OADAkE,EAAWlE,EAAE8M,MAAK,SAAAnG,GAAU,OAAOA,EAAKlF,KAAOA,KACxC,QAEJyC,IAxFf,uCA+FQhD,KAAKqf,UAAS,SAACE,GACX,MAAO,QAhGnB,gCAqGQ,MAAM3d,YAAG,GAAA5B,KAAA,IAAcwf,OAvGT,qBAEtB,iCAwGyB,MACjB,iBAAO,GAAAxf,KAAA,IAAcwf,OA3GP,yBA2Gd,aAA8C/a,IAzGtD,+BA4GazB,GACApB,YAAGoB,KAGRA,EAAS2D,MAAQtG,EACjB,GAAAL,KAAA,IAAcyf,OAnHA,iBAmHsBzc,MAjH5C,mCAqHQ,GAAAhD,KAAA,IAAc0f,WAvHA,oBAEtB,2CAyHQ,MAAM,IAAIC,MAAM,6BAzHxB,yCA4HuB3c,GACf,MAAM,IAAI2c,MAAM,6BA7HxB,qCAgIuC,MAC/B,iBAAO,GAAA3f,KAAA,IAAcwf,OApIH,oBAoIlB,QAAkD,KAjI1D,mCAoIyB1gB,GACjB,GAAAkB,KAAA,IAAcyf,OAxII,YAwIsB3gB,KArIhD,qCAyIQ,IAAIyT,EAAM,GAAAvS,KAAA,IAAc4f,UAAU,mBAOlC,OANKrN,GAAesN,MAARtN,EAGRA,GAAO,EAFPA,EAAM,EAIV,GAAAvS,KAAA,IAAc8f,UAAU,kBAAmBvN,GACpCA,IAhJf,+BAmJqBvP,GACb,OAAO,GAAAhD,KAAA,IAAgByK,SAASzH,GAAU6G,SApJlD,+BAuJqB2L,GACb,IACIpY,EAASoY,EADLxV,KAAKof,gBAEE,OAAXhiB,GACA4C,KAAK+f,aAAa3iB,OA3J9B,K,6CAgKa4iB,GAAb,WAII,aAAc,mIACV,GAAAhgB,KAAA,GAAgB,IAAImf,cAAW,QAAS,kBACxC,GAAAnf,KAAA,GAAgB,IAChB,GAAAA,KAAA,GAAkB,IAAIsK,IACtBtK,KAAKigB,wBARb,mDAYQ,aAAWjgB,KAAX,OAZR,gCAecwJ,GACN,IAAK,GAAAxJ,KAAA,IAAgByK,SAASjB,GAAQK,OAClC,OAAO,EAENjI,YAAG4H,EAAOjJ,MACXiJ,EAAOjJ,GAAK,MAAQP,KAAKsf,eACzB,GAAAtf,KAAA,IAAcnD,KAAK2M,IAEvB,IAAI0W,EAAgBlgB,KAAKmgB,SAAS3W,GAClC,OAAI0W,GAAiB,GACjB,GAAAlgB,KAAA,IAAckgB,GAAiB1W,EAC/BxJ,KAAKogB,uBACE,IAEXlW,QAAQyO,IAAI,sBAAwBnP,EAAOjJ,KACpC,KA9Bf,mCAiCiBiJ,GACT,IAAK,GAAAxJ,KAAA,IAAgByK,SAASjB,GAAQK,OAClC,OAAO,EAEX,IAAIqW,EAAgBlgB,KAAKmgB,SAAS3W,GAClC,OAAI0W,EAAgB,GAChBhW,QAAQyO,IAAI,sBAAwBnP,EAAOjJ,KACpC,IAEX,GAAAP,KAAA,IAAcvC,OAAOyiB,EAAe,GACpClgB,KAAKogB,uBACE,KA5Cf,qCAgDQ,GAAApgB,KAAA,GAAgB,IAChBA,KAAKogB,wBAjDb,uCAoDmE,2BAA7C7f,EAA6C,yBAA7CA,EAA6C,gBAC3D,GAAKqB,YAAGrB,GAGR,OAAO,GAAAP,KAAA,IAAc6B,QAAO,SAACzE,EAA2BoM,EAAyB1I,GAI7E,OAHIP,EAAGsS,SAASrJ,EAAOjJ,KACnBnD,EAAOP,KAAK2M,GAETpM,IACR,MA7DX,+BAgEqBoM,GACb,OAAO,GAAAxJ,KAAA,IAAckH,WAAU,SAAAzB,GAAI,OAAIA,EAAKlF,KAAOiJ,EAAOjJ,QAjElE,8CAqEQ,IAAI8f,EAAM,GAAArgB,KAAA,IAAcwf,OAAO,WAC/B,GAAAxf,KAAA,GAAgBqgB,UAAO,MAtE/B,4CA0EQ,GAAArgB,KAAA,IAAcyf,OAAO,UAArB,GAAgCzf,KAAhC,OA1ER,qCA8EQ,IAAIyF,EAAO,GAAAzF,KAAA,IAAc4f,UAAU,gBAOnC,OANKna,EAGDA,GAAc,EAFdA,EAAO,EAIX,GAAAzF,KAAA,IAAc8f,UAAU,eAAgBra,GACjCA,MArFf,K,eA0Fa6a,GAAb,WAEI,aAAc,mDACV,GAAAtgB,KAAA,GAAgB,IAAImf,cAAW,QAAS,iBAHhD,+CAOgBtgB,GAER,OADA,GAAAmB,KAAA,IAAcyf,OAAO,WAAY5gB,IAC1B,IATf,oCAaQ,OAAO,GAAAmB,KAAA,IAAcwf,OAAO,aAAe,CACvCxe,UAAU,EACVC,cAAc,KAf1B,sCAmBoBmG,GACZ,IAAIgQ,EAAWpX,KAAK+W,cAChB3P,IAASgQ,EAASnW,eAClBmW,EAASnW,aAAemG,EACxBpH,KAAK8W,YAAYM,MAvB7B,uCA2B8B,MACtB,iBAAOpX,KAAK+W,qBAAZ,aAAO,EAAoB9V,eA5BnC,kCA+BgBmG,GACR,IAAIgQ,EAAWpX,KAAK+W,cAChB3P,IAASgQ,EAASpW,WAClBoW,EAASpW,SAAWoG,EACpBpH,KAAK8W,YAAYM,MAnC7B,mCAuC0B,MAClB,iBAAOpX,KAAK+W,qBAAZ,aAAO,EAAoB/V,WAxCnC,qCA2C4B,MACpB,iBAAOhB,KAAK+W,qBAAZ,aAAO,EAAoB7V,YA5CnC,mCA+CiBkG,GACT,IAAIgQ,EAAWpX,KAAK+W,cAChB3P,IAASgQ,EAASlW,YAClBkW,EAASlW,UAAYkG,EACrBpH,KAAK8W,YAAYM,MAnD7B,sCAwDQpX,KAAK8W,Y,kWAAL,IACO/V,QAzDf,K,qFCpQIwf,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASxjB,EAAUuB,GAAS,IAAMkiB,EAAKJ,EAAUK,KAAKniB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACpF,SAASiX,EAASpiB,GAAS,IAAMkiB,EAAKJ,EAAiB,MAAE9hB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACvF,SAAS+W,EAAK3jB,GAJlB,IAAeyB,EAIazB,EAAO8jB,KAAOL,EAAQzjB,EAAOyB,QAJ1CA,EAIyDzB,EAAOyB,MAJhDA,aAAiB6hB,EAAI7hB,EAAQ,IAAI6hB,GAAE,SAAUG,GAAWA,EAAQhiB,OAITsiB,KAAK7jB,EAAW2jB,GAClGF,GAAMJ,EAAYA,EAAUzjB,MAAMsjB,EAASC,GAAc,KAAKO,YAGlEI,GAAkE,SAAUC,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP6iB,GAAkE,SAAUL,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAQnB,MAAM,GACT,YAAYM,EAAUC,GAClBhD,GAAU6C,IAAIzhB,UAAM,GACpB6e,GAAU4C,IAAIzhB,UAAM,GACpB8e,GAAQ2C,IAAIzhB,UAAM,GAClB+e,GAAK0C,IAAIzhB,UAAM,GACfgf,GAAOyC,IAAIzhB,UAAM,GACjBif,GAAewC,IAAIzhB,UAAM,GACzBohB,GAAuBphB,KAAM4e,GAAW+C,GACxCP,GAAuBphB,KAAM6e,IAAW,GACxCuC,GAAuBphB,KAAM8e,GAAS,KAAiBrgB,IAAI,mBAC3D2iB,GAAuBphB,KAAMgf,GAAQ4C,GACrCR,GAAuBphB,KAAM+e,GAAM5B,KAAK0E,OACxCT,GAAuBphB,KAAMif,GAAgB,IAAI,KAAiB2C,EAAME,eAE5E,YAAYxc,GACR,OAAOib,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGsF,IAGDtF,KAAKrD,KAAM2X,IACTA,EAAQS,UAAUgN,SAASzc,GAI5BgP,EAAQS,UAAUN,OAAOnP,GAHzBgP,EAAQS,UAAUC,IAAI1P,IAK3B,kBAGX,cAAcA,GACV,OAAOib,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGsF,IAGDtF,KAAKrD,KAAM2X,IACd,IAAIjF,EAAUiF,EAAQS,UACtB2M,GAAuB1hB,KAAMgf,IAAQ8C,aAAaE,MAAM,KAC/C3S,EAAQ0S,SAASzc,GAIlBoc,GAAuB1hB,KAAMgf,IAAQ8C,aAAaG,OAAO5S,EAAQoF,OAAQpF,EAAS/J,GAHlFoc,GAAuB1hB,KAAMgf,IAAQ8C,aAAaG,OAAO5S,EAAQ2F,IAAK3F,EAAS/J,IAKpFtF,OACJ,oBAGX,SAASsF,GACL,OAAOib,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGsF,IAGDtF,KAAKrD,KAAM2X,IACTA,EAAQS,UAAUgN,SAASzc,IAC5BgP,EAAQS,UAAUC,IAAI1P,IAE3B,eAGX,WAAWA,GACP,OAAOib,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGsF,IAGDtF,KAAKrD,KAAM2X,IACd,IAAIjF,EAAUiF,EAAQS,UACtB2M,GAAuB1hB,KAAMgf,IAAQ8C,aAAaE,MAAM,KAC/C3S,EAAQ0S,SAASzc,IAClBoc,GAAuB1hB,KAAMgf,IAAQ8C,aAAaG,OAAO5S,EAAQ2F,IAAK3F,EAAS/J,IAEpFtF,OACJ,iBAGX,YAAYsF,GACR,OAAOib,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGsF,IAGDtF,KAAKrD,KAAM2X,IACVA,EAAQS,UAAUgN,SAASzc,IAC3BgP,EAAQS,UAAUN,OAAOnP,IAE9B,kBAGX,cAAcA,GACV,OAAOib,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGsF,IAGDtF,KAAKrD,KAAM2X,IACd,IAAIjF,EAAUiF,EAAQS,UACtB2M,GAAuB1hB,KAAMgf,IAAQ8C,aAAaE,MAAM,KAChD3S,EAAQ0S,SAASzc,IACjBoc,GAAuB1hB,KAAMgf,IAAQ8C,aAAaG,OAAO5S,EAAQoF,OAAQpF,EAAS/J,IAEvFtF,OACJ,kBAGX,aAAakiB,GACT,OAAK,aAAGA,GAGDR,GAAuB1hB,KAAM4e,IAAW/c,OAAO,CAACwe,EAAKxd,KACxD,IAAIsf,EAAOtf,EAAQuf,aAAaF,GAIhC,OAHY,MAARC,GACA9B,EAAIxjB,KAAKslB,GAEN9B,GACR,IARQ,GAUf,aAAa6B,EAAeG,GACxB,OAAO9B,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGkiB,IAGDliB,KAAKrD,KAAM2X,IACdA,EAAQgO,aAAaJ,EAAeG,QAAuDA,EAAiB,KAC7G,mBAGX,eAAeH,EAAeG,GAC1B,OAAO9B,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGkiB,IAGDliB,KAAKrD,KAAM2X,IACdoN,GAAuB1hB,KAAMgf,IAAQ8C,aAAaG,OAAO3N,EAAQgO,aAAchO,EAAS4N,EAAeG,QAAuDA,EAAiB,KAChL,qBAGX,gBAAgBH,GACZ,OAAO3B,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGkiB,IAGDliB,KAAKrD,KAAM2X,IACdA,EAAQiO,gBAAgBL,IACzB,sBAGX,kBAAkBA,GACd,OAAO3B,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGkiB,IAGDliB,KAAKrD,KAAM2X,IACdoN,GAAuB1hB,KAAMgf,IAAQ8C,aAAaG,OAAO3N,EAAQiO,gBAAiBjO,EAAS4N,IAC5F,wBAGX,gBAAgBA,EAAeG,GAC3B,OAAO9B,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGkiB,IAGDliB,KAAKrD,KAAM2X,IACVA,EAAQkO,aAAaN,GACrB5N,EAAQiO,gBAAgBL,GAGxB5N,EAAQgO,aAAaJ,EAAeG,QAAuDA,EAAiB,KAEjH,sBAGX,kBAAkBH,EAAeG,GAC7B,OAAO9B,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGkiB,IAGDliB,KAAKrD,KAAM2X,IACdoN,GAAuB1hB,KAAMgf,IAAQ8C,aAAaE,MAAM,KAChD1N,EAAQkO,aAAaN,GACrBR,GAAuB1hB,KAAMgf,IAAQ8C,aAAaG,OAAO3N,EAAQiO,gBAAiBjO,EAAS4N,GAG3FR,GAAuB1hB,KAAMgf,IAAQ8C,aAAaG,OAAO3N,EAAQgO,aAAchO,EAAS4N,EAAeG,QAAuDA,EAAiB,KAEpLriB,OACJ,wBAGX,MAAMoG,GACF,OAAOma,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAGoG,IAGDpG,KAAKrD,KAAM2X,IAEdA,EAAQsD,iBAAiB,QAASxR,IACnC,YAGX,MAAMqc,EAAWjN,GACb,OAAO+K,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,SAAK,aAAGyiB,KAAe,aAAGjN,KAGnBxV,KAAKrD,KAAM2X,IACdA,EAAQsD,iBAAiB6K,EAAWjN,IACrC,YAGX,KAAKA,EAAUkN,GACX,OAAOnC,GAAUvgB,UAAM,OAAQ,GAAQ,YASnC,OARI0hB,GAAuB1hB,KAAM6e,KAC7B6C,GAAuB1hB,KAAM8e,IAAS3U,MAAM,oBAAqBuY,GAErE1iB,KAAK2iB,OACLjB,GAAuB1hB,KAAM4e,IAAWjB,QAAQ,CAACrJ,EAASxT,KACtD0U,EAASlB,EAASxT,KAEtBd,KAAK4iB,UACE,KAGf,QAAQtd,EAAWud,GACf,OAAOtC,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,IAAK,aAAGsF,GACJ,OAAO,EAEX,MAAMwd,EAAQD,QAAyCA,EAAUnB,GAAuB1hB,KAAMgf,IAAQ+D,MAAMC,cAC5G,OAAOhjB,KAAKrD,KAAM2X,IACdtU,KAAKijB,OAAO,KACR3O,EAAQS,UAAUC,IAAI1P,GACtBgP,EAAQS,UAAUC,IAAI,KAAQkO,cAC9BzN,WAAW,KACPzV,KAAKijB,OAAO,KACR3O,EAAQS,UAAUN,OAAOnP,GACzBgP,EAAQS,UAAUN,OAAO,KAAQyO,iBAEtCJ,UAKnB,KAAKK,EAAWC,EAAgBP,GAC5B,OAAOtC,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,IAAK,aAAImjB,EAAWC,GAChB,OAAO,EAEX,MAAMN,EAAQD,QAAyCA,EAAUnB,GAAuB1hB,KAAMgf,IAAQ+D,MAAMC,cACtGxZ,EAAS,IAAI,KAAe4Z,GAClC,OAAOpjB,KAAKrD,KAAM2X,IACdoN,GAAuB1hB,KAAMif,IAAgBoE,cAAc/O,EAAS9K,EAAQsZ,QAAqCA,EAAQ,GAAG3B,KAAK,KAC7H7M,EAAQS,UAAUC,IAAImO,UAKtC,MAAMG,EAAYF,EAAgBP,GAC9B,OAAOtC,GAAUvgB,UAAM,OAAQ,GAAQ,YACnC,IAAK,aAAIsjB,EAAYF,GACjB,OAAO,EAEX,MAAMN,EAAQD,QAAyCA,EAAUnB,GAAuB1hB,KAAMgf,IAAQ+D,MAAMC,cACtGxZ,EAAS,IAAI,KAAe4Z,GAClC,OAAOpjB,KAAKrD,KAAM2X,IACdoN,GAAuB1hB,KAAMif,IAAgBoE,cAAc/O,EAAS9K,EAAQsZ,QAAqCA,EAAQ,GAAG3B,KAAK,KAC7H7M,EAAQS,UAAUN,OAAO6O,UAKzC,KAAKlX,KAAUmX,GACN,aAAGnX,GAIRpM,KAAKrD,KAAM2X,IACP,IAAIkP,EAAOlP,EAAQmP,MACf,aAAGD,KACH9B,GAAuB1hB,KAAM8e,IAAS4E,MAAM,kBAAkBtX,QAAYoX,KAC1E9B,GAAuB1hB,KAAMgf,IAAQ2E,IAAIjc,KAAK0E,EAAOoX,KAASD,KAEnE,QATC7B,GAAuB1hB,KAAM8e,IAAS8E,QAAQ,gCAAiC,QAWvF,GAAGxX,EAAOoJ,GACN,IAAIiI,EAAM,GACV,OAAK,aAAIrR,EAAOoJ,IAIhBxV,KAAKrD,KAAM2X,IACP,IAAIuP,EAAavP,EACjB,GAAI,aAAGuP,GAAa,CAChB,IAAIC,EAAYpC,GAAuB1hB,KAAMgf,IAAQ2E,IAAIjG,GAAGtR,EAAOoJ,EAAUqO,GAC5D,MAAbC,GACArG,EAAI5gB,KAAKinB,KAElB,MACIrG,IAXHiE,GAAuB1hB,KAAM8e,IAAS3U,MAAM,sBAAuB,MAC5DsT,GAYf,OAAOrR,EAAO7L,GACL,aAAI6L,EAAO7L,IACZmhB,GAAuB1hB,KAAM8e,IAAS3U,MAAM,sBAAuB,UAEvEnK,KAAKrD,KAAM2X,IACP,IAAIuP,EAAavP,EACb,aAAGuP,IACHnC,GAAuB1hB,KAAMgf,IAAQ2E,IAAI/F,OAAOxR,EAAO7L,EAAIsjB,IAEhE,UAEP,KAAKrO,KAAa+N,GACd7B,GAAuB1hB,KAAMgf,IAAQ8C,aAAaE,MAAMxM,EAAUxV,QAASujB,GAE/E,OAAO/N,KAAa+N,GAChB7B,GAAuB1hB,KAAMgf,IAAQ8C,aAAaG,OAAOzM,EAAUxV,QAASujB,GAEhF,WACI,OAAO7B,GAAuB1hB,KAAM4e,IAExC,QACI,OAAO8C,GAAuB1hB,KAAM4e,IAAWriB,OAEnD,OACI6kB,GAAuBphB,KAAM6e,IAAW,GAE5C,SACIuC,GAAuBphB,KAAM6e,IAAW,GAE5C,WACI,OAAO6C,GAAuB1hB,KAAM6e,IAExC,UACI,OAAQ1B,KAAK0E,MAAQH,GAAuB1hB,KAAM+e,IAAS,MAGnEH,GAAY,IAAImF,QAAWlF,GAAY,IAAIkF,QAAWjF,GAAU,IAAIiF,QAAWhF,GAAO,IAAIgF,QAAW/E,GAAS,IAAI+E,QAAW9E,GAAiB,IAAI8E,Q,IC5V9IC,GAASC,GAAOC,GAASC,GAASC,GAAWC,G,QAb7C,GAAkE,SAAUhD,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP,GAAkE,SAAUwiB,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAKnB,MAAM,GACT,YAAYiD,EAAQC,EAASC,GACzBR,GAAQvC,IAAIzhB,UAAM,GAClBikB,GAAMxC,IAAIzhB,UAAM,GAChBkkB,GAAQzC,IAAIzhB,UAAM,GAClBmkB,GAAQ1C,IAAIzhB,UAAM,GAClBokB,GAAU3C,IAAIzhB,UAAM,GACpBqkB,GAAS5C,IAAIzhB,UAAM,GACnB,GAAuBA,KAAMmkB,GAASG,GACtC,GAAuBtkB,KAAMgkB,GAAS,GAAuBhkB,KAAMkkB,GAAS,GAAuBlkB,KAAMikB,QAAOxf,KAChH,GAAuBzE,KAAMokB,GAAWI,QAA2CA,EAAW,IAC9F,GAAuBxkB,KAAMqkB,GAAUE,GAE3C,aAAatkB,EAAOoP,EAASsS,GACpB,aAAGtS,KACJA,EAAU,IAET,aAAGsS,KACJA,EAAW,IAEf,IAAI8C,EAAgB,IAAI,KAAe,OACvCA,EAAcC,WAAc,GAAuB1kB,KAAMmkB,IAAhC,oBAA6D9U,GACtF,GAAuBrP,KAAMgkB,GAASS,EAAcE,SACpD,IAAIC,EAAe,IAAI,KAAe,QAAQF,WAAW1kB,KAAK6kB,kBAAkB,kBAAkBF,MAAM1kB,GACxG,GAAuBD,KAAMgkB,IAASxP,YAAYoQ,GAElD5kB,KAAK8kB,gBAAgB,GAAuB9kB,KAAMgkB,OAAarC,GAEnE,aAAatS,EAASsS,GACb,aAAGtS,KACJA,EAAU,IAET,aAAGsS,KACJA,EAAW,IAEf,GAAuB3hB,KAAMkkB,GAAS,IAAI,KAAe,OAAOQ,WAAW1kB,KAAK6kB,kBAAkB,qBAAsBxV,GAASsV,SAEjI3kB,KAAK8kB,gBAAgB,GAAuB9kB,KAAMkkB,OAAavC,GAEnE,WAAWtS,EAASsS,GACX,aAAGtS,KACJA,EAAU,IAET,aAAGsS,KACJA,EAAW,IAEf,GAAuB3hB,KAAMikB,GAAO,IAAI,KAAe,OAAOS,WAAW1kB,KAAK6kB,kBAAkB,mBAAoBxV,GAASsV,SAE7H3kB,KAAK8kB,gBAAgB,GAAuB9kB,KAAMikB,OAAWtC,GAEjE,MAAMphB,GACF,IAAI8O,EAAU,CAACrP,KAAK6kB,kBAAkB,YAClC,GAAuB7kB,KAAMqkB,KAC7BhV,EAAQxS,KAAKmD,KAAK6kB,kBAAkB,kBAExC,IAAIE,EAAS,IAAI,KAAe,OAAOC,MAAMzkB,GAAImkB,cAAcrV,GAAS4V,cAAc,CAClF,CAACjlB,KAAK6kB,kBAAkB,YAAa,GAAuB7kB,KAAMokB,MACnEO,QACCO,EAAY,IAAI,KAAe,OAAOR,WAAW1kB,KAAK6kB,kBAAkB,sBAAsBF,QAQlG,OAPI,GAAuB3kB,KAAMgkB,KAC7BkB,EAAU1Q,YAAY,GAAuBxU,KAAMgkB,KACnD,GAAuBhkB,KAAMikB,KAC7BiB,EAAU1Q,YAAY,GAAuBxU,KAAMikB,KACnD,GAAuBjkB,KAAMkkB,KAC7BgB,EAAU1Q,YAAY,GAAuBxU,KAAMkkB,KACvDa,EAAOvQ,YAAY0Q,GACZH,EAEX,gBAAgBI,KAAWxD,GACnB,aAAGA,IACHA,EAAShE,QAASrJ,GAAY6Q,EAAO3Q,YAAYF,IAGzD,kBAAkB8Q,GACd,OAAO,GAAuBplB,KAAMmkB,IAAWiB,GAGvDpB,GAAU,IAAID,QAAWE,GAAQ,IAAIF,QAAWG,GAAU,IAAIH,QAAWI,GAAU,IAAIJ,QAAWK,GAAY,IAAIL,QAAWM,GAAW,IAAIN,QC7F5I,IAaIsB,GAAY,GAAQ,GAAKC,GAAUC,GAAQC,GAAOC,GAAOC,GAbzD,GAAkE,SAAUrE,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP,GAAkE,SAAUwiB,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAO1B,MAAM,GACF,YAAY0B,EAAOxiB,EAAIxE,GACnBspB,GAAW5D,IAAIzhB,UAAM,GACrB,GAAOyhB,IAAIzhB,UAAM,GACjB,GAAIyhB,IAAIzhB,UAAM,GACdslB,GAAS7D,IAAIzhB,UAAM,GACnBulB,GAAO9D,IAAIzhB,UAAM,GACjB,GAAuBA,KAAMqlB,GAAY,CACrC,IAAOtpB,EAAKoL,MACZ,GAAMpL,EAAK4pB,KACX,OAAU5pB,EAAKsR,SACf,GAAMtR,EAAK6pB,OAEf5lB,KAAK6lB,QAAU9pB,EAAKsF,QACpBrB,KAAKC,MAAQlE,EAAKkE,MAClBD,KAAKskB,OAASvB,EAAMA,MAAMuB,OAC1B,GAAuBtkB,KAAM,GAAQ+iB,GACrC,GAAuB/iB,KAAM,GAAKO,GAClCP,KAAKukB,SAAU,EACf,GAAuBvkB,KAAMulB,GAAQ,MACrCvlB,KAAK8lB,SAAc,GAAuB9lB,KAAM,IAAQ+iB,MAAMuB,OAA9C,SAChBtkB,KAAK+lB,QAAa,GAAuB/lB,KAAM,IAAQ+iB,MAAMuB,OAA9C,QACf,GAAuBtkB,KAAMslB,QAAU7gB,GAE3C,QACI,OAAO,GAAuBzE,KAAM,IAExC,KAAKgmB,GACD,IAAI1R,EAAUlQ,SAAS6hB,eAAe,GAAuBjmB,KAAM,KAC9D,aAAGsU,GAMJtU,KAAKkmB,cAAc5R,IALnBA,EAAUtU,KAAKuU,gBACfyR,EAAKxR,YAAYF,IAMrBmB,WAAW,KAEP,GAAuBzV,KAAMslB,GAAU,IAAI,GAAe,CAAChR,GAAU,GAAuBtU,KAAM,MAClG,IAAIyd,EAAM,GAAuBzd,KAAMslB,IAAU5H,GAAG,SAAU1d,KAAKmmB,QAAQ/mB,KAAKY,OAChF,GAAuBA,KAAMulB,GAAQ9H,EAAIlhB,OAAS,EAAIkhB,EAAI,GAAK,MAC/D,GAAuBzd,KAAMslB,IAAU5d,KAAK,SAC7C,KAEP,cAAc4M,GACV,IAAIrU,EAAQqU,EAAQ8R,cAAc,IAAIpmB,KAAKskB,uBACvCuB,EAAUvR,EAAQ8R,cAAc,IAAIpmB,KAAKskB,wBAC7C,GAAuBtkB,KAAM,IAAQ8hB,aAAaG,OAAO,KACjDhiB,IACAA,EAAMomB,UAAYrmB,KAAKC,OAEvB4lB,IACAA,EAAQQ,UAAYrmB,KAAK6lB,UAE9B,MAEP,QAAQS,GACJ,IACI,GAAI,aAAGA,IAAQA,EAAI3f,OAAS,GAAuB3G,KAAMqlB,KACjD,aAAG,GAAuBrlB,KAAMqlB,IAAYiB,EAAI3f,QAAS,CACzD,IAAI6O,EAAW,GAAuBxV,KAAMqlB,IAAYiB,EAAI3f,OACxD6O,GACAA,KAKhB,QACgD,MAAxC,GAAuBxV,KAAMulB,MACzB,GAAuBvlB,KAAMslB,KAC7B,GAAuBtlB,KAAMslB,IAAU1H,OAAO,SAAU,GAAuB5d,KAAMulB,KACzF,GAAuBvlB,KAAMulB,GAAQ,OAEzC,GAAuBvlB,KAAMslB,QAAU7gB,KAInD4gB,GAAa,IAAItB,QAAW,GAAS,IAAIA,QAAW,GAAM,IAAIA,QAAWuB,GAAW,IAAIvB,QAAWwB,GAAS,IAAIxB,QACzG,MAAM,WAAwB,GACjC,YAAYhB,EAAOxiB,EAAIxE,GACnB,IAAIwqB,EACJC,MAAMzD,EAAOxiB,EAAIxE,GACjBypB,GAAM/D,IAAIzhB,UAAM,GAChB,GAAuBA,KAAMwlB,GAAOjlB,GACpCP,KAAKukB,QAAkC,QAAvBgC,EAAKxqB,EAAKwoB,eAA4B,IAAPgC,GAAgBA,EAEnE,gBACI,IAAIE,EAAgB,IAAI,GAAczmB,KAAKskB,OAAQtkB,KAAKukB,SAcxD,OAbAkC,EAAcC,aAAa1mB,KAAKC,MAAO,GAAI,CACvC,IAAI,KAAe,KAAKykB,WAAc1kB,KAAKskB,OAAR,SAAuBW,cAAc,CACpE,CAACjlB,KAAK8lB,UAAW,gBACjB,CAAC9lB,KAAK+lB,SAAU,UACjBpB,UAEP8B,EAAcE,WAAW,GAAI,CACzB,IAAI,KAAe,KAAKhC,MAAM3kB,KAAK6lB,WAEvCY,EAAcG,aAAa,CAAI5mB,KAAKskB,OAAR,QAA0BtkB,KAAKskB,OAAR,UAAyB,CACxE,IAAI,KAAe,UAAUI,WAAc1kB,KAAKskB,OAAR,UAA4BtkB,KAAKskB,OAAR,uBAAqCW,cAAc,CAAE,CAACjlB,KAAK8lB,UAAW,kBAAmBnB,MAAM,UAChK,IAAI,KAAe,UAAUD,WAAc1kB,KAAKskB,OAAR,UAA4BtkB,KAAKskB,OAAR,WAAyBW,cAAc,CAAE,CAACjlB,KAAK8lB,UAAW,cAAenB,MAAM,QAE7I8B,EAAc9B,MAAM,GAAuB3kB,KAAMwlB,MAGhEA,GAAQ,IAAIzB,QACL,MAAM,WAA8B,GACvC,YAAYhB,EAAOxiB,EAAIxE,GACnB,IAAIwqB,EACJC,MAAMzD,EAAOxiB,EAAIxE,GACjB0pB,GAAMhE,IAAIzhB,UAAM,GAChB,GAAuBA,KAAMylB,GAAOllB,GACpCP,KAAK6lB,QAAU9pB,EAAKsF,QAEpBrB,KAAKC,MAAQlE,EAAKkE,MAClBD,KAAKskB,OAASvB,EAAMA,MAAMuB,OAC1BtkB,KAAKukB,QAAkC,QAAvBgC,EAAKxqB,EAAKwoB,eAA4B,IAAPgC,GAAgBA,EAEnE,gBACI,IAAIE,EAAgB,IAAI,GAAczmB,KAAKskB,OAAQtkB,KAAKukB,SAQxD,OAPAkC,EAAcC,aAAa1mB,KAAKC,MAAO,IACvCwmB,EAAcE,WAAW,GAAI,CACzB,IAAI,KAAe,KAAKhC,MAAM3kB,KAAK6lB,WAEvCY,EAAcG,aAAa,CAAI5mB,KAAKskB,OAAR,QAA0BtkB,KAAKskB,OAAR,UAAyB,CACxE,IAAI,KAAe,UAAUI,WAAc1kB,KAAKskB,OAAR,UAA4BtkB,KAAKskB,OAAR,WAAyBW,cAAc,CAAE,CAACjlB,KAAK8lB,UAAW,cAAenB,MAAM,QAE7I8B,EAAc9B,MAAM,GAAuB3kB,KAAMylB,MAGhEA,GAAQ,IAAI1B,QACL,MAAM,WAA6B,GACtC,YAAYhB,EAAOxiB,EAAIxE,GACnB,IAAIwqB,EACJC,MAAMzD,EAAOxiB,EAAIxE,GACjB2pB,GAAMjE,IAAIzhB,UAAM,GAChB,GAAuBA,KAAM0lB,GAAOnlB,GACpCP,KAAK6lB,QAAU9pB,EAAKsF,QACpBrB,KAAKC,MAAQlE,EAAKkE,MAClBD,KAAKskB,OAASvB,EAAMA,MAAMuB,OAC1BtkB,KAAKukB,QAAkC,QAAvBgC,EAAKxqB,EAAKwoB,eAA4B,IAAPgC,GAAgBA,EAEnE,gBACI,IAAIE,EAAgB,IAAI,GAAczmB,KAAKskB,OAAQtkB,KAAKukB,SAcxD,OAbAkC,EAAcC,aAAa1mB,KAAKC,MAAO,GAAI,CACvC,IAAI,KAAe,KAAKykB,WAAc1kB,KAAKskB,OAAR,SAAuBW,cAAc,CACpE,CAACjlB,KAAK8lB,UAAW,gBACjB,CAAC9lB,KAAK+lB,SAAU,UACjBpB,UAEP8B,EAAcE,WAAW,GAAI,CACzB,IAAI,KAAe,KAAKhC,MAAM3kB,KAAK6lB,WAEvCY,EAAcG,aAAa,CAAI5mB,KAAKskB,OAAR,QAA0BtkB,KAAKskB,OAAR,UAAyB,CACxE,IAAI,KAAe,UAAUI,WAAc1kB,KAAKskB,OAAR,UAA4BtkB,KAAKskB,OAAR,uBAAqCW,cAAc,CAAE,CAACjlB,KAAK8lB,UAAW,cAAenB,MAAM,MAC5J,IAAI,KAAe,UAAUD,WAAc1kB,KAAKskB,OAAR,UAA4BtkB,KAAKskB,OAAR,WAAyBW,cAAc,CAAE,CAACjlB,KAAK8lB,UAAW,eAAgBnB,MAAM,SAE9I8B,EAAc9B,MAAM,GAAuB3kB,KAAM0lB,MAGhEA,GAAQ,IAAI3B,Q,ICrKR8C,GAAMC,GAAe,GAAWC,GAAUC,G,SAb1C,GAAkE,SAAU3F,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP,GAAkE,SAAUwiB,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAKnB,MAAM,GACT,YAAYsC,GACRkD,GAAKpF,IAAIzhB,UAAM,GACf8mB,GAAcrF,IAAIzhB,UAAM,GACxB,GAAUyhB,IAAIzhB,UAAM,GACpB+mB,GAAStF,IAAIzhB,UAAM,GACnBgnB,GAAYvF,IAAIzhB,UAAM,GACtB,GAAuBA,KAAM6mB,GAAMlD,GACnC,GAAuB3jB,KAAM8mB,GAAe,IAAI,MAChD,GAAuB9mB,KAAM8mB,IAAeG,YAAYjnB,KAAKknB,OAAO9nB,KAAKY,OACzE,GAAuBA,KAAMgnB,QAAaviB,GAC1C,GAAuBzE,KAAM,IAAW,GACxC,GAAuBA,KAAM+mB,GAAU,MAE3C,SACS,GAAuB/mB,KAAM8mB,IAAeK,eAC7C,GAAuBnnB,KAAM8mB,IAAeM,SAC5C,GAAuBpnB,KAAM+mB,GAAU,GAAuB/mB,KAAM6mB,IAAMnJ,GAAG,KAAO2J,UAAWrnB,KAAKsnB,WAAWloB,KAAKY,SAG5H,SACQ,GAAuBA,KAAM8mB,IAAeK,eAC5C,GAAuBnnB,KAAM8mB,IAAelJ,SACF,MAA1C,GAAuB5d,KAAM+mB,KAAqB,GAAuB/mB,KAAM6mB,IAAMjJ,OAAO,KAAOyJ,UAAW,GAAuBrnB,KAAM+mB,MAGnJ,aACI,OAAO,GAAuB/mB,KAAM8mB,IAAeK,aAEvD,OAAOprB,GACH,IAAI,GAAuBiE,KAAM,IAGjC,OAAQjE,EAAK0E,MACT,IAAK,OACD,GAAuBT,KAAMgnB,GAAajrB,GAC1C,MACJ,IAAK,OACG,GAAuBiE,KAAMgnB,MAC7B,GAAuBhnB,KAAM6mB,IAAMnf,KAAK,KAAO6f,YAAa,KAAM,GAAuBvnB,KAAMgnB,KAC/F,GAAuBhnB,KAAMgnB,QAAaviB,IAE9C,GAAuBzE,KAAM6mB,IAAMnf,KAAK,KAAO6f,YAAa,KAAMxrB,GAClE,MACJ,IAAK,KACD,GAAI,GAAuBiE,KAAMgnB,IAE7B,YADA,GAAuBhnB,KAAMgnB,QAAaviB,GAG9C,GAAuBzE,KAAM6mB,IAAMnf,KAAK,KAAO6f,YAAa,KAAMxrB,IAI9E,WAAWqL,GACP,GAAuBpH,KAAM,GAAWoH,IAGhDyf,GAAO,IAAI9C,QAAW+C,GAAgB,IAAI/C,QAAW,GAAY,IAAIA,QAAWgD,GAAW,IAAIhD,QAAWiD,GAAc,IAAIjD,QCzE5H,IAsBIyD,GAAeC,GAAWC,GAAYC,GAAYC,GAAgBC,GAAOC,GAAYC,GAtBrF,GAAwC,SAAUvH,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASxjB,EAAUuB,GAAS,IAAMkiB,EAAKJ,EAAUK,KAAKniB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACpF,SAASiX,EAASpiB,GAAS,IAAMkiB,EAAKJ,EAAiB,MAAE9hB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACvF,SAAS+W,EAAK3jB,GAJlB,IAAeyB,EAIazB,EAAO8jB,KAAOL,EAAQzjB,EAAOyB,QAJ1CA,EAIyDzB,EAAOyB,MAJhDA,aAAiB6hB,EAAI7hB,EAAQ,IAAI6hB,GAAE,SAAUG,GAAWA,EAAQhiB,OAITsiB,KAAK7jB,EAAW2jB,GAClGF,GAAMJ,EAAYA,EAAUzjB,MAAMsjB,EAASC,GAAc,KAAKO,YAGlE,GAAkE,SAAUK,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP,GAAkE,SAAUwiB,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAKnB,MAAM,GACT,YAAY2G,EAAa1D,EAAQtB,GAC7BwE,GAAc/F,IAAIzhB,UAAM,GACxBynB,GAAUhG,IAAIzhB,UAAM,GACpB0nB,GAAWjG,IAAIzhB,UAAM,GACrB2nB,GAAWlG,IAAIzhB,UAAM,GACrB4nB,GAAenG,IAAIzhB,UAAM,GACzB6nB,GAAMpG,IAAIzhB,UAAM,GAChB8nB,GAAWrG,IAAIzhB,UAAM,GACrB+nB,GAAYtG,IAAIzhB,UAAM,GACtB,GAAuBA,KAAMwnB,GAAeQ,GAC5C,GAAuBhoB,KAAMynB,GAAW,IAAInD,WAC5C,GAAuBtkB,KAAM0nB,GAAepD,EAAH,UACzC,GAAuBtkB,KAAM2nB,GAAerD,EAAH,WACzC,GAAuBtkB,KAAM4nB,GAAgB5E,GAC7C,GAAuBhjB,KAAM6nB,IAAO,GACpC,GAAuB7nB,KAAM8nB,GAAexD,EAAH,uBACzC,GAAuBtkB,KAAM+nB,GAAgBzD,EAAH,wBAE9C,KAAKjjB,GACD,OAAO,GAAUrB,UAAM,OAAQ,GAAQ,YACnC,GAAI,GAAuBA,KAAM6nB,IAC7B,OAAO,EAEX,GAAuB7nB,KAAM6nB,IAAO,GACpC,IAAII,EAAe7jB,SAASgiB,cAAc,GAAuBpmB,KAAMynB,KA0CvE,OAzCK,aAAGQ,KACJA,EAAe7jB,SAASmQ,cAAc,OACtC0T,EAAalT,UAAUC,IAAI,GAAuBhV,KAAM0nB,KACxDtjB,SAAS2G,KAAKyJ,YAAYyT,SACpB,aAAM,KAEhB,GAAuBjoB,KAAMwnB,IAAevF,OAAO,KAE/CgG,EAAahT,YAAc5T,EAE3B4mB,EAAalT,UAAUC,IAAI,KAAQkO,cAEnC+E,EAAalT,UAAUC,IAAI,GAAuBhV,KAAM8nB,MACzD9nB,YACG,aAAM,GAAuBA,KAAM4nB,KACzC,GAAuB5nB,KAAMwnB,IAAevF,OAAO,KAE/CgG,EAAalT,UAAUN,OAAO,KAAQyO,cAEtC+E,EAAalT,UAAUN,OAAO,GAAuBzU,KAAM8nB,KAE3DG,EAAalT,UAAUC,IAAI,GAAuBhV,KAAM2nB,MACzD3nB,YACG,aAAM,KACZ,GAAuBA,KAAMwnB,IAAevF,OAAO,KAE/CgG,EAAalT,UAAUC,IAAI,KAAQkO,cAEnC+E,EAAalT,UAAUC,IAAI,GAAuBhV,KAAM+nB,MACzD/nB,MACHyV,WAAW,KACP,GAAuBzV,KAAMwnB,IAAevF,OAAO,KAE/CgG,EAAalT,UAAUN,OAAO,KAAQyO,cAEtC+E,EAAalT,UAAUN,OAAO,GAAuBzU,KAAM+nB,KAE3DE,EAAalT,UAAUN,OAAO,GAAuBzU,KAAM2nB,MAC5D3nB,MACH,GAAuBA,KAAM6nB,IAAO,IACrC,GAAuB7nB,KAAM4nB,MACzB,MAInBJ,GAAgB,IAAIzD,QAAW0D,GAAY,IAAI1D,QAAW2D,GAAa,IAAI3D,QAAW4D,GAAa,IAAI5D,QAAW6D,GAAiB,IAAI7D,QAAW8D,GAAQ,IAAI9D,QAAW+D,GAAa,IAAI/D,QAAWgE,GAAc,IAAIhE,QChGvN,IAsBI,GAAWmE,GAAM,GAAWC,GAAc,GAtB1C,GAAwC,SAAU3H,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASxjB,EAAUuB,GAAS,IAAMkiB,EAAKJ,EAAUK,KAAKniB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACpF,SAASiX,EAASpiB,GAAS,IAAMkiB,EAAKJ,EAAiB,MAAE9hB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACvF,SAAS+W,EAAK3jB,GAJlB,IAAeyB,EAIazB,EAAO8jB,KAAOL,EAAQzjB,EAAOyB,QAJ1CA,EAIyDzB,EAAOyB,MAJhDA,aAAiB6hB,EAAI7hB,EAAQ,IAAI6hB,GAAE,SAAUG,GAAWA,EAAQhiB,OAITsiB,KAAK7jB,EAAW2jB,GAClGF,GAAMJ,EAAYA,EAAUzjB,MAAMsjB,EAASC,GAAc,KAAKO,YAGlE,GAAkE,SAAUK,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP,GAAkE,SAAUwiB,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAMnB,MAAM,GACT,YAAYS,GACR,GAAUL,IAAIzhB,UAAM,GACpBkoB,GAAKzG,IAAIzhB,UAAM,GACf,GAAUyhB,IAAIzhB,UAAM,GACpBmoB,GAAa1G,IAAIzhB,UAAM,GACvB,GAAcyhB,IAAIzhB,UAAM,GACxB,GAAuBA,KAAM,GAAe8hB,GAC5C,GAAuB9hB,KAAMkoB,GAAM,KAAiBzpB,IAAI,sBACxD,GAAuBuB,KAAM,GAAW,IACxC,GAAuBA,KAAM,IAAW,GACxC,GAAuBA,KAAMmoB,GAAc,IAE/C,YAAYxG,GACR,GAAuB3hB,KAAM,GAAW2hB,GAE5C,UAAUrc,GACN,GAAuBtF,KAAMmoB,GAAc7iB,GAE/C,kBAAkB8iB,EAAgBC,EAAaC,EAAQC,GACnDF,EAAYtT,UAAUC,IAAI,KAAQkO,cAClCkF,EAAerT,UAAUC,IAAIuT,GAC7BF,EAAYtT,UAAUC,IAAIsT,GAE9B,gBAAgBF,EAAgBC,EAAaC,EAAQC,GACjDF,EAAYtT,UAAUN,OAAO,KAAQyO,cACrCkF,EAAerT,UAAUN,OAAO8T,GAChCF,EAAYtT,UAAUN,OAAO6T,GAC7BF,EAAerT,UAAUN,OAAO,GAAuBzU,KAAMmoB,KAC7DE,EAAYtT,UAAUC,IAAI,GAAuBhV,KAAMmoB,KAE3D,YAAYrnB,EAAO+B,EAAS4O,GACxB,OAAO3Q,GAAS,GAAKA,IAAU+B,GAAW/B,EAAQ2Q,EAEtD,WAAW+W,EAAU3lB,GACjB,OAAO,GAAU7C,UAAM,OAAQ,GAAQ,YAOnC,OANAA,KAAK2iB,OACL,GAAuB3iB,KAAMkoB,IAAMxE,MAAM,yBAAyB7gB,QAAc2lB,KAC5E3lB,GAAW,GACX,GAAuB7C,KAAM,IAAW6C,GAASkS,UAAUN,OAAO,GAAuBzU,KAAMmoB,KACnG,GAAuBnoB,KAAM,IAAWwoB,GAAUzT,UAAUC,IAAI,GAAuBhV,KAAMmoB,KAC7FnoB,KAAK4iB,UACE,KAGf,wBAAwB4F,EAAUC,EAAaC,EAAcloB,EAAUqC,GACnE,OAAO,GAAU7C,UAAM,OAAQ,GAAQ,YACnCA,KAAK2iB,OACL,GAAuB3iB,KAAMkoB,IAAMxE,MAAM,yBAAyB7gB,QAAc2lB,KAChF,MAAMJ,EAAiB,GAAuBpoB,KAAM,IAAW6C,GACzDwlB,EAAc,GAAuBroB,KAAM,IAAWwoB,GAM5D,OALA,GAAuBxoB,KAAM,IAAeiiB,OAAOjiB,KAAK2oB,kBAAmB3oB,KAAMooB,EAAgBC,EAAaI,EAAaC,GAC3HjT,WAAW,KACP,GAAuBzV,KAAM,IAAeiiB,OAAOjiB,KAAK4oB,gBAAiB5oB,KAAMooB,EAAgBC,EAAaI,EAAaC,GACzH1oB,KAAK4iB,UACNpiB,IACI,KAGf,kBACI,IAAK,aAAG,GAAuBR,KAAMmoB,KACjC,OAAQ,EAEZ,IAAIxd,EAAM3K,KAAKyR,QACf,IAAK,IAAIpV,EAAI,EAAGA,EAAIsO,EAAKtO,IACrB,GAAI,GAAuB2D,KAAM,IAAW3D,GAAG0Y,UAAUgN,SAAS,GAAuB/hB,KAAMmoB,KAC3F,OAAO9rB,EAGf,OAAQ,EAEZ,WACI,OAAO,GAAuB2D,KAAM,IAExC,QACI,OAAI,GAAuBA,KAAM,KAC7B,GAAuBA,KAAMkoB,IAAMtE,QAAQ,uCAAwC,UAC5E,GAED,aAAG,GAAuB5jB,KAAMmoB,OAIjCnoB,KAAKyR,SAAW,KACrB,GAAuBzR,KAAMkoB,IAAMtE,QAAQ,yBAA0B,UAC9D,IALP,GAAuB5jB,KAAMkoB,IAAMtE,QAAQ,yCAA0C,UAC9E,GAQf,QACI,OAAO,GAAuB5jB,KAAM,IAAa,GAAuBA,KAAM,IAAWzD,QAAU,EAEvG,OACI,GAAuByD,KAAM,IAAW,GAE5C,SACI,GAAuBA,KAAM,IAAW,IAGhD,GAAY,IAAI+jB,QAAWmE,GAAO,IAAInE,QAAW,GAAY,IAAIA,QAAWoE,GAAe,IAAIpE,QAAW,GAAgB,IAAIA,QC7H9H,IAsBI,GAAM,GAAM8E,GAtBZ,GAAwC,SAAUrI,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASxjB,EAAUuB,GAAS,IAAMkiB,EAAKJ,EAAUK,KAAKniB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACpF,SAASiX,EAASpiB,GAAS,IAAMkiB,EAAKJ,EAAiB,MAAE9hB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACvF,SAAS+W,EAAK3jB,GAJlB,IAAeyB,EAIazB,EAAO8jB,KAAOL,EAAQzjB,EAAOyB,QAJ1CA,EAIyDzB,EAAOyB,MAJhDA,aAAiB6hB,EAAI7hB,EAAQ,IAAI6hB,GAAE,SAAUG,GAAWA,EAAQhiB,OAITsiB,KAAK7jB,EAAW2jB,GAClGF,GAAMJ,EAAYA,EAAUzjB,MAAMsjB,EAASC,GAAc,KAAKO,YAGlE,GAAkE,SAAUK,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP,GAAkE,SAAUwiB,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAKnB,MAAM,GACT,YAAYM,EAAUG,GAClB,GAAKL,IAAIzhB,UAAM,GACf,GAAKyhB,IAAIzhB,UAAM,GACf6oB,GAAQpH,IAAIzhB,UAAM,GAClB,GAAuBA,KAAM,GAAM,KAAiBvB,IAAI,sBACxD,GAAuBuB,KAAM6oB,GAAS,IAAI,GAAwB/G,IAClE,GAAuB9hB,KAAM6oB,IAASC,YAAYnH,GAClD,GAAuB3hB,KAAM,GAAMmd,KAAK0E,OAE5C,UAAUvc,GACN,GAAuBtF,KAAM6oB,IAASE,UAAUzjB,GAEpD,YAAYqc,GACR,GAAuB3hB,KAAM6oB,IAASC,YAAYnH,GAEtD,MAAMnM,GACF,GAAuBxV,KAAM6oB,IAASlH,WAAWhE,QAAQ,CAACrJ,EAASxT,KAC/DwT,EAAQsD,iBAAiB,QAAS,KAC9B5X,KAAKyhB,IAAI3gB,GAAOqgB,KAAK,KACb3L,GACAA,EAASlB,EAASxT,SAMtC,OACI,OAAO,GAAUd,UAAM,OAAQ,GAAQ,YACnC,IAAK,GAAuBA,KAAM6oB,IAASG,QACvC,OAAO,EAEX,IAAIC,EAAS,GAAuBjpB,KAAM6oB,IAASK,kBAAoB,EACvE,OAAOlpB,KAAKyhB,IAAIwH,GAAUjpB,KAAKzD,SAAW,EAAI0sB,MAGtD,WACI,OAAO,GAAUjpB,UAAM,OAAQ,GAAQ,YACnC,IAAK,GAAuBA,KAAM6oB,IAASG,QACvC,OAAO,EAEX,IAAIC,EAAS,GAAuBjpB,KAAM6oB,IAASK,kBAAoB,EACvE,OAAOlpB,KAAKyhB,IAAIwH,EAAS,EAAIjpB,KAAKzD,SAAW,EAAI0sB,MAGzD,IAAInoB,GACA,OAAO,GAAUd,UAAM,OAAQ,GAAQ,YACnC,IAAI6C,EAAU,GAAuB7C,KAAM6oB,IAASK,kBACpD,SAAK,GAAuBlpB,KAAM6oB,IAASG,UAAY,GAAuBhpB,KAAM6oB,IAASM,YAAYroB,EAAO+B,EAAS7C,KAAKzD,YAGvH,GAAuByD,KAAM6oB,IAASO,WAAWtoB,EAAO+B,MAGvE,iBAAiB/B,EAAO2nB,EAAaC,EAAcloB,GAC/C,OAAO,GAAUR,UAAM,OAAQ,GAAQ,YACnC,IAAI6C,EAAU,GAAuB7C,KAAM6oB,IAASK,kBACpD,SAAK,GAAuBlpB,KAAM6oB,IAASG,UAAY,GAAuBhpB,KAAM6oB,IAASM,YAAYroB,EAAO+B,EAAS7C,KAAKzD,YAGvH,GAAuByD,KAAM6oB,IAASQ,wBAAwBvoB,EAAO2nB,EAAaC,EAAcloB,EAAUqC,MAGzH,kBACI,OAAO,GAAuB7C,KAAM6oB,IAASK,kBAEjD,SACI,OAAO,GAAuBlpB,KAAM6oB,IAASpX,QAEjD,UACI,OAAOzR,KAAKzD,SAAW,GAAK4gB,KAAK0E,MAAQ,GAAuB7hB,KAAM,IAAQ,MAGtF,GAAO,IAAI+jB,QAAW,GAAO,IAAIA,QAAW8E,GAAU,IAAI9E,QClG1D,IAsBIuF,GAAUC,GAAU,GAtBpB,GAAwC,SAAU/I,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASxjB,EAAUuB,GAAS,IAAMkiB,EAAKJ,EAAUK,KAAKniB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACpF,SAASiX,EAASpiB,GAAS,IAAMkiB,EAAKJ,EAAiB,MAAE9hB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACvF,SAAS+W,EAAK3jB,GAJlB,IAAeyB,EAIazB,EAAO8jB,KAAOL,EAAQzjB,EAAOyB,QAJ1CA,EAIyDzB,EAAOyB,MAJhDA,aAAiB6hB,EAAI7hB,EAAQ,IAAI6hB,GAAE,SAAUG,GAAWA,EAAQhiB,OAITsiB,KAAK7jB,EAAW2jB,GAClGF,GAAMJ,EAAYA,EAAUzjB,MAAMsjB,EAASC,GAAc,KAAKO,YAGlE,GAAkE,SAAUK,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP,GAAkE,SAAUwiB,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAKnB,MAAM,GACT,YAAYmI,GACRF,GAAS7H,IAAIzhB,UAAM,GACnBupB,GAAS9H,IAAIzhB,UAAM,GACnB,GAAKyhB,IAAIzhB,UAAM,GACf,GAAuBA,KAAMspB,GAAUE,QAAyCA,EAAU,IAC1F,GAAuBxpB,KAAM,GAAM,KAAiBvB,IAAI,qBACxD,GAAuBuB,KAAMupB,GAAU,IAE3C,KAAK3H,GACD,GAAuB5hB,KAAM,IAAM0jB,MAAM,mCAAqC,GAAuB1jB,KAAMspB,IAAU/sB,QACrH,GAAuByD,KAAMupB,GAAU,GAAuBvpB,KAAMspB,IAAU9b,OAAQic,GAC3E,aAAGA,EAAOC,YAErB,GAAuB1pB,KAAMspB,IAAU3L,QAAQ8L,IAC3CA,EAAOphB,KAAKuZ,GACZA,EAAMmB,MAAMyG,QAAQC,EAAO9c,aAAe8c,EAAO1G,QAErD,GAAuB/iB,KAAM,IAAM0jB,MAAM,iCAE7C,IAAItlB,GACA,GAAK,aAAGA,GAGR,OAAO,GAAuB4B,KAAMspB,IAAU1d,KAAKpM,GAAKA,EAAEpB,OAASA,GAEvE,WAAWsrB,GACP,OAAO,GAAU1pB,UAAM,OAAQ,GAAQ,YACnC,IAAI2pB,EAAQ,GAKZ,OAJA,GAAuB3pB,KAAMupB,IAAU5L,QAAS8L,IAC5CE,EAAM9sB,KAAK4sB,EAAOC,SAASA,cAEZ9I,QAAQgJ,IAAID,IACjB/d,KAAKyU,WAM/BiJ,GAAW,IAAIvF,QAAWwF,GAAW,IAAIxF,QAAW,GAAO,IAAIA,QChE/D,IAsBI,GAAM8F,GAAmBC,GAAe,GAAQ,GAAUC,GAAaC,GAAcC,GAAeC,GAtBpG,GAAwC,SAAU1J,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASxjB,EAAUuB,GAAS,IAAMkiB,EAAKJ,EAAUK,KAAKniB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACpF,SAASiX,EAASpiB,GAAS,IAAMkiB,EAAKJ,EAAiB,MAAE9hB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACvF,SAAS+W,EAAK3jB,GAJlB,IAAeyB,EAIazB,EAAO8jB,KAAOL,EAAQzjB,EAAOyB,QAJ1CA,EAIyDzB,EAAOyB,MAJhDA,aAAiB6hB,EAAI7hB,EAAQ,IAAI6hB,GAAE,SAAUG,GAAWA,EAAQhiB,OAITsiB,KAAK7jB,EAAW2jB,GAClGF,GAAMJ,EAAYA,EAAUzjB,MAAMsjB,EAASC,GAAc,KAAKO,YAGlE,GAAkE,SAAUK,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP,GAAkE,SAAUwiB,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAenB,MAAM,GACT,YAAY0B,EAAOyG,EAASW,GACxB,GAAK1I,IAAIzhB,UAAM,GACf6pB,GAAkBpI,IAAIzhB,UAAM,GAC5B8pB,GAAcrI,IAAIzhB,UAAM,GACxB,GAAOyhB,IAAIzhB,UAAM,GACjB,GAASyhB,IAAIzhB,UAAM,GACnB+pB,GAAYtI,IAAIzhB,UAAM,GACtBgqB,GAAavI,IAAIzhB,UAAM,GACvBiqB,GAAcxI,IAAIzhB,UAAM,GACxBkqB,GAAmBzI,IAAIzhB,UAAM,GAC7B,KAAQskB,OAASvB,EAAMuB,OACvB,KAAQ8F,SAAWrH,EAAMqH,SACzB,GAAuBpqB,KAAM,GAAU,IAAI,GAAiBwpB,IAC5D,GAAuBxpB,KAAM+pB,GAAaI,QAA+CA,EAAa,IACtG,GAAuBnqB,KAAM,GAAQ,IAAI,KAAS+iB,IAClD,GAAuB/iB,KAAM,GAAM,KAAiBvB,IAAI,gBACxD,GAAuBuB,KAAMgqB,GAAcjH,EAAMiD,MACjD,GAAuBhmB,KAAMiqB,GAAe,IAAI,GAAgB,GAAuBjqB,KAAM,IAAQ2jB,MACrG,GAAuB3jB,KAAM6pB,QAAmBplB,GAChD,GAAuBzE,KAAM8pB,QAAerlB,GAC5C,GAAuBzE,KAAMkqB,GAAoB,IAErD,OACI,IAAI3D,EAGJ,GAFA,GAAuBvmB,KAAM,IAAM0jB,MAAM,mBAAoB,SAExD,aAAGhkB,OAAO2qB,kBACX,MAAM,IAAI,KAAqB,qCAEnC,GAAuBrqB,KAAM8pB,GAAe,IAAI,GAAgB,GAAuB9pB,KAAM,IAAQ8hB,aAAc,GAAuB9hB,KAAM,IAAQ+iB,MAAMuB,OAAgF,QAAvEiC,EAAK,GAAuBvmB,KAAM,IAAQ+iB,MAAMuH,yBAAsC,IAAP/D,EAAgBA,EAAK,IAC3Q,GAAuBvmB,KAAMkqB,GAAoB,GAAuBlqB,KAAM+pB,IAAavkB,IAAI+kB,GAAcA,EAAEC,YAC/G,MAAMC,EAAe,aAAG,GAAuBzqB,KAAMkqB,KAAuB,GAAuBlqB,KAAMgqB,IAAcU,iBAAiB,aAAuB,GAAuB1qB,KAAMkqB,MAAwB,KACpN,GAAI,aAAGO,GAAe,CAElB,GAAuBzqB,KAAM,IAAM0jB,MAAM,cAAc+G,EAAaluB,mBACpE,IAEIkuB,EAAa9M,QAASlY,IAClB,aAAmBA,EAAM,GAAuBzF,KAAM+pB,IAAc,GAAuB/pB,KAAMkqB,IAAqB,GAAuBlqB,KAAM,OAG3J,MAAOgK,GACH,GAAuBhK,KAAM,IAAM2qB,UAAU3gB,IAqBrD,OAlBA,GAAuBhK,KAAM,IAAM0jB,MAAM,eAAgB,QAEzD,GAAuB1jB,KAAM,IAAUqI,KAAK,GAAuBrI,KAAM,KACrE,aAAI,GAAuBA,KAAM+pB,IAAc,GAAuB/pB,KAAMkqB,OAC5E,GAAuBlqB,KAAM,IAAM0jB,MAAM,yBAA0B,QACnE,GAAuB1jB,KAAM6pB,GAAmB,IAAI,KAAoB,GAAuB7pB,KAAMgqB,IAAe,GAAuBhqB,KAAM,MACjJ,GAAuBA,KAAM6pB,IAAmBe,cAAc,GAAuB5qB,KAAM+pB,KAAc9E,cAAc,GAAuBjlB,KAAMkqB,KACpJ,GAAuBlqB,KAAM6pB,IAAmBgB,WAAW,GAAuB7qB,KAAM,KACxF,GAAuBA,KAAM6pB,IAAmBxN,SAEpD,GAAuBrc,KAAM,IAAM0jB,MAAM,sBAAuB,QAChE,GAAuB1jB,KAAM,IAAQ8hB,aAAaG,OAAO,KACrD,GAAuBjiB,KAAM,IAAQ8qB,YAAY,KAAcR,kBAAsB,GAAuBtqB,KAAM,IAAQ+iB,MAAMuH,kBAA9C,MAClF,GAAuBtqB,KAAM,IAAQ8qB,YAAY,KAAc9H,cAAkB,GAAuBhjB,KAAM,IAAQ+iB,MAAMC,cAA9C,MAC9E,GAAuBhjB,KAAM,IAAQ8qB,YAAY,KAAcC,mBAAuB,GAAuB/qB,KAAM,IAAQ+iB,MAAMgI,mBAA9C,OACpF,MACH,GAAuB/qB,KAAMiqB,IAAe7C,SAC5C,GAAuBpnB,KAAM,IAAQ2jB,IAAIjc,KAAK,KAAOsjB,qBAAsB,MACpEhrB,KAEX,SACQ,GAAuBA,KAAM6pB,KAC7B,GAAuB7pB,KAAM6pB,IAAmBlU,OACpD,GAAuB3V,KAAMiqB,IAAerM,SAC5C,GAAuB5d,KAAM,IAAQ2jB,IAAIjc,KAAK,KAAOujB,kBAAmB,MAE5E,IAAIC,GACA,MAAMvJ,EAAW3hB,KAAK4pB,IAAIsB,GAC1B,IAAKvJ,EACD,OAGJ,OADmB,IAAI,GAAeA,EAAU,GAAuB3hB,KAAM,KAGjF,WAAWkrB,GACP,MAAMvJ,EAAW3hB,KAAK4pB,IAAIsB,GAC1B,IAAK,aAAGvJ,GACJ,OAIJ,OADc,IAAI,GAAkBA,EAAU,GAAuB3hB,KAAM,IAAQ8hB,cAGvF,MAAMzgB,GACF,OAAO,GAAUrB,UAAM,OAAQ,GAAQ,YACnC,QAAK,aAAIqB,EAAS,GAAuBrB,KAAM8pB,MAIxC,GAAuB9pB,KAAM8pB,IAAeqB,KAAK9pB,MAGhE,OAAO6pB,GACH,OAAO9mB,SAASgiB,cAAc8E,GAElC,IAAIA,GACA,MAAME,EAAQhnB,SAASsmB,iBAAiBQ,GACxC,GAAK,aAAGE,GAGR,MAAO,IAAIA,GAEf,WACI,OAAO,GAAuBprB,KAAM,IAExC,GAAGoM,EAAOoJ,EAAUlB,GACX,aAAIlI,EAAOoJ,IACZ,GAAuBxV,KAAM,IAAMmK,MAAM,sBAAuB,MAEpE,GAAuBnK,KAAM,IAAQ2jB,IAAIjG,GAAGtR,EAAOoJ,EAAUlB,GAEjE,OAAOlI,EAAO7L,GACL,aAAI6L,EAAO7L,IACZ,GAAuBP,KAAM,IAAMmK,MAAM,sBAAuB,UAEpE,GAAuBnK,KAAM,IAAQ2jB,IAAI/F,OAAOxR,EAAO7L,GAE3D,UAAU6L,GACD,aAAGA,IACJ,GAAuBpM,KAAM,IAAMmK,MAAM,sBAAuB,aAEpE,GAAuBnK,KAAM,IAAQ2jB,IAAI0H,UAAUjf,GAEvD,KAAKA,EAAOkI,KAAYiP,GACpB,IAAK,aAAInX,EAAOkI,GAEZ,YADA,GAAuBtU,KAAM,IAAM4jB,QAAQ,gCAAiC,QAGhF,IACIJ,GADwB,iBAAZlP,EAAuBlQ,SAASgiB,cAAc9R,GAAWA,GAC3DmP,MACT,aAAGD,GAIR,GAAuBxjB,KAAM,IAAQ2jB,IAAIjc,KAAK0E,EAAOoX,KAASD,GAH1D,GAAuBvjB,KAAM,IAAM4jB,QAAQ,+BAAgC,QAKnF,MAAMrjB,EAAIE,EAAM1E,GACZ,IAAIuvB,ENCL,MACH,WAAW/qB,EAAIE,EAAM1E,EAAM6lB,GACvB,MAAa,SAATnhB,EACO,IAAI,GAAsBmhB,EAAOrhB,EAAIxE,GAE9B,gBAAT0E,EACE,IAAI,GAAqBmhB,EAAOrhB,EAAIxE,GAE7B,aAAT0E,EACE,IAAI,GAAgBmhB,EAAOrhB,EAAIxE,QADrC,IMTuB0C,IAAI8B,EAAIE,EAAM1E,EAAM,GAAuBiE,KAAM,KACxEsrB,EAILA,EAAMH,KAAK,GAAuBnrB,KAAMgqB,KAHpC,GAAuBhqB,KAAM,IAAMmK,MAAM,iCAKjD,UAAU/L,GACN,OAAO,GAAuB4B,KAAM,IAAUvB,IAAIL,GAEtD,iBAAiBkW,EAASgS,EAAKvqB,GAC3B,OAAK,aAAGuqB,IAAS,GAAuBtmB,KAAMkqB,IAAoBrX,SAASyT,KAItE,aAAehS,EAASgS,EAAKvqB,KAC9B,GAAuBiE,KAAM,IAAMmK,MAAM,4CAClC,IALP,GAAuBnK,KAAM,IAAMmK,MAAM,iDAClC,IASnB,GAAO,IAAI4Z,QAAW8F,GAAoB,IAAI9F,QAAW+F,GAAgB,IAAI/F,QAAW,GAAS,IAAIA,QAAW,GAAW,IAAIA,QAAWgG,GAAc,IAAIhG,QAAWiG,GAAe,IAAIjG,QAAWkG,GAAgB,IAAIlG,QAAWmG,GAAqB,IAAInG,Q,IClLzPwH,G,SAtBA,GAAwC,SAAU/K,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASxjB,EAAUuB,GAAS,IAAMkiB,EAAKJ,EAAUK,KAAKniB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACpF,SAASiX,EAASpiB,GAAS,IAAMkiB,EAAKJ,EAAiB,MAAE9hB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACvF,SAAS+W,EAAK3jB,GAJlB,IAAeyB,EAIazB,EAAO8jB,KAAOL,EAAQzjB,EAAOyB,QAJ1CA,EAIyDzB,EAAOyB,MAJhDA,aAAiB6hB,EAAI7hB,EAAQ,IAAI6hB,GAAE,SAAUG,GAAWA,EAAQhiB,OAITsiB,KAAK7jB,EAAW2jB,GAClGF,GAAMJ,EAAYA,EAAUzjB,MAAMsjB,EAASC,GAAc,KAAKO,YAGlE,GAAkE,SAAUK,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP,GAAkE,SAAUwiB,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAQnB,MAAM,GACT,cACIkK,GAAQ9J,IAAIzhB,UAAM,GAClB,GAAuBA,KAAMurB,GAAS7rB,QAE1C,KAAKqjB,GACD,IAAIwD,EAAIiF,EACR,OAAO,GAAUxrB,UAAM,OAAQ,GAAQ,YACnC,IAAIoX,EAAW5a,OAAOivB,OAAOjvB,OAAOivB,OAAO,GAAI,IAAI,MAAiB1I,EAAMA,OAC1E,MAAM2I,EAAYtU,EAASuU,IACrBvuB,EAAS,CACXA,QAAQ,GAEZ,GAAI,aAAG,GAAuB4C,KAAMurB,IAASG,IAEzC,OADAtuB,EAAOiE,QAAU,kCACVjE,EAEX,GAAI,aAAG2lB,EAAM6I,OACT,IAAK,IAAIzmB,KAAQ4d,EAAM6I,MACnB,KAAMzmB,GAAQ4d,EAAM6I,MAAMzmB,GAGlC,GAAI,aAAG4d,EAAM8I,iBACT,IAAK,IAAIC,KAAa/I,EAAM8I,gBACxB,KAA6BC,GAAa/I,EAAM8I,gBAAgBC,GAGxE,IACI,GAAuB9rB,KAAMurB,IAASG,GAAa,IAAI,GAAYtU,EAAmC,QAAxBmP,EAAKxD,EAAMyG,eAA4B,IAAPjD,EAAgBA,EAAK,GAAgC,QAA3BiF,EAAKzI,EAAMoH,kBAA+B,IAAPqB,EAAgBA,EAAK,IAChM,GAAuBxrB,KAAMurB,IAASG,GAAWrjB,OAErD,MAAO2B,GAGH,OAFAE,QAAQC,MAAMH,GACd5M,EAAOiE,QAAU,yCACVjE,EAGX,OADAA,EAAOA,QAAS,EACTA,MAInBmuB,GAAU,IAAIxH,Q,IC/CVgI,G,kBAtBA,GAAwC,SAAUvL,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASxjB,EAAUuB,GAAS,IAAMkiB,EAAKJ,EAAUK,KAAKniB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACpF,SAASiX,EAASpiB,GAAS,IAAMkiB,EAAKJ,EAAiB,MAAE9hB,IAAW,MAAOmL,GAAK8W,EAAO9W,IACvF,SAAS+W,EAAK3jB,GAJlB,IAAeyB,EAIazB,EAAO8jB,KAAOL,EAAQzjB,EAAOyB,QAJ1CA,EAIyDzB,EAAOyB,MAJhDA,aAAiB6hB,EAAI7hB,EAAQ,IAAI6hB,GAAE,SAAUG,GAAWA,EAAQhiB,OAITsiB,KAAK7jB,EAAW2jB,GAClGF,GAAMJ,EAAYA,EAAUzjB,MAAMsjB,EAASC,GAAc,KAAKO,YAGlE,GAAkE,SAAUK,EAAUC,EAAYziB,GAClG,IAAKyiB,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAGxB,OADAF,EAAWG,IAAIJ,EAAUxiB,GAClBA,GAEP,GAAkE,SAAUwiB,EAAUC,GACtF,IAAKA,EAAWC,IAAIF,GAChB,MAAM,IAAIG,UAAU,kDAExB,OAAOF,EAAW7iB,IAAI4iB,IAOnB,MAAM,GACT,cACI0K,GAAetK,IAAIzhB,UAAM,GACzB,GAAuBA,KAAM+rB,IAAgB,GAEjD,KAAKhwB,GACD,IAAIwqB,EAAIiF,EACR,OAAO,GAAUxrB,UAAM,OAAQ,GAAQ,YACnC,GAAI,GAAuBA,KAAM+rB,IAE7B,OADA7hB,QAAQyO,IAAI,kCACL,EAEX,MAAMqT,EAAc,IAAI,GAClBC,EAAa,aAAW,CAC1BC,WAAW,EACXC,WAAW,IAETC,EAAgB,aAAc,CAChC9H,OAA8B,QAArBiC,EAAKxqB,EAAKgnB,aAA0B,IAAPwD,OAAgB,EAASA,EAAGjC,SAEtE,IAAI+H,EAAaJ,EACblwB,EAAKytB,UACL6C,EAAa7vB,OAAOivB,OAAOjvB,OAAOivB,OAAO,GAAIQ,GAAalwB,EAAKytB,UAEnE,IAAIpsB,QAAe4uB,EAAY3jB,KAAK,CAChC0a,MAAOhnB,EAAKgnB,MACZ6I,MAAO7vB,EAAK6vB,MACZpC,QAAS6C,EAETlC,WAAY,aAAGpuB,EAAKouB,YAAc,IAAIiC,KAAkBrwB,EAAKouB,YAAciC,EAC3EP,gBAAiB9vB,EAAK8vB,kBAE1B,OAAIzuB,EAAOA,QACP,GAAuB4C,KAAM+rB,IAAgB,IACtC,IAGP7hB,QAAQC,MAAM,yCAAmE,QAAzBqhB,EAAKpuB,EAAOiE,eAA4B,IAAPmqB,EAAgBA,EAAK,QAElHthB,QAAQyO,IAAI,6BACL,O,uKAInBoT,GAAiB,IAAIhI,QCrEd,IAAMuI,GAAb,WACI,c,4FAAc,S,UADlB,O,EAAA,G,EAAA,sCAKmBrsB,GACX,OAAOA,UAAS,Q,6BANxB,K,6rBC2BA,IAAMssB,GAAmBnoB,SAAS6hB,eAAe,qBAC3CvN,GAAUtU,SAAS6hB,eAAe,kBAExC,SAASuG,GAAQroB,GACTzE,OAAO+sB,sBACP/sB,OAAO+sB,uBAAsB,WACzBF,GAAiBtX,YAAc9Q,KAGnCooB,GAAiBtX,YAAc9Q,EAIvCyc,QAAQgJ,IAAI,CACR5H,MAAM,sBAAsBb,MAAK,SAAAuL,GAAQ,OAAIA,EAASC,UACtD3K,MAAM,0BAA0Bb,MAAK,SAAAuL,GAAQ,OAAIA,EAASC,YAC3DxL,MAAK,SAAC/jB,IAOT,SAAqBga,EAAewU,GAChCY,GAAQ,mBACR,IAAMI,EAAcxoB,SAAS6hB,eAAe,QACtClD,EAAQ,IAAI8J,KAClB9J,EAAMqH,SAA8B,gBAAnBhT,aAAA,EAAAA,EAAUrY,MAAwB,QAAU,QAC7DgkB,EAAMiD,KAAO4G,EACb7J,EAAM+J,SAAW,CACb,CACI1uB,KAAM,YACN2uB,UAAW,CAAC,eACZC,QAAS,SACTC,SAAU,GAEd,CACI7uB,KAAM,gBACN2uB,UAAW,CAAC,OAAQ,QAAS,UAC7BC,QAAS,SACTC,SAAU,GAEd,CACI7uB,KAAM,iBACN2uB,UAAW,CAAC,SAAU,SAAU,WAAY,SAAU,UACtDC,QAAS,SACTC,SAAU,GAEd,CACI7uB,KAAM,eACN2uB,UAAW,CAAC,UAAW,SAAU,eAAgB,eACjDC,QAAS,SACTC,SAAU,IAIlB,IAAMC,EAAwB,CAC1BnK,MAAOA,EACP6I,MAAO,SACAuB,MACAvB,IAIL7rB,EAAU,IAAImf,GACdkO,EAAe,IAAI3e,GAAc1O,GACjCstB,EAAiB,IAAIrN,GACrBsN,EAAc,IAAIhkB,GAAY+jB,GAC9BE,EAAkB,IAAIjN,GACtBkN,EAAe,IAAI9W,GAAa6W,GAChCE,EAAc,IAAI3tB,EAAgB,IAAIwsB,IAE5C5sB,OAAOsG,MAAQ0nB,eAAYxuB,OAAgDkuB,EAAaO,cACxFjuB,OAAO2O,aAAeqf,eAAYxuB,OAA4CouB,EAAYK,cAC1FjuB,OAAO4X,cAAgBoW,eAAYxuB,OAA8CsuB,EAAaG,cAC9FjuB,OAAO2E,MAAQqpB,eAAYxuB,OAA4CuuB,EAAYE,cAEnFlY,YAAW,YACP,IAAImY,IAAUvlB,KAAK6kB,GAAU/L,MAAK,SAAC/jB,GAC/B8M,QAAQyO,IAAIvB,EAASrY,MACrB8uB,SAAgB,gBAAC7P,GAAD,CAASjf,KAAMqY,EAASrY,OAAU6tB,GAClDlU,GAAQjE,SACRmY,EAAY7X,UAAUN,OAAO,eAElC,KAnEHqZ,CAAY1wB,EAAO,GAAIA,EAAO,OAJlC,OAKS,WACLmvB,GAAiBxX,UAAUC,IAAI,SAC/BwX,GAAQ","file":"stopwatch.index.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([45,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { IPushService } from \"src/core/services/interfaces\";\r\n\r\nexport const PUSH_ACTIONS = {\r\n    SET_NAVBAR_TITLE: \"SET_NAVBAR_TITLE\",\r\n    SET_NAVBAR_BG: \"SET_NAVBAR_BG\",\r\n}\r\n\r\nexport type PushServiceInput = string;\r\nexport type PushServiceOutput = string;\r\n\r\n\r\nexport class PushServiceFlow {\r\n    #service: IPushService;\r\n    constructor(service: IPushService) {\r\n        this.#service = service;\r\n    }\r\n\r\n    getActions() {\r\n        return {\r\n            [PUSH_ACTIONS.SET_NAVBAR_TITLE]: (title: string) => {\r\n                return this.#service.setNavbarTitle(title);\r\n            },\r\n            [PUSH_ACTIONS.SET_NAVBAR_BG]: (bg: string) => {\r\n                return bg;\r\n            }\r\n        }\r\n    }\r\n}","export const StopwatchActionType = {\r\n    EXERCISE: 'exercise',\r\n    BREAK: 'break',\r\n    COOLDOWN: \"cooldown\",\r\n    WARMUP: \"warmup\"\r\n}\r\n\r\nexport const TrainingState = {\r\n    DRAFT: 'draft',\r\n    PUBLISH: 'publish',\r\n    NEW: \"new\",\r\n}\r\n\r\nexport interface Settings {\r\n    darkMode: boolean;\r\n    soundEnabled: boolean;\r\n    isWelcome: boolean;\r\n    simpleView: boolean;\r\n}\r\n\r\nexport interface StopwatchAction {\r\n    id: string;\r\n    name: string;\r\n    duration: string;\r\n    type?: string;\r\n    color?: string;\r\n    removable?: boolean;\r\n    editable?: boolean;\r\n}\r\n\r\nexport interface Round {\r\n    actions: StopwatchAction[];\r\n    break?: number;\r\n    name?: string;\r\n}\r\n\r\nexport interface Training {\r\n    name: string;\r\n    description?: string;\r\n    id?: string;\r\n    rounds: Round[];\r\n    state: string;\r\n}\r\n\r\nexport class Exercise implements StopwatchAction {\r\n    id: string;\r\n    name: string;\r\n    duration: string;\r\n    type: string = StopwatchActionType.EXERCISE;\r\n    removable: false;\r\n    constructor(duration: number, name?: string) {\r\n        this.id = \"00001\";\r\n        this.duration = \"\" + duration;\r\n        this.name = name ? name : 'Exercise';\r\n    }\r\n}\r\n\r\nexport class WarmUp implements StopwatchAction {\r\n    id: string;\r\n    name: string;\r\n    duration: string;\r\n    type: string = StopwatchActionType.WARMUP;\r\n    removable: boolean = false;\r\n\r\n    constructor(duration: number) {\r\n        this.id = \"00002\";\r\n        this.duration = \"\" + duration;\r\n        this.name = \"Warm Up\"\r\n    }\r\n}\r\n\r\nexport class CoolDown implements StopwatchAction {\r\n    id: string;\r\n    name: string;\r\n    duration: string;\r\n    type: string = StopwatchActionType.COOLDOWN;\r\n    removable: false;\r\n    constructor(duration: number, name?: string) {\r\n        this.id = \"00003\";\r\n        this.duration = \"\" + duration;\r\n        this.name = name ? name : \"Cooldown\";\r\n    }\r\n}\r\n\r\nexport interface ActionsGroup {\r\n    [id: string]: StopwatchAction[];\r\n}\r\n\r\nexport interface RoundActions {\r\n    warmup: StopwatchAction;\r\n    exercise: StopwatchAction;\r\n    break: StopwatchAction;\r\n    cooldown: StopwatchAction;\r\n}","import { Settings, StopwatchAction, StopwatchActionType } from \"./models\";\r\n\r\nexport const DefaultActions: StopwatchAction[] = [{\r\n    id: \"9996\",\r\n    name: \"Warmup\",\r\n    duration: \"5\",\r\n    type: StopwatchActionType.WARMUP,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    id: \"9997\",\r\n    name: \"Exercise\",\r\n    duration: \"30\",\r\n    type: StopwatchActionType.EXERCISE,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    id: \"9998\",\r\n    name: \"Break\",\r\n    duration: \"60\",\r\n    type: StopwatchActionType.BREAK,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    id: \"9999\",\r\n    name: \"Cooldown\",\r\n    duration: \"90\",\r\n    type: StopwatchActionType.COOLDOWN,\r\n    removable: false,\r\n    editable: false\r\n}]\r\n\r\nexport const ERROR_CODES = {\r\n    e0000: \"OK\",\r\n    e0001: \"An error occured\",\r\n    e0100: \"Training is empty\",\r\n    e0101: \"Training name is not provided\",\r\n    e0102: \"Training has no rounds\",\r\n    e0200: \"Round is empty\",\r\n    e0201: \"Round has no actions\",\r\n    e0202: \"Round name is missing\",\r\n    e0300: \"Action is empty\",\r\n    e0301: \"Action name is not provided\",\r\n    e0302: \"Action type is not provided\",\r\n    e0303: \"Action duration is not correct\"\r\n\r\n}\r\n\r\nexport function getDefaultRoundName(index: number) {\r\n    return \"Round \" + index;\r\n}\r\n\r\nexport const DefaultSettings: Settings = {\r\n    darkMode: false,\r\n    soundEnabled: false,\r\n    isWelcome: false,\r\n    simpleView: false\r\n}\r\n\r\nexport const APP_NAME = \"bpd Stopwatch\"","import { is } from \"bpd-toolkit/dist/esm/index\";\r\nimport { PUSH_ACTIONS } from \"../app/push/push\";\r\nimport { ActionsGroup, Round, RoundActions, StopwatchAction, Training } from \"./models\";\r\nimport { APP_NAME } from \"./statics\";\r\n\r\nexport function showMessage(title: string, message: string) {\r\n    window.$cui.alert(\"common-info-dialog\", \"Info\", {\r\n        title: title,\r\n        message: message\r\n    })\r\n}\r\n\r\nexport function showToast(message: string) {\r\n    window.$cui.toast(message);\r\n}\r\n\r\nexport function calculateDuration(actions: StopwatchAction[]) {\r\n    return is(actions) ? actions.reduce<number>((result: number, value: StopwatchAction) => {\r\n        return result + Number.parseInt(value.duration);\r\n    }, 0) : 0\r\n}\r\n\r\nexport function calcDisplayTimer(seconds: number): string {\r\n    if (seconds < 0) {\r\n        return \"Error\"\r\n    }\r\n    return getSimplifiedDuration(seconds, (value: number, type: string) => {\r\n        switch (type) {\r\n            case \"hour\":\r\n            case \"minute\":\r\n                return getDisplayTimerValue(value) + \":\"\r\n            default:\r\n                return getDisplayTimerValue(value)\r\n        }\r\n    })\r\n    // if (seconds < 60) {\r\n    //     return \"00:\" + getDisplayTimerValue(seconds)\r\n    // } else if (seconds < 3600) {\r\n    //     let minutes = Math.floor(seconds / 60);\r\n    //     let restSeconds = seconds % 60;\r\n    //     return getDisplayTimerValue(minutes) + \":\" + getDisplayTimerValue(restSeconds);\r\n    // } else {\r\n    //     let hours = Math.floor(seconds / 3600);\r\n    //     let secondsLeft = seconds % 3600\r\n    //     return getDisplayTimerValue(hours) + \":\" + calcDisplayTimer(secondsLeft);\r\n    // }\r\n}\r\n\r\nexport function getUserDisplayNotation(seconds: number) {\r\n    return getSimplifiedDuration(seconds, (value: number, type: string) => {\r\n        switch (type) {\r\n            case \"hour\":\r\n                return `${value}h`\r\n            case \"minute\":\r\n                return `${value}m`\r\n            default:\r\n                return `${value}s`\r\n        }\r\n    })\r\n}\r\n\r\nexport function getSimplifiedDuration(seconds: number, format: (value: number, type: string) => string): string {\r\n    if (seconds < 60) {\r\n        return format(seconds, \"second\");\r\n    } else if (seconds < 3600) {\r\n        let minutes = Math.floor(seconds / 60);\r\n        let restSeconds = seconds % 60;\r\n        return format(minutes, 'minute') + getSimplifiedDuration(restSeconds, format);\r\n    } else {\r\n        let hours = Math.floor(seconds / 3600);\r\n        let secondsLeft = seconds % 3600;\r\n        return format(hours, 'hours') + getSimplifiedDuration(secondsLeft, format);\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function getDisplayTimerValue(value: number): string {\r\n    if (value < 0 || value > 59) {\r\n        return \"Error\";\r\n    }\r\n    return value < 10 ? \"0\" + value : \"\" + value;\r\n}\r\n\r\n\r\n\r\nexport function setDarkMode(darkMode: boolean) {\r\n    if (window.$cui) {\r\n        let utils = window.$cui.getUtils();\r\n        utils.setLightMode(darkMode ? \"dark\" : \"light\");\r\n    }\r\n}\r\n\r\nexport function calculateProgress(current: number, max: number) {\r\n    return Math.floor((current * 100) / max);\r\n}\r\n\r\n/**\r\n * Calculates total actions count and total duration of the training\r\n * @param training \r\n * @returns total actions count and total duration\r\n */\r\nexport function getTotalDuration(training: Training) {\r\n    return training.rounds.reduce<[number, number]>((result: [number, number], current: Round) => {\r\n        return [result[0] + current.actions.length, result[1] + calculateDuration(current.actions)];\r\n    }, [0, 0]);\r\n}\r\n\r\nexport function getBgClassByType(type: string) {\r\n    return \"action-background-\" + type;\r\n}\r\n\r\nexport function getClassByType(type: string) {\r\n    switch (type) {\r\n        case 'warmup':\r\n            return \"cui-text-success\";\r\n        case 'break':\r\n            return \"cui-text-error\";\r\n        case 'exercise':\r\n            return \"cui-text-accent\";\r\n        case 'cooldown':\r\n            return \"cui-text-secondar\";\r\n        default:\r\n            return \"\";\r\n    }\r\n}\r\n\r\n/**\r\n * Inserts new item to the collection at specific index. If index is lower than 0 then item is added at position 0, if index is bigger than collection size then item is added at the end\r\n * @param collection Collection of items\r\n * @param index position which new item should be added to - if undefined or null provided item will be inserted at last position\r\n * @param t new items to add\r\n * @returns Copy of the collection with new item inserted at specific position\r\n */\r\nexport function insert<T>(collection: T[], index: number, ...t: T[]): T[] {\r\n    if (!collection || collection === null || !t || t === null || t.length === 0) {\r\n        return collection;\r\n    }\r\n    let length = collection.length;\r\n    // If not provided then add then treat it like last\r\n    if (!index || index === 0 || index >= length) {\r\n        return [...collection, ...t];\r\n    }\r\n    if (index <= 0) {\r\n        return [...t, ...collection];\r\n    }\r\n    collection.splice(index, 0, ...t);\r\n    return [...collection]\r\n}\r\n\r\nexport function move<T>(collection: T[], from: number, to: number, size?: number): T[] {\r\n    if (!collection || collection === null || from < 0) {\r\n        return collection;\r\n    }\r\n    let amount = size ?? 1;\r\n    let length = collection.length;\r\n    if (length < 2 || from >= length) {\r\n        return [...collection];\r\n    }\r\n    const el = collection.splice(from, amount);\r\n    const newLength = length - amount;\r\n    const newTo = to;\r\n    //let newIdx = newTo < 0 ? 0 : newTo > length - amount ? length - amount : newTo;\r\n    if (newTo <= 0) {\r\n        return [...el, ...collection];\r\n    }\r\n    if (newTo >= newLength) {\r\n        return [...collection, ...el];\r\n    }\r\n    collection.splice(newTo, 0, ...el)\r\n    return [...collection];\r\n\r\n}\r\n\r\nexport function groupActionsByType(actions: StopwatchAction[]): ActionsGroup {\r\n    return actions.reduce<ActionsGroup>((out: ActionsGroup, item: StopwatchAction) => {\r\n        const type = item.type ?? \"Unknown\";\r\n        if (!out[type]) {\r\n            out[type] = [item];\r\n        } else {\r\n            out[type].push(item);\r\n        }\r\n        return out;\r\n    }, {})\r\n}\r\n\r\nexport function buildQuickRoundActions(actions: RoundActions, exerciseCount: number): StopwatchAction[] {\r\n    const stopwatchActions: StopwatchAction[] = [];\r\n    if (actions.warmup) {\r\n        stopwatchActions.push(actions.warmup);\r\n    }\r\n    if (actions.exercise) {\r\n        for (let i = 0; i < exerciseCount; i++) {\r\n            stopwatchActions.push(actions.exercise);\r\n            if (actions.break && i < exerciseCount - 1) {\r\n                stopwatchActions.push(actions.break);\r\n            }\r\n        }\r\n    }\r\n    if (actions.cooldown) {\r\n        stopwatchActions.push(actions.cooldown)\r\n    }\r\n    return stopwatchActions;\r\n}\r\n\r\nexport function setPageTitle(text: string): void {\r\n    if (is(text)) {\r\n        document.title = `${APP_NAME} - ${text}`;\r\n        return;\r\n    }\r\n    document.title = APP_NAME;\r\n}\r\n\r\nexport function setNavbarTitle(text: string): void {\r\n    window.$push.perform(PUSH_ACTIONS.SET_NAVBAR_TITLE, text);\r\n}","import { AppMapping } from \"../api/routes/routes\";\r\n\r\nexport const MAPPIGNS = new AppMapping({\r\n    \"home\": { url: \"/\", name: \"Home\", icon: \"home\" },\r\n    \"about\": { url: \"/about\", name: \"About\", icon: \"info\" },\r\n    \"settings\": { url: \"/settings\", name: \"Settings\", icon: \"settings\" },\r\n    \"actions\": { url: \"/actions\", name: \"Actions\", icon: \"home\" },\r\n    \"help\": { url: \"/help\", name: \"Help\", icon: \"emoji_smile\" },\r\n    \"newTraining\": { url: \"/trainings/edit/new\", name: \"New Training\" },\r\n    \"editTraining\": { url: \"/trainings/edit/:id\", name: \"Edit Training\" },\r\n    \"perform\": { url: \"/trainings/perform/:id\", name: \"Perform Training\" }\r\n});","import { enumerateObject, is } from \"../../../node_modules/bpd-toolkit/dist/esm/index\";\r\n\r\n\r\nexport interface RouteDetails {\r\n    url: string,\r\n    name: string,\r\n    icon?: string\r\n}\r\nexport interface RoutesMapping {\r\n    [id: string]: RouteDetails;\r\n}\r\n\r\nexport interface AppRouteAttributes {\r\n    [id: string]: string | number;\r\n}\r\n\r\nexport class AppMapping {\r\n    #mapping: RoutesMapping\r\n    constructor(routes: RoutesMapping) {\r\n        this.#mapping = routes;\r\n    }\r\n\r\n    getRoute(id: string) {\r\n        return is(id) ? this.#mapping[id] : undefined;\r\n    }\r\n\r\n    getUrl(id: string) {\r\n        let route = this.getRoute(id);\r\n        return is(route) ? route.url : undefined;\r\n    }\r\n\r\n    getName(id: string) {\r\n        let route = this.getRoute(id);\r\n        return is(route) ? route.name : undefined;\r\n    }\r\n    renderUrl(id: string, attributes?: AppRouteAttributes): string {\r\n        let uri = this.getUrl(id)\r\n        if (!is(attributes)) {\r\n            return uri;\r\n        }\r\n        enumerateObject(attributes, (prop: string, value: string) => {\r\n            uri = uri.replace(\":\" + prop, value);\r\n        })\r\n        return uri;\r\n    }\r\n}","import * as React from \"react\";\r\nimport { Round, Training } from \"../../../core/models\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { calculateDuration, getUserDisplayNotation } from \"../../../core/helpers\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\n\r\nconst delays = [' delay-100', ' delay-200', ' delay-300', ' delay-400']\r\n\r\nexport interface TrainingListProps {\r\n    list: Training[];\r\n    onDelete: (id: string) => void;\r\n}\r\n\r\nexport interface TrainingListItemProps {\r\n    data: Training;\r\n    index: number;\r\n    onDelete: (id: string) => void;\r\n}\r\n\r\nexport function TrainingList(props: TrainingListProps) {\r\n    return <ul className=\"cui-list cui-hover\">\r\n        {props.list && props.list.map((item, index) => {\r\n            return <li key={item.id} className=\"stopwatch-content-width cui-corner-round\"><TrainingListItem data={item} onDelete={props.onDelete} index={index} /></li>\r\n        })}\r\n    </ul>\r\n}\r\n\r\nexport function TrainingListItem(props: TrainingListItemProps) {\r\n    const deleteTrainingAction = \"DELETE_TRAINING\";\r\n    let history = useHistory();\r\n\r\n    function getActionsDuration(training: Training) {\r\n        return training.rounds.reduce<[number, number]>((result: [number, number], current: Round) => {\r\n            return [result[0] + current.actions.length, result[1] + calculateDuration(current.actions)];\r\n        }, [0, 0]);\r\n    }\r\n\r\n    function getDetails(training: Training) {\r\n        const [actions, duration] = getActionsDuration(training);\r\n        return getUserDisplayNotation(duration);//`${duration} seconds`;\r\n    }\r\n\r\n    function onItemClick() {\r\n        history.push(MAPPIGNS.renderUrl(\"perform\", { id: props.data.id }))\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const deleteSubscription = window.$flow.subscribe(deleteTrainingAction).finish((result) => {\r\n            window.$flow.perform(\"GET_TRAININGS\")\r\n        });\r\n\r\n        return () => {\r\n            window.$flow.unsubscribe(deleteTrainingAction, deleteSubscription.id)\r\n        }\r\n    })\r\n\r\n    return <div className={\"cui-flex cui-middle cui-animation-fade-in cui-padding-bottom cui-padding-top\"}>\r\n        <div className=\"cui-flex-grow\" onClick={onItemClick}>\r\n            <div className=\"cui-flex cui-middle cui-nowrap\">\r\n                <div className=\"training-list-item-icon\">\r\n                    <span className=\"cui-text-bold\">{props.data.name[0].toUpperCase()}</span>\r\n                </div>\r\n                <div className=\"cui-flex-grow cui-margin-left\">\r\n                    <span>{props.data.name}</span>\r\n                    <div className=\"cui-text-muted cui-text-truncate cui-overflow-hidden\">\r\n                        <span>{getDetails(props.data)}</span>\r\n                    </div></div>\r\n            </div>\r\n        </div>\r\n        <div className=\"cui-flex-shrink\">\r\n            <div>\r\n                <Link to={MAPPIGNS.renderUrl(\"editTraining\", { \"id\": props.data.id })} className=\"cui-icon-button\" cui-icon=\"edit\" cui-tooltip=\"Edit training\"></Link>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { TrainingList } from \"./list\";\r\nimport { Training, WarmUp, CoolDown, Exercise } from \"../../../core/models\";\r\nimport { FlowTask } from \"../../../../node_modules/bpd-flow/dist/index\";\r\nimport { setPageTitle, showMessage } from \"../../../core/helpers\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\n\r\nexport interface HomeProps {\r\n    site?: string;\r\n}\r\n\r\nexport interface HomeState {\r\n    list: Training[];\r\n}\r\n\r\nexport class Home extends React.Component<any, HomeState> {\r\n    list: Training[];\r\n    subscription: FlowTask<Training[]>\r\n    onDeleteSubscription: FlowTask<boolean>;\r\n    state: HomeState;\r\n    constructor(props: HomeProps) {\r\n        super(props);\r\n        this.state = {\r\n            list: []\r\n        }\r\n\r\n        this.updateList = this.updateList.bind(this);\r\n        this.onDeleteTrainingComplete = this.onDeleteTrainingComplete.bind(this);\r\n        this.deleteTraining = this.deleteTraining.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        setPageTitle(\"Home\");\r\n        this.subscription = window.$flow.subscribe(\"GET_ALL_TRAININGS\");\r\n        this.subscription.finish(this.updateList);\r\n        this.onDeleteSubscription = window.$flow.subscribe(\"DELETE_TRAINING\", { finish: this.onDeleteTrainingComplete })\r\n        window.$flow.perform(\"GET_ALL_TRAININGS\");\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.$flow.unsubscribe(\"GET_ALL_TRAININGS\", this.subscription.id);\r\n        window.$flow.unsubscribe(\"DELETE_TRAINING\", this.onDeleteSubscription.id);\r\n    }\r\n\r\n    deleteTraining(id: string) {\r\n        let list = [...this.state.list];\r\n        let elementIdx = list.findIndex(item => item.id === id);\r\n        if (elementIdx > -1) {\r\n            window.$cui.alert(\"delete-training-dialog\", \"YesNoCancel\", {\r\n                title: \"Delete training\",\r\n                message: \"Do you really want to delete training: \" + list[elementIdx].name + \"?\",\r\n                onYes: () => {\r\n                    window.$flow.perform(\"DELETE_TRAINING\", id)\r\n                }\r\n            })\r\n        } else {\r\n            showMessage(\"Delete training\", \"We cannot remove this training. Identified doesn't match.\")\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onDeleteTrainingComplete(flag: boolean) {\r\n        if (flag) {\r\n            window.$flow.perform(\"GET_ALL_TRAININGS\");\r\n        } else {\r\n            showMessage(\"Delete training\", \"Service could not remove training\")\r\n        }\r\n    }\r\n\r\n    updateList(list: Training[]) {\r\n        this.setState({\r\n            ...this.state,\r\n            list: list\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return <div className=\"stopwatch-page-layout\" >\r\n            <div className=\"stopwatch-page-top cui-container cui-center\">\r\n                <div>\r\n                    <span className=\"cui-icon stopwatch-icon\" cui-icon=\"stopwatch\"></span>\r\n                    <h1 className=\"cui-h3 cui-text-center cui-margin-small-top stopwatch-title\">Stopwatch</h1>\r\n                </div>\r\n            </div>\r\n            <div className=\"stopwatch-page-bottom\">\r\n                <div className=\"stopwatch-home-list cui-overflow-y-auto\">\r\n                    {this.state.list.length > 0 ? <TrainingList list={this.state.list} onDelete={this.deleteTraining} /> : <NoTrainings />}\r\n                </div>\r\n            </div>\r\n            <div className=\"cui-position-float cui-position-bottom cui-position-center cui-margin-large-bottom app-float-bottom z-index-100\">\r\n                <Link to={MAPPIGNS.renderUrl(\"newTraining\")} className=\"cui-icon-button cui-large cui-background-default cui-box-shadow\" cui-icon=\"plus\"></Link>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport function NoTrainings() {\r\n    return <div className=\"cui-container cui-center\">\r\n        <p className=\"cui-text-muted cui-text-center\">There are no trainings recorded. <Link className=\"cui-link cui-accent\" to={MAPPIGNS.renderUrl(\"newTraining\")}>Add new</Link> training to start your execises!</p>\r\n    </div>;\r\n}\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport interface ErrorProps {\r\n}\r\n\r\n// 'HelloProps' describes the shape of props.\r\n// State is never set so we use the '{}' type.\r\nexport class ErrorRoute extends React.Component<ErrorProps, {}> {\r\n    constructor(props: ErrorProps) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        return <div className=\"cui-section cui-flex-center cui-height-viewport-1-2\">\r\n            <div className=\"cui-card cui-large\">\r\n                <div className=\"cui-card-header cui-text-error\">\r\n                    <span className=\"cui-card-title\">Error</span>\r\n                </div>\r\n                <div className=\"cui-card-body\">\r\n                    It appears that page you looking for does not exist.\r\n                    Try to look for it again or go back to our Home page\r\n                </div>\r\n                <div className=\"cui-card-footer cui-flex cui-right\">\r\n                    <Link to=\"/\" className=\"cui-link\">Go Home</Link>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    }\r\n}","import * as React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nexport interface NavbarLinkProps {\r\n    url: string;\r\n    name: string;\r\n    icon?: string;\r\n    isIcon?: boolean;\r\n    shouldClose?: boolean;\r\n    class?: string;\r\n}\r\n\r\nexport class NavbarLink extends React.Component<NavbarLinkProps, {}> {\r\n    constructor(props: NavbarLinkProps) {\r\n        super(props);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n\r\n    onClick() {\r\n        if (this.props.shouldClose) {\r\n            let offcanvas = window.$cui.get(\"#app-offcanvas\");\r\n            offcanvas.emit('close');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <NavLink exact activeClassName=\"cui-active\" className={this.props.class} to={this.props.url} onClick={this.onClick}>{this.props.isIcon ? <IconNavLabel name={this.props.name} icon={this.props.icon} /> : this.props.name}</NavLink>;\r\n    }\r\n}\r\n\r\nexport interface LinkLabelProps {\r\n    name: string;\r\n    icon: string;\r\n}\r\n\r\nexport function IconNavLabel(props: LinkLabelProps) {\r\n    return (<span className=\"cui-flex cui-middle\"><span cui-icon={props.icon}></span><span className=\"cui-margin-small-left\">{props.name}</span></span>)\r\n}\r\n\r\nexport function SimpleNavLabel(props: LinkLabelProps) {\r\n    return (<span>{props.name}</span>)\r\n}","import * as React from \"react\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport { setNavbarTitle } from \"../../../core/helpers\";\r\nimport { PUSH_ACTIONS } from \"../../../app/push/push\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\nimport { NavbarLink } from \"../common/NavbarLink\";\r\nimport { useNavbarTitle } from \"../../../ui/hooks/NavbarTitle\";\r\n\r\nexport interface NavbarState {\r\n    currentSite: string;\r\n    darkMode: boolean;\r\n    soundEnabled: boolean\r\n}\r\n\r\nexport interface NavbarProps {\r\n    site?: string;\r\n    location?: any;\r\n}\r\n\r\nexport function Navbar(props: NavbarProps) {\r\n    const currentLocation = useLocation();\r\n    const [state, setState] = React.useState<NavbarState>({\r\n        currentSite: \"\",\r\n        darkMode: false,\r\n        soundEnabled: false,\r\n    });\r\n    const [location, setLocation] = React.useState(\"\")\r\n    const title = useNavbarTitle(\"\");\r\n    const history = useHistory();\r\n\r\n    // function onTitleUpdate(value: string): void {\r\n    //     setState({\r\n    //         ...state,\r\n    //         currentSite: value\r\n    //     })\r\n    // }\r\n\r\n    React.useEffect(() => {\r\n        let split = currentLocation.pathname.split('/');\r\n        setLocation(split.length > 1 ? split[1].toLocaleUpperCase() : \"\")\r\n        // const pushServiceTitleSub = window.$push.subscribe(PUSH_ACTIONS.SET_NAVBAR_TITLE, { finish: onTitleUpdate })\r\n\r\n        return () => {\r\n            //window.$push.unsubscribe(PUSH_ACTIONS.SET_NAVBAR_TITLE, pushServiceTitleSub.id);\r\n        }\r\n    }, [currentLocation])\r\n    return <nav className={\"cui-navbar cui-sticky cui-transparent stopwatch-layout-navigation\"}>\r\n        <div className=\"cui-navbar-left cui-width-1-1 cui-width-auto--m cui-flex cui-middle cui-between\" id=\"navbar-left\">\r\n            <ul>\r\n                {location && <><li><a cui-icon=\"chevron_small_left\" onClick={() => { history.goBack() }} ></a></li>\r\n                    <li><Link className=\"cui-icon\" to={MAPPIGNS.renderUrl(\"home\")} cui-icon=\"stopwatch_small\"></Link></li>\r\n                    <li><span>{title}</span></li>\r\n                </>}\r\n            </ul>\r\n            <a className=\"cui-icon cui-padding cui-button cui-hidden--m\" cui-icon=\"menu\" cui-open=\"target: #app-offcanvas\"></a>\r\n        </div>\r\n\r\n        <ul className=\"cui-navbar-right cui-unhidden--m\">\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"home\")} name={MAPPIGNS.getName(\"home\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"actions\")} name={MAPPIGNS.getName(\"actions\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"settings\")} name={MAPPIGNS.getName(\"settings\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"help\")} name={MAPPIGNS.getName(\"help\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"about\")} name={MAPPIGNS.getName(\"about\")} /></li>\r\n        </ul>\r\n    </nav>\r\n}","import * as React from \"react\";\r\nimport { PUSH_ACTIONS } from \"../../app/push/push\";\r\n\r\nexport function useNavbarTitle(init: string): string {\r\n    const [title, setTitle] = React.useState(init);\r\n\r\n    function onUpdate(value: string) {\r\n        setTitle(value);\r\n    }\r\n    React.useEffect(() => {\r\n        const pushServiceTitleSub = window.$push.subscribe(PUSH_ACTIONS.SET_NAVBAR_TITLE, { finish: onUpdate })\r\n        return () => {\r\n            window.$push.unsubscribe(PUSH_ACTIONS.SET_NAVBAR_TITLE, pushServiceTitleSub.id);\r\n        }\r\n    })\r\n    return title;\r\n}","import * as React from \"react\";\r\nimport { ElementManager } from \"../../../../node_modules/cui-light/dist/index\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\nimport { NavbarLink } from \"../common/NavbarLink\";\r\n\r\nexport interface OffCanvasProps {\r\n}\r\n\r\n// 'HelloProps' describes the shape of props.\r\n// State is never set so we use the '{}' type.\r\nexport class OffCanvas extends React.Component<OffCanvasProps, {}> {\r\n    constructor(props: OffCanvasProps) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"cui-off-canvas\" id=\"app-offcanvas\" cui-off-canvas=\"escClose: y; outClose: y\">\r\n            <div className=\"cui-off-canvas-container cui-card off-canvas-layout cui-flex cui-flex-direction-column\">\r\n                <div className=\"cui-card-header cui-flex cui-middle cui-right cui-width-1-1\">\r\n                    <a href=\"#\" className=\"cui-icon\" cui-icon=\"close\" cui-close=\"\"></a>\r\n                </div>\r\n                <div className=\"off-canvas-content cui-card-body cui-flex-grow cui-flex cui-middle cui-width-1-1\">\r\n                    <div className=\"cui-width-1-1\">\r\n                        <h3 className=\"cui-h3 cui-text-center\">Menu</h3>\r\n                        <ul className=\"cui-list cui-highlight cui-accent cui-margin-top\">\r\n                            <li><NavbarLink url={MAPPIGNS.renderUrl(\"home\")} name={MAPPIGNS.getName(\"home\")} icon=\"home\" shouldClose={true} isIcon={true} /></li>\r\n                            <li><NavbarLink url={MAPPIGNS.renderUrl(\"actions\")} name={MAPPIGNS.getName(\"actions\")} icon=\"link\" shouldClose={true} isIcon={true} /></li>\r\n                            <li><NavbarLink url={MAPPIGNS.renderUrl(\"settings\")} name={MAPPIGNS.getName(\"settings\")} icon=\"setup\" shouldClose={true} isIcon={true} /></li>\r\n                            <li><NavbarLink url={MAPPIGNS.renderUrl(\"help\")} name={MAPPIGNS.getName(\"help\")} icon=\"emoji_smile\" shouldClose={true} isIcon={true} /></li>\r\n                            <li><NavbarLink url={MAPPIGNS.renderUrl(\"about\")} name={MAPPIGNS.getName(\"about\")} icon=\"info\" shouldClose={true} isIcon={true} /></li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import { IActionsService } from \"../../core/services/interfaces\"\r\nimport { StopwatchAction } from \"../../core/models\";\r\n\r\nexport const ACTIONS_FLOW_ACTIONS = {\r\n    GET_ALL: \"GET_ALL\",\r\n    SET_ACTION: \"SET_ACTION\",\r\n    REMOVE_ACTION: \"REMOVE_ACTION\",\r\n    CLEAR_ACTIONS: \"CLEAR_ACTIONS\"\r\n}\r\n\r\nexport type ActionsFlowInput = StopwatchAction;\r\nexport type ActionsFlowOutput = boolean | StopwatchAction[];\r\n\r\nexport class ActionsFlow {\r\n    #service: IActionsService;\r\n    constructor(service: IActionsService) {\r\n        this.#service = service;\r\n    }\r\n    getActions() {\r\n        return {\r\n            [ACTIONS_FLOW_ACTIONS.GET_ALL]: () => {\r\n                return this.#service.getAllActions();\r\n            },\r\n            [ACTIONS_FLOW_ACTIONS.SET_ACTION]: (action: StopwatchAction) => {\r\n                return this.#service.setAction(action);\r\n            },\r\n            [ACTIONS_FLOW_ACTIONS.REMOVE_ACTION]: (action: StopwatchAction) => {\r\n                return this.#service.removeAction(action);\r\n            },\r\n            [ACTIONS_FLOW_ACTIONS.CLEAR_ACTIONS]: () => {\r\n                this.#service.clearActions();\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n}","import { Round, StopwatchAction, Training } from \"./models\";\r\nimport { ERROR_CODES } from \"./statics\";\r\nimport { is } from '../../node_modules/bpd-toolkit/dist/esm/index';\r\nimport { Footer } from \"src/ui/components/footer/Footer\";\r\n\r\nexport interface ValidationResult {\r\n    status: boolean;\r\n    errors?: string[];\r\n}\r\n\r\nexport interface IValidator<T> {\r\n    validate(t: T): ValidationResult\r\n}\r\n\r\nexport abstract class ValidatorBase<T> implements IValidator<T> {\r\n    validate(t: T): ValidationResult {\r\n        const result: ValidationResult = { status: true }\r\n        try {\r\n            let errors = this.performValidation(t);\r\n            if (errors && errors.length > 0) {\r\n                result.status = false;\r\n                result.errors = errors;\r\n            }\r\n        } catch (e) {\r\n            let errorMsg = \"An error occured during validation\";\r\n            console.error(errorMsg)\r\n            console.error(e)\r\n            result.status = false;\r\n            result.errors = [errorMsg + \": \" + e.message]\r\n        }\r\n        return result;\r\n    }\r\n\r\n    protected abstract performValidation(t: T): string[];\r\n}\r\n\r\nexport class TrainingValidator extends ValidatorBase<Training> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: Training): string[] {\r\n        if (!is(t)) {\r\n            return ([ERROR_CODES.e0100]);\r\n        }\r\n        let errors = []\r\n        if (!is(t.name)) {\r\n            errors.push(ERROR_CODES.e0101)\r\n        }\r\n        if (!is(t.rounds)) {\r\n            errors.push(ERROR_CODES.e0102)\r\n        }\r\n        return errors;\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class RoundValidator extends ValidatorBase<Round> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: Round): string[] {\r\n        if (!is(t)) {\r\n            return ([ERROR_CODES.e0200]);\r\n        }\r\n        let errors = []\r\n        if (!is(t.name))\r\n            errors.push(ERROR_CODES.e0202);\r\n        if (!is(t.actions))\r\n            errors.push(ERROR_CODES.e0201)\r\n        return errors;\r\n    }\r\n}\r\n\r\nexport class ActionValidator extends ValidatorBase<StopwatchAction> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: StopwatchAction): string[] {\r\n        if (!is(t)) {\r\n            return ([ERROR_CODES.e0300]);\r\n        }\r\n        let errors = []\r\n        if (!is(t.name)) {\r\n            errors.push(ERROR_CODES.e0301)\r\n        }\r\n        if (!is(t.type)) {\r\n            errors.push(ERROR_CODES.e0302)\r\n        }\r\n        if (!is(t.duration)) {\r\n            errors.push(ERROR_CODES.e0303)\r\n        }\r\n        return errors;\r\n    }\r\n}\r\n\r\nexport class CompleteTrainingValidator extends ValidatorBase<Training> {\r\n    #trainingValidator: TrainingValidator;\r\n    #actionValidator: ActionValidator;\r\n    #roundValidator: RoundValidator;\r\n    constructor() {\r\n        super();\r\n        this.#trainingValidator = new TrainingValidator();\r\n        this.#roundValidator = new RoundValidator();\r\n        this.#actionValidator = new ActionValidator();\r\n    }\r\n    protected performValidation(t: Training): string[] {\r\n        let err = this.#trainingValidator.validate(t);\r\n        if (err.status) {\r\n            try {\r\n                err = this.validateRounds(t.rounds);\r\n            } catch (e) {\r\n                return [ERROR_CODES.e0001]\r\n            }\r\n        }\r\n        return err.errors;\r\n    }\r\n\r\n    private validateRounds(rounds: Round[]): ValidationResult {\r\n        let err: ValidationResult = null;\r\n        let len = rounds.length;\r\n        for (let i = 0; i < len; i++) {\r\n            err = this.#roundValidator.validate(rounds[i]);\r\n            if (err.status) {\r\n                err = this.validateActions(rounds[i].actions)\r\n                if (!err.status) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return err;\r\n    }\r\n\r\n    private validateActions(actions: StopwatchAction[]): ValidationResult {\r\n        let err: ValidationResult = null;\r\n        let len = actions.length;\r\n        for (let i = 0; i < len; i++) {\r\n            err = this.#actionValidator.validate(actions[i]);\r\n            if (!err.status) {\r\n                return;\r\n            }\r\n        }\r\n        return err;\r\n    }\r\n\r\n}","import * as React from 'react'\r\n\r\nexport interface BpdDialogProps {\r\n    title: string;\r\n    id: string;\r\n    body?: JSX.Element;\r\n    footer?: JSX.Element;\r\n    className?: string;\r\n}\r\n\r\nexport function BpdDialog(props: BpdDialogProps) {\r\n    React.useEffect(() => {\r\n    }, [props])\r\n    return (<div className={`cui-dialog ${props.className ?? \"\"}`} cui-dialog=\"escClose: Y\" id={props.id}>\r\n        <div className=\"cui-dialog-container\">\r\n            <div className=\"cui-dialog-header\">\r\n                <span className=\"cui-dialog-title\">{props.title}</span>\r\n                <a className=\"cui-icon\" cui-icon=\"close\" cui-close=\"\"></a>\r\n            </div>\r\n            <div className=\"cui-dialog-body\">\r\n                {props.body}\r\n            </div>\r\n\r\n            {props.footer && (<div className=\"cui-dialog-footer\">\r\n                {props.footer}\r\n            </div>)}\r\n\r\n        </div>\r\n    </div>)\r\n}\r\n","import * as React from 'react'\r\n\r\nexport interface ErrorsListProps {\r\n    errors: string[];\r\n}\r\n\r\n\r\nexport function ErrorsList(props: ErrorsListProps) {\r\n    return (\r\n        <>\r\n            {props.errors &&\r\n                props.errors.length > 0 &&\r\n                <ul className=\"cui-list\">\r\n                    {\r\n                        props.errors.map((error: string, index: number) => {\r\n                            return <li key={index} className=\"cui-animation-fade-in\"><span className=\"cui-text-error\">{error}</span></li>\r\n                        })\r\n                    }\r\n                </ul>}\r\n        </>\r\n    );\r\n}\r\n","import * as React from 'react'\r\n\r\nexport interface BpdActionIconProps {\r\n    type: string;\r\n    className?: string;\r\n}\r\n\r\nexport function BpdActionIcon(props: BpdActionIconProps) {\r\n    return (\r\n        <span className={\"cui-icon \" + (props.className ?? \"\")} cui-icon={`stopwatch_${props.type}`}></span>\r\n    );\r\n}\r\n","import { is } from 'bpd-toolkit/dist/esm/index';\r\nimport * as React from 'react'\r\nimport { StopwatchActionType } from '../../../core/models';\r\nimport { BpdActionIcon } from '../common/BpdActionIcon';\r\n\r\nexport interface ActionTypeRadioChooserProps {\r\n    value: string;\r\n    onChange: (action: string) => void;\r\n    id: string;\r\n}\r\n\r\n\r\ninterface RadioChooserItem {\r\n    name: string;\r\n    checked: boolean;\r\n    id: string;\r\n}\r\n\r\nexport function ActionTypeRadioChooser(props: ActionTypeRadioChooserProps) {\r\n    const groupId = \"radio-group\" + props.id;\r\n    const radioId = \"radio-\" + props.id;\r\n    const [actions, setActions] = React.useState<RadioChooserItem[]>([])\r\n\r\n    function onChange(ev: any) {\r\n        if (props.onChange && ev.target.checked) {\r\n            let found = actions.find(act => act.id === ev.target.id);\r\n            if (is(found) && found.name !== props.value) {\r\n                props.onChange(found.name);\r\n            }\r\n        }\r\n    }\r\n\r\n    function matches(type: string) {\r\n        return props.value === type;\r\n    }\r\n\r\n    function buildItem(type: string, index: number): RadioChooserItem {\r\n        return {\r\n            name: type,\r\n            checked: matches(type),\r\n            id: radioId + index,\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setActions([\r\n            buildItem(StopwatchActionType.WARMUP, 0),\r\n            buildItem(StopwatchActionType.EXERCISE, 1),\r\n            buildItem(StopwatchActionType.BREAK, 2),\r\n            buildItem(StopwatchActionType.COOLDOWN, 3)\r\n        ])\r\n\r\n        return () => {\r\n        }\r\n    }, [props.value]);\r\n    return (<div id={props.id} className=\"cui-flex-grid cui-child-width-1-4\">\r\n        {actions.map(action => {\r\n            return <div key={action.id}><div className=\"cui-radio-custom cui-width-1-1\">\r\n                <input type=\"radio\" id={action.id} name={groupId} checked={action.checked} onChange={onChange} />\r\n                <label htmlFor={action.id} className=\"cui-content cui-padding-small cui-width-1-1\">\r\n                    <div className=\"cui-flex cui-center\"><BpdActionIcon type={action.name} /></div>\r\n                    <div className=\"cui-flex cui-center\"><span className=\"cui-text-small\">{action.name}</span></div>\r\n                </label>\r\n            </div></div>\r\n        })}\r\n    </div >);\r\n}\r\n","import * as React from \"react\";\r\nimport { DefaultActions } from \"../../../core/statics\";\r\nimport { StopwatchAction, StopwatchActionType } from \"../../../core/models\";\r\nimport { ActionValidator } from \"../../../core/validators\";\r\nimport { BpdDialog } from \"../common/BpdDialog\";\r\nimport { ErrorsList } from \"../common/ErrorsList\";\r\nimport { ActionsSelect } from \"./ActionsSelect\";\r\nimport { ActionTypeRadioChooser } from \"./ActionTypeRadioChooser\";\r\n\r\nexport interface AddActionDialogProps {\r\n    action: StopwatchAction;\r\n    onSave: (action: StopwatchAction) => void;\r\n}\r\n\r\nexport function AddActionDialog(props: AddActionDialogProps) {\r\n    const [state, setState] = React.useState<StopwatchAction>({\r\n        id: undefined,\r\n        name: \"\",\r\n        duration: \"5\",\r\n        removable: true,\r\n        editable: false,\r\n        type: StopwatchActionType.EXERCISE\r\n    })\r\n\r\n    const [errors, setErrors] = React.useState<string[]>([])\r\n\r\n    function onValueChange(event: any) {\r\n        let value = event.target.value;\r\n        let name = event.target.name;\r\n        switch (name) {\r\n            case \"name\":\r\n            case \"duration\":\r\n            case \"type\":\r\n                setState({ ...state, [name]: event.target.value })\r\n                break;\r\n            case \"removable\":\r\n            case \"editable\":\r\n                setState({ ...state, [name]: event.target.checked })\r\n                break;\r\n        }\r\n    }\r\n\r\n    function onActionTypeChange(action: string) {\r\n        setState({ ...state, \"type\": action })\r\n    }\r\n\r\n    function onSave() {\r\n        if (props.onSave) {\r\n            let action: StopwatchAction = { ...state };\r\n            let actionValidator = new ActionValidator().validate(action)\r\n            if (actionValidator.status) {\r\n                let dialogCui = window.$cui.get(\"#add-action-dialog\");\r\n                props.onSave(action);\r\n                dialogCui.emit('close');\r\n            }\r\n            setErrors(actionValidator.errors);\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (props.action) {\r\n            setState({\r\n                ...props.action\r\n            })\r\n            setErrors([]);\r\n        }\r\n        return () => {\r\n\r\n        }\r\n    }, [props.action])\r\n    return (<BpdDialog\r\n        title=\"Add new\"\r\n        id=\"add-action-dialog\"\r\n        body={<>\r\n            <div className=\"cui-form\">\r\n                <label className=\"cui-form-label\">Name</label>\r\n                <input className=\"cui-input stopwatch-input-width\" type=\"text\" name=\"name\" value={state.name} placeholder=\"Name\" onChange={onValueChange} />\r\n            </div>\r\n            <div className=\"cui-form cui-margin-top\">\r\n                <label className=\"cui-form-label\">Duration</label>\r\n                <input className=\"cui-input stopwatch-input-width\" type=\"number\" min=\"0\" max=\"100\" name=\"duration\" value={state.duration} placeholder=\"Duration\" onChange={onValueChange} />\r\n            </div>\r\n            <div className=\"cui-form cui-margin-top\">\r\n                <label className=\"cui-form-label\">Type</label>\r\n                {/* <select className=\"cui-select stopwatch-input-width\" value={state.type} name=\"type\" onChange={onValueChange} >\r\n                    <option value=\"warmup\">Warmup</option>\r\n                    <option value=\"exercise\">Exercise</option>\r\n                    <option value=\"break\">Break</option>\r\n                    <option value=\"cooldown\">Cooldown</option>\r\n                </select> */}\r\n                <div className=\"stopwatch-input-width cui-margin-top\">\r\n                    <ActionTypeRadioChooser id=\"add-action\" value={state.type} onChange={onActionTypeChange} />\r\n                </div>\r\n            </div>\r\n            <div className=\"cui-form cui-flex cui-middle cui-reverse cui-margin-top\">\r\n                <input type=\"checkbox\" className=\"cui-checkbox\" id=\"checkbox-1-2\" name=\"editable\" checked={state.editable} onChange={onValueChange} />\r\n                <label htmlFor=\"checkbox-1-2\"> Editable</label>\r\n            </div>\r\n            <div className=\"cui-form cui-flex cui-middle cui-reverse cui-margin-top\">\r\n                <input type=\"checkbox\" className=\"cui-checkbox\" id=\"checkbox-1-1\" name=\"removable\" checked={state.removable} onChange={onValueChange} />\r\n                <label htmlFor=\"checkbox-1-1\"> Removable</label>\r\n            </div>\r\n            <ErrorsList errors={errors} />\r\n        </>\r\n        }\r\n        footer={\r\n            <div className=\"cui-flex cui-right\">\r\n                <button className=\"cui-button cui-margin-small-right\" cui-close=\"\">Cancel</button>\r\n                <button className=\"cui-button cui-accent\" onClick={onSave}>Save</button>\r\n            </div>\r\n        }\r\n    />);\r\n}","import * as React from 'react'\r\n\r\nexport interface PageHeaderProps {\r\n    title: string;\r\n    description: string;\r\n    icon?: string;\r\n}\r\n\r\n\r\nexport function PageHeader(props: PageHeaderProps) {\r\n    return (<div className=\"stopwatch-page-header cui-container cui-center\">\r\n        <div>\r\n            {props.icon && <div className=\"cui-flex-center cui-margin-bottom\"><span cui-icon={props.icon}></span></div>}\r\n            <h1 className=\"cui-h1 cui-text-center cui-margin-remove cui-anim-fade-in\">{props.title}</h1>\r\n            <p className=\"cui-text-center cui-text-muted cui-scale-y-in cui-animation-delay cui-margin-small-top\">{props.description}</p>\r\n        </div>\r\n    </div>);\r\n}\r\n","import * as React from 'react'\r\nimport { is } from '../../../../node_modules/bpd-toolkit/dist/esm/index';\r\n\r\nexport interface ClearableInputProps {\r\n    value: string;\r\n    onUpdate?: (value: string) => void;\r\n    className?: string;\r\n}\r\n\r\n\r\nexport function ClearableInput(props: ClearableInputProps) {\r\n    const [value, setValue] = React.useState<string>('');\r\n\r\n    function onInputChange(ev: any) {\r\n        changeValue(ev.target.value);\r\n    }\r\n\r\n    function changeValue(value: string) {\r\n        setValue(value);\r\n        if (is(props.onUpdate)) {\r\n            props.onUpdate(value);\r\n        }\r\n    }\r\n\r\n    return (<div className={\"cui-input-mix \" + props.className}>\r\n        <input type=\"text\" className=\"cui-input\" placeholder=\"Filter\" value={value} onChange={onInputChange} />\r\n        {is(value) && <a className=\"cui-icon\" cui-icon=\"close\" onClick={() => changeValue(\"\")}></a>}\r\n    </div>);\r\n}\r\n","import * as React from 'react'\r\nexport interface IconLabelProps {\r\n    label: string;\r\n}\r\nexport function IconLabel(props: IconLabelProps) {\r\n    return (<span className=\"cui-margin-small-left cui-unhidden--m\">{props.label}</span>);\r\n}\r\n","import * as React from 'react'\r\n\r\nexport interface BpdConfirmDropProp {\r\n    message: string;\r\n    id: string;\r\n    cancelLabel?: string;\r\n    confirmLabel?: string;\r\n    onCancel?: () => void;\r\n    onConfirm: () => void;\r\n}\r\n\r\nexport function BpdConfirmDrop(props: BpdConfirmDropProp) {\r\n    const cancelLabel: string = props.cancelLabel ?? \"Cancel\";\r\n    const confirmLabel: string = props.confirmLabel ?? \"OK\";\r\n    function onCancel() {\r\n        window.$cui.get(\"#\" + props.id).emit(\"close\");\r\n        if (props.onCancel)\r\n            props.onCancel()\r\n    }\r\n\r\n    function onConfirm() {\r\n        window.$cui.get(\"#\" + props.id).emit(\"close\");\r\n        props.onConfirm()\r\n    }\r\n\r\n    return (<div className=\"cui-dropdown cui-section drop-max-width\" cui-drop=\"outClose: Y; autoClose: Y\" id={props.id}>\r\n        <p>{props.message}</p>\r\n        <div className=\"cui-flex cui-right cui-margin-top\">\r\n            <button className=\"cui-button cui-small\" onClick={() => { onCancel() }}>{cancelLabel}</button>\r\n            <button className=\"cui-button cui-accent cui-small cui-margin-small-left\" onClick={() => { onConfirm() }}>{confirmLabel}</button>\r\n        </div>\r\n    </div>);\r\n}\r\n","import * as React from 'react'\r\nimport { StopwatchAction } from '../../../core/models';\r\nimport { is } from 'bpd-toolkit/dist/esm/index';\r\nimport { getBgClassByType } from '../../../core/helpers';\r\nimport { BpdActionIcon } from '../common/BpdActionIcon';\r\nimport { IconLabel } from '../trainings/IconLabel';\r\nimport { BpdConfirmDrop } from '../common/BpdConfirmDrop';\r\n\r\nexport interface ActionsEditGridProps {\r\n    actions: StopwatchAction[];\r\n    filter: string;\r\n    onEdit: (action: StopwatchAction) => void;\r\n    onDelete: (action: StopwatchAction) => void;\r\n}\r\n\r\nexport function ActionsEditGrid(props: ActionsEditGridProps) {\r\n    function matchesName(name: string): boolean {\r\n        if (!is(props.filter)) {\r\n            return true;\r\n        }\r\n        let match = name.toLowerCase().match(props.filter.toLowerCase());\r\n        return is(match);\r\n    }\r\n\r\n    function onOption(option: string, action: StopwatchAction) {\r\n        switch (option) {\r\n            case 'edit':\r\n                props.onEdit(action)\r\n                break;\r\n            case \"delete\":\r\n                props.onDelete(action)\r\n                break;\r\n        }\r\n    }\r\n\r\n    return (<div className=\"cui-container cui-flex-grid cui-flex-grid-match cui-child-width-1-1 cui-child-width-1-3--m cui-animatio-fade-in\">\r\n        {is(props.actions) && props.actions.map((action: StopwatchAction, index: number) => {\r\n            return (matchesName(action.name) &&\r\n                <div key={index}>\r\n\r\n                    <div className={\"cui-card cui-default cui-animation-fade-in \" + getBgClassByType(action.type)}>\r\n                        <div className=\"cui-card-header cui-flex cui-between cui-nowrap cui-middle\">\r\n                            <span className=\"cui-card-title cui-text-truncate cui-overflow-hidden\">{action.name}</span>\r\n                            <BpdActionIcon className=\"cui-padding-small\" type={action.type} />\r\n                        </div>\r\n                        <div className=\"cui-card-body cui-flex cui-middle cui-nowrap action-card-height\">\r\n                            <div className=\"cui-flex-grow cui-overflow-hidden\">\r\n                                <div className=\"cui-text-truncate\"><span>{action.duration} seconds</span></div>\r\n                            </div>\r\n\r\n                            <div className=\"cui-flex-shrink\">\r\n                                <ul className=\"cui-icon-nav\">\r\n                                    {action.editable && <li><a className=\"cui-icon\" cui-icon=\"edit\" onClick={() => { onOption('edit', action) }} ><IconLabel label=\"Edit\" /></a></li>}\r\n                                    {action.removable && <li> <div className=\"cui-drop-trigger\">\r\n                                        <a className=\"cui-icon\" cui-icon=\"trash\"><IconLabel label=\"Delete\" /></a>\r\n                                        <BpdConfirmDrop message=\"Do you really want to delete this action?\" cancelLabel=\"No\" confirmLabel=\"Yes\" id=\"action-delete-drop\" onConfirm={() => { props.onDelete(action) }} />\r\n                                    </div></li>}\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>)\r\n        })}\r\n    </div>);\r\n}\r\n","import * as React from 'react'\r\nimport { StopwatchAction } from '../../../core/models';\r\nimport { DefaultActions } from '../../../core/statics';\r\nimport { ACTIONS_FLOW_ACTIONS } from '../../../app/flow/actions';\r\nimport { BpdActionIcon } from '../common/BpdActionIcon';\r\nimport { AddActionDialog } from './AddActionDialog';\r\nimport { PageHeader } from '../common/PageHeader';\r\nimport { deleteActionConfirmDialog } from '../common/Dialogs';\r\nimport { getBgClassByType, setNavbarTitle, setPageTitle } from '../../../core/helpers';\r\nimport { is } from '../../../../node_modules/bpd-toolkit/dist/esm/index';\r\nimport { ClearableInput } from '../common/ClearableInput';\r\nimport { IconLabel } from '../trainings/IconLabel';\r\nimport { ActionsEditGrid } from './ActionsEditGrid';\r\n\r\nconst defaultAction: StopwatchAction = {\r\n    id: undefined,\r\n    name: \"\",\r\n    type: \"exercise\",\r\n    duration: \"5\",\r\n    removable: true,\r\n    editable: true\r\n}\r\n\r\nexport interface BpdDialogState {\r\n    action: StopwatchAction;\r\n}\r\n\r\nexport interface StopWatchActionsState {\r\n    actions: StopwatchAction[];\r\n    current: StopwatchAction;\r\n}\r\n\r\n\r\nexport function StopwatchActionsComponent() {\r\n    const [state, setState] = React.useState<StopWatchActionsState>({\r\n        actions: [...DefaultActions],\r\n        current: null\r\n    })\r\n\r\n    const [filter, setFilter] = React.useState<string>(\"\");\r\n\r\n    function onDialogSave(action: StopwatchAction) {\r\n        window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.SET_ACTION, action);\r\n    }\r\n\r\n    function onDelete(action: StopwatchAction) {\r\n        window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.REMOVE_ACTION, action);\r\n    }\r\n\r\n    function onGetAll(actions: StopwatchAction[]) {\r\n        setState({\r\n            ...state,\r\n            actions: [...DefaultActions, ...actions]\r\n        })\r\n    }\r\n\r\n    function onAddOrEditClick(action?: StopwatchAction) {\r\n        setState({\r\n            ...state,\r\n            current: action || { ...defaultAction }\r\n        })\r\n        let dialogCui = window.$cui.get(\"#add-action-dialog\");\r\n        dialogCui.emit('open');\r\n    }\r\n\r\n    function updateFilter(value: string) {\r\n        setFilter(value);\r\n    }\r\n\r\n    function matchesName(name: string): boolean {\r\n        if (!is(filter)) {\r\n            return true;\r\n        }\r\n        let match = name.toLowerCase().match(filter.toLowerCase());\r\n        return is(match);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setPageTitle(\"Actions\");\r\n        setNavbarTitle(\"Actions\");\r\n        const getAllSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, { finish: onGetAll })\r\n        const setActionSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.SET_ACTION)\r\n        const removeActionSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.REMOVE_ACTION)\r\n        window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.GET_ALL);\r\n        return () => {\r\n            //setNavbarTitle(\"\");\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, getAllSub.id);\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.SET_ACTION, setActionSub.id);\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.REMOVE_ACTION, removeActionSub.id);\r\n        }\r\n    }, [state.actions])\r\n\r\n    return (<><div className=\"stopwatch-content-width\">\r\n        <PageHeader title=\"Activities\" description=\"Define activies which you want to perform in trainings!\" icon=\"link\" />\r\n        <div className=\"cui-container cui-flex cui-middle cui-middle cui-center cui-right--s\">\r\n            <ClearableInput value={filter} onUpdate={updateFilter} className=\"cui-width-1-1 cui-width-1-3--m cui-width-1-4--l\" />\r\n        </div>\r\n        <ActionsEditGrid filter={filter} actions={state.actions} onEdit={onAddOrEditClick} onDelete={onDelete} />\r\n        <div className=\"cui-position-float cui-position-bottom cui-position-center cui-margin-large-bottom app-float-bottom z-index-100\">\r\n            <button className=\"cui-icon-button cui-large cui-background-default cui-box-shadow\" cui-icon=\"plus\" onClick={() => { onAddOrEditClick() }}></button>\r\n        </div>\r\n    </div>\r\n        <AddActionDialog action={state.current} onSave={onDialogSave} /></>);\r\n}","import { is } from \"bpd-toolkit/dist/esm/index\";\r\nimport { Training } from \"../../core/models\";\r\nimport { ITrainingsService } from \"../../core/services/interfaces\";\r\n\r\nexport const ACTIONS = {\r\n    GET_ALL_TRAININGS: \"GET_ALL_TRAININGS\",\r\n    ADD_TRAINING: \"ADD_TRAINING\",\r\n    UPDATE_TRAINING: \"UPDATE_TRAINING\",\r\n    DELETE_TRAINING: \"DELETE_TRAINING\",\r\n    GET_TRAINING: \"GET_TRAINING\",\r\n    CLEAR_TRAININGS: \"CLEAR_TRAININGS\",\r\n    GET_DRAFT: \"GET_DRAFT\",\r\n    SET_DRAFT: \"SET_DRAFT\",\r\n    CLEAR_DRAFT: \"CLEAR_DRAFT\",\r\n    GET_FOR_EDIT: \"GET_FOR_EDIT\"\r\n}\r\n\r\nexport type TrainingsFlowInput = void | Training | number;\r\nexport type TrainingsFlowOutput = Training[] | Training | boolean;\r\n\r\nexport class TrainingsFlow {\r\n    #service: ITrainingsService;\r\n    constructor(service: ITrainingsService) {\r\n        this.#service = service;\r\n    }\r\n\r\n    getActions() {\r\n        return {\r\n            [ACTIONS.GET_ALL_TRAININGS]: () => {\r\n                return this.#service.getAllTrainings();\r\n            },\r\n            [ACTIONS.ADD_TRAINING]: (t: Training) => {\r\n                return this.#service.addTraining(t);\r\n            },\r\n            [ACTIONS.UPDATE_TRAINING]: (t: Training) => {\r\n                return this.#service.updateTraining(t);\r\n            },\r\n            [ACTIONS.DELETE_TRAINING]: (id: string) => {\r\n                return this.#service.deleteTraining(id);\r\n            },\r\n            [ACTIONS.GET_TRAINING]: (id: string) => {\r\n                return this.#service.getTraining(id);\r\n            },\r\n            [ACTIONS.GET_DRAFT]: () => {\r\n                return this.#service.getDraft();\r\n            },\r\n            [ACTIONS.SET_DRAFT]: (training: Training) => {\r\n                return this.#service.setDraft(training);\r\n            },\r\n            [ACTIONS.CLEAR_DRAFT]: () => {\r\n                return this.#service.clearDraft();\r\n            },\r\n            [ACTIONS.GET_FOR_EDIT]: (id: string) => {\r\n                let draft = this.#service.getDraft();\r\n                if (is(draft) && draft.id === id) {\r\n                    return draft;\r\n                }\r\n                if (!is(id) && is(draft.id)) {\r\n                    return undefined;\r\n                }\r\n                return this.#service.getTraining(id);\r\n            },\r\n            [ACTIONS.CLEAR_TRAININGS]: () => {\r\n                this.#service.clearTrainings();\r\n                return true;\r\n            },\r\n        }\r\n    }\r\n}","import * as React from 'react'\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nfunction GoBack(props: any) {\r\n    const { history } = props;\r\n    return (<button className=\"cui-button cui-accent\" onClick={() => history.goBack()}>Go Back</button>)\r\n}\r\n\r\n\r\nexport default withRouter(GoBack);","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport GoBack from \"./GoBack\";\r\n\r\nexport interface NotFoundProps {\r\n    message: string;\r\n    classes?: string;\r\n    goBack?: boolean;\r\n}\r\n\r\nexport function NotFound(props: NotFoundProps) {\r\n    return (<div className={props.classes}>\r\n        <div>\r\n            <h2 className=\"cui-h2 cui-text-center cui-text-error\">{props.message}</h2>\r\n            <div className=\"\">\r\n                <div className=\"cui-flex cui-center\">\r\n                    <Link to=\"/\" className=\"cui-button cui-margin-small-right\">Go Home</Link>\r\n                    {props.goBack ?? <GoBack />}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>);\r\n}","import * as React from 'react'\r\nimport { ProgressPlugin } from 'webpack';\r\nimport { IconLabel } from './IconLabel';\r\n\r\nexport interface ButtonBarProps {\r\n    items: ButtonBarItemProps[];\r\n}\r\n\r\nexport function ButtonBar(props: ButtonBarProps) {\r\n    React.useEffect(() => {\r\n\r\n    }, [props.items])\r\n    return (<ul className=\"cui-list cui-inline\">\r\n        {props.items && props.items.length > 0 && props.items.map((item: ButtonBarItemProps, index: number) => {\r\n            return <ButtonBarItem key={item.icon} icon={item.icon} label={item.label} onClick={item.onClick} modifiers={item.modifiers} />\r\n        })}\r\n    </ul>);\r\n}\r\n\r\n\r\nexport interface ButtonBarItemProps {\r\n    icon: string;\r\n    label: string;\r\n    modifiers?: string;\r\n    onClick: (ev: any) => void;\r\n}\r\n\r\nexport function ButtonBarItem(props: ButtonBarItemProps) {\r\n    let classes = \"cui-button cui-rounded \" + (props.modifiers ?? \"\");\r\n    return (<li className=\"cui-padding-small-horizontal\">\r\n        <a className={classes} cui-icon={props.icon} onClick={props.onClick}><IconLabel label={props.label} /></a>\r\n    </li>);\r\n}","import * as React from 'react'\r\nimport { StopwatchAction } from 'src/core/models';\r\nimport { BpdActionIcon } from './BpdActionIcon';\r\n\r\nexport interface BpdActionLabelProps {\r\n    action: StopwatchAction;\r\n}\r\nexport function BpdActionLabel(props: BpdActionLabelProps) {\r\n    return (\r\n        <div className=\"cui-flex cui-middle\">\r\n            <div className=\"cui-flex-center cui-margin-right\">\r\n                <BpdActionIcon type={props.action.type} />\r\n            </div>\r\n            <div className=\"cui-flex-grow\">\r\n                <div className=\"\">{props.action.name}</div>\r\n                <div className=\"cui-text-muted\">Lasts {props.action.duration} seconds</div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","import * as React from 'react'\r\nimport { StopwatchAction } from 'src/core/models';\r\nimport { BpdActionIcon } from '../common/BpdActionIcon';\r\nimport { BpdActionLabel } from '../common/BpdActionLabel';\r\nimport { ActionsSelectProps } from './ActionsSelect';\r\n\r\nexport function ActionSelectDropdown(props: ActionsSelectProps) {\r\n    function onChange(action: StopwatchAction) {\r\n        if (props.onSelect && (!props.value || props.value.id !== action.id)) {\r\n            props.onSelect(action);\r\n        }\r\n        window.$cui.get(\"#\" + props.id).emit(\"close\");\r\n    }\r\n\r\n    return (<div className=\"cui-drop-trigger cui-block\">\r\n        <a className=\"cui-link cui-block\">\r\n            <DropTrigger action={props.value} />\r\n        </a>\r\n        <div className=\"cui-dropdown drop-height\" cui-drop=\"outClose: Y;\" id={props.id}>\r\n            <ul className=\"cui-drop-nav drop-max-width\">\r\n                {props.actions && props.actions.map(action => {\r\n                    return <li key={action.id}><a className=\"cui-overflow-hidden cui-text-truncate\" onClick={() => { onChange(action) }}><BpdActionLabel action={action} /></a></li>\r\n                })}\r\n            </ul>\r\n        </div>\r\n    </div >);\r\n}\r\n\r\ninterface DropTriggerProps {\r\n    action: StopwatchAction;\r\n}\r\n\r\nexport function DropTrigger(props: DropTriggerProps) {\r\n    return (\r\n        <div className=\"cui-flex cui-middle cui-width-1-1\">\r\n            <div className=\"cui-flex-grow\">{props.action ? <BpdActionLabel action={props.action} /> : <span className=\"cui-inline-block cui-padding-small\">No action selected</span>}</div>\r\n            <span cui-icon=\"chevron_small_down\"></span>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport function ActionDetailsLabel(props: DropTriggerProps) {\r\n    return (<div className=\"cui-text-truncate cui-overflow-hidden cui-width-1-1\">\r\n        <div>\r\n            <BpdActionIcon type={props.action.type} /><span className=\"cui-margin-small-left\">{props.action.name}</span>\r\n        </div>\r\n        <div>\r\n            <span className=\"cui-text-muted cui-text-small\">(Duration {props.action.duration}s)</span>\r\n        </div>\r\n    </div>)\r\n\r\n    {/* <BpdActionIcon type={props.action.type} /><span className=\"cui-margin-small-left\">{props.action.name}</span><span className=\"cui-text-muted cui-margin-small-left\">({props.action.duration}s)</span></div>) */ }\r\n}","import * as React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { are, is } from \"../../../../node_modules/bpd-toolkit/dist/esm/index\";\r\nimport { ACTIONS_FLOW_ACTIONS } from \"../../../app/flow/actions\";\r\nimport { Round, StopwatchAction } from \"../../../core/models\";\r\nimport { getDefaultRoundName } from \"../../../core/statics\";\r\nimport { RoundValidator } from \"../../../core/validators\";\r\nimport { ActionSelectDropdown } from \"../actions/ActionSelectDropdown\";\r\nimport { ActionsSelect } from \"../actions/ActionsSelect\";\r\nimport { BpdActionIcon } from \"../common/BpdActionIcon\";\r\nimport { BpdActionLabel } from \"../common/BpdActionLabel\";\r\nimport { BpdDialog } from \"../common/BpdDialog\";\r\nimport { ErrorsList } from \"../common/ErrorsList\";\r\n\r\nexport interface EditRoundDialogProps {\r\n    onSave: (round: Round, index: number) => void;\r\n    definedActions: StopwatchAction[];\r\n    round: Round;\r\n    index: number;\r\n    currentCount: number;\r\n}\r\n\r\nexport interface EditRoundDialogState {\r\n    name: string;\r\n    actions?: StopwatchAction[];\r\n    selected: StopwatchAction;\r\n    errors: string[];\r\n}\r\n\r\nexport function EditRoundDialog(props: EditRoundDialogProps) {\r\n    const [state, setState] = useState<EditRoundDialogState>({\r\n        actions: [],\r\n        selected: null,\r\n        errors: [],\r\n        name: \"\"\r\n    })\r\n\r\n    function onSave() {\r\n        if (props.onSave) {\r\n            let round: Round = {\r\n                actions: [...state.actions],\r\n                name: state.name\r\n            }\r\n            let validation = new RoundValidator().validate(round);\r\n            if (validation.status) {\r\n                props.onSave(round, props.index);\r\n                setState({\r\n                    ...state,\r\n                    name: getDefaultRoundName(props.currentCount + 1),\r\n                    selected: null,\r\n                    actions: []\r\n                })\r\n                return;\r\n            }\r\n            setState({\r\n                ...state,\r\n                errors: validation.errors\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    function onActionSelectChange(action: StopwatchAction) {\r\n        if (action) {\r\n            setState({\r\n                ...state,\r\n                selected: action\r\n            })\r\n        }\r\n    }\r\n\r\n    function onAddAction() {\r\n        if (state.selected) {\r\n            setStateRoundData([...state.actions, state.selected])\r\n        }\r\n    }\r\n\r\n    function onDeleteAction(index: number) {\r\n        let newActions = [...state.actions];\r\n        newActions.splice(index, 1);\r\n        setStateRoundData(newActions)\r\n    }\r\n\r\n    function setStateRoundData(actions: StopwatchAction[], name?: string) {\r\n        setState({\r\n            ...state,\r\n            actions: actions,\r\n            selected: state.selected ?? props.definedActions[0],\r\n            errors: [],\r\n            name: name ? name : state.name\r\n        })\r\n    }\r\n\r\n    function roundNameUpdate(ev: any) {\r\n        let name = ev.target.value;\r\n        let errors = [];\r\n        if (!is(name)) {\r\n            errors.push(\"Name cannot be empty\")\r\n        }\r\n        setState({\r\n            ...state,\r\n            errors: errors,\r\n            name: name\r\n        })\r\n    }\r\n\r\n    function onSwapAction(index: number) {\r\n        if (!are(state.selected, state.actions)) {\r\n            return;\r\n        }\r\n        let copy = [...state.actions];\r\n        copy[index] = state.selected;\r\n        setState({\r\n            ...state,\r\n            actions: copy\r\n        })\r\n\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        let name = props.round && props.round.name ? props.round.name : getDefaultRoundName(props.currentCount);\r\n        let actions = is(props.round) ? props.round.actions : [];\r\n        setStateRoundData(actions, name);\r\n        return () => {\r\n        }\r\n    }, [props.round, props.definedActions, props.currentCount])\r\n    return (<BpdDialog\r\n        id=\"edit-round-dialog\"\r\n        title=\"Edit Round\"\r\n        body={<>\r\n            <div className=\"\">\r\n                <div className=\"cui-form\">\r\n                    <label htmlFor=\"\" className=\"cui-form-label\">Round name</label>\r\n                    <input type=\"text\" className=\"cui-input\" placeholder=\"Round name\" value={state.name} onChange={roundNameUpdate} />\r\n                </div>\r\n                <div className=\"cui-margin-top\">Actions</div>\r\n                <ul className=\"cui-list cui-margin-top edit-round-dialog-body\">\r\n                    {state.actions && state.actions.map((item: StopwatchAction, index: number) => {\r\n                        return <li key={item.id + index} className=\"animation-fade-in\" >\r\n                            <div className=\"cui-flex cui-middle\">\r\n                                <div className=\"cui-flex-grow\">\r\n                                    <BpdActionLabel action={item} />\r\n                                </div>\r\n                                <ul className=\"cui-icon-nav\">\r\n                                    <li><a className=\"cui-icon\" cui-icon=\"swap\" onClick={() => { onSwapAction(index) }}></a></li>\r\n                                    <li><a className=\"cui-icon\" cui-icon=\"trash\" onClick={() => { onDeleteAction(index) }}></a></li>\r\n                                </ul>\r\n                            </div>\r\n                        </li>\r\n                    })}\r\n                </ul>\r\n                <div className=\"cui-flex cui-middle cui-nowrap cui-margin-top\">\r\n                    <div className=\"cui-flex-grow\">\r\n                        <ActionSelectDropdown value={state.selected} actions={props.definedActions} onSelect={onActionSelectChange} name=\"actioonaa\" id=\"round-select-drop\" />\r\n                    </div>\r\n                    <div className=\"cui-padding-horizontal\">\r\n                        <button cui-icon=\"plus\" className=\"cui-icon cui-icon-button\" onClick={onAddAction}></button>\r\n                    </div>\r\n                </div>\r\n                <ErrorsList errors={state.errors} />\r\n            </div>\r\n        </>\r\n        }\r\n        footer={\r\n            <div className=\"cui-flex cui-right\" >\r\n                <button className=\"cui-button cui-margin-small-right\" cui-close=\"\">Cancel</button>\r\n                <button className=\"cui-button cui-accent\" onClick={onSave}>Save</button>\r\n            </div >\r\n        }\r\n    />)\r\n}","import * as React from 'react';\r\nimport { calculateDuration, getUserDisplayNotation } from '../../../core/helpers';\r\nimport { Round } from \"../../../core/models\";\r\nimport { getDefaultRoundName } from '../../../core/statics';\r\nimport { BpdConfirmDrop } from '../common/BpdConfirmDrop';\r\n\r\ninterface RoundListItemProps {\r\n    round: Round;\r\n    index: number;\r\n    isFirst: boolean;\r\n    isLast: boolean;\r\n    onEdit: (round: Round, index: number) => void;\r\n    onDelete: (round: Round, index: number) => void;\r\n    onMoveDown: (round: Round, index: number) => void;\r\n    onMoveUp: (round: Round, index: number) => void;\r\n    onClone: (round: Round, index: number) => void;\r\n}\r\n\r\nexport function EditRoundListItem(props: RoundListItemProps) {\r\n\r\n    return (\r\n        <div className=\"cui-flex cui-middle cui-nowrap\">\r\n            <div className=\"cui-flex-grow\">\r\n                <div><span className=\"cui-text-bold\">{props.round.name}</span></div>\r\n                <div className=\"cui-text-muted cui-text-small cui-text-no-wrap\"><span >{props.round.actions.length} actions, {getUserDisplayNotation(calculateDuration(props.round.actions))}</span></div>\r\n\r\n            </div>\r\n\r\n            <ul className=\"cui-icon-nav cui-flex-shrink\">\r\n                {!props.isFirst && <li><a className=\"cui-icon\" cui-icon=\"chevron_up\" onClick={() => { props.onMoveUp(props.round, props.index) }} cui-tooltip=\"Move up\"></a></li>}\r\n                {!props.isLast && <li><a className=\"cui-icon\" cui-icon=\"chevron_down\" onClick={() => { props.onMoveDown(props.round, props.index) }} cui-tooltip=\"Move down\"></a></li>}\r\n                <li><a className=\"cui-icon\" cui-icon=\"copy\" onClick={() => { props.onClone(props.round, props.index) }} cui-tooltip=\"Clone\"></a></li>\r\n                <li><a className=\"cui-icon\" cui-icon=\"edit\" onClick={() => { props.onEdit(props.round, props.index) }} cui-tooltip=\"Edit\"></a></li>\r\n                <li><div className=\"cui-drop-trigger\">\r\n                    <a className=\"cui-icon\" cui-icon=\"trash\"></a>\r\n                    <BpdConfirmDrop id=\"delete-confirm-drop\" message=\"Do you really want to delete this round?\" cancelLabel=\"No\" confirmLabel=\"Yes\" onConfirm={() => {\r\n                        props.onDelete(props.round, props.index);\r\n                    }} />\r\n                </div></li>\r\n            </ul>\r\n        </div>\r\n    );\r\n}","import * as React from 'react'\r\n\r\nexport interface BpdDialogFooterProps {\r\n    confirmLabel: string;\r\n    onConfirm: () => void;\r\n    onCancel: () => void;\r\n}\r\n\r\nexport function BpdDialogFooter(props: BpdDialogFooterProps) {\r\n    return (<div className=\"cui-flex cui-right cui-middle\">\r\n        <button className=\"cui-button\" onClick={props.onCancel}>Cancel</button>\r\n        <button className=\"cui-button cui-accent cui-margin-small-left\" onClick={props.onConfirm}>{props.confirmLabel}</button>\r\n    </div>);\r\n}\r\n","import * as React from 'react'\r\nimport { buildQuickRoundActions, groupActionsByType } from '../../../core/helpers';\r\nimport { ActionsGroup, Round, RoundActions, StopwatchAction, StopwatchActionType } from '../../../core/models';\r\nimport { ActionSelectDropdown } from '../actions/ActionSelectDropdown';\r\nimport { BpdDialog } from '../common/BpdDialog';\r\nimport { BpdDialogFooter } from '../common/BpdDialogFooter';\r\n\r\n\r\nexport interface QuickRoundDialogProps {\r\n    actions: StopwatchAction[];\r\n    onSave: (round: Round) => void;\r\n    id: string;\r\n}\r\n\r\nexport function QuickRoundDialog(props: QuickRoundDialogProps) {\r\n    const groupedActions = React.useMemo<ActionsGroup>(() => {\r\n        return groupActionsByType(props.actions)\r\n    }, [props.actions])\r\n\r\n    const [actions, setActions] = React.useState<RoundActions>({\r\n        warmup: groupedActions['warmup'] ? groupedActions['warmup'][0] : null,\r\n        exercise: groupedActions['exercise'] ? groupedActions['exercise'][0] : null,\r\n        break: groupedActions['break'] ? groupedActions['break'][0] : null,\r\n        cooldown: groupedActions['cooldown'] ? groupedActions['cooldown'][0] : null\r\n    });\r\n\r\n    const [exerciseCount, setExerciseCount] = React.useState(1);\r\n\r\n    function onUpdate(data: StopwatchAction, type: string) {\r\n        setActions({\r\n            ...actions,\r\n            [type]: data\r\n        })\r\n\r\n        // props.onUpdate(data)\r\n    }\r\n\r\n    function onCounterUpdate(value: number) {\r\n        setExerciseCount(value);\r\n    }\r\n\r\n    function onDialogCancel() {\r\n        window.$cui.get(\"#\" + props.id).emit(\"close\");\r\n    }\r\n\r\n    function onConfirm() {\r\n        if (exerciseCount < 1) {\r\n            return;\r\n        }\r\n        let round: Round = {\r\n            name: \"Quick\",\r\n            actions: buildQuickRoundActions(actions, exerciseCount)\r\n        }\r\n        props.onSave(round);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setActions({\r\n            warmup: groupedActions['warmup'] ? groupedActions['warmup'][0] : null,\r\n            break: groupedActions['break'] ? groupedActions['break'][0] : null,\r\n            exercise: groupedActions['exercise'] ? groupedActions['exercise'][0] : null,\r\n            cooldown: groupedActions['cooldown'] ? groupedActions['cooldown'][0] : null,\r\n        })\r\n        return () => {\r\n\r\n        }\r\n    }, [props.actions])\r\n    return (<BpdDialog title=\"Quick Round\"\r\n        id={props.id}\r\n        body={<QuickRoundDialogBody actions={groupedActions} onUpdate={onUpdate} data={actions} count={exerciseCount} onCounterUpdate={onCounterUpdate} />}\r\n        footer={<BpdDialogFooter confirmLabel=\"Save\" onCancel={onDialogCancel} onConfirm={onConfirm} />}\r\n    />);\r\n}\r\n\r\n\r\nexport interface QuickRoundDialogBodyProps {\r\n    actions: ActionsGroup;\r\n    data: RoundActions;\r\n    count: number;\r\n    onUpdate: (action: StopwatchAction, type: string) => void;\r\n    onCounterUpdate: (value: number) => void;\r\n}\r\n\r\nexport function QuickRoundDialogBody(props: QuickRoundDialogBodyProps) {\r\n\r\n    function updateCounter(count: number) {\r\n        if (count > 0 && count < 12) {\r\n            props.onCounterUpdate(count);\r\n        }\r\n    }\r\n\r\n    return <>\r\n        <div>\r\n            <QuickRoundDialogSelect actions={props.actions[StopwatchActionType.WARMUP]} value={props.data.warmup} onUpdate={props.onUpdate} type={StopwatchActionType.WARMUP} id=\"warmup-select-drop\" name=\"warmup-action\" />\r\n        </div>\r\n        <div className=\"cui-margin-top\">\r\n            <QuickRoundDialogSelect actions={props.actions[StopwatchActionType.EXERCISE]} value={props.data.exercise} onUpdate={props.onUpdate} type={StopwatchActionType.EXERCISE} id=\"exercise-select-drop\" name=\"exercise-action\" />\r\n        </div>\r\n        <div className=\"cui-form cui-margin-top\">\r\n            <QuickRoundDialogSelect actions={props.actions[StopwatchActionType.BREAK]} value={props.data.break} onUpdate={props.onUpdate} type={StopwatchActionType.BREAK} id=\"break-select-drop\" name=\"break-action\" />\r\n        </div>\r\n        <div className=\"cui-margin-top\">\r\n            <QuickRoundDialogSelect actions={props.actions[StopwatchActionType.COOLDOWN]} value={props.data.cooldown} onUpdate={props.onUpdate} type={StopwatchActionType.COOLDOWN} id=\"cooldown-select-drop\" name=\"cooldown-action\" />\r\n        </div>\r\n        <div className=\"cui-form cui-margin-top\">\r\n            <label className=\"cui-form-label\">Number of exercises</label>\r\n            <div className=\"cui-flex cui-middle cui-margin-small-top\">\r\n                <button className=\"cui-icon-button\" cui-icon=\"minus\" onClick={() => updateCounter(props.count - 1)}></button>\r\n                <span className=\"cui-margin-horizontal\">{props.count}</span>\r\n                <button className=\"cui-icon-button\" cui-icon=\"plus\" onClick={() => updateCounter(props.count + 1)}></button>\r\n            </div>\r\n        </div>\r\n    </>;\r\n}\r\n\r\nexport interface QuickRoundDialogSelectProps {\r\n    type: string;\r\n    actions: StopwatchAction[];\r\n    value: StopwatchAction;\r\n    id: string;\r\n    name: string;\r\n    onUpdate: (actions: StopwatchAction, type: string) => void;\r\n}\r\n\r\nexport function QuickRoundDialogSelect(props: QuickRoundDialogSelectProps) {\r\n    return (<>\r\n        <span className=\"cui-text-capital cui-inline-block\">{props.type}</span>\r\n        <div className=\"cui-flex cui-middle cui-margin-small-top\">\r\n            <div className=\"cui-flex-grow\">\r\n                <ActionSelectDropdown value={props.value} actions={props.actions} onSelect={(value) => { props.onUpdate(value, props.type) }} name={props.name} id={props.id} />\r\n            </div>\r\n            <button className=\"cui-icon-button\" cui-icon=\"close\" onClick={() => { props.onUpdate(null, \"cooldown\") }}></button>\r\n        </div>\r\n    </>)\r\n}","import * as React from 'react'\r\nimport { Link, useParams, withRouter } from 'react-router-dom';\r\nimport { ACTIONS } from '../../../app/flow/trainings';\r\nimport { clone, is } from '../../../../node_modules/bpd-toolkit/dist/esm/index';\r\nimport { ACTIONS_FLOW_ACTIONS } from '../../../app/flow/actions';\r\nimport { insert, move, setNavbarTitle, setPageTitle, showMessage, showToast } from '../../../core/helpers';\r\nimport { Round, StopwatchAction, Training, TrainingState } from '../../../core/models';\r\nimport { DefaultActions } from '../../../core/statics';\r\nimport { TrainingValidator } from '../../../core/validators';\r\nimport { MAPPIGNS } from '../../routes';\r\nimport { onDeleteTrainingDialog } from '../common/Dialogs';\r\nimport { NotFound } from '../common/NotFound';\r\nimport { PageHeader } from '../common/PageHeader';\r\nimport { ButtonBar, ButtonBarItemProps } from './ButtonBar';\r\nimport { EditRoundDialog } from './EditRoundDialog';\r\nimport { EditRoundListItem } from './EditRoundListItem';\r\nimport { QuickRoundDialog } from './QuickRoundDialog';\r\n\r\nexport interface EditTrainingSectionProps {\r\n    training: Training;\r\n    //   onSave: (training: Training) => void;\r\n    onUpdate: (training: Training) => void;\r\n    onCancel: () => void;\r\n}\r\n\r\n\r\nexport interface EditTrainingProps {\r\n    history: any;\r\n}\r\n\r\ninterface EditTrainingState {\r\n    training: Training;\r\n}\r\n\r\ninterface EditTrainingSectionState {\r\n    currentIndex: number;\r\n    currentRound: Round;\r\n    currentCount: number;\r\n}\r\n\r\ninterface EditTrainingDefinedActions {\r\n    actions: StopwatchAction[];\r\n}\r\n\r\nfunction EditTraining(props: EditTrainingProps) {\r\n    const [isLoading, setIsLoading] = React.useState(false);\r\n    const [state, setState] = React.useState<EditTrainingState>({\r\n        training: {\r\n            name: \"\",\r\n            rounds: [],\r\n            state: TrainingState.NEW\r\n        }\r\n    })\r\n\r\n    const { id } = useParams();\r\n\r\n\r\n    function getTraining() {\r\n        setIsLoading(true);\r\n        if (id) {\r\n            window.$flow.perform(ACTIONS.GET_FOR_EDIT, id);\r\n        } else {\r\n            window.$flow.perform(ACTIONS.GET_DRAFT);\r\n        }\r\n    }\r\n\r\n    function onUpdate(training: Training) {\r\n        pushDraft(training)\r\n    }\r\n\r\n    function onUpdateTraining(result: boolean): void {\r\n        if (!result) {\r\n            showMessage(\"Fail\", \"Training was not saved\")\r\n        } else {\r\n            showToast(\"Saved\");\r\n            goBack();\r\n        }\r\n    }\r\n\r\n    function goBack() {\r\n        if (props.history) {\r\n            props.history.goBack();\r\n        }\r\n    }\r\n\r\n    function onGetTraining(training: Training): void {\r\n        if (training) {\r\n            setPageTitle(\"Edit \" + training.name);\r\n            setState({\r\n                training: { ...training }\r\n            })\r\n        } else {\r\n            showMessage(\"Fail\", \"Training was not found\")\r\n        }\r\n    }\r\n\r\n    function onGetDraft(training: Training) {\r\n        setIsLoading(false);\r\n        if (training && !is(training.id)) {\r\n            setState({\r\n                training: { ...training }\r\n            })\r\n        }\r\n    }\r\n\r\n    function pushDraft(training: Training) {\r\n        //setIsLoading(true);\r\n        window.$flow.perform(ACTIONS.SET_DRAFT, training);\r\n        setState({\r\n            training: { ...training, state: TrainingState.DRAFT }\r\n        })\r\n    }\r\n\r\n    function onTrainingSave() {\r\n        let validaton = new TrainingValidator().validate(state.training);\r\n        if (validaton.status) {\r\n            window.$flow.perform(ACTIONS.UPDATE_TRAINING, state.training)\r\n        } else {\r\n            showMessage(\"Training not valid\", validaton.errors.join(\", \"))\r\n        }\r\n    }\r\n\r\n    function onDeleteTraining() {\r\n        if (is(state.training.id) && state.training.state === TrainingState.PUBLISH)\r\n            onDeleteTrainingDialog(state.training.name, onYes)\r\n        else {\r\n            showToast(\"Draft removed\");\r\n            // For not published trainings\r\n            window.$flow.perform(ACTIONS.CLEAR_DRAFT);\r\n            goBack();\r\n        }\r\n\r\n    }\r\n\r\n    function onYes() {\r\n        window.$flow.perform(\"DELETE_TRAINING\", state.training.id)\r\n    }\r\n\r\n    function onDeleteTrainingSub(result: boolean) {\r\n        showToast(\"Removed\");\r\n        goBack();\r\n    }\r\n\r\n    function getButtonNavItems(): ButtonBarItemProps[] {\r\n        const buttonNavItems: ButtonBarItemProps[] = [];\r\n        //{ icon: \"close\", label: \"Cancel\", onClick: () => { goBack() } }];\r\n        if (is(state.training.id)) {\r\n            buttonNavItems.push({ icon: \"media_play\", label: \"Run\", onClick: () => { props.history.push(MAPPIGNS.renderUrl('perform', { id: state.training.id })) } })\r\n        }\r\n\r\n        if (state.training.state !== TrainingState.NEW) {\r\n            buttonNavItems.push({ icon: \"trash\", label: \"Delete\", onClick: () => { onDeleteTraining() } });\r\n        }\r\n\r\n        buttonNavItems.push({ icon: \"checkmark\", label: \"Save\", onClick: onTrainingSave, modifiers: \"cui-success\" });\r\n        return buttonNavItems;\r\n    }\r\n\r\n    function getPageName(): string {\r\n        if (!is(state.training) || !is(state.training.name)) {\r\n            return \"Define training\";\r\n        }\r\n\r\n        return `Update ${state.training.state === TrainingState.DRAFT ? \"draft\" : \"training\"} ${state.training.name}`;\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setPageTitle(\"Edit training\");\r\n        setNavbarTitle(\"Edit training\");\r\n        const updateTrainingSub = window.$flow.subscribe(\"UPDATE_TRAINING\", { finish: onUpdateTraining })\r\n        const getTrainingSub = window.$flow.subscribe(ACTIONS.GET_FOR_EDIT, { finish: onGetTraining })\r\n        const getDraftSub = window.$flow.subscribe(\"GET_DRAFT\", { finish: onGetDraft })\r\n        const deleteTraininSub = window.$flow.subscribe(\"DELETE_TRAINING\", {\r\n            finish: onDeleteTrainingSub\r\n        })\r\n        getTraining();\r\n\r\n        return () => {\r\n            window.$flow.unsubscribe(\"UPDATE_TRAINING\", updateTrainingSub.id);\r\n            window.$flow.unsubscribe(ACTIONS.GET_FOR_EDIT, getTrainingSub.id);\r\n            window.$flow.unsubscribe(\"DELETE_TRAINING\", deleteTraininSub.id);\r\n            window.$flow.unsubscribe(\"GET_DRAFT\", getDraftSub.id);\r\n        }\r\n    }, [state.training.id])\r\n\r\n    return (<>\r\n        <div className=\"edit-container\">\r\n            <div className=\"edit-container-content cui-overflow-y-auto\">\r\n                <div className=\"cui-container stopwatch-content-width\">\r\n                    <PageHeader title={getPageName()} description=\"Customize your training settings\" icon=\"dumbbell\" />\r\n                </div>\r\n                <div className=\"\">\r\n                    {state.training ?\r\n                        <EditTrainingSection training={state.training} onUpdate={onUpdate} onCancel={goBack} /> :\r\n                        <NotFound message=\"The training you looking for could not be found\" classes=\"\" />}\r\n                </div>\r\n            </div>\r\n            <div className=\"edit-container-bottom cui-padding-small-vertical cui-border-top cui-border-remove--l cui-flex stopwatch-content-width\">\r\n                <div className=\"stopwatch-content-width cui-flex cui-middle cui-center\">\r\n                    <ButtonBar items={\r\n                        getButtonNavItems()\r\n                    } />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </>);\r\n}\r\n\r\nfunction EditTrainingSection(props: EditTrainingSectionProps) {\r\n    const [state, setState] = React.useState<EditTrainingSectionState>({\r\n        currentIndex: -1,\r\n        currentCount: 0,\r\n        currentRound: null\r\n    })\r\n\r\n    const [definedActions, setDefinedActions] = React.useState<EditTrainingDefinedActions>({\r\n        actions: []\r\n    })\r\n\r\n\r\n    function onRoundEdit(round: Round, index: number) {\r\n        setState({\r\n            ...state,\r\n            currentIndex: index,\r\n            currentRound: round,\r\n            currentCount: props.training && props.training.rounds ? props.training.rounds.length : 0\r\n        })\r\n        window.$cui.get(\"#edit-round-dialog\").emit(\"open\")\r\n    }\r\n\r\n    function onRoundDelete(round: Round, index: number) {\r\n        let rounds = [...props.training.rounds]\r\n        rounds.splice(index, 1)\r\n        updateRoundsState(rounds)\r\n    }\r\n\r\n    function onRoundDown(round: Round, index: number) {\r\n        updateRoundsState(move(props.training.rounds, index, index + 1))\r\n    }\r\n\r\n\r\n    function onRoundUp(round: Round, index: number) {\r\n        updateRoundsState(move(props.training.rounds, index, index - 1))\r\n    }\r\n\r\n    function onRoundClone(round: Round, index: number) {\r\n        let idx = index + 1;\r\n        let cloned = clone(round);\r\n        updateRoundsState(insert(props.training.rounds, idx, cloned))\r\n    }\r\n\r\n    function onRoundSave(round: Round, index: number) {\r\n        updateRoundsState(updateOrInsertRound(round, index));\r\n        window.$cui.get(\"#edit-round-dialog\").emit(\"close\");\r\n    }\r\n\r\n    function updateOrInsertRound(round: Round, index: number) {\r\n        let rounds = []\r\n        if (index > -1) {\r\n            rounds = [...props.training.rounds];\r\n            rounds[index] = round;\r\n        } else {\r\n            rounds = [...props.training.rounds, round];\r\n        }\r\n        return rounds;\r\n    }\r\n\r\n    function updateRoundsState(rounds: Round[]) {\r\n        props.onUpdate(\r\n            {\r\n                ...props.training,\r\n                rounds: rounds\r\n            }\r\n        )\r\n    }\r\n\r\n    function onFormChange(ev: any) {\r\n        let name = ev.target.name;\r\n        if (['name', 'description'].includes(name)) {\r\n            props.onUpdate({\r\n                ...props.training,\r\n                [name]: ev.target.value\r\n            })\r\n        }\r\n    }\r\n\r\n    function OnQuickRoundClick() {\r\n        window.$cui.get(\"#quick-round-create\").emit(\"open\")\r\n    }\r\n\r\n    function onQuickRoundSave(round: Round) {\r\n        updateRoundsState(updateOrInsertRound(round, -1));\r\n        window.$cui.get(\"#quick-round-create\").emit(\"close\");\r\n    }\r\n\r\n    function getDefinedActions(actions: StopwatchAction[]) {\r\n        setDefinedActions({\r\n            actions: [...DefaultActions, ...actions]\r\n        })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const getDefinedActionsSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, { finish: getDefinedActions });\r\n        window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.GET_ALL);\r\n        setState({\r\n            ...state\r\n        })\r\n        return () => {\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, getDefinedActionsSub.id)\r\n\r\n        }\r\n    }, [props.training])\r\n\r\n    return (<>\r\n        <div className=\"cui-container stopwatch-content-width cui-flex-grid cui-child-width-1-1 cui-child-width-1-2--m\">\r\n            <div className=\"cui-padding-small-right\">\r\n                {/* <h3 className=\"cui-h3 cui-text-muted\">Common</h3> */}\r\n                <div className=\"cui-form\">\r\n                    <label htmlFor=\"\" className=\"cui-form-label\">Name</label>\r\n                    <input type=\"text\" className=\"cui-input stopwatch-input-width\" placeholder=\"Name\" name=\"name\" value={props.training.name} onChange={onFormChange} />\r\n                </div>\r\n                <div className=\"cui-form cui-margin-top\">\r\n                    <label htmlFor=\"\" className=\"cui-form-label\">Description</label>\r\n                    <textarea className=\"cui-textarea stopwatch-input-width stopwatch-text-area\" placeholder=\"Description\" name=\"description\" rows={5} value={props.training.description} onChange={onFormChange}></textarea>\r\n                </div>\r\n            </div>\r\n            <div className=\"cui-padding-small-left\">\r\n                {/* <h3 className=\"cui-h3 cui-text-muted\">Rounds (total count: {props.training.rounds.length})</h3> */}\r\n                <ul className=\"cui-list\">\r\n                    {props.training && props.training.rounds.map((round: Round, index: number, arr: Round[]) => {\r\n                        return <li key={index} className=\"animation-fade-in\"><EditRoundListItem\r\n                            index={index}\r\n                            round={round}\r\n                            onEdit={onRoundEdit}\r\n                            onDelete={onRoundDelete}\r\n                            onMoveUp={onRoundUp}\r\n                            onMoveDown={onRoundDown}\r\n                            onClone={onRoundClone}\r\n                            isFirst={index === 0}\r\n                            isLast={index === arr.length - 1} />\r\n                        </li>\r\n                    })}\r\n                    <li>\r\n                        <div className=\"cui-flex-grid cui-center cui-child-width-1-2--m\">\r\n                            <div className=\"\">\r\n                                <button className=\"cui-button cui-default cui-icon cui-icon-margin cui-width-1-1\" cui-icon=\"plus\" onClick={() => {\r\n                                    onRoundEdit(null, -1);\r\n                                }}>Add Round</button>\r\n                            </div>\r\n                            <div>\r\n                                <button className=\"cui-button cui-accent cui-icon cui-icon-margin cui-width-1-1\" cui-icon=\"bolt\" onClick={OnQuickRoundClick}>Quick Round</button>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <EditRoundDialog index={state.currentIndex} round={state.currentRound} onSave={onRoundSave} currentCount={state.currentCount} definedActions={definedActions.actions} />\r\n        <QuickRoundDialog id=\"quick-round-create\" actions={definedActions.actions} onSave={onQuickRoundSave} />\r\n    </>);\r\n}\r\n\r\nexport default withRouter(EditTraining);","export function onDeleteTrainingDialog(name: string, onConfirm: () => void) {\r\n    window.$cui.alert(\"delete-training-dialog\", \"YesNoCancel\", {\r\n        title: \"Delete training\",\r\n        message: \"Do you really want to delete training: \" + name + \"?\",\r\n        onYes: onConfirm\r\n    })\r\n}\r\n\r\nexport function deleteRoundConfirmDialog(onOnfirm: () => void) {\r\n    window.$cui.alert(\"delete-round-dialog\", \"YesNoCancel\", {\r\n        title: \"Delete round\",\r\n        message: \"Do you really want to delete this round?\",\r\n        onYes: onOnfirm\r\n    })\r\n}\r\n\r\nexport function deleteActionConfirmDialog(name: string, onConfirm: () => void) {\r\n    window.$cui.alert(\"delete-action-dialog\", \"YesNoCancel\", {\r\n        title: \"Delete action\",\r\n        message: \"Do you really want to delete action: \" + name,\r\n        onYes: onConfirm\r\n    })\r\n}","interface KeepScreenToggle {\r\n    activate(): void;\r\n    release(): void;\r\n}\r\n\r\nexport class KeepAwakeToggle implements KeepScreenToggle {\r\n    #screen: any;\r\n    constructor() {\r\n        this.#screen = screen;\r\n    }\r\n\r\n    activate() {\r\n        this.#screen.keepAwake = true;\r\n    }\r\n\r\n    release(): void {\r\n        this.#screen.keepAwake = false;\r\n    }\r\n\r\n}\r\n\r\nexport class WakeLockScreen implements KeepScreenToggle {\r\n    wakeLockRequest: any;\r\n\r\n    activate() {\r\n        let nav = navigator as any;\r\n        nav.wakeLock.request('screen').then((wakelock: any) => {\r\n            this.wakeLockRequest = wakelock;\r\n            console.log(\"Wakelock activated\");\r\n        })\r\n    }\r\n\r\n    release() {\r\n        if (this.wakeLockRequest) {\r\n            this.wakeLockRequest.release();\r\n            this.wakeLockRequest = null;\r\n            console.log(\"Wakelock deactivated\");\r\n        }\r\n    }\r\n}\r\n\r\nexport class LoopLockScreen implements KeepScreenToggle {\r\n    element: Element | undefined;\r\n\r\n    constructor() {\r\n        this.element = undefined;\r\n    }\r\n\r\n    activate(): void {\r\n        if (this.element) {\r\n            return;\r\n        }\r\n        this.element = this.createElement(\"/static/video/Screen.mp4\");\r\n        document.body.appendChild(this.element);\r\n    }\r\n\r\n    release(): void {\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        this.element.remove();\r\n        this.element = undefined;\r\n    }\r\n\r\n    private createElement(src: string): Element {\r\n        let newEl = document.createElement(\"video\");\r\n        newEl.autoplay = true;\r\n        newEl.muted = true;\r\n        newEl.loop = true;\r\n        newEl.src = src;\r\n        newEl.classList.add('loop-screen')\r\n        newEl.textContent = \"Not Supported\";\r\n        return newEl;\r\n    }\r\n\r\n}\r\n\r\nexport class KeepScreenAwakeFeature {\r\n    #toggle: KeepScreenToggle;\r\n\r\n    constructor() {\r\n        this.#toggle = this.getToggle();\r\n    }\r\n    activate() {\r\n        this.#toggle.activate();\r\n    }\r\n    release() {\r\n        this.#toggle.release();\r\n    }\r\n    private getToggle() {\r\n        if ('keepAwake' in screen) {\r\n            return new KeepAwakeToggle();\r\n        } else {\r\n            return new LoopLockScreen();\r\n            //return new WakeLockScreen();\r\n        }\r\n    }\r\n}","export const StopWatchStateOptions: any = {\r\n    RUNNING: \"RUNNING\",\r\n    STOPPED: \"STOPPED\",\r\n    PAUSED: \"PAUSED\",\r\n}\r\n\r\nexport type StopWatchPerformState = \"RUNNING\" | 'PAUSED' | \"STOPPED\";\r\n\r\nexport interface StopwatchCallback {\r\n    (current: number, total: number, stopWatch: StopWatch): boolean;\r\n}\r\n\r\nexport interface IStopWatch {\r\n    start(): boolean;\r\n    stop(): boolean;\r\n    pause(): boolean;\r\n    resume(): boolean;\r\n    finish(): void;\r\n    getState(): StopWatchPerformState;\r\n}\r\n\r\nexport class StopWatch implements IStopWatch {\r\n    #callback: StopwatchCallback;\r\n    #current: number;\r\n    #total: number;\r\n    #isReset: boolean;\r\n    #state: StopWatchPerformState;\r\n    #id: any;\r\n    constructor() {\r\n        this.#current = 0;\r\n        this.#total = 0;\r\n        this.#isReset = false;\r\n        this.#state = StopWatchStateOptions.STOPPED;\r\n        this.#id = undefined;\r\n    }\r\n\r\n    onTick(callback: StopwatchCallback) {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    tick() {\r\n        this.#id = setTimeout(() => {\r\n            try {\r\n                if (this.#state === StopWatchStateOptions.RUNNING && this.#callback(this.#current, this.#total, this)) {\r\n                    if (this.#isReset) {\r\n                        this.#current = 0;\r\n                        this.#isReset = false;\r\n                    } else {\r\n                        this.#current += 1;\r\n                        this.#total += 1;\r\n                    }\r\n                    this.tick();\r\n                } else if (this.#state !== StopWatchStateOptions.PAUSED) {\r\n                    this.stop();\r\n                }\r\n            } catch (e) {\r\n                console.error(\"An error occured on stopwatch tick\")\r\n                console.error(e)\r\n                this.stop();\r\n            }\r\n        }, 1000)\r\n    }\r\n\r\n    reset() {\r\n        this.#isReset = true;\r\n    }\r\n\r\n    start(): boolean {\r\n        if (this.#state === StopWatchStateOptions.RUNNING) {\r\n            return false;\r\n        }\r\n        this.#current = 0;\r\n        this.#state = StopWatchStateOptions.RUNNING;\r\n        this.tick();\r\n        return true;\r\n    }\r\n\r\n    stop(): boolean {\r\n        if (this.#state === StopWatchStateOptions.RUNNING) {\r\n            this.finish();\r\n            this.#state = StopWatchStateOptions.STOPPED;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    pause(): boolean {\r\n        if (this.#state === StopWatchStateOptions.RUNNING) {\r\n            this.#state = StopWatchStateOptions.PAUSED;\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n    resume() {\r\n        if (this.#state === StopWatchStateOptions.PAUSED) {\r\n            this.#state = StopWatchStateOptions.RUNNING;\r\n            this.tick();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    finish(): void {\r\n        if (this.#id) {\r\n            clearTimeout(this.#id);\r\n            this.#id = undefined;\r\n        }\r\n        this.#current = 0;\r\n        this.#total = 0;\r\n    }\r\n    getState() {\r\n        return this.#state;\r\n    }\r\n}","import * as React from 'react'\r\nimport { StopwatchState } from './PerformTraining';\r\n\r\nexport interface CountDownTimerProps {\r\n    watchState: StopwatchState;\r\n    actionIdx: number;\r\n}\r\n\r\nexport function CountDownTimer(props: CountDownTimerProps) {\r\n    return (<span className=\"cui-svg total-circle-progress\" cui-circle-progress={props.watchState.trainingProgress}>\r\n        <div className=\"\">\r\n            <span className=\"cui-svg current-circle-progress\" cui-circle-progress={props.watchState.roundProgress}>\r\n                <div>\r\n                    <span className=\"cui-svg countdown-circle-progress\" cui-circle-progress={props.watchState.progress}>\r\n                        <div>\r\n                            <span className=\"cui-block cui-text-small\">{props.actionIdx + 1}</span>\r\n                            <h1 className={\"cui-h1 cui-margin-remove \" + props.watchState.timerCls}>{props.watchState.timer}</h1>\r\n                        </div>\r\n                    </span>\r\n                </div>\r\n            </span>\r\n        </div>\r\n    </span>);\r\n}\r\n\r\nexport function NewCountDownTimer(props: CountDownTimerProps) {\r\n    return (\r\n        <div>\r\n\r\n            <div className=\"cui-flex-center\">\r\n                <progress className=\"cui-progress cui-small cui-success width-100\" value={props.watchState.trainingProgress} max=\"100\"></progress>\r\n            </div>\r\n            {/* <span className=\"cui-block cui-text-small\">{props.actionIdx + 1}</span> */}\r\n            <h1 className={\"cui-h1 cui-margin-remove countdown-timer-size \" + props.watchState.timerCls}>{props.watchState.timer}</h1>\r\n            <div className=\"cui-flex-center\">\r\n                <progress className=\"cui-progress cui-small width-100\" value={props.watchState.roundProgress} max=\"100\"></progress>\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function SimpleCountDownTimer(props: CountDownTimerProps) {\r\n    return (\r\n        <div>\r\n            <p className=\"cui-margin-remove\">{props.watchState.round?.name}</p>\r\n            <p className=\"cui-text-muted cui-text-small cui-margin-remove\">Round {props.watchState.roundIdx + 1} of {props.watchState.roundTotal}</p>\r\n            <span className=\"cui-block cui-text-small\">{props.actionIdx + 1}</span>\r\n            <h1 className={\"cui-h1 cui-margin-remove countdown-timer-size \" + props.watchState.timerCls}>{props.watchState.timer}</h1>\r\n            <h3 className={\"cui-h3 \"}>{props.watchState.action?.name}</h3>\r\n        </div>\r\n    );\r\n}\r\n","import { Settings } from \"../../core/models\";\r\nimport { ISettingsService } from \"../../core/services/interfaces\";\r\n\r\n\r\nexport const SETTINGS_FLOW_ACTIONS = {\r\n    GET_DARK_MODE: \"GET_DARK_MODE\",\r\n    SET_DARK_MODE: \"SET_DARK_MODE\",\r\n    GET_SOUND_ENABLED: \"GET_SOUND_ENABLED\",\r\n    SET_SOUND_ENABLED: \"SET_SOUND_ENABLED\",\r\n    SET_SETTINGS: \"SET_SETTINGS\",\r\n    GET_SETTINGS: \"GET_SETTINGS\",\r\n    GET_IS_WELCOME: \"GET_IS_WELCOME\",\r\n    SET_IS_WELCOME: \"SET_IS_WELCOME\",\r\n    GET_SIMPLE_VIEW: \"GET_SIMPLE_VIEW\",\r\n    CLEAR_SETTINGS: \"CLEAR_SETTINGS\"\r\n}\r\n\r\nexport type SettingsFlowInput = Settings | boolean;\r\nexport type SettingsFlowOutput = boolean | void | Settings;\r\n\r\nexport class SettingsFlow {\r\n    #service: ISettingsService;\r\n    constructor(service: ISettingsService) {\r\n        this.#service = service;\r\n    }\r\n    getActions() {\r\n        return {\r\n            [SETTINGS_FLOW_ACTIONS.GET_SOUND_ENABLED]: () => {\r\n                return this.#service.isSoundEnabled();\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_SOUND_ENABLED]: (flag: boolean) => {\r\n                this.#service.setSoundEnabled(flag);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.GET_DARK_MODE]: () => {\r\n                return this.#service.isDarkMode();\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_DARK_MODE]: (flag: boolean) => {\r\n                this.#service.setDarkMode(flag);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_SETTINGS]: (value: Settings) => {\r\n                this.#service.setSettings(value);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.GET_SETTINGS]: () => {\r\n                return this.#service.getSettings();\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.GET_IS_WELCOME]: () => {\r\n                return this.#service.isWelcomeSet();\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.GET_SIMPLE_VIEW]: () => {\r\n                let sett = this.#service.getSettings();\r\n                return sett.simpleView;\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_IS_WELCOME]: (flag: boolean) => {\r\n                this.#service.setIsWelcome(flag);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.CLEAR_SETTINGS]: () => {\r\n                this.#service.clearSettings();\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n}","import * as React from 'react'\r\nimport { DefaultSettings } from '../../core/statics';\r\nimport { Settings } from '../../core/models';\r\nimport { SETTINGS_FLOW_ACTIONS } from '../../app/flow/settings';\r\nimport { setDarkMode } from '../../core/helpers';\r\n\r\nexport function useSettings(): [Settings, (settings: Settings) => void] {\r\n    const [settings, setSettings] = React.useState({\r\n        ...DefaultSettings\r\n    })\r\n\r\n    function onSaveSettings() {\r\n        // Obtain settings from store\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.GET_SETTINGS);\r\n    }\r\n\r\n    function onGetSettings(settings: Settings) {\r\n        setSettings(settings);\r\n        setDarkMode(settings.darkMode);\r\n    }\r\n\r\n    function updateSettings(settings: Settings) {\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.SET_SETTINGS, settings);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const settingsSub = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.GET_SETTINGS, { finish: onGetSettings })\r\n        const settingsUpdateSub = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.SET_SETTINGS, { finish: onSaveSettings })\r\n        onSaveSettings();\r\n        return () => {\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.GET_SETTINGS, settingsSub.id);\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.SET_SETTINGS, settingsUpdateSub.id);\r\n        }\r\n    }, [settings.darkMode, settings.soundEnabled])\r\n\r\n    return [settings, updateSettings];\r\n}\r\n","import { is } from 'bpd-toolkit/dist/esm/index'\r\nimport * as React from 'react'\r\n\r\nexport function useResize(element: Element | Window, callback: (element: Element | Window) => void) {\r\n    function onResize() {\r\n        if (callback && element) {\r\n            callback(element)\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (element) {\r\n            window.addEventListener('resize', onResize)\r\n        }\r\n\r\n        return () => {\r\n            if (element) {\r\n                window.removeEventListener('resize', onResize)\r\n            }\r\n\r\n        }\r\n    }, [element])\r\n}\r\n\r\n\r\nexport function useIsFullscreen(element: Element) {\r\n    const resizeEl = useResize(element, onResize)\r\n    const [isFullscreen, setIsFullscreen] = React.useState(isElementFullscreen(element));\r\n\r\n    function onResize(element: Element) {\r\n        if (is(element))\r\n            setIsFullscreen(isElementFullscreen(element))\r\n    }\r\n\r\n    function isElementFullscreen(element: Element) {\r\n        if (!is(element)) {\r\n            return false;\r\n        }\r\n        return element && element.clientHeight >= ((screen.availHeight || screen.height) - 30) && element.clientWidth >= ((screen.availWidth || screen.width) - 30)\r\n    }\r\n\r\n    React.useEffect(() => { }, [isFullscreen])\r\n    return isFullscreen\r\n}\r\n","import * as React from 'react'\r\nimport { IconBtnLabel } from './IconBtnLabel'\r\nexport interface IconButtonWithLabel {\r\n    label: string;\r\n    icon: string;\r\n    onClick?: () => void;\r\n    modifiers?: string;\r\n    labelModifier?: string;\r\n}\r\n\r\nexport function IconButtonWithLabel(props: IconButtonWithLabel) {\r\n    let classes = \"cui-button cui-icon\";\r\n    if (props.modifiers) {\r\n        classes += \" \" + props.modifiers;\r\n    }\r\n    return (<button className={classes} onClick={props.onClick} cui-icon={props.icon}><IconBtnLabel label={props.label} modifiers={props.labelModifier} /></button>);\r\n}\r\n\r\nexport interface IconBtnProps {\r\n    icon: string;\r\n    onClick?: () => void;\r\n    modifiers?: string;\r\n}\r\n\r\nexport function IconButton(props: IconBtnProps) {\r\n    let classes = \"cui-icon-button cui-icon\";\r\n    if (props.modifiers) {\r\n        classes += \" \" + props.modifiers;\r\n    }\r\n    return (<button className={classes} onClick={props.onClick} cui-icon={props.icon}></button>);\r\n}\r\n","import * as React from 'react'\r\nimport { useParams } from 'react-router-dom';\r\nimport { PUSH_ACTIONS } from '../../../app/push/push';\r\nimport { closeFullscreen, is, openFullscreen } from '../../../../node_modules/bpd-toolkit/dist/esm/index';\r\nimport { KeepScreenAwakeFeature } from '../../../api/screen/screen';\r\nimport { StopWatch, StopWatchPerformState, StopWatchStateOptions } from '../../../api/stopwatch/stopwatch';\r\nimport { calcDisplayTimer, calculateDuration, calculateProgress, getBgClassByType, getTotalDuration, showMessage, getClassByType, setPageTitle, setNavbarTitle } from '../../../core/helpers';\r\nimport { Round, StopwatchAction, Training } from '../../../core/models';\r\nimport { CompleteTrainingValidator } from '../../../core/validators';\r\nimport { NotFound } from '../common/NotFound';\r\nimport { CountDownTimer, SimpleCountDownTimer } from './CountDownTimer';\r\nimport { useSettings } from '../../../ui/hooks/settings';\r\nimport { useIsFullscreen } from '../../../ui/hooks/useResize';\r\nimport { IconButton } from '../common/IconButton';\r\nimport { useIsLoading } from '../../../ui/hooks/loading';\r\n;\r\n\r\ninterface TimeStateData {\r\n    time: number;\r\n    progress: number;\r\n    ct?: number;\r\n    total: number;\r\n}\r\n\r\ninterface PerfromTrainingState {\r\n    training: Training;\r\n}\r\n\r\nexport interface StopwatchState {\r\n    timer: string;\r\n    state: StopWatchPerformState;\r\n    timerCls: string;\r\n    progress: number;\r\n    roundProgress: number;\r\n    trainingProgress: number;\r\n    roundIdx: number;\r\n    roundTotal: number;\r\n    actionIdx: number;\r\n    actionTotal: number;\r\n    round: Round,\r\n    action: StopwatchAction,\r\n    roundDuration: number,\r\n    totalDuration: number\r\n}\r\n\r\n\r\n\r\ninterface CurrentStateControls {\r\n    startBtnCls: string;\r\n    startBtnText: string;\r\n    isPauseVisible: boolean;\r\n    pauseBtnText: string;\r\n    startBtnIcon: string;\r\n    pauseBtnIcon: string;\r\n}\r\n\r\n\r\nexport function PerfromTraining() {\r\n    const [state, setState] = React.useState<PerfromTrainingState>({\r\n        training: undefined\r\n    })\r\n\r\n    const [isLoading, setIsLoading] = useIsLoading(false);\r\n\r\n    const { id } = useParams();\r\n\r\n    function onGetTraining(training: Training) {\r\n        let validation = new CompleteTrainingValidator().validate(training);\r\n        if (!validation.status) {\r\n            showMessage(\"Incorrect training\", `Training is not correct: ${validation.errors.join(\", \")}`)\r\n            return;\r\n        }\r\n        setIsLoading(false);\r\n        setState({\r\n            training: training\r\n        })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setPageTitle(\"Perform training\");\r\n\r\n        const getTrainingSubscription = window.$flow.subscribe(\"GET_TRAINING\", { finish: onGetTraining })\r\n\r\n        if (id > -1) {\r\n            setIsLoading(true);\r\n            window.$flow.perform(\"GET_TRAINING\", id)\r\n\r\n        }\r\n        return () => {\r\n            window.$flow.unsubscribe(\"GET_TRAINING\", getTrainingSubscription.id)\r\n\r\n\r\n        }\r\n    }, [id])\r\n    return (<>\r\n        {isLoading ? <div className=\"cui-height-1-1 cui-flex-center\">Loading...</div> : (\r\n            !state.training ? <NotFound message=\"We couldn't find training\" classes=\"cui-height-1-1 cui-flex-center\" /> :\r\n                <PerformTrainingElement training={state.training} />\r\n        )}\r\n    </>);\r\n}\r\n\r\n\r\nexport interface PerformTrainingElementProps {\r\n    training: Training;\r\n}\r\n\r\nexport function PerformTrainingElement(props: PerformTrainingElementProps) {\r\n\r\n    const [stopwatch, setStopwatch] = React.useState<StopWatch>(undefined)\r\n\r\n    const [watchState, setWatchState] = React.useState<StopwatchState>({\r\n        timer: \"-\",\r\n        state: StopWatchStateOptions.STOPPED,\r\n        timerCls: \"\",\r\n        progress: 100,\r\n        roundProgress: 100,\r\n        trainingProgress: 100,\r\n        roundIdx: 0,\r\n        roundTotal: 0,\r\n        actionIdx: 0,\r\n        actionTotal: 0,\r\n        roundDuration: 0,\r\n        totalDuration: 0,\r\n        action: undefined,\r\n        round: undefined,\r\n    })\r\n\r\n    const [currentPlayStateControls, setCurrentPlayStateControls] = React.useState<CurrentStateControls>({\r\n        startBtnText: \"Start\",\r\n        startBtnCls: \"cui-accent\",\r\n        pauseBtnText: \"Pause\",\r\n        isPauseVisible: false,\r\n        startBtnIcon: \"media_play\",\r\n        pauseBtnIcon: \"media_pause\"\r\n    })\r\n\r\n\r\n    const [settings, setSettings] = useSettings();\r\n\r\n    const [errorMessage, setErrorMessage] = React.useState(\"\");\r\n\r\n\r\n    const trainingRef = React.useRef(props.training);\r\n    trainingRef.current = props.training;\r\n    const watchStateRef = React.useRef(watchState);\r\n    watchStateRef.current = watchState;\r\n    const settingsRef = React.useRef(settings);\r\n    settingsRef.current = settings;\r\n\r\n\r\n    const countdownSound = React.useRef(null);\r\n    const exerciseSound = React.useRef(null);\r\n    const warmupSound = React.useRef(null);\r\n    const breakSound = React.useRef(null);\r\n    const cooldownSound = React.useRef(null);\r\n    const endSound = React.useRef(null);\r\n    const mainViewRef = React.useRef(null);\r\n\r\n    const isFullscreen = useIsFullscreen(mainViewRef.current);\r\n\r\n    function setDefaultWatchState(training: Training) {\r\n        let round = training.rounds[0];\r\n        let action = round.actions[0];\r\n        setWatchState({\r\n            ...watchState,\r\n            round: round,\r\n            roundIdx: 0,\r\n            roundTotal: training.rounds.length,\r\n            roundDuration: calculateDuration(round.actions),\r\n            actionIdx: 0,\r\n            action: action,\r\n            actionTotal: round.actions.length,\r\n            totalDuration: getTotalDuration(training)[1]\r\n        })\r\n    }\r\n\r\n    function setNextAction(): boolean {\r\n        let nextActionIdx = watchStateRef.current.actionIdx + 1;\r\n        if (watchStateRef.current.round.actions.length > nextActionIdx) {\r\n            let newAction = watchStateRef.current.round.actions[nextActionIdx]\r\n            setWatchState({\r\n                ...watchStateRef.current,\r\n                actionIdx: nextActionIdx,\r\n                action: newAction,\r\n            })\r\n            return true;\r\n        }\r\n        let nextRoundIdx = watchStateRef.current.roundIdx + 1;\r\n        if (trainingRef.current.rounds.length > nextRoundIdx) {\r\n            let newRound = trainingRef.current.rounds[nextRoundIdx];\r\n            let newAction = newRound.actions[0];\r\n\r\n            setWatchState({\r\n                ...watchStateRef.current,\r\n                actionIdx: 0,\r\n                action: newAction,\r\n                actionTotal: newRound.actions.length,\r\n                round: newRound,\r\n                roundIdx: nextRoundIdx,\r\n                roundDuration: calculateDuration(newRound.actions),\r\n            })\r\n            return true;\r\n        }\r\n        setDefaultWatchState(trainingRef.current);\r\n        return false;\r\n    }\r\n\r\n    function onStopwatchTick(currentTime: number, total: number, stopwatch: StopWatch): boolean {\r\n        let actionDuration = parseInt(watchStateRef.current.action.duration)//parseInt(currentRef.current.action.duration)\r\n        let ct = actionDuration - currentTime;\r\n        let progress = calculateProgress(currentTime, actionDuration)\r\n        if (currentTime === 0) {\r\n            playSound(watchStateRef.current.action.type);\r\n        }\r\n        if (ct > 0) {\r\n            // Normal tick\r\n            updateStopWatchState(stopwatch.getState(), {\r\n                time: ct,\r\n                progress: 100 - progress,\r\n                ct: currentTime,\r\n                total: total\r\n            })\r\n            // Start round end countdown\r\n            if (ct <= 2) {\r\n                playSound(\"countdown\");\r\n            }\r\n            return true;\r\n        } else {\r\n            // Next action\r\n            if (!setNextAction()) {\r\n                // End of training\r\n                playSound(\"end\");\r\n                updateStopWatchState(StopWatchStateOptions.STOPPED, {\r\n                    time: 0, progress: 100, ct: 0, total: 0\r\n                })\r\n                return false;\r\n            }\r\n            playSound(\"countdown\");\r\n            updateStopWatchState(StopWatchStateOptions.RUNNING, { time: 0, progress: 0, ct: ct, total: total })\r\n            stopwatch.reset();\r\n            return true;\r\n        }\r\n    }\r\n\r\n    function onStartClick() {\r\n        if (watchState.state === StopWatchStateOptions.STOPPED && stopwatch.start()) {\r\n            updateStopWatchState(StopWatchStateOptions.RUNNING);\r\n        } else if (watchState.state !== StopWatchStateOptions.STOPPED && stopwatch.stop()) {\r\n            setDefaultWatchState(props.training);\r\n            updateStopWatchState(StopWatchStateOptions.STOPPED, { time: 0, progress: 100, ct: 0, total: 0 });\r\n\r\n        }\r\n    }\r\n\r\n    function onPauseClick() {\r\n        if (watchState.state === StopWatchStateOptions.RUNNING && stopwatch.pause()) {\r\n            updateStopWatchState(StopWatchStateOptions.PAUSED);\r\n        } else if (watchState.state === StopWatchStateOptions.PAUSED && stopwatch && stopwatch.resume()) {\r\n            updateStopWatchState(StopWatchStateOptions.RUNNING);\r\n        }\r\n    }\r\n\r\n    function updateStopWatchState(watchstate: StopWatchPerformState, timeData?: TimeStateData) {\r\n        if (!is(timeData) || timeData.time < 0) {\r\n            setWatchState({\r\n                ...watchStateRef.current,\r\n                state: watchstate,\r\n            })\r\n        } else {\r\n            let roundProgress = calculateRoundProgress(timeData.ct);\r\n            let trainginProgress = calculateTrainingProgress(timeData.total);\r\n            setWatchState({\r\n                ...watchStateRef.current,\r\n                timer: calcDisplayTimer(timeData.time),\r\n                timerCls: getTimerCls(timeData.time, watchstate),\r\n                state: watchstate,\r\n                progress: timeData.progress,\r\n                roundProgress: roundProgress,\r\n                trainingProgress: trainginProgress\r\n            })\r\n        }\r\n        updatePlayStateControls(watchstate);\r\n    }\r\n\r\n    function calculateRoundCurrentTime(ct: number) {\r\n        return watchStateRef.current.round.actions.reduce<number>((result: number, act: StopwatchAction, idx: number) => {\r\n            if (idx < watchStateRef.current.actionIdx) {\r\n                return result + parseInt(act.duration);\r\n            }\r\n            return result;\r\n        }, 0) + ct;\r\n    }\r\n\r\n    function calculateRoundProgress(ct: number) {\r\n        return 100 - calculateProgress(calculateRoundCurrentTime(ct), watchStateRef.current.roundDuration);\r\n    }\r\n\r\n    function calculateTrainingProgress(ct: number) {\r\n        return 100 - calculateProgress(ct, watchStateRef.current.totalDuration);\r\n    }\r\n\r\n    function playSound(type: string) {\r\n        if (!settingsRef.current.soundEnabled) {\r\n            return\r\n        }\r\n        let element = undefined;\r\n        switch (type) {\r\n            case \"countdown\":\r\n                element = countdownSound.current;\r\n                break;\r\n            case \"end\":\r\n                element = endSound.current;\r\n                break;\r\n            case \"exercise\":\r\n                element = exerciseSound.current;\r\n                break;\r\n            case \"warmup\":\r\n                element = warmupSound.current;\r\n                break;\r\n            case \"break\":\r\n                element = breakSound.current;\r\n                break;\r\n            case \"cooldown\":\r\n                element = cooldownSound.current;\r\n                break;\r\n\r\n        }\r\n        if (element) {\r\n            element.currentTime = 0;\r\n            element.play();\r\n        }\r\n    }\r\n\r\n    function getTimerCls(timer: number, state: StopWatchPerformState): string {\r\n        return state === StopWatchStateOptions.RUNNING && timer >= 0 && timer < 3 ? \"cui-text-warning timer-blink-animation\" : \"\";\r\n    }\r\n\r\n    function updatePlayStateControls(state: StopWatchPerformState) {\r\n        switch (state) {\r\n            case StopWatchStateOptions.RUNNING:\r\n                setCurrentPlayStateControls({\r\n                    startBtnCls: \"cui-error\",\r\n                    startBtnIcon: \"media_stop\",\r\n                    startBtnText: \"Stop\",\r\n                    isPauseVisible: true,\r\n                    pauseBtnIcon: \"media_pause\",\r\n                    pauseBtnText: \"Pause\"\r\n                })\r\n                break;\r\n            case StopWatchStateOptions.PAUSED:\r\n                setCurrentPlayStateControls({\r\n                    startBtnCls: \"cui-error\",\r\n                    startBtnIcon: \"media_stop\",\r\n                    startBtnText: \"Stop\",\r\n                    isPauseVisible: true,\r\n                    pauseBtnIcon: \"media_play\",\r\n                    pauseBtnText: \"Resume\"\r\n                })\r\n                break;\r\n            case StopWatchStateOptions.STOPPED:\r\n                setCurrentPlayStateControls({\r\n                    startBtnCls: \"cui-accent\",\r\n                    startBtnIcon: \"media_play\",\r\n                    startBtnText: \"Start\",\r\n                    isPauseVisible: false,\r\n                    pauseBtnIcon: \"media_pause\",\r\n                    pauseBtnText: \"Pause\"\r\n                })\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    function getBackgroundClass(action: StopwatchAction) {\r\n        return !is(action) ? \"\" : getBgClassByType(action.type);\r\n    }\r\n\r\n    function onFullScreen() {\r\n        if (!mainViewRef.current) {\r\n            return;\r\n        }\r\n        if (isFullscreen) {\r\n            closeFullscreen();\r\n        }\r\n        openFullscreen(mainViewRef.current);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        setPageTitle(\"Perform training\");\r\n        const wakeLock = new KeepScreenAwakeFeature();\r\n        if (props.training) {\r\n            setPageTitle(props.training.name);\r\n            setNavbarTitle(props.training.name)\r\n            setDefaultWatchState(props.training);\r\n\r\n            try {\r\n                wakeLock.activate();\r\n            } catch (e) {\r\n                setErrorMessage(\"We could not activate feature to keep your device's screen awake during training performance\")\r\n            }\r\n            let stop = new StopWatch();\r\n            stop.onTick(onStopwatchTick);\r\n            setStopwatch(stop);\r\n        }\r\n\r\n        return () => {\r\n            if (stopwatch) {\r\n                stopwatch.stop();\r\n            }\r\n            wakeLock.release();\r\n        }\r\n    }, [props.training, settings.soundEnabled])\r\n    return (<div className=\"stopwatch-layout-content cui-background-default\" ref={mainViewRef}>\r\n        <div className={\"cui-height-1-1 cui-overflow-y-auto cui-flex cui-center cui-middle \" + getBackgroundClass(watchState.action)} >\r\n            <div className=\"stopwatch-content-width cui-text-center cui-flex-center animation-fade-in\">\r\n                {settings.simpleView ? <SimpleCountDownTimer actionIdx={watchState.actionIdx} watchState={watchState} /> : <CountDownTimer actionIdx={watchState.actionIdx} watchState={watchState} />}\r\n            </div>\r\n        </div>\r\n        {/* Show button bar */}\r\n        <div className=\"training-control-btns\">\r\n            <a className=\"cui-icon-button cui-default cui-margin-small\" cui-icon={settings.soundEnabled ? \"speaker\" : \"volume_muted\"} onClick={() => {\r\n                setSettings({\r\n                    ...settings,\r\n                    soundEnabled: !settings.soundEnabled\r\n                })\r\n            }}></a>\r\n            {currentPlayStateControls.isPauseVisible && <IconButton icon={currentPlayStateControls.pauseBtnIcon} onClick={onPauseClick} modifiers=\"cui-margin-small cui-large cui-default\" />}\r\n            <IconButton icon={currentPlayStateControls.startBtnIcon} onClick={onStartClick} modifiers={\"cui-large \" + currentPlayStateControls.startBtnCls} />\r\n            <a className=\"cui-icon-button cui-default cui-margin-small\" cui-icon={isFullscreen ? \"shrink\" : \"expand\"} onClick={onFullScreen}></a>\r\n        </div>\r\n        {/* Show error message */}\r\n        {is(errorMessage) &&\r\n            <div className=\"cui-position-float cui-position-bottom cui-position-right app-float-bottom cui-margin-right\"><span className=\"cui-icon cui-error cui-tooltip\" cui-icon=\"ban\" cui-tooltip={errorMessage}></span></div>}\r\n        <audio ref={countdownSound} id=\"stopwatch-countdown\" src=\"/static/audio/stopwatch_countdown.mp3\" />\r\n        <audio ref={exerciseSound} id=\"stopwatch-exercise\" src=\"/static/audio/stopwatch_exercise.mp3\" />\r\n        <audio ref={warmupSound} id=\"stopwatch-warmup\" src=\"/static/audio/stopwatch_warmup.mp3\" />\r\n        <audio ref={breakSound} id=\"stopwatch-break\" src=\"/static/audio/stopwatch_break.mp3\" />\r\n        <audio ref={cooldownSound} id=\"stopwatch-cooldown\" src=\"/static/audio/stopwatch_cooldown.mp3\" />\r\n        <audio ref={endSound} id=\"stopwatch-cooldown\" src=\"/static/audio/stopwatch_end.mp3\" />\r\n    </div>);\r\n}\r\n\r\n\r\n/*\r\n<div className=\"stopwatch-layout-content cui-background-default\" ref={mainViewRef}>\r\n        <div className={\"cui-height-1-1 cui-overflow-y-auto cui-flex cui-center cui-middle \" + getBackgroundClass(watchState.action)} >\r\n            <div className=\"stopwatch-content-width perform-layout cui-text-center animation-fade-in\">\r\n                <div className=\"perform-main-controls\">\r\n                    <p className=\"cui-margin-remove\">{watchState.round?.name}</p>\r\n                    <p className=\"cui-text-muted cui-text-small cui-margin-remove\">Round {watchState.roundIdx + 1} of {watchState.roundTotal}</p>\r\n                    <div className=\"cui-flex-center\">\r\n                        {settings.simpleView ? <SimpleCountDownTimer actionIdx={watchState.actionIdx} watchState={watchState} /> : <CountDownTimer actionIdx={watchState.actionIdx} watchState={watchState} />}\r\n                    </div>\r\n                </div>\r\n                <div className=\"perform-buttons\">\r\n                    <div className=\"cui-width-1-1\">\r\n                        <h3 className={\"cui-h3 \"}>{watchState.action?.name}</h3>\r\n                        <div className=\"cui-flex cui-center\">\r\n                            {currentPlayStateControls.isPauseVisible && <IconButton icon={currentPlayStateControls.pauseBtnIcon} onClick={onPauseClick} modifiers=\"cui-margin-small-right cui-large cui-default\" />}\r\n                            <IconButton icon={currentPlayStateControls.startBtnIcon} onClick={onStartClick} modifiers={\"cui-large \" + currentPlayStateControls.startBtnCls} />\r\n                        </div>\r\n                        <p className=\"cui-text-muted\">{props.training?.description}</p>\r\n                        <div className=\"\">\r\n                            {is(errorMessage) && <span className=\"cui-icon cui-error cui-tooltip\" cui-icon=\"ban\" data-tooltip={errorMessage}></span>}\r\n                            <a className=\"cui-icon-button cui-default\" cui-icon={settings.soundEnabled ? \"speaker\" : \"volume_muted\"} onClick={() => {\r\n                                setSettings({\r\n                                    ...settings,\r\n                                    soundEnabled: !settings.soundEnabled\r\n                                })\r\n                            }}></a>\r\n                            <a className=\"cui-icon-button cui-default cui-margin-small-left\" cui-icon={isFullscreen ? \"shrink\" : \"expand\"} onClick={onFullScreen}></a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <audio ref={countdownSound} id=\"stopwatch-countdown\" src=\"/static/audio/stopwatch_countdown.mp3\" />\r\n            <audio ref={exerciseSound} id=\"stopwatch-exercise\" src=\"/static/audio/stopwatch_exercise.mp3\" />\r\n            <audio ref={warmupSound} id=\"stopwatch-warmup\" src=\"/static/audio/stopwatch_warmup.mp3\" />\r\n            <audio ref={breakSound} id=\"stopwatch-break\" src=\"/static/audio/stopwatch_break.mp3\" />\r\n            <audio ref={cooldownSound} id=\"stopwatch-cooldown\" src=\"/static/audio/stopwatch_cooldown.mp3\" />\r\n            <audio ref={endSound} id=\"stopwatch-cooldown\" src=\"/static/audio/stopwatch_end.mp3\" />\r\n        </div>\r\n    </div>\r\n*/","import * as React from 'react'\r\n\r\nexport function useIsLoading(init: boolean): [boolean, (val: boolean) => void] {\r\n    const loading = React.useRef(init);\r\n\r\n    function setIsLoading(flag: boolean) {\r\n        console.log(\"Flag: \" + flag + \", Loading: \" + loading)\r\n        if (loading.current != flag) {\r\n            loading.current = flag;\r\n        }\r\n    }\r\n    React.useEffect(() => {\r\n        loading.current = init;\r\n    }, [])\r\n    return [loading.current, setIsLoading];\r\n}\r\n","import * as React from 'react'\r\nimport { ACTIONS_FLOW_ACTIONS } from '../../../app/flow/actions';\r\nimport { SETTINGS_FLOW_ACTIONS } from '../../../app/flow/settings';\r\nimport { ACTIONS } from '../../../app/flow/trainings';\r\n\r\nexport function SettingsDevTools() {\r\n    function onClear() {\r\n        window.$cui.toast(\"Data cleared\")\r\n    }\r\n\r\n    function onSettingsUpdate() {\r\n        console.log(\"Settings cleared\")\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.GET_SETTINGS);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const settingsClearSub = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.CLEAR_SETTINGS, { finish: onSettingsUpdate });\r\n        const actionsClearSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.CLEAR_ACTIONS, { finish: onClear });\r\n        const trainingsClearSub = window.$flow.subscribe(ACTIONS.CLEAR_TRAININGS, { finish: onClear });\r\n\r\n\r\n        return () => {\r\n\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.CLEAR_SETTINGS, settingsClearSub.id);\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.CLEAR_ACTIONS, actionsClearSub.id);\r\n            window.$flow.unsubscribe(ACTIONS.CLEAR_TRAININGS, trainingsClearSub.id);\r\n        }\r\n    }, [])\r\n    return (<div className=\"cui-section\">\r\n        <h3 className=\"cui-h3\">Dev tools</h3>\r\n        <div className=\"\">\r\n            <div></div>\r\n            <button className=\"cui-button cui-margin-small cui-default \" onClick={() => { window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.CLEAR_ACTIONS) }}>Clear actions only</button>\r\n        </div><div>\r\n            <button className=\"cui-button cui-margin-small cui-default\" onClick={() => { window.$flow.perform(ACTIONS.CLEAR_TRAININGS) }}>Clear trainings only</button>\r\n        </div><div>\r\n            <button className=\"cui-button cui-margin-small cui-default\" onClick={() => { window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.CLEAR_SETTINGS) }}>Clear settings only</button>\r\n        </div><div>\r\n            <button className=\"cui-button cui-margin-small cui-error\" onClick={() => {\r\n                window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.CLEAR_ACTIONS)\r\n                window.$flow.perform(ACTIONS.CLEAR_TRAININGS)\r\n                window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.CLEAR_SETTINGS)\r\n            }}>Clear data</button>\r\n        </div>\r\n    </div>);\r\n}\r\n","import * as React from 'react'\r\nexport interface OnSwitchValueUpdate {\r\n    (name: string, value: boolean): void;\r\n}\r\n\r\n\r\nexport interface SettingsSwitchListItemProps {\r\n    label: string,\r\n    value: boolean,\r\n    name: string,\r\n    onUpdate: OnSwitchValueUpdate;\r\n}\r\n\r\nexport function SettingsSwitchListItem(props: SettingsSwitchListItemProps) {\r\n    function onChange(ev: any) {\r\n        let target = ev.target\r\n        if (props.onUpdate) {\r\n            props.onUpdate(target.name, target.checked);\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n\r\n    }, [props.value, props.name])\r\n    return (\r\n        <div className=\"cui-flex cui-middle cui-padding-small\">\r\n            <div className=\"cui-flex-grow\">{props.label}</div>\r\n            <div className=\"cui-input-switch\">\r\n                <input type=\"checkbox\" id={props.name} name={props.name} checked={props.value} onChange={onChange} />\r\n                <label htmlFor={props.name} className=\"cui-content\"></label>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","import * as React from 'react'\r\nimport { setNavbarTitle, setPageTitle } from '../../../core/helpers';\r\nimport { PageHeader } from '../common/PageHeader';\r\nimport { SettingsDevTools } from './SettingsDevTools';\r\nimport { SettingsSwitchListItem } from './SettingsSwitchListItem'\r\nimport { useSettings } from '../../../ui/hooks/settings';\r\n\r\nexport interface SettingsState {\r\n    darkModeEnabled: boolean;\r\n    soundEnabled: boolean;\r\n}\r\n\r\nexport function StopwatchSettings() {\r\n    const [settings, setSettings] = useSettings();\r\n\r\n\r\n    function onValueChange(name: string, value: boolean) {\r\n\r\n        if (name !== 'soundEnabled' && name !== \"darkMode\" && name !== \"simpleView\") {\r\n            return;\r\n        }\r\n        let newSettings = {\r\n            ...settings,\r\n            [name]: value\r\n        }\r\n        setSettings(newSettings)\r\n    }\r\n\r\n\r\n    React.useEffect(() => {\r\n        setPageTitle(\"Settings\");\r\n        setNavbarTitle(\"Settings\");\r\n\r\n    }, [settings.darkMode, settings.soundEnabled])\r\n    return (<><div className=\"stopwatch-content-width\">\r\n        <PageHeader title=\"Settings\" description=\"Change application setup\" icon=\"setup\" />\r\n        <div className=\"cui-section\">\r\n            <ul className=\"cui-list\">\r\n                <li>\r\n                    <SettingsSwitchListItem label=\"Dark mode\" name=\"darkMode\" value={settings.darkMode} onUpdate={onValueChange} />\r\n                </li>\r\n                <li>\r\n                    <SettingsSwitchListItem label=\"Play sound\" name=\"soundEnabled\" value={settings.soundEnabled} onUpdate={onValueChange} />\r\n                </li>\r\n                <li>\r\n                    <SettingsSwitchListItem label=\"Simple timer view\" name=\"simpleView\" value={settings.simpleView} onUpdate={onValueChange} />\r\n                </li>\r\n                <li>Welcome screen status: {settings.isWelcome ? \"Yes\" : \"No\"}</li>\r\n            </ul>\r\n            <div className=\"cui-section\">\r\n                <button className=\"cui-button cui-default\" onClick={() => {\r\n                    window.$cui.get(\"#welcome-dialog\").emit(\"open\");\r\n                }}>Show tutorial dialog</button>\r\n            </div>\r\n        </div>\r\n        <SettingsDevTools />\r\n    </div></>);\r\n}","import * as React from 'react'\r\nimport { setNavbarTitle, setPageTitle } from '../../../core/helpers';\r\nimport { PageHeader } from '../common/PageHeader';\r\n\r\nexport function About() {\r\n    setPageTitle(\"About\");\r\n    setNavbarTitle(\"About\");\r\n    return (<><div className=\"stopwatch-content-width\">\r\n        <PageHeader title=\"About\" description=\"Some details about the application\" icon=\"info\" />\r\n        <div className=\"\">\r\n            <div className=\"cui-container \">\r\n                <h3 className=\"cui-h3\">Creator</h3>\r\n                <p className=\"\">Project was created and is devloped by <span className=\"cui-text-accent cui-text-bold\">BPDev</span>: <a href=\"https://github.com/bpd-d\" className=\"cui-link cui-accent\">Visit Github</a> </p>\r\n            </div>\r\n            <div className=\"cui-container \">\r\n                <h3 className=\"cui-h3\">Repository</h3>\r\n                <p className=\"\">Project sources can be found on Github under following link: <a className=\"cui-link cui-accent\" href=\"https://github.com/bpd-d/bpd-stopwatch-app\">bpd-stopwatch-app</a></p>\r\n            </div>\r\n            <div className=\"cui-container\">\r\n                <h3 className=\"cui-h3\">Links</h3>\r\n                <p className=\"\">Project uses third party libraries, see following list: </p>\r\n                <ul className=\"cui-list\">\r\n                    <li>\r\n                        <div className=\"\">\r\n                            <div className=\"\">\r\n                                <span>React</span>\r\n                            </div>\r\n                            <a href=\"https://github.com/facebook/react\" className=\"cui-link\">Github</a>\r\n                            <a href=\"https://reactjs.org/\" className=\"cui-link cui-margin-left\">React JS home page</a>\r\n                        </div>\r\n                    </li>\r\n                    <li>\r\n                        <div className=\"\">\r\n                            <div className=\"\">\r\n                                <span>cUI Light</span>\r\n                            </div>\r\n                            <a href=\"https://github.com/bpd-d/cui-light\" className=\"cui-link\">cUI Light on Github</a>\r\n                            <a href=\"https://github.com/bpd-d/cui-styles\" className=\"cui-link cui-margin-left\">cUI Styles on Github</a>\r\n                            <a href=\"https://github.com/bpd-d/cui-icons\" className=\"cui-link cui-margin-left\">cUI Icons on Github</a>\r\n                        </div></li>\r\n                    <li>\r\n                        <div className=\"\">\r\n                            <div className=\"\">\r\n                                <span>BPD Flow</span>\r\n                            </div>\r\n                            <a href=\"https://github.com/bpd-d/bpd-flow\" className=\"cui-link\">Github</a>\r\n                        </div>\r\n\r\n                    </li>\r\n                    <li>\r\n                        <div className=\"\">\r\n                            <div className=\"\">\r\n                                <span>BPD Storage</span>\r\n                            </div>\r\n                            <a href=\"https://github.com/bpd-d/bpd-storage\" className=\"cui-link\">Github</a>\r\n                        </div>\r\n\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div></>);\r\n}\r\n","import * as React from 'react'\r\n\r\nexport interface FooterProps {\r\n    mode: string;\r\n}\r\n\r\nexport function Footer(props: FooterProps) {\r\n    function currentYear(): string {\r\n        return new Date().getFullYear() + \"\";\r\n    }\r\n    return (\r\n        <div className=\"stopwatch-footer cui-flex cui-right cui-middle\">\r\n            <div className=\"cui-margin-horizontal\">\r\n                <span className=\"cui-margin-small-right\">Copyrights {currentYear()}</span>\r\n                <a href=\"https://github.com/bpd-d\" target=\"_blank\" className=\"cui-link cui-accent\">BPDDev</a>\r\n                {props.mode === 'development' && <span className=\"cui-margin-left cui-text-bold\">Dev</span>}\r\n            </div>\r\n        </div>);\r\n}\r\n","import { is } from 'bpd-toolkit/dist/esm/index';\r\nimport * as React from 'react'\r\nimport { ElementManager } from 'cui-light/dist/esm/managers/element';\r\nimport { BpdDialog } from '../common/BpdDialog';\r\n\r\nexport function TutorialDialog() {\r\n    const [isLast, setIsLast] = React.useState(false);\r\n    const switchElement = React.useRef<ElementManager>(null);\r\n    function onSwitched(data: any) {\r\n        if (is(data) && is(data.index) && data.index === 2) {\r\n            setIsLast(true)\r\n            return\r\n        }\r\n        setIsLast(false)\r\n    }\r\n\r\n    function onNextClick() {\r\n        if (isLast) {\r\n            window.$cui.get(\"#welcome-dialog\").emit(\"close\");\r\n            return;\r\n        }\r\n        switchElement.current.emit(\"switch\", \"next\")\r\n\r\n    }\r\n\r\n    function getElement() { }\r\n\r\n    React.useEffect(() => {\r\n        switchElement.current = window.$cui.get(\"#welcome-switch\");\r\n        const ids: string[] = switchElement.current.on(\"switched\", onSwitched);\r\n        return () => {\r\n            if (is(ids)) {\r\n                ids.forEach(id => {\r\n                    switchElement.current.detach(\"switched\", id)\r\n                })\r\n\r\n            }\r\n\r\n        }\r\n    }, [isLast])\r\n    return (\r\n        <BpdDialog id=\"welcome-dialog\" title=\"Welcome\"\r\n            body={\r\n                <ul id=\"welcome-switch\" cui-switch=\"links: #welcome-step-indicator > li; height: 250px\">\r\n                    <li className=\"cui-active\"><div>Welcome to <span className=\"cui-text-bold cui-text-accent\">Bpd Stopwatch</span> app. It is simple, offline tool which will allow you to perform highly custimzed trainings that need stopwatch.</div></li>\r\n                    <li><div>Set up some <span className=\"cui-text-bold cui-text-accent\">Actions</span> to build your trainings from. You can define action name, type and it's duration. Action type has it's indications in <span className=\"cui-text-bold\">colors</span> and <span className=\"cui-text-bold\">sounds</span> later when your training is performed, so choose type accordingly to your action type.\r\n                    You can choose from <span className=\"cui-text-italic\">warmup</span>, <span className=\"cui-text-italic\">exercise</span>, <span className=\"cui-text-italic\">break</span> and <span className=\"cui-text-italic\">cooldown</span>. There are some actions already defined (they cannot be modified or deleted), which can help you to start with building your trainings.</div></li>\r\n                    <li><div>Give your <span className=\"cui-text-bold cui-text-accent\">training</span> a name and optionally  <span className=\"cui-text-bold cui-accent\">description</span>, then setup <span className=\"cui-text-bold cui-accent\">rounds</span>. You can define rounds from available actions.\r\n                        Once added they can be <span className=\"cui-text-italic\">re-positioned</span>, <span className=\"cui-text-italic\">cloned</span> or <span className=\"cui-text-italic\">deleted</span>.</div></li>\r\n                </ul>\r\n            }\r\n            footer={\r\n                <div className=\"cui-flex cui-middle\">\r\n                    <ul id=\"welcome-step-indicator\" className=\"cui-switcher-indicator cui-flex-grow\" cui-switcher=\"target: #welcome-switch\">\r\n                        <li><a></a></li>\r\n                        <li><a></a></li>\r\n                        <li><a></a></li>\r\n                    </ul>\r\n                    <div>\r\n                        <button className=\"cui-button\" onClick={onNextClick}>{isLast ? \"Close\" : \"Next\"}</button>\r\n                    </div>\r\n                </div>\r\n            }\r\n        />\r\n    );\r\n}\r\n","import * as React from 'react'\r\nimport { setNavbarTitle, setPageTitle } from '../../../core/helpers';\r\nimport { PageHeader } from '../common/PageHeader';\r\n\r\nexport function Help() {\r\n    setPageTitle(\"Help\");\r\n    setNavbarTitle(\"Help\");\r\n    return (<div className=\"stopwatch-content-width\">\r\n        <PageHeader title=\"Help\" description=\"Get started with bpd Stopwatch app\" icon=\"emoji_smile\" />\r\n        <div className=\"cui-container cui-flex-center\">Work in progress...</div>\r\n\r\n    </div>);\r\n}\r\n","import * as React from \"react\";\r\nimport { Switch, Route, BrowserRouter, useLocation } from \"react-router-dom\";\r\nimport { Home } from \"./components/home/home\";\r\nimport { ErrorRoute } from \"./error\";\r\nimport { Navbar } from \"./components/navbar/navbar\";\r\nimport { OffCanvas } from \"./components/offacanvas/offcanvas\";\r\nimport { StopwatchActionsComponent } from \"./components/actions/StopwatchActionsComponent\";\r\nimport EditTraining from \"./components/trainings/EditTraining\";\r\nimport { PerfromTraining } from \"./components/perform/PerformTraining\";\r\nimport { StopwatchSettings } from \"./components/settings/StopwatchSettings\";\r\nimport { SETTINGS_FLOW_ACTIONS } from \"../app/flow/settings\";\r\nimport { setDarkMode } from \"../core/helpers\";\r\nimport { About } from \"./components/about/About\";\r\nimport { Footer } from \"./components/footer/Footer\";\r\nimport { MAPPIGNS } from \"./routes\";\r\nimport { ElementManager } from \"cui-light/dist/esm/managers/element\";\r\nimport { is } from \"bpd-toolkit/dist/esm/index\";\r\nimport { TutorialDialog } from \"./components/tutorial/TutorialDialog\";\r\nimport { Help } from \"./components/help/help\";\r\n\r\nexport interface AppProps {\r\n    mode: string;\r\n}\r\nexport interface AppState {\r\n    currentSite?: string;\r\n}\r\n\r\nexport function AppBase(props: AppProps) {\r\n    return (<BrowserRouter>\r\n        <Route path=\"*\">\r\n            <App mode={props.mode} />\r\n        </Route>\r\n    </BrowserRouter>)\r\n}\r\n\r\nexport function App(props: AppProps) {\r\n\r\n    let welcomeDialogHandle: ElementManager;\r\n    let location = useLocation();\r\n    function onDarkMode(flag: boolean) {\r\n        setDarkMode(flag);\r\n    }\r\n\r\n    function onWelcomeScreen(flag: boolean) {\r\n        if (!flag) {\r\n            setTimeout(() => {\r\n                this.welcomeDialogHandle = window.$cui.get(\"#welcome-dialog\");\r\n                this.welcomeDialogCloseEventIds = this.welcomeDialogHandle.on(\"close\", this.onWelcomeDialogClose.bind(this));\r\n                window.$cui.get(\"#welcome-dialog\").emit(\"open\");\r\n            }, 100)\r\n\r\n        }\r\n    }\r\n\r\n    function onWelcomeDialogClose() {\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.SET_IS_WELCOME, true);\r\n    }\r\n\r\n\r\n    React.useEffect(() => {\r\n        const darkModeSub = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.GET_DARK_MODE, { finish: onDarkMode });\r\n        const welcomeScreenGetSub = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.GET_IS_WELCOME, { finish: onWelcomeScreen });\r\n        welcomeDialogHandle = window.$cui.get(\"#welcome-dialog\");\r\n        const welcomeDialogCloseEventIds = welcomeDialogHandle.on(\"close\", onWelcomeDialogClose);\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.GET_IS_WELCOME);\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.GET_DARK_MODE);\r\n\r\n        return () => {\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.GET_DARK_MODE, darkModeSub.id);\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.GET_IS_WELCOME, welcomeScreenGetSub.id);\r\n\r\n            if (is(welcomeDialogCloseEventIds)) {\r\n                welcomeDialogCloseEventIds.forEach((id: string) => {\r\n                    welcomeDialogHandle.detach(\"close\", id);\r\n                })\r\n            }\r\n        }\r\n    })\r\n    return (\r\n        <div className=\"stopwatch-layout-main\">\r\n            <Navbar />\r\n            <div className=\"stopwatch-layout-content cui-overflow-y-auto\">\r\n                <Switch location={location}>\r\n                    <Route path={MAPPIGNS.getUrl(\"perform\")} component={PerfromTraining}></Route>\r\n                    <Route path={MAPPIGNS.getUrl(\"newTraining\")} component={EditTraining}></Route>\r\n                    <Route path={MAPPIGNS.getUrl(\"editTraining\")} component={EditTraining}></Route>\r\n                    <Route path={MAPPIGNS.getUrl(\"actions\")} component={StopwatchActionsComponent}></Route>\r\n                    <Route path={MAPPIGNS.getUrl(\"settings\")} component={StopwatchSettings}></Route>\r\n                    <Route path={MAPPIGNS.getUrl(\"about\")} component={About}></Route>\r\n                    <Route path={MAPPIGNS.getUrl(\"help\")} component={Help}></Route>\r\n                    <Route path={MAPPIGNS.getUrl(\"home\")} component={Home}></Route>\r\n                    <Route>\r\n                        <ErrorRoute />\r\n                    </Route>\r\n                </Switch>\r\n            </div>\r\n            <Footer mode={props.mode} />\r\n            <OffCanvas />\r\n            <TutorialDialog />\r\n        </div>);\r\n}","import { ITrainingsService, IActionsService, ISettingsService } from \"./interfaces\";\r\nimport { Training, StopwatchAction, Settings, TrainingState } from \"../models\";\r\nimport { BpdStorage } from \"../../../node_modules/bpd-storage/dist/index\";\r\nimport { ActionValidator, TrainingValidator } from \"../validators\";\r\nimport { is } from \"bpd-toolkit/dist/esm/index\";\r\nimport { DefaultSettings } from \"../statics\";\r\n\r\nconst TRAININGS_STORAGE = \"Trainings\";\r\nconst DRAFT_STORAGE = \"DRAFT_TRAINING\";\r\n\r\nexport class TrainingsStorageService implements ITrainingsService {\r\n    #storage: BpdStorage;\r\n    // #trainings: Training[];\r\n    #validator: TrainingValidator;\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_TRAININGS\");\r\n        // this.#trainings = [];\r\n        this.#validator = new TrainingValidator();\r\n    }\r\n\r\n\r\n    getAllTrainings(): Training[] {\r\n        return this.getTrainings();\r\n    }\r\n\r\n    addTraining(training: Training): boolean {\r\n        let result = false;\r\n\r\n        if (this.validate(training)) {\r\n            this.onAction((t: Training[]) => {\r\n                if (!is(training.id)) {\r\n                    if (training.state === TrainingState.DRAFT) {\r\n                        this.clearDraft();\r\n                    }\r\n                    training.id = \"00\" + this.getNextIndex();\r\n                    training.state = TrainingState.PUBLISH;\r\n                    t.push(training)\r\n                    result = true;\r\n                    return t;\r\n                }\r\n                return null;\r\n            })\r\n        }\r\n        return result;\r\n    }\r\n\r\n    updateTraining(training: Training): boolean {\r\n        let result = false;\r\n\r\n        if (this.validate(training)) {\r\n            if (!is(training.id)) {\r\n                result = this.addTraining(training)\r\n            } else {\r\n                this.onAction((t: Training[]) => {\r\n                    let idx = t.findIndex(item => item.id === training.id);\r\n                    if (idx > -1) {\r\n                        if (training.state === TrainingState.DRAFT) {\r\n                            this.clearDraft();\r\n                        }\r\n                        training.state = TrainingState.PUBLISH;\r\n                        t[idx] = training;\r\n                        result = true;\r\n                        return t;\r\n                    }\r\n                    return null;\r\n                })\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Removes training from storage\r\n     * @param id Id of training\r\n     */\r\n    deleteTraining(id: string): boolean {\r\n        let result = false;\r\n        if (!is(id)) {\r\n            return false;\r\n        }\r\n        this.onAction((t: Training[]) => {\r\n            let idx = t.findIndex(item => item.id === id);\r\n            if (idx > -1) {\r\n                t.splice(idx, 1);\r\n                result = true;\r\n                return t;\r\n            }\r\n            return null;\r\n        })\r\n        return result;\r\n    }\r\n\r\n    getTraining(id: string): Training {\r\n        let training = undefined;\r\n        this.onAction((t) => {\r\n            training = t.find(item => { return item.id === id });\r\n            return null;\r\n        })\r\n        return training;\r\n    }\r\n\r\n    /**\r\n     * Removes all trainings from storage\r\n     */\r\n    clearTrainings(): void {\r\n        this.onAction((trainings: Training[]) => {\r\n            return [];\r\n        })\r\n    }\r\n\r\n    isDraft(): boolean {\r\n        throw is(this.#storage.getAny(DRAFT_STORAGE));\r\n    }\r\n\r\n    getDraft(): Training {\r\n        return this.#storage.getAny(DRAFT_STORAGE) ?? undefined;\r\n    }\r\n\r\n    setDraft(training: Training): boolean {\r\n        if (!is(training)) {\r\n            return;\r\n        }\r\n        training.state = TrainingState.DRAFT;\r\n        this.#storage.setAny(DRAFT_STORAGE, training);\r\n    }\r\n\r\n    clearDraft(): void {\r\n        this.#storage.removeItem(DRAFT_STORAGE);\r\n    }\r\n\r\n    getCurrentTraining(): Training {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    setCurrentTraining(training: Training): void {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    private getTrainings(): Training[] {\r\n        return this.#storage.getAny(TRAININGS_STORAGE) ?? [];\r\n    }\r\n\r\n    private setTrainings(t: Training[]): void {\r\n        this.#storage.setAny(TRAININGS_STORAGE, t);\r\n    }\r\n\r\n    private getNextIndex(): number {\r\n        let idx = this.#storage.getNumber(\"TRAININGS_INDEX\");\r\n        if (!idx || idx === NaN) {\r\n            idx = 1;\r\n        } else {\r\n            idx += 1;\r\n        }\r\n        this.#storage.setNumber(\"TRAININGS_INDEX\", idx);\r\n        return idx;\r\n    }\r\n\r\n    private validate(training: Training): boolean {\r\n        return this.#validator.validate(training).status;\r\n    }\r\n\r\n    private onAction(callback: (t: Training[]) => Training[] | null) {\r\n        let t = this.getTrainings();\r\n        let result = callback(t)\r\n        if (result !== null) {\r\n            this.setTrainings(result);\r\n        }\r\n    }\r\n}\r\n\r\nexport class ActionStorageService implements IActionsService {\r\n    #storage: BpdStorage;\r\n    #actions: StopwatchAction[];\r\n    #validator: ActionValidator;\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_TRAININGS\");\r\n        this.#actions = [];\r\n        this.#validator = new ActionValidator();\r\n        this.getActionsFromStorage();\r\n    }\r\n\r\n    getAllActions(): StopwatchAction[] {\r\n        return [...this.#actions];\r\n    }\r\n\r\n    setAction(action: StopwatchAction): boolean {\r\n        if (!this.#validator.validate(action).status) {\r\n            return false;\r\n        }\r\n        if (!is(action.id)) {\r\n            action.id = \"000\" + this.getNextIndex();\r\n            this.#actions.push(action);\r\n        }\r\n        let existingIndex = this.getIndex(action);\r\n        if (existingIndex > -1) {\r\n            this.#actions[existingIndex] = action;\r\n            this.setActionsToStorage();\r\n            return true;\r\n        }\r\n        console.log(\"Unknown action id: \" + action.id);\r\n        return false;\r\n    }\r\n\r\n    removeAction(action: StopwatchAction): boolean {\r\n        if (!this.#validator.validate(action).status) {\r\n            return false;\r\n        }\r\n        let existingIndex = this.getIndex(action);\r\n        if (existingIndex < 0) {\r\n            console.log(\"Unknown action id: \" + action.id);\r\n            return false;\r\n        }\r\n        this.#actions.splice(existingIndex, 1);\r\n        this.setActionsToStorage();\r\n        return true;\r\n    }\r\n\r\n    clearActions(): void {\r\n        this.#actions = [];\r\n        this.setActionsToStorage();\r\n    }\r\n\r\n    getActionsById(...id: string[]): StopwatchAction[] | undefined {\r\n        if (!is(id)) {\r\n            return undefined;\r\n        }\r\n        return this.#actions.reduce((result: StopwatchAction[], action: StopwatchAction, index: number) => {\r\n            if (id.includes(action.id)) {\r\n                result.push(action);\r\n            }\r\n            return result;\r\n        }, []);\r\n    }\r\n\r\n    private getIndex(action: StopwatchAction): number {\r\n        return this.#actions.findIndex(item => item.id === action.id);\r\n    }\r\n\r\n    private getActionsFromStorage() {\r\n        let val = this.#storage.getAny(\"ACTIONS\");\r\n        this.#actions = val ?? [];\r\n    }\r\n\r\n    private setActionsToStorage() {\r\n        this.#storage.setAny(\"ACTIONS\", this.#actions);\r\n    }\r\n\r\n    private getNextIndex() {\r\n        let item = this.#storage.getNumber(\"ACTION_INDEX\");\r\n        if (!item) {\r\n            item = 5;\r\n        } else {\r\n            item = item + 1;\r\n        }\r\n        this.#storage.setNumber(\"ACTION_INDEX\", item);\r\n        return item;\r\n    }\r\n\r\n}\r\n\r\nexport class SettingsService implements ISettingsService {\r\n    #storage: BpdStorage;\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_SETTINGS\");\r\n    }\r\n\r\n\r\n    setSettings(value: Settings): boolean {\r\n        this.#storage.setAny(\"SETTINGS\", value);\r\n        return true;\r\n    }\r\n\r\n    getSettings(): Settings {\r\n        return this.#storage.getAny(\"SETTINGS\") || {\r\n            darkMode: false,\r\n            soundEnabled: false\r\n        };\r\n    }\r\n\r\n    setSoundEnabled(flag: boolean): void {\r\n        let settings = this.getSettings();\r\n        if (flag !== settings.soundEnabled) {\r\n            settings.soundEnabled = flag;\r\n            this.setSettings(settings)\r\n        }\r\n    }\r\n\r\n    isSoundEnabled(): boolean {\r\n        return this.getSettings()?.soundEnabled;\r\n    }\r\n\r\n    setDarkMode(flag: boolean): void {\r\n        let settings = this.getSettings();\r\n        if (flag !== settings.darkMode) {\r\n            settings.darkMode = flag;\r\n            this.setSettings(settings)\r\n        }\r\n    }\r\n\r\n    isDarkMode(): boolean {\r\n        return this.getSettings()?.darkMode;\r\n    }\r\n\r\n    isWelcomeSet(): boolean {\r\n        return this.getSettings()?.isWelcome;\r\n    }\r\n\r\n    setIsWelcome(flag: boolean) {\r\n        let settings = this.getSettings();\r\n        if (flag !== settings.isWelcome) {\r\n            settings.isWelcome = flag;\r\n            this.setSettings(settings)\r\n        }\r\n    }\r\n\r\n    clearSettings(): void {\r\n        this.setSettings({\r\n            ...DefaultSettings\r\n        })\r\n    }\r\n}","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _elements, _isLocked, _logger, _cDt, _utils, _actionsHelper;\r\nimport { is, are } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { CuiActionsHelper } from \"cui-light-core/dist/esm/helpers/helpers\";\r\nimport { CuiClassAction } from \"cui-light-core/dist/esm/utils/actions\";\r\nexport class ElementManager {\r\n    constructor(elements, utils) {\r\n        _elements.set(this, void 0);\r\n        _isLocked.set(this, void 0);\r\n        _logger.set(this, void 0);\r\n        _cDt.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _actionsHelper.set(this, void 0);\r\n        __classPrivateFieldSet(this, _elements, elements);\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        __classPrivateFieldSet(this, _logger, CuiLoggerFactory.get(\"ElementManager\"));\r\n        __classPrivateFieldSet(this, _utils, utils);\r\n        __classPrivateFieldSet(this, _cDt, Date.now());\r\n        __classPrivateFieldSet(this, _actionsHelper, new CuiActionsHelper(utils.interactions));\r\n    }\r\n    toggleClass(className) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(className)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                if (!element.classList.contains(className)) {\r\n                    element.classList.add(className);\r\n                }\r\n                else {\r\n                    element.classList.remove(className);\r\n                }\r\n            }, 'toggleClass');\r\n        });\r\n    }\r\n    toggleClassAs(className) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(className)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                let classes = element.classList;\r\n                __classPrivateFieldGet(this, _utils).interactions.fetch(() => {\r\n                    if (!classes.contains(className)) {\r\n                        __classPrivateFieldGet(this, _utils).interactions.mutate(classes.add, classes, className);\r\n                    }\r\n                    else {\r\n                        __classPrivateFieldGet(this, _utils).interactions.mutate(classes.remove, classes, className);\r\n                    }\r\n                }, this);\r\n            }, 'toggleClassAs');\r\n        });\r\n    }\r\n    setClass(className) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(className)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                if (!element.classList.contains(className)) {\r\n                    element.classList.add(className);\r\n                }\r\n            }, 'setClass');\r\n        });\r\n    }\r\n    setClassAs(className) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(className)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                let classes = element.classList;\r\n                __classPrivateFieldGet(this, _utils).interactions.fetch(() => {\r\n                    if (!classes.contains(className)) {\r\n                        __classPrivateFieldGet(this, _utils).interactions.mutate(classes.add, classes, className);\r\n                    }\r\n                }, this);\r\n            }, 'setClassAs');\r\n        });\r\n    }\r\n    removeClass(className) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(className)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                if (element.classList.contains(className)) {\r\n                    element.classList.remove(className);\r\n                }\r\n            }, 'removeClass');\r\n        });\r\n    }\r\n    removeClassAs(className) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(className)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                let classes = element.classList;\r\n                __classPrivateFieldGet(this, _utils).interactions.fetch(() => {\r\n                    if (classes.contains(className)) {\r\n                        __classPrivateFieldGet(this, _utils).interactions.mutate(classes.remove, classes, className);\r\n                    }\r\n                }, this);\r\n            }, 'removeClass');\r\n        });\r\n    }\r\n    getAttribute(attributeName) {\r\n        if (!is(attributeName)) {\r\n            return [];\r\n        }\r\n        return __classPrivateFieldGet(this, _elements).reduce((val, current) => {\r\n            let attr = current.getAttribute(attributeName);\r\n            if (attr != null) {\r\n                val.push(attr);\r\n            }\r\n            return val;\r\n        }, []);\r\n    }\r\n    setAttribute(attributeName, attributeValue) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(attributeName)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                element.setAttribute(attributeName, attributeValue !== null && attributeValue !== void 0 ? attributeValue : \"\");\r\n            }, 'setAttribute');\r\n        });\r\n    }\r\n    setAttributeAs(attributeName, attributeValue) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(attributeName)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                __classPrivateFieldGet(this, _utils).interactions.mutate(element.setAttribute, element, attributeName, attributeValue !== null && attributeValue !== void 0 ? attributeValue : \"\");\r\n            }, 'setAttributeAs');\r\n        });\r\n    }\r\n    removeAttribute(attributeName) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(attributeName)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                element.removeAttribute(attributeName);\r\n            }, 'removeAttribute');\r\n        });\r\n    }\r\n    removeAttributeAs(attributeName) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(attributeName)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                __classPrivateFieldGet(this, _utils).interactions.mutate(element.removeAttribute, element, attributeName);\r\n            }, 'removeAttributeAs');\r\n        });\r\n    }\r\n    toggleAttribute(attributeName, attributeValue) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(attributeName)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                if (element.hasAttribute(attributeName)) {\r\n                    element.removeAttribute(attributeName);\r\n                }\r\n                else {\r\n                    element.setAttribute(attributeName, attributeValue !== null && attributeValue !== void 0 ? attributeValue : \"\");\r\n                }\r\n            }, 'toggleAttribute');\r\n        });\r\n    }\r\n    toggleAttributeAs(attributeName, attributeValue) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(attributeName)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                __classPrivateFieldGet(this, _utils).interactions.fetch(() => {\r\n                    if (element.hasAttribute(attributeName)) {\r\n                        __classPrivateFieldGet(this, _utils).interactions.mutate(element.removeAttribute, element, attributeName);\r\n                    }\r\n                    else {\r\n                        __classPrivateFieldGet(this, _utils).interactions.mutate(element.setAttribute, element, attributeName, attributeValue !== null && attributeValue !== void 0 ? attributeValue : \"\");\r\n                    }\r\n                }, this);\r\n            }, 'toggleAttributeAs');\r\n        });\r\n    }\r\n    click(onClick) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(onClick)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                //@ts-ignore\r\n                element.addEventListener('click', onClick);\r\n            }, 'click');\r\n        });\r\n    }\r\n    event(eventName, callback) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(eventName) || !is(callback)) {\r\n                return false;\r\n            }\r\n            return this.call((element) => {\r\n                element.addEventListener(eventName, callback);\r\n            }, 'event');\r\n        });\r\n    }\r\n    call(callback, functionName) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (__classPrivateFieldGet(this, _isLocked)) {\r\n                __classPrivateFieldGet(this, _logger).error(\"Element is locked\", functionName);\r\n            }\r\n            this.lock();\r\n            __classPrivateFieldGet(this, _elements).forEach((element, index) => {\r\n                callback(element, index);\r\n            });\r\n            this.unlock();\r\n            return true;\r\n        });\r\n    }\r\n    animate(className, timeout) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!is(className)) {\r\n                return false;\r\n            }\r\n            const delay = timeout !== null && timeout !== void 0 ? timeout : __classPrivateFieldGet(this, _utils).setup.animationTime;\r\n            return this.call((element) => {\r\n                this.change(() => {\r\n                    element.classList.add(className);\r\n                    element.classList.add(CLASSES.animProgress);\r\n                    setTimeout(() => {\r\n                        this.change(() => {\r\n                            element.classList.remove(className);\r\n                            element.classList.remove(CLASSES.animProgress);\r\n                        });\r\n                    }, delay);\r\n                });\r\n            });\r\n        });\r\n    }\r\n    open(openClass, animationClass, timeout) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!are(openClass, animationClass)) {\r\n                return false;\r\n            }\r\n            const delay = timeout !== null && timeout !== void 0 ? timeout : __classPrivateFieldGet(this, _utils).setup.animationTime;\r\n            const action = new CuiClassAction(animationClass);\r\n            return this.call((element) => {\r\n                __classPrivateFieldGet(this, _actionsHelper).performAction(element, action, delay !== null && delay !== void 0 ? delay : 0).then(() => {\r\n                    element.classList.add(openClass);\r\n                });\r\n            });\r\n        });\r\n    }\r\n    close(closeClass, animationClass, timeout) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!are(closeClass, animationClass)) {\r\n                return false;\r\n            }\r\n            const delay = timeout !== null && timeout !== void 0 ? timeout : __classPrivateFieldGet(this, _utils).setup.animationTime;\r\n            const action = new CuiClassAction(animationClass);\r\n            return this.call((element) => {\r\n                __classPrivateFieldGet(this, _actionsHelper).performAction(element, action, delay !== null && delay !== void 0 ? delay : 0).then(() => {\r\n                    element.classList.remove(closeClass);\r\n                });\r\n            });\r\n        });\r\n    }\r\n    emit(event, ...args) {\r\n        if (!is(event)) {\r\n            __classPrivateFieldGet(this, _logger).warning(\"Not enough data to emit event\", \"emit\");\r\n            return;\r\n        }\r\n        this.call((element) => {\r\n            let cuid = element.$cuid;\r\n            if (is(cuid)) {\r\n                __classPrivateFieldGet(this, _logger).debug(`Emitting event ${event} to ${cuid}`);\r\n                __classPrivateFieldGet(this, _utils).bus.emit(event, cuid, ...args);\r\n            }\r\n        }, \"emit\");\r\n    }\r\n    on(event, callback) {\r\n        let ids = [];\r\n        if (!are(event, callback)) {\r\n            __classPrivateFieldGet(this, _logger).error(\"Incorrect arguments\", \"on\");\r\n            return ids;\r\n        }\r\n        this.call((element) => {\r\n            let cuiElement = element;\r\n            if (is(cuiElement)) {\r\n                let disposeId = __classPrivateFieldGet(this, _utils).bus.on(event, callback, cuiElement);\r\n                if (disposeId != null)\r\n                    ids.push(disposeId);\r\n            }\r\n        }, \"on\");\r\n        return ids;\r\n    }\r\n    detach(event, id) {\r\n        if (!are(event, id)) {\r\n            __classPrivateFieldGet(this, _logger).error(\"Incorrect arguments\", \"detach\");\r\n        }\r\n        this.call((element) => {\r\n            let cuiElement = element;\r\n            if (is(cuiElement)) {\r\n                __classPrivateFieldGet(this, _utils).bus.detach(event, id, cuiElement);\r\n            }\r\n        }, \"detach\");\r\n    }\r\n    read(callback, ...args) {\r\n        __classPrivateFieldGet(this, _utils).interactions.fetch(callback, this, ...args);\r\n    }\r\n    change(callback, ...args) {\r\n        __classPrivateFieldGet(this, _utils).interactions.mutate(callback, this, ...args);\r\n    }\r\n    elements() {\r\n        return __classPrivateFieldGet(this, _elements);\r\n    }\r\n    count() {\r\n        return __classPrivateFieldGet(this, _elements).length;\r\n    }\r\n    lock() {\r\n        __classPrivateFieldSet(this, _isLocked, true);\r\n    }\r\n    unlock() {\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n    }\r\n    isLocked() {\r\n        return __classPrivateFieldGet(this, _isLocked);\r\n    }\r\n    refresh() {\r\n        return (Date.now() - __classPrivateFieldGet(this, _cDt)) < 360000;\r\n    }\r\n}\r\n_elements = new WeakMap(), _isLocked = new WeakMap(), _logger = new WeakMap(), _cDt = new WeakMap(), _utils = new WeakMap(), _actionsHelper = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _header, _body, _footer, _prefix, _switches, _reverse;\r\nimport { ElementBuilder } from \"cui-light-core/dist/esm/builders/element\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nexport class DialogBuilder {\r\n    constructor(prefix, reverse, switches) {\r\n        _header.set(this, void 0);\r\n        _body.set(this, void 0);\r\n        _footer.set(this, void 0);\r\n        _prefix.set(this, void 0);\r\n        _switches.set(this, void 0);\r\n        _reverse.set(this, void 0);\r\n        __classPrivateFieldSet(this, _prefix, prefix);\r\n        __classPrivateFieldSet(this, _header, __classPrivateFieldSet(this, _footer, __classPrivateFieldSet(this, _body, undefined)));\r\n        __classPrivateFieldSet(this, _switches, switches !== null && switches !== void 0 ? switches : \"\");\r\n        __classPrivateFieldSet(this, _reverse, reverse);\r\n    }\r\n    createHeader(title, classes, elements) {\r\n        if (!is(classes)) {\r\n            classes = [];\r\n        }\r\n        if (!is(elements)) {\r\n            elements = [];\r\n        }\r\n        let headerBuilder = new ElementBuilder('div');\r\n        headerBuilder.setClasses(`${__classPrivateFieldGet(this, _prefix)}-dialog-header`, ...classes);\r\n        __classPrivateFieldSet(this, _header, headerBuilder.build());\r\n        let titleElement = new ElementBuilder('span').setClasses(this.getPrefixedString(\"-dialog-title\")).build(title);\r\n        __classPrivateFieldGet(this, _header).appendChild(titleElement);\r\n        // @ts-ignore\r\n        this.appendChildrens(__classPrivateFieldGet(this, _header), ...elements);\r\n    }\r\n    createFooter(classes, elements) {\r\n        if (!is(classes)) {\r\n            classes = [];\r\n        }\r\n        if (!is(elements)) {\r\n            elements = [];\r\n        }\r\n        __classPrivateFieldSet(this, _footer, new ElementBuilder('div').setClasses(this.getPrefixedString(\"-dialog-footer\"), ...classes).build());\r\n        // @ts-ignore\r\n        this.appendChildrens(__classPrivateFieldGet(this, _footer), ...elements);\r\n    }\r\n    createBody(classes, elements) {\r\n        if (!is(classes)) {\r\n            classes = [];\r\n        }\r\n        if (!is(elements)) {\r\n            elements = [];\r\n        }\r\n        __classPrivateFieldSet(this, _body, new ElementBuilder('div').setClasses(this.getPrefixedString(\"-dialog-body\"), ...classes).build());\r\n        // @ts-ignore\r\n        this.appendChildrens(__classPrivateFieldGet(this, _body), ...elements);\r\n    }\r\n    build(id) {\r\n        let classes = [this.getPrefixedString(\"-dialog\")];\r\n        if (__classPrivateFieldGet(this, _reverse)) {\r\n            classes.push(this.getPrefixedString('-reverse-auto'));\r\n        }\r\n        let dialog = new ElementBuilder('div').setId(id).setClasses(...classes).setAttributes({\r\n            [this.getPrefixedString('-dialog')]: __classPrivateFieldGet(this, _switches)\r\n        }).build();\r\n        let container = new ElementBuilder('div').setClasses(this.getPrefixedString(\"-dialog-container\")).build();\r\n        if (__classPrivateFieldGet(this, _header))\r\n            container.appendChild(__classPrivateFieldGet(this, _header));\r\n        if (__classPrivateFieldGet(this, _body))\r\n            container.appendChild(__classPrivateFieldGet(this, _body));\r\n        if (__classPrivateFieldGet(this, _footer))\r\n            container.appendChild(__classPrivateFieldGet(this, _footer));\r\n        dialog.appendChild(container);\r\n        return dialog;\r\n    }\r\n    appendChildrens(parent, ...elements) {\r\n        if (is(elements)) {\r\n            elements.forEach((element) => parent.appendChild(element));\r\n        }\r\n    }\r\n    getPrefixedString(str) {\r\n        return __classPrivateFieldGet(this, _prefix) + str;\r\n    }\r\n}\r\n_header = new WeakMap(), _body = new WeakMap(), _footer = new WeakMap(), _prefix = new WeakMap(), _switches = new WeakMap(), _reverse = new WeakMap();\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _callbacks, _utils, _id, _manager, _attid, _id_1, _id_2, _id_3;\r\nimport { ElementManager } from \"../managers/element\";\r\nimport { DialogBuilder } from \"../builders/dialog\";\r\nimport { ElementBuilder } from \"cui-light-core/dist/esm/builders/element\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nclass CuiAlertHandlerBase {\r\n    constructor(setup, id, data) {\r\n        _callbacks.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _id.set(this, void 0);\r\n        _manager.set(this, void 0);\r\n        _attid.set(this, void 0);\r\n        __classPrivateFieldSet(this, _callbacks, {\r\n            \"yes\": data.onYes,\r\n            \"no\": data.onNo,\r\n            \"cancel\": data.onCancel,\r\n            \"ok\": data.onOk\r\n        });\r\n        this.content = data.message;\r\n        this.title = data.title;\r\n        this.prefix = setup.setup.prefix;\r\n        __classPrivateFieldSet(this, _utils, setup);\r\n        __classPrivateFieldSet(this, _id, id);\r\n        this.reverse = false;\r\n        __classPrivateFieldSet(this, _attid, null);\r\n        this.closeStr = `${__classPrivateFieldGet(this, _utils).setup.prefix}-close`;\r\n        this.iconStr = `${__classPrivateFieldGet(this, _utils).setup.prefix}-icon`;\r\n        __classPrivateFieldSet(this, _manager, undefined);\r\n    }\r\n    getId() {\r\n        return __classPrivateFieldGet(this, _id);\r\n    }\r\n    show(root) {\r\n        let element = document.getElementById(__classPrivateFieldGet(this, _id));\r\n        if (!is(element)) {\r\n            element = this.createElement();\r\n            root.appendChild(element);\r\n        }\r\n        else {\r\n            // @ts-ignore - already checked\r\n            this.updateElement(element);\r\n        }\r\n        setTimeout(() => {\r\n            // @ts-ignore - already checked\r\n            __classPrivateFieldSet(this, _manager, new ElementManager([element], __classPrivateFieldGet(this, _utils)));\r\n            let ids = __classPrivateFieldGet(this, _manager).on('closed', this.onClose.bind(this));\r\n            __classPrivateFieldSet(this, _attid, ids.length > 0 ? ids[0] : null);\r\n            __classPrivateFieldGet(this, _manager).emit(\"open\");\r\n        }, 100);\r\n    }\r\n    updateElement(element) {\r\n        let title = element.querySelector(`.${this.prefix}-dialog-title`);\r\n        let content = element.querySelector(`.${this.prefix}-dialog-body>p`);\r\n        __classPrivateFieldGet(this, _utils).interactions.mutate(() => {\r\n            if (title) {\r\n                title.innerHTML = this.title;\r\n            }\r\n            if (content) {\r\n                content.innerHTML = this.content;\r\n            }\r\n        }, null);\r\n    }\r\n    onClose(arg) {\r\n        try {\r\n            if (is(arg) && arg.state && __classPrivateFieldGet(this, _callbacks)) {\r\n                if (is(__classPrivateFieldGet(this, _callbacks)[arg.state])) {\r\n                    let callback = __classPrivateFieldGet(this, _callbacks)[arg.state];\r\n                    if (callback) {\r\n                        callback();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        finally {\r\n            if (__classPrivateFieldGet(this, _attid) != null) {\r\n                if (__classPrivateFieldGet(this, _manager))\r\n                    __classPrivateFieldGet(this, _manager).detach('closed', __classPrivateFieldGet(this, _attid));\r\n                __classPrivateFieldSet(this, _attid, null);\r\n            }\r\n            __classPrivateFieldSet(this, _manager, undefined);\r\n        }\r\n    }\r\n}\r\n_callbacks = new WeakMap(), _utils = new WeakMap(), _id = new WeakMap(), _manager = new WeakMap(), _attid = new WeakMap();\r\nexport class CuiAlertHandler extends CuiAlertHandlerBase {\r\n    constructor(setup, id, data) {\r\n        var _a;\r\n        super(setup, id, data);\r\n        _id_1.set(this, void 0);\r\n        __classPrivateFieldSet(this, _id_1, id);\r\n        this.reverse = (_a = data.reverse) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    createElement() {\r\n        let dialogBuilder = new DialogBuilder(this.prefix, this.reverse);\r\n        dialogBuilder.createHeader(this.title, [], [\r\n            new ElementBuilder('a').setClasses(`${this.prefix}-icon`).setAttributes({\r\n                [this.closeStr]: \"state: cancel\",\r\n                [this.iconStr]: \"close\"\r\n            }).build()\r\n        ]);\r\n        dialogBuilder.createBody([], [\r\n            new ElementBuilder('p').build(this.content)\r\n        ]);\r\n        dialogBuilder.createFooter([`${this.prefix}-flex`, `${this.prefix}-right`], [\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-margin-small-right`).setAttributes({ [this.closeStr]: \"state: cancel\" }).build(\"Cancel\"),\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-accent`).setAttributes({ [this.closeStr]: \"state: ok\" }).build(\"Ok\")\r\n        ]);\r\n        return dialogBuilder.build(__classPrivateFieldGet(this, _id_1));\r\n    }\r\n}\r\n_id_1 = new WeakMap();\r\nexport class CuiInfoAlertUpHandler extends CuiAlertHandlerBase {\r\n    constructor(setup, id, data) {\r\n        var _a;\r\n        super(setup, id, data);\r\n        _id_2.set(this, void 0);\r\n        __classPrivateFieldSet(this, _id_2, id);\r\n        this.content = data.message;\r\n        ;\r\n        this.title = data.title;\r\n        this.prefix = setup.setup.prefix;\r\n        this.reverse = (_a = data.reverse) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    createElement() {\r\n        let dialogBuilder = new DialogBuilder(this.prefix, this.reverse);\r\n        dialogBuilder.createHeader(this.title, []);\r\n        dialogBuilder.createBody([], [\r\n            new ElementBuilder('p').build(this.content)\r\n        ]);\r\n        dialogBuilder.createFooter([`${this.prefix}-flex`, `${this.prefix}-right`], [\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-accent`).setAttributes({ [this.closeStr]: \"state: ok\" }).build(\"Ok\")\r\n        ]);\r\n        return dialogBuilder.build(__classPrivateFieldGet(this, _id_2));\r\n    }\r\n}\r\n_id_2 = new WeakMap();\r\nexport class CuiYesNoPopUpHandler extends CuiAlertHandlerBase {\r\n    constructor(setup, id, data) {\r\n        var _a;\r\n        super(setup, id, data);\r\n        _id_3.set(this, void 0);\r\n        __classPrivateFieldSet(this, _id_3, id);\r\n        this.content = data.message;\r\n        this.title = data.title;\r\n        this.prefix = setup.setup.prefix;\r\n        this.reverse = (_a = data.reverse) !== null && _a !== void 0 ? _a : false;\r\n    }\r\n    createElement() {\r\n        let dialogBuilder = new DialogBuilder(this.prefix, this.reverse);\r\n        dialogBuilder.createHeader(this.title, [], [\r\n            new ElementBuilder('a').setClasses(`${this.prefix}-icon`).setAttributes({\r\n                [this.closeStr]: \"state: cancel\",\r\n                [this.iconStr]: \"close\"\r\n            }).build()\r\n        ]);\r\n        dialogBuilder.createBody([], [\r\n            new ElementBuilder('p').build(this.content)\r\n        ]);\r\n        dialogBuilder.createFooter([`${this.prefix}-flex`, `${this.prefix}-right`], [\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-margin-small-right`).setAttributes({ [this.closeStr]: \"state: no\" }).build(\"No\"),\r\n            new ElementBuilder('button').setClasses(`${this.prefix}-button`, `${this.prefix}-accent`).setAttributes({ [this.closeStr]: \"state: yes\" }).build(\"Yes\")\r\n        ]);\r\n        return dialogBuilder.build(__classPrivateFieldGet(this, _id_3));\r\n    }\r\n}\r\n_id_3 = new WeakMap();\r\nexport class CuiAlertFactory {\r\n    static get(id, type, data, utils) {\r\n        if (type === \"Info\") {\r\n            return new CuiInfoAlertUpHandler(utils, id, data);\r\n        }\r\n        else if (type === 'YesNoCancel') {\r\n            return new CuiYesNoPopUpHandler(utils, id, data);\r\n        }\r\n        else if (type === 'OkCancel') {\r\n            return new CuiAlertHandler(utils, id, data);\r\n        }\r\n        return undefined;\r\n    }\r\n}\r\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _bus, _moveListener, _isLocked, _eventId, _firstEvent;\r\nimport { CuiMoveEventListener } from \"cui-light-core/dist/esm/listeners/move\";\r\nimport { EVENTS } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiMoveObserver {\r\n    constructor(bus) {\r\n        _bus.set(this, void 0);\r\n        _moveListener.set(this, void 0);\r\n        _isLocked.set(this, void 0);\r\n        _eventId.set(this, void 0);\r\n        _firstEvent.set(this, void 0);\r\n        __classPrivateFieldSet(this, _bus, bus);\r\n        __classPrivateFieldSet(this, _moveListener, new CuiMoveEventListener());\r\n        __classPrivateFieldGet(this, _moveListener).setCallback(this.onMove.bind(this));\r\n        __classPrivateFieldSet(this, _firstEvent, undefined);\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        __classPrivateFieldSet(this, _eventId, null);\r\n    }\r\n    attach() {\r\n        if (!__classPrivateFieldGet(this, _moveListener).isAttached()) {\r\n            __classPrivateFieldGet(this, _moveListener).attach();\r\n            __classPrivateFieldSet(this, _eventId, __classPrivateFieldGet(this, _bus).on(EVENTS.MOVE_LOCK, this.onMoveLock.bind(this)));\r\n        }\r\n    }\r\n    detach() {\r\n        if (__classPrivateFieldGet(this, _moveListener).isAttached()) {\r\n            __classPrivateFieldGet(this, _moveListener).detach();\r\n            __classPrivateFieldGet(this, _eventId) != null && __classPrivateFieldGet(this, _bus).detach(EVENTS.MOVE_LOCK, __classPrivateFieldGet(this, _eventId));\r\n        }\r\n    }\r\n    isAttached() {\r\n        return __classPrivateFieldGet(this, _moveListener).isAttached();\r\n    }\r\n    onMove(data) {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            return;\r\n        }\r\n        switch (data.type) {\r\n            case \"down\":\r\n                __classPrivateFieldSet(this, _firstEvent, data);\r\n                break;\r\n            case \"move\":\r\n                if (__classPrivateFieldGet(this, _firstEvent)) {\r\n                    __classPrivateFieldGet(this, _bus).emit(EVENTS.GLOBAL_MOVE, null, __classPrivateFieldGet(this, _firstEvent));\r\n                    __classPrivateFieldSet(this, _firstEvent, undefined);\r\n                }\r\n                __classPrivateFieldGet(this, _bus).emit(EVENTS.GLOBAL_MOVE, null, data);\r\n                break;\r\n            case \"up\":\r\n                if (__classPrivateFieldGet(this, _firstEvent)) {\r\n                    __classPrivateFieldSet(this, _firstEvent, undefined);\r\n                    return;\r\n                }\r\n                __classPrivateFieldGet(this, _bus).emit(EVENTS.GLOBAL_MOVE, null, data);\r\n                break;\r\n        }\r\n    }\r\n    onMoveLock(flag) {\r\n        __classPrivateFieldSet(this, _isLocked, flag);\r\n    }\r\n}\r\n_bus = new WeakMap(), _moveListener = new WeakMap(), _isLocked = new WeakMap(), _eventId = new WeakMap(), _firstEvent = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _interactions, _selector, _className, _activeCls, _animationTime, _lock, _animClsIn, _animClsOut;\r\nimport { is, sleep } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nexport class CuiToastHandler {\r\n    constructor(interaction, prefix, animationTime) {\r\n        _interactions.set(this, void 0);\r\n        _selector.set(this, void 0);\r\n        _className.set(this, void 0);\r\n        _activeCls.set(this, void 0);\r\n        _animationTime.set(this, void 0);\r\n        _lock.set(this, void 0);\r\n        _animClsIn.set(this, void 0);\r\n        _animClsOut.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interaction);\r\n        __classPrivateFieldSet(this, _selector, `.${prefix}-toast`);\r\n        __classPrivateFieldSet(this, _className, `${prefix}-toast`);\r\n        __classPrivateFieldSet(this, _activeCls, `${prefix}-active`);\r\n        __classPrivateFieldSet(this, _animationTime, animationTime);\r\n        __classPrivateFieldSet(this, _lock, false);\r\n        __classPrivateFieldSet(this, _animClsIn, `${prefix}-toast-animation-in`);\r\n        __classPrivateFieldSet(this, _animClsOut, `${prefix}-toast-animation-out`);\r\n    }\r\n    show(message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (__classPrivateFieldGet(this, _lock)) {\r\n                return false;\r\n            }\r\n            __classPrivateFieldSet(this, _lock, true);\r\n            let toastElement = document.querySelector(__classPrivateFieldGet(this, _selector));\r\n            if (!is(toastElement)) {\r\n                toastElement = document.createElement('div');\r\n                toastElement.classList.add(__classPrivateFieldGet(this, _className));\r\n                document.body.appendChild(toastElement);\r\n                yield sleep(10);\r\n            }\r\n            __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                //@ts-ignore\r\n                toastElement.textContent = message;\r\n                //@ts-ignore\r\n                toastElement.classList.add(CLASSES.animProgress);\r\n                //@ts-ignore\r\n                toastElement.classList.add(__classPrivateFieldGet(this, _animClsIn));\r\n            }, this);\r\n            yield sleep(__classPrivateFieldGet(this, _animationTime));\r\n            __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                //@ts-ignore\r\n                toastElement.classList.remove(CLASSES.animProgress);\r\n                //@ts-ignore\r\n                toastElement.classList.remove(__classPrivateFieldGet(this, _animClsIn));\r\n                //@ts-ignore\r\n                toastElement.classList.add(__classPrivateFieldGet(this, _activeCls));\r\n            }, this);\r\n            yield sleep(3000);\r\n            __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                //@ts-ignore\r\n                toastElement.classList.add(CLASSES.animProgress);\r\n                //@ts-ignore\r\n                toastElement.classList.add(__classPrivateFieldGet(this, _animClsOut));\r\n            }, this);\r\n            setTimeout(() => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(() => {\r\n                    //@ts-ignore\r\n                    toastElement.classList.remove(CLASSES.animProgress);\r\n                    //@ts-ignore\r\n                    toastElement.classList.remove(__classPrivateFieldGet(this, _animClsOut));\r\n                    //@ts-ignore\r\n                    toastElement.classList.remove(__classPrivateFieldGet(this, _activeCls));\r\n                }, this);\r\n                __classPrivateFieldSet(this, _lock, false);\r\n            }, __classPrivateFieldGet(this, _animationTime));\r\n            return true;\r\n        });\r\n    }\r\n}\r\n_interactions = new WeakMap(), _selector = new WeakMap(), _className = new WeakMap(), _activeCls = new WeakMap(), _animationTime = new WeakMap(), _lock = new WeakMap(), _animClsIn = new WeakMap(), _animClsOut = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _elements, _log, _isLocked, _toggleClass, _interactions;\r\nimport { CLASSES } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nexport class CollectionManagerHelper {\r\n    constructor(interactions) {\r\n        _elements.set(this, void 0);\r\n        _log.set(this, void 0);\r\n        _isLocked.set(this, void 0);\r\n        _toggleClass.set(this, void 0);\r\n        _interactions.set(this, void 0);\r\n        __classPrivateFieldSet(this, _interactions, interactions);\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get('CollectionManager'));\r\n        __classPrivateFieldSet(this, _elements, []);\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n        __classPrivateFieldSet(this, _toggleClass, \"\");\r\n    }\r\n    setElements(elements) {\r\n        __classPrivateFieldSet(this, _elements, elements);\r\n    }\r\n    setToggle(className) {\r\n        __classPrivateFieldSet(this, _toggleClass, className);\r\n    }\r\n    addAnimationClass(currentElement, nextElement, animIn, animOut) {\r\n        nextElement.classList.add(CLASSES.animProgress);\r\n        currentElement.classList.add(animOut);\r\n        nextElement.classList.add(animIn);\r\n    }\r\n    setFinalClasses(currentElement, nextElement, animIn, animOut) {\r\n        nextElement.classList.remove(CLASSES.animProgress);\r\n        currentElement.classList.remove(animOut);\r\n        nextElement.classList.remove(animIn);\r\n        currentElement.classList.remove(__classPrivateFieldGet(this, _toggleClass));\r\n        nextElement.classList.add(__classPrivateFieldGet(this, _toggleClass));\r\n    }\r\n    verifyIndex(index, current, count) {\r\n        return index >= 0 && index !== current && index < count;\r\n    }\r\n    setCurrent(newIndex, current) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.lock();\r\n            __classPrivateFieldGet(this, _log).debug(`Switching index from: ${current} to ${newIndex}`);\r\n            if (current > -1)\r\n                __classPrivateFieldGet(this, _elements)[current].classList.remove(__classPrivateFieldGet(this, _toggleClass));\r\n            __classPrivateFieldGet(this, _elements)[newIndex].classList.add(__classPrivateFieldGet(this, _toggleClass));\r\n            this.unlock();\r\n            return true;\r\n        });\r\n    }\r\n    setCurrentWithAnimation(newIndex, animClassIn, animClassOut, duration, current) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            this.lock();\r\n            __classPrivateFieldGet(this, _log).debug(`Switching index from: ${current} to ${newIndex}`);\r\n            const currentElement = __classPrivateFieldGet(this, _elements)[current];\r\n            const nextElement = __classPrivateFieldGet(this, _elements)[newIndex];\r\n            __classPrivateFieldGet(this, _interactions).mutate(this.addAnimationClass, this, currentElement, nextElement, animClassIn, animClassOut);\r\n            setTimeout(() => {\r\n                __classPrivateFieldGet(this, _interactions).mutate(this.setFinalClasses, this, currentElement, nextElement, animClassIn, animClassOut);\r\n                this.unlock();\r\n            }, duration);\r\n            return true;\r\n        });\r\n    }\r\n    getCurrentIndex() {\r\n        if (!is(__classPrivateFieldGet(this, _toggleClass))) {\r\n            return -1;\r\n        }\r\n        let len = this.count();\r\n        for (let i = 0; i < len; i++) {\r\n            if (__classPrivateFieldGet(this, _elements)[i].classList.contains(__classPrivateFieldGet(this, _toggleClass))) {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    elements() {\r\n        return __classPrivateFieldGet(this, _elements);\r\n    }\r\n    check() {\r\n        if (__classPrivateFieldGet(this, _isLocked)) {\r\n            __classPrivateFieldGet(this, _log).warning(\"Object locked. Operation in progress\", \"Check\");\r\n            return false;\r\n        }\r\n        else if (!is(__classPrivateFieldGet(this, _toggleClass))) {\r\n            __classPrivateFieldGet(this, _log).warning(\"Toggle is not set. Call setToggleClass\", \"Check\");\r\n            return false;\r\n        }\r\n        else if (this.count() <= 0) {\r\n            __classPrivateFieldGet(this, _log).warning(\"Elements list is empty\", \"Check\");\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    count() {\r\n        return __classPrivateFieldGet(this, _elements) ? __classPrivateFieldGet(this, _elements).length : -1;\r\n    }\r\n    lock() {\r\n        __classPrivateFieldSet(this, _isLocked, true);\r\n    }\r\n    unlock() {\r\n        __classPrivateFieldSet(this, _isLocked, false);\r\n    }\r\n}\r\n_elements = new WeakMap(), _log = new WeakMap(), _isLocked = new WeakMap(), _toggleClass = new WeakMap(), _interactions = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _log, _cDt, _helper;\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { CollectionManagerHelper } from \"../helpers/collection\";\r\nexport class CollectionManager {\r\n    constructor(elements, interactions) {\r\n        _log.set(this, void 0);\r\n        _cDt.set(this, void 0);\r\n        _helper.set(this, void 0);\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get('CollectionManager'));\r\n        __classPrivateFieldSet(this, _helper, new CollectionManagerHelper(interactions));\r\n        __classPrivateFieldGet(this, _helper).setElements(elements);\r\n        __classPrivateFieldSet(this, _cDt, Date.now());\r\n    }\r\n    setToggle(className) {\r\n        __classPrivateFieldGet(this, _helper).setToggle(className);\r\n    }\r\n    setElements(elements) {\r\n        __classPrivateFieldGet(this, _helper).setElements(elements);\r\n    }\r\n    click(callback) {\r\n        __classPrivateFieldGet(this, _helper).elements().forEach((element, index) => {\r\n            element.addEventListener('click', () => {\r\n                this.set(index).then(() => {\r\n                    if (callback) {\r\n                        callback(element, index);\r\n                    }\r\n                });\r\n            });\r\n        });\r\n    }\r\n    next() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!__classPrivateFieldGet(this, _helper).check()) {\r\n                return false;\r\n            }\r\n            let newIdx = __classPrivateFieldGet(this, _helper).getCurrentIndex() + 1;\r\n            return this.set(newIdx >= this.length() ? 0 : newIdx);\r\n        });\r\n    }\r\n    previous() {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!__classPrivateFieldGet(this, _helper).check()) {\r\n                return false;\r\n            }\r\n            let newIdx = __classPrivateFieldGet(this, _helper).getCurrentIndex() - 1;\r\n            return this.set(newIdx < 0 ? this.length() - 1 : newIdx);\r\n        });\r\n    }\r\n    set(index) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let current = __classPrivateFieldGet(this, _helper).getCurrentIndex();\r\n            if (!__classPrivateFieldGet(this, _helper).check() || !__classPrivateFieldGet(this, _helper).verifyIndex(index, current, this.length())) {\r\n                return false;\r\n            }\r\n            return __classPrivateFieldGet(this, _helper).setCurrent(index, current);\r\n        });\r\n    }\r\n    setWithAnimation(index, animClassIn, animClassOut, duration) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let current = __classPrivateFieldGet(this, _helper).getCurrentIndex();\r\n            if (!__classPrivateFieldGet(this, _helper).check() || !__classPrivateFieldGet(this, _helper).verifyIndex(index, current, this.length())) {\r\n                return false;\r\n            }\r\n            return __classPrivateFieldGet(this, _helper).setCurrentWithAnimation(index, animClassIn, animClassOut, duration, current);\r\n        });\r\n    }\r\n    getCurrentIndex() {\r\n        return __classPrivateFieldGet(this, _helper).getCurrentIndex();\r\n    }\r\n    length() {\r\n        return __classPrivateFieldGet(this, _helper).count();\r\n    }\r\n    refresh() {\r\n        return this.length() > 0 && Date.now() - __classPrivateFieldGet(this, _cDt) > 360000;\r\n    }\r\n}\r\n_log = new WeakMap(), _cDt = new WeakMap(), _helper = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _plugins, _mutated, _log;\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nexport class CuiPluginManager {\r\n    constructor(plugins) {\r\n        _plugins.set(this, void 0);\r\n        _mutated.set(this, void 0);\r\n        _log.set(this, void 0);\r\n        __classPrivateFieldSet(this, _plugins, plugins !== null && plugins !== void 0 ? plugins : []);\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get(\"CuiPluginManager\"));\r\n        __classPrivateFieldSet(this, _mutated, []);\r\n    }\r\n    init(utils) {\r\n        __classPrivateFieldGet(this, _log).debug(\"Plugins initialization started: \" + __classPrivateFieldGet(this, _plugins).length);\r\n        __classPrivateFieldSet(this, _mutated, __classPrivateFieldGet(this, _plugins).filter((plugin) => {\r\n            return is(plugin.mutation);\r\n        }));\r\n        __classPrivateFieldGet(this, _plugins).forEach(plugin => {\r\n            plugin.init(utils);\r\n            utils.setup.plugins[plugin.description] = plugin.setup;\r\n        });\r\n        __classPrivateFieldGet(this, _log).debug(\"Plugins have been initialized\");\r\n    }\r\n    get(name) {\r\n        if (!is(name)) {\r\n            return undefined;\r\n        }\r\n        return __classPrivateFieldGet(this, _plugins).find(p => p.name === name);\r\n    }\r\n    onMutation(mutation) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let tasks = [];\r\n            __classPrivateFieldGet(this, _mutated).forEach((plugin) => {\r\n                tasks.push(plugin.mutation(mutation));\r\n            });\r\n            let result = yield Promise.all(tasks);\r\n            return result.find(val => {\r\n                val === false;\r\n            }) ? false : true;\r\n        });\r\n    }\r\n}\r\n_plugins = new WeakMap(), _mutated = new WeakMap(), _log = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _log, _mutationObserver, _toastManager, _utils, _plugins, _components, _rootElement, _moveObserver, _mutatedAttributes;\r\nimport { is, joinAttributesForQuery, are, registerCuiElement, addCuiArgument } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { STATICS, EVENTS, CSS_VARIABLES } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { CuiMutationObserver } from \"cui-light-core/dist/esm/observers/mutations\";\r\nimport { CuiLoggerFactory } from \"cui-light-core/dist/esm/factories/logger\";\r\nimport { CuiUtils } from \"cui-light-core/dist/esm/models/utils\";\r\nimport { CuiInstanceInitError } from \"cui-light-core/dist/esm/models/errors\";\r\nimport { CuiAlertFactory } from \"./handlers/alert\";\r\nimport { CuiMoveObserver } from \"./observers/move\";\r\nimport { ElementManager } from \"./managers/element\";\r\nimport { CuiToastHandler } from \"./managers/toast\";\r\nimport { CollectionManager } from \"./managers/collection\";\r\nimport { CuiPluginManager } from \"./managers/plugins\";\r\nexport class CuiInstance {\r\n    constructor(setup, plugins, components) {\r\n        _log.set(this, void 0);\r\n        _mutationObserver.set(this, void 0);\r\n        _toastManager.set(this, void 0);\r\n        _utils.set(this, void 0);\r\n        _plugins.set(this, void 0);\r\n        _components.set(this, void 0);\r\n        _rootElement.set(this, void 0);\r\n        _moveObserver.set(this, void 0);\r\n        _mutatedAttributes.set(this, void 0);\r\n        STATICS.prefix = setup.prefix;\r\n        STATICS.logLevel = setup.logLevel;\r\n        __classPrivateFieldSet(this, _plugins, new CuiPluginManager(plugins));\r\n        __classPrivateFieldSet(this, _components, components !== null && components !== void 0 ? components : []);\r\n        __classPrivateFieldSet(this, _utils, new CuiUtils(setup));\r\n        __classPrivateFieldSet(this, _log, CuiLoggerFactory.get('CuiInstance'));\r\n        __classPrivateFieldSet(this, _rootElement, setup.root);\r\n        __classPrivateFieldSet(this, _moveObserver, new CuiMoveObserver(__classPrivateFieldGet(this, _utils).bus));\r\n        __classPrivateFieldSet(this, _mutationObserver, undefined);\r\n        __classPrivateFieldSet(this, _toastManager, undefined);\r\n        __classPrivateFieldSet(this, _mutatedAttributes, []);\r\n    }\r\n    init() {\r\n        var _a;\r\n        __classPrivateFieldGet(this, _log).debug(\"Instance started\", \"init\");\r\n        // Init elements\r\n        if (!is(window.MutationObserver)) {\r\n            throw new CuiInstanceInitError(\"Mutation observer does not exists\");\r\n        }\r\n        __classPrivateFieldSet(this, _toastManager, new CuiToastHandler(__classPrivateFieldGet(this, _utils).interactions, __classPrivateFieldGet(this, _utils).setup.prefix, (_a = __classPrivateFieldGet(this, _utils).setup.animationTimeLong) !== null && _a !== void 0 ? _a : 0));\r\n        __classPrivateFieldSet(this, _mutatedAttributes, __classPrivateFieldGet(this, _components).map(x => { return x.attribute; })); // MUTATED_ATTRIBUTES; \r\n        const initElements = is(__classPrivateFieldGet(this, _mutatedAttributes)) ? __classPrivateFieldGet(this, _rootElement).querySelectorAll(joinAttributesForQuery(__classPrivateFieldGet(this, _mutatedAttributes))) : null;\r\n        if (is(initElements)) {\r\n            //@ts-ignore initElements already checked\r\n            __classPrivateFieldGet(this, _log).debug(`Initiating ${initElements.length} elements`);\r\n            try {\r\n                //@ts-ignore initElements already checked\r\n                initElements.forEach((item) => {\r\n                    registerCuiElement(item, __classPrivateFieldGet(this, _components), __classPrivateFieldGet(this, _mutatedAttributes), __classPrivateFieldGet(this, _utils));\r\n                });\r\n            }\r\n            catch (e) {\r\n                __classPrivateFieldGet(this, _log).exception(e);\r\n            }\r\n        }\r\n        __classPrivateFieldGet(this, _log).debug(\"Init plugins\", \"init\");\r\n        // Init plugins\r\n        __classPrivateFieldGet(this, _plugins).init(__classPrivateFieldGet(this, _utils));\r\n        if (are(__classPrivateFieldGet(this, _components), __classPrivateFieldGet(this, _mutatedAttributes))) {\r\n            __classPrivateFieldGet(this, _log).debug(\"Init mutation observer\", \"init\");\r\n            __classPrivateFieldSet(this, _mutationObserver, new CuiMutationObserver(__classPrivateFieldGet(this, _rootElement), __classPrivateFieldGet(this, _utils)));\r\n            __classPrivateFieldGet(this, _mutationObserver).setComponents(__classPrivateFieldGet(this, _components)).setAttributes(__classPrivateFieldGet(this, _mutatedAttributes));\r\n            __classPrivateFieldGet(this, _mutationObserver).setPlugins(__classPrivateFieldGet(this, _plugins));\r\n            __classPrivateFieldGet(this, _mutationObserver).start();\r\n        }\r\n        __classPrivateFieldGet(this, _log).debug(\"Setting CSS globals\", 'init');\r\n        __classPrivateFieldGet(this, _utils).interactions.mutate(() => {\r\n            __classPrivateFieldGet(this, _utils).setProperty(CSS_VARIABLES.animationTimeLong, `${__classPrivateFieldGet(this, _utils).setup.animationTimeLong}ms`);\r\n            __classPrivateFieldGet(this, _utils).setProperty(CSS_VARIABLES.animationTime, `${__classPrivateFieldGet(this, _utils).setup.animationTime}ms`);\r\n            __classPrivateFieldGet(this, _utils).setProperty(CSS_VARIABLES.animationTimeShort, `${__classPrivateFieldGet(this, _utils).setup.animationTimeShort}ms`);\r\n        }, null);\r\n        __classPrivateFieldGet(this, _moveObserver).attach();\r\n        __classPrivateFieldGet(this, _utils).bus.emit(EVENTS.INSTANCE_INITIALIZED, null);\r\n        return this;\r\n    }\r\n    finish() {\r\n        if (__classPrivateFieldGet(this, _mutationObserver))\r\n            __classPrivateFieldGet(this, _mutationObserver).stop();\r\n        __classPrivateFieldGet(this, _moveObserver).detach();\r\n        __classPrivateFieldGet(this, _utils).bus.emit(EVENTS.INSTANCE_FINISHED, null);\r\n    }\r\n    get(selector) {\r\n        const elements = this.all(selector);\r\n        if (!elements) {\r\n            return undefined;\r\n        }\r\n        const newElement = new ElementManager(elements, __classPrivateFieldGet(this, _utils));\r\n        return newElement;\r\n    }\r\n    collection(selector) {\r\n        const elements = this.all(selector);\r\n        if (!is(elements)) {\r\n            return undefined;\r\n        }\r\n        // @ts-ignore already checked\r\n        let manager = new CollectionManager(elements, __classPrivateFieldGet(this, _utils).interactions);\r\n        return manager;\r\n    }\r\n    toast(message) {\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (!are(message, __classPrivateFieldGet(this, _toastManager))) {\r\n                return false;\r\n            }\r\n            //@ts-ignore toast manager exists\r\n            return __classPrivateFieldGet(this, _toastManager).show(message);\r\n        });\r\n    }\r\n    select(selector) {\r\n        return document.querySelector(selector);\r\n    }\r\n    all(selector) {\r\n        const nodes = document.querySelectorAll(selector);\r\n        if (!is(nodes)) {\r\n            return undefined;\r\n        }\r\n        return [...nodes];\r\n    }\r\n    getUtils() {\r\n        return __classPrivateFieldGet(this, _utils);\r\n    }\r\n    on(event, callback, element) {\r\n        if (!are(event, callback)) {\r\n            __classPrivateFieldGet(this, _log).error(\"Incorrect arguments\", \"on\");\r\n        }\r\n        __classPrivateFieldGet(this, _utils).bus.on(event, callback, element);\r\n    }\r\n    detach(event, id) {\r\n        if (!are(event, id)) {\r\n            __classPrivateFieldGet(this, _log).error(\"Incorrect arguments\", \"detach\");\r\n        }\r\n        __classPrivateFieldGet(this, _utils).bus.detach(event, id);\r\n    }\r\n    detachAll(event) {\r\n        if (!is(event)) {\r\n            __classPrivateFieldGet(this, _log).error(\"Incorrect arguments\", \"detachAll\");\r\n        }\r\n        __classPrivateFieldGet(this, _utils).bus.detachAll(event);\r\n    }\r\n    emit(event, element, ...args) {\r\n        if (!are(event, element)) {\r\n            __classPrivateFieldGet(this, _log).warning(\"Not enough data to emit event\", \"emit\");\r\n            return;\r\n        }\r\n        let el = typeof element === 'string' ? document.querySelector(element) : element;\r\n        let cuid = el.$cuid;\r\n        if (!is(cuid)) {\r\n            __classPrivateFieldGet(this, _log).warning(\"Element is not a cUI element\", \"emit\");\r\n            return;\r\n        }\r\n        __classPrivateFieldGet(this, _utils).bus.emit(event, cuid, ...args);\r\n    }\r\n    alert(id, type, data) {\r\n        let popup = CuiAlertFactory.get(id, type, data, __classPrivateFieldGet(this, _utils));\r\n        if (!popup) {\r\n            __classPrivateFieldGet(this, _log).error(\"Possibly incorrect alert type\");\r\n            return;\r\n        }\r\n        popup.show(__classPrivateFieldGet(this, _rootElement));\r\n    }\r\n    getPlugin(name) {\r\n        return __classPrivateFieldGet(this, _plugins).get(name);\r\n    }\r\n    createCuiElement(element, arg, data) {\r\n        if (!is(arg) || !__classPrivateFieldGet(this, _mutatedAttributes).includes(arg)) {\r\n            __classPrivateFieldGet(this, _log).error(\"Element cannot be created: Unknown attribute\");\r\n            return false;\r\n        }\r\n        if (!addCuiArgument(element, arg, data)) {\r\n            __classPrivateFieldGet(this, _log).error(\"Element cannot be created: Missing data\");\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n}\r\n_log = new WeakMap(), _mutationObserver = new WeakMap(), _toastManager = new WeakMap(), _utils = new WeakMap(), _plugins = new WeakMap(), _components = new WeakMap(), _rootElement = new WeakMap(), _moveObserver = new WeakMap(), _mutatedAttributes = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _window;\r\nimport { CuiSetupInit } from \"cui-light-core/dist/esm/models/setup\";\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiInstance } from \"./instance\";\r\nimport { ICONS } from \"cui-light-core/dist/esm/utils/statics\";\r\nimport { SWIPE_ANIMATIONS_DEFINITIONS } from \"cui-light-core/dist/esm/animation/definitions\";\r\nexport class CuiInitializer {\r\n    constructor() {\r\n        _window.set(this, void 0);\r\n        __classPrivateFieldSet(this, _window, window);\r\n    }\r\n    init(setup) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            let settings = Object.assign(Object.assign({}, new CuiSetupInit()), setup.setup);\r\n            const appPrefix = settings.app;\r\n            const result = {\r\n                result: false\r\n            };\r\n            if (is(__classPrivateFieldGet(this, _window)[appPrefix])) {\r\n                result.message = \"Instance is already initialized\";\r\n                return result;\r\n            }\r\n            if (is(setup.icons)) {\r\n                for (let icon in setup.icons) {\r\n                    ICONS[icon] = setup.icons[icon];\r\n                }\r\n            }\r\n            if (is(setup.swipeAnimations)) {\r\n                for (let animation in setup.swipeAnimations) {\r\n                    SWIPE_ANIMATIONS_DEFINITIONS[animation] = setup.swipeAnimations[animation];\r\n                }\r\n            }\r\n            try {\r\n                __classPrivateFieldGet(this, _window)[appPrefix] = new CuiInstance(settings, (_a = setup.plugins) !== null && _a !== void 0 ? _a : [], (_b = setup.components) !== null && _b !== void 0 ? _b : []);\r\n                __classPrivateFieldGet(this, _window)[appPrefix].init();\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n                result.message = \"An error occured during initialization\";\r\n                return result;\r\n            }\r\n            result.result = true;\r\n            return result;\r\n        });\r\n    }\r\n}\r\n_window = new WeakMap();\r\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n};\r\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n};\r\nvar _isInitialized;\r\nimport { is } from \"cui-light-core/dist/esm/utils/functions\";\r\nimport { CuiInitializer } from \"./initializer\";\r\nimport { GetComponents } from \"cui-light-components/dist/esm/module\";\r\nimport { GetPlugins } from \"cui-light-plugins/dist/esm/module\";\r\nexport class CuiInit {\r\n    constructor() {\r\n        _isInitialized.set(this, void 0);\r\n        __classPrivateFieldSet(this, _isInitialized, false);\r\n    }\r\n    init(data) {\r\n        var _a, _b;\r\n        return __awaiter(this, void 0, void 0, function* () {\r\n            if (__classPrivateFieldGet(this, _isInitialized)) {\r\n                console.log(\"Module is already initialized\");\r\n                return false;\r\n            }\r\n            const initializer = new CuiInitializer();\r\n            const pluginList = GetPlugins({\r\n                autoLight: true,\r\n                autoPrint: true\r\n            });\r\n            const componentList = GetComponents({\r\n                prefix: (_a = data.setup) === null || _a === void 0 ? void 0 : _a.prefix\r\n            });\r\n            let appPlugins = pluginList;\r\n            if (data.plugins) {\r\n                appPlugins = Object.assign(Object.assign({}, pluginList), data.plugins);\r\n            }\r\n            let result = yield initializer.init({\r\n                setup: data.setup,\r\n                icons: data.icons,\r\n                plugins: appPlugins,\r\n                // @ts-ignore already checked\r\n                components: is(data.components) ? [...componentList, ...data.components] : componentList,\r\n                swipeAnimations: data.swipeAnimations\r\n            });\r\n            if (result.result) {\r\n                __classPrivateFieldSet(this, _isInitialized, true);\r\n                return true;\r\n            }\r\n            else {\r\n                console.error(`A cUI instance failed to initialize: [${(_b = result.message) !== null && _b !== void 0 ? _b : \"#\"}]`);\r\n            }\r\n            console.log(\"Cui Light failed to init\");\r\n            return false;\r\n        });\r\n    }\r\n}\r\n_isInitialized = new WeakMap();\r\n","import { IPushService } from \"./interfaces\";\r\n\r\nexport class PushService implements IPushService {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    setNavbarTitle(title: string): string {\r\n        return title ?? \"\";\r\n    }\r\n}","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport '../styles/styles.scss';\r\nimport { App, AppBase } from \"./ui/app\";\r\nimport { CuiIconsPack } from 'bpd-cui-icons/esm/index';\r\nimport { Flow, FlowFactory } from '../node_modules/bpd-flow/dist/index';\r\nimport { TrainingsStorageService, ActionStorageService, SettingsService } from './core/services/storage';\r\nimport { TrainingsFlow, TrainingsFlowInput, TrainingsFlowOutput } from \"./app/flow/trainings\";\r\nimport { ActionsFlowInput, ActionsFlowOutput, ActionsFlow } from \"./app/flow/actions\";\r\nimport { SettingsFlow, SettingsFlowInput, SettingsFlowOutput } from \"./app/flow/settings\";\r\nimport { CuiSetupInit } from \"cui-light-core/dist/esm/models/setup\";\r\nimport { CuiInstance } from \"cui-light/dist/esm/index\";\r\nimport { CuiInitData } from \"cui-light/dist/esm/initializer\";\r\nimport { CuiInit } from \"../../cui-light/dist/esm/init\";\r\nimport { PushServiceFlow, PushServiceInput, PushServiceOutput } from \"./app/push/push\";\r\nimport { PushService } from \"./core/services/push\";\r\n\r\n\r\ndeclare global {\r\n    interface Window {\r\n        // cuiInit: CuiInit;\r\n        $cui: CuiInstance;\r\n        $flow: Flow<any, any>;\r\n        $actionsFlow: Flow<ActionsFlowInput, ActionsFlowOutput>;\r\n        $settingsFlow: Flow<SettingsFlowInput, SettingsFlowOutput>;\r\n        $push: Flow<PushServiceInput, PushServiceOutput>;\r\n    }\r\n}\r\n\r\nconst loadingIndicator = document.getElementById(\"loading-indicator\");\r\nconst loading = document.getElementById(\"loading-screen\");\r\n\r\nfunction setText(text: string) {\r\n    if (window.requestAnimationFrame) {\r\n        window.requestAnimationFrame(() => {\r\n            loadingIndicator.textContent = text;\r\n        })\r\n    } else {\r\n        loadingIndicator.textContent = text;\r\n    }\r\n}\r\n\r\nPromise.all([\r\n    fetch('/app_settings.json').then(response => response.json()),\r\n    fetch('/static/icons/all.json').then(response => response.json())\r\n]).then((result) => {\r\n    onDataFetch(result[0], result[1])\r\n}).catch(() => {\r\n    loadingIndicator.classList.add(\"error\");\r\n    setText(\"Application cannot be loaded!\")\r\n})\r\n\r\nfunction onDataFetch(settings: any, icons: any) {\r\n    setText(\"Initializing...\")\r\n    const rootElement = document.getElementById('root');\r\n    const setup = new CuiSetupInit();\r\n    setup.logLevel = settings?.mode === \"production\" ? 'error' : \"debug\";\r\n    setup.root = rootElement;\r\n    setup.busSetup = [\r\n        {\r\n            name: \"MoveQueue\",\r\n            eventsDef: [\"global_move\"],\r\n            handler: 'tasked',\r\n            priority: 0\r\n        },\r\n        {\r\n            name: \"InteractQueue\",\r\n            eventsDef: [\"open\", \"close\", \"switch\"],\r\n            handler: 'tasked',\r\n            priority: 0\r\n        },\r\n        {\r\n            name: \"ResponsesQueue\",\r\n            eventsDef: [\"opened\", \"closed\", \"switched\", \"resize\", \"offset\"],\r\n            handler: 'tasked',\r\n            priority: 1\r\n        },\r\n        {\r\n            name: \"GlobalSimple\",\r\n            eventsDef: [\"keydown\", \"scroll\", \"intersection\", \"windowclick\"],\r\n            handler: 'tasked',\r\n            priority: 2\r\n        },\r\n    ]\r\n\r\n    const cuiSetup: CuiInitData = {\r\n        setup: setup,\r\n        icons: {\r\n            ...CuiIconsPack,\r\n            ...icons\r\n        }\r\n    };\r\n\r\n    const service = new TrainingsStorageService();\r\n    const traningsFlow = new TrainingsFlow(service);\r\n    const actionsService = new ActionStorageService();\r\n    const actionsFlow = new ActionsFlow(actionsService);\r\n    const settingsService = new SettingsService();\r\n    const settingsFlow = new SettingsFlow(settingsService);\r\n    const pushService = new PushServiceFlow(new PushService());\r\n\r\n    window.$flow = FlowFactory.create<TrainingsFlowInput, TrainingsFlowOutput>(traningsFlow.getActions());\r\n    window.$actionsFlow = FlowFactory.create<ActionsFlowInput, ActionsFlowOutput>(actionsFlow.getActions());\r\n    window.$settingsFlow = FlowFactory.create<SettingsFlowInput, SettingsFlowOutput>(settingsFlow.getActions());\r\n    window.$push = FlowFactory.create<PushServiceInput, PushServiceOutput>(pushService.getActions());\r\n\r\n    setTimeout(() => {\r\n        new CuiInit().init(cuiSetup).then((result) => {\r\n            console.log(settings.mode)\r\n            ReactDOM.render(<AppBase mode={settings.mode} />, rootElement);\r\n            loading.remove();\r\n            rootElement.classList.remove(\"hidden\");\r\n        });\r\n    }, 100)\r\n\r\n}\r\n\r\n\r\n\r\n"],"sourceRoot":""}