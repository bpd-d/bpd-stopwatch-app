{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/core/helpers.ts","webpack:///./src/ui/routes.ts","webpack:///./src/api/routes/routes.ts","webpack:///./src/ui/components/home/list.tsx","webpack:///./src/ui/components/home/home.tsx","webpack:///./src/ui/error.tsx","webpack:///./src/ui/components/common/NavbarLink.tsx","webpack:///./src/ui/components/navbar/navbar.tsx","webpack:///./src/ui/components/offacanvas/offcanvas.tsx","webpack:///./src/core/models.ts","webpack:///./src/core/statics.ts","webpack:///./src/app/flow/actions.ts","webpack:///./src/ui/components/common/BpdActionIcon.tsx","webpack:///./src/core/validators.ts","webpack:///./src/ui/components/common/BpdDialog.tsx","webpack:///./src/ui/components/common/ErrorsList.tsx","webpack:///./src/ui/components/actions/AddActionDialog.tsx","webpack:///./src/ui/components/common/PageHeader.tsx","webpack:///./src/ui/components/common/ClearableInput.tsx","webpack:///./src/ui/components/actions/StopwatchActionsComponent.tsx","webpack:///./src/ui/components/common/Dialogs.ts","webpack:///./src/ui/components/common/GoBack.tsx","webpack:///./src/ui/components/common/NotFound.tsx","webpack:///./src/ui/components/actions/ActionsSelect.tsx","webpack:///./src/ui/components/trainings/EditRoundDialog.tsx","webpack:///./src/ui/components/trainings/EditRoundListItem.tsx","webpack:///./src/ui/components/trainings/EditTraining.tsx","webpack:///./src/api/screen/screen.ts","webpack:///./src/api/stopwatch/stopwatch.ts","webpack:///./src/app/flow/settings.ts","webpack:///./src/ui/components/perform/CountDownTimer.tsx","webpack:///./src/ui/components/perform/PerformTraining.tsx","webpack:///./src/ui/components/settings/SettingsSwitchListItem.tsx","webpack:///./src/ui/components/settings/StopwatchSettings.tsx","webpack:///./src/ui/components/about/About.tsx","webpack:///./src/ui/components/footer/Footer.tsx","webpack:///./src/ui/app.tsx","webpack:///./src/core/services/storage.tsx","webpack:///./src/app/flow/trainings.ts","webpack:///./src/index.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","showMessage","title","message","$cui","alert","calculateDuration","actions","is","reduce","duration","calcDisplayTimer","seconds","getDisplayTimerValue","restSeconds","Math","floor","secondsLeft","setDarkMode","darkMode","getUtils","setLightMode","calculateProgress","current","max","getTotalDuration","training","rounds","getBgClassByType","type","getClassByType","move","collection","from","to","size","amount","el","newLength","newTo","MAPPIGNS","routes","this","id","undefined","route","getRoute","url","attributes","uri","getUrl","enumerateObject","prop","replace","TrainingList","props","className","list","map","item","TrainingListItem","onDelete","history","useHistory","React","deleteSubscription","$flow","subscribe","finish","perform","unsubscribe","onClick","renderUrl","toUpperCase","getActionsDuration","cui-icon","Home","state","updateList","onDeleteTrainingComplete","deleteTraining","subscription","onDeleteSubscription","elementIdx","findIndex","onYes","flag","setState","NoTrainings","ErrorRoute","NavbarLink","shouldClose","emit","exact","activeClassName","Navbar","currentLocation","useLocation","currentSite","soundEnabled","split","pathname","toLocaleUpperCase","cui-open","class","getName","OffCanvas","cui-off-canvas","href","cui-close","StopwatchActionType","DefaultActions","removable","editable","ERROR_CODES","ACTIONS_FLOW_ACTIONS","ActionsFlow","service","getAllActions","action","setAction","removeAction","BpdActionIcon","data-tooltip","ValidatorBase","status","errors","performValidation","e","errorMsg","console","error","TrainingValidator","RoundValidator","ActionValidator","BpdDialog","cui-dialog","body","footer","ErrorsList","index","AddActionDialog","setErrors","onValueChange","event","target","checked","placeholder","onChange","min","htmlFor","onSave","actionValidator","validate","dialogCui","PageHeader","description","ClearableInput","setValue","changeValue","onUpdate","ev","defaultAction","StopwatchActionsComponent","filter","setFilter","onConfirm","$actionsFlow","onGetAll","onAddOrEditClick","getAllSub","setActionSub","removeActionSub","match","toLowerCase","matchesName","withRouter","goBack","NotFound","classes","ActionsSelect","onSelect","find","EditRoundDialog","useState","selected","setActions","definedActions","round","newActions","onDeleteAction","validation","EditRoundListItem","isFirst","onMoveUp","isLast","onMoveDown","onClone","onEdit","EditTrainingSection","currentIndex","currentRound","setDefinedActions","onRoundEdit","onRoundDelete","onOnfirm","updateRoundsState","onRoundDown","onRoundUp","onRoundClone","idx","cloned","clone","insert","onFormChange","includes","onDeleteTrainingSub","onCancel","getDefinedActions","deleteTraininSub","getDefinedActionsSub","rows","arr","validaton","join","updateOrInsertRound","useParams","onUpdateTraining","onGetTraining","log","updateTrainingSub","getTrainingSub","KeepAwakeToggle","screen","keepAwake","LoopLockScreen","element","createElement","document","appendChild","remove","src","newEl","autoplay","muted","loop","classList","add","textContent","KeepScreenAwakeFeature","getToggle","activate","release","StopWatchStateOptions","StopWatch","callback","setTimeout","tick","stop","clearTimeout","SETTINGS_FLOW_ACTIONS","SettingsFlow","isSoundEnabled","setSoundEnabled","isDarkMode","setSettings","getSettings","CountDownTimer","cui-circle-progress","watchState","trainingProgress","roundProgress","progress","actionIdx","timerCls","timer","defaultCurrent","roundIdx","roundDuration","totalDuration","PerfromTraining","stopwatch","setStopwatch","setCurrent","canPlay","setCanPlay","startBtnCls","getStartBtnCls","setWatchState","errorMessage","setErrorMessage","currentRef","trainingRef","countdownSound","endSound","roundValidator","setDefaultCurrentState","onStopwatchTick","currentTime","total","ct","setStopWatchState","getState","time","play","reset","nextActionIdx","newAction","nextRoundIdx","newRound","setNextAction","watchstate","timeData","act","calculateRoundCurrentTime","trainginProgress","calculateTrainingProgress","onGetPlaySound","getTrainingSubscription","settingsPlaySound","$settingsFlow","wakeLock","onTick","pause","resume","start","ref","SettingsSwitchListItem","label","StopwatchSettings","settings","newSettings","onUpdateSettings","onGetSettings","settingsSub","settingsUpdateSub","About","Footer","Date","getFullYear","App","darkModeSub","onDarkMode","path","component","EditTraining","TrainingsStorageService","BpdStorage","getTrainings","onAction","len","addTraining","Error","res","getAny","setAny","setTrainings","ActionStorageService","getActionsFromStorage","existingIndex","getIndex","setActionsToStorage","val","SettingsService","TrainingsFlow","getAllTrainings","updateTraining","getTraining","rootElement","getElementById","app_icons","require","setup","CuiSetupInit","logLevel","root","cuiSetup","icons","CuiIconsPack","traningsFlow","actionsFlow","settingsFlow","FlowFactory","getActions","cuiInit","init","then","ReactDOM"],"mappings":"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","file":"stopwatch.index.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([32,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { is } from \"../../node_modules/bpd-toolkit/dist/esm/index\";\r\nimport { Round, StopwatchAction, Training } from \"./models\";\r\n\r\nexport function showMessage(title: string, message: string) {\r\n    window.$cui.alert(\"common-info-dialog\", \"Info\", {\r\n        title: title,\r\n        message: message\r\n    })\r\n}\r\n\r\nexport function calculateDuration(actions: StopwatchAction[]) {\r\n    return is(actions) ? actions.reduce<number>((result: number, value: StopwatchAction) => {\r\n        return result + value.duration;\r\n    }, 0) : 0\r\n}\r\n\r\nexport function calcDisplayTimer(seconds: number): string {\r\n    if (seconds < 0) {\r\n        return \"Error\"\r\n    }\r\n    if (seconds < 60) {\r\n        return \"00:\" + getDisplayTimerValue(seconds)\r\n    } else if (seconds < 3600) {\r\n        let minutes = Math.floor(seconds / 60);\r\n        let restSeconds = seconds % 60;\r\n        return getDisplayTimerValue(minutes) + \":\" + getDisplayTimerValue(restSeconds);\r\n    } else {\r\n        let hours = Math.floor(seconds / 3600);\r\n        let secondsLeft = seconds % 3600\r\n        return getDisplayTimerValue(hours) + \":\" + calcDisplayTimer(secondsLeft);\r\n    }\r\n}\r\n\r\nexport function getDisplayTimerValue(value: number): string {\r\n    if (value < 0 || value > 59) {\r\n        return \"Error\";\r\n    }\r\n    return value < 10 ? \"0\" + value : \"\" + value;\r\n}\r\n\r\nexport function setDarkMode(darkMode: boolean) {\r\n    if (window.$cui) {\r\n        let utils = window.$cui.getUtils();\r\n        utils.setLightMode(darkMode ? \"dark\" : \"light\");\r\n    }\r\n}\r\n\r\nexport function calculateProgress(current: number, max: number) {\r\n    return Math.floor((current * 100) / max);\r\n}\r\n\r\n/**\r\n * Calculates total actions count and total duration of the training\r\n * @param training \r\n * @returns total actions count and total duration\r\n */\r\nexport function getTotalDuration(training: Training) {\r\n    return training.rounds.reduce<[number, number]>((result: [number, number], current: Round) => {\r\n        return [result[0] + current.actions.length, result[1] + calculateDuration(current.actions)];\r\n    }, [0, 0]);\r\n}\r\n\r\nexport function getBgClassByType(type: string) {\r\n    return \"action-background-\" + type;\r\n}\r\n\r\nexport function getClassByType(type: string) {\r\n    switch (type) {\r\n        case 'warmup':\r\n            return \"cui-text-success\";\r\n        case 'break':\r\n            return \"cui-text-error\";\r\n        case 'exercise':\r\n            return \"cui-text-accent\";\r\n        case 'cooldown':\r\n            return \"cui-text-secondar\";\r\n        default:\r\n            return \"\";\r\n    }\r\n}\r\n\r\n/**\r\n * Inserts new item to the collection at specific index. If index is lower than 0 then item is added at position 0, if index is bigger than collection size then item is added at the end\r\n * @param collection Collection of items\r\n * @param index position which new item should be added to - if undefined or null provided item will be inserted at last position\r\n * @param t new items to add\r\n * @returns Copy of the collection with new item inserted at specific position\r\n */\r\nexport function insert<T>(collection: T[], index: number, ...t: T[]): T[] {\r\n    if (!collection || collection === null || !t || t === null || t.length === 0) {\r\n        return collection;\r\n    }\r\n    let length = collection.length;\r\n    // If not provided then add then treat it like last\r\n    if (!index || index === 0 || index >= length) {\r\n        return [...collection, ...t];\r\n    }\r\n    if (index <= 0) {\r\n        return [...t, ...collection];\r\n    }\r\n    collection.splice(index, 0, ...t);\r\n    return [...collection]\r\n}\r\n\r\nexport function move<T>(collection: T[], from: number, to: number, size?: number): T[] {\r\n    if (!collection || collection === null || from < 0) {\r\n        return collection;\r\n    }\r\n    let amount = size ?? 1;\r\n    let length = collection.length;\r\n    if (length < 2 || from >= length) {\r\n        return [...collection];\r\n    }\r\n    const el = collection.splice(from, amount);\r\n    const newLength = length - amount;\r\n    const newTo = to;\r\n    //let newIdx = newTo < 0 ? 0 : newTo > length - amount ? length - amount : newTo;\r\n    if (newTo <= 0) {\r\n        return [...el, ...collection];\r\n    }\r\n    if (newTo >= newLength) {\r\n        return [...collection, ...el];\r\n    }\r\n    collection.splice(newTo, 0, ...el)\r\n    return [...collection];\r\n\r\n}","import { AppMapping } from \"../api/routes/routes\";\r\n\r\nexport const MAPPIGNS = new AppMapping({\r\n    \"home\": { url: \"/\", name: \"Home\" },\r\n    \"about\": { url: \"/about\", name: \"About\" },\r\n    \"settings\": { url: \"/settings\", name: \"Settings\" },\r\n    \"actions\": { url: \"/actions\", name: \"Actions\" },\r\n    \"newTraining\": { url: \"/trainings/edit/new\", name: \"New Training\" },\r\n    \"editTraining\": { url: \"/trainings/edit/:id\", name: \"Edit Training\" },\r\n    \"perform\": { url: \"/trainings/perform/:id\", name: \"Perform Training\" }\r\n});","import { enumerateObject, is } from \"../../../node_modules/bpd-toolkit/dist/esm/index\";\r\n\r\n\r\nexport interface RouteDetails {\r\n    url: string,\r\n    name: string\r\n}\r\nexport interface RoutesMapping {\r\n    [id: string]: RouteDetails;\r\n}\r\n\r\nexport interface AppRouteAttributes {\r\n    [id: string]: string | number;\r\n}\r\n\r\nexport class AppMapping {\r\n    #mapping: RoutesMapping\r\n    constructor(routes: RoutesMapping) {\r\n        this.#mapping = routes;\r\n    }\r\n\r\n    getRoute(id: string) {\r\n        return is(id) ? this.#mapping[id] : undefined;\r\n    }\r\n\r\n    getUrl(id: string) {\r\n        let route = this.getRoute(id);\r\n        return is(route) ? route.url : undefined;\r\n    }\r\n\r\n    getName(id: string) {\r\n        let route = this.getRoute(id);\r\n        return is(route) ? route.name : undefined;\r\n    }\r\n    renderUrl(id: string, attributes?: AppRouteAttributes): string {\r\n        let uri = this.getUrl(id)\r\n        if (!is(attributes)) {\r\n            return uri;\r\n        }\r\n        enumerateObject(attributes, (prop: string, value: string) => {\r\n            uri = uri.replace(\":\" + prop, value);\r\n        })\r\n        return uri;\r\n    }\r\n}","import * as React from \"react\";\r\nimport { Round, Training } from \"../../../core/models\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { calculateDuration } from \"../../../core/helpers\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\n\r\nexport interface TrainingListProps {\r\n    list: Training[];\r\n    onDelete: (id: number) => void;\r\n}\r\n\r\nexport interface TrainingListItemProps {\r\n    data: Training;\r\n    onDelete: (id: number) => void;\r\n}\r\n\r\nexport function TrainingList(props: TrainingListProps) {\r\n    return <ul className=\"cui-list cui-hover\">\r\n        {props.list && props.list.map(item => {\r\n            return <li key={item.id} className=\"stopwatch-content-width\"><TrainingListItem data={item} onDelete={props.onDelete} /></li>\r\n        })}\r\n    </ul>\r\n}\r\n\r\nexport function TrainingListItem(props: TrainingListItemProps) {\r\n    const deleteTrainingAction = \"DELETE_TRAINING\";\r\n    let history = useHistory();\r\n\r\n    function getActionsDuration(training: Training) {\r\n        return training.rounds.reduce<[number, number]>((result: [number, number], current: Round) => {\r\n            return [result[0] + current.actions.length, result[1] + calculateDuration(current.actions)];\r\n        }, [0, 0]);\r\n    }\r\n\r\n    function getDetails(training: Training) {\r\n        const [actions, duration] = getActionsDuration(training);\r\n        return `${duration} seconds`;\r\n    }\r\n\r\n    function onItemClick() {\r\n        history.push(MAPPIGNS.renderUrl(\"perform\", { id: props.data.id }))\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const deleteSubscription = window.$flow.subscribe(deleteTrainingAction).finish((result) => {\r\n            window.$flow.perform(\"GET_TRAININGS\")\r\n        });\r\n\r\n        return () => {\r\n            window.$flow.unsubscribe(deleteTrainingAction, deleteSubscription.id)\r\n        }\r\n    })\r\n\r\n    return <div className=\"cui-flex cui-middle cui-animation-fade-in cui-padding-bottom cui-padding-top\">\r\n        <div className=\"cui-flex-grow\" onClick={onItemClick}>\r\n            <div className=\"cui-flex cui-middle cui-nowrap\">\r\n                <div className=\"training-list-item-icon\">\r\n                    <span className=\"cui-text-bold\">{props.data.name[0].toUpperCase()}</span>\r\n                </div>\r\n                <div className=\"cui-flex-grow cui-margin-left\">\r\n                    <span >{props.data.name}</span>\r\n                    <div className=\"cui-text-muted cui-text-truncate cui-overflow-hidden\">\r\n                        <span>{getDetails(props.data)}</span>\r\n                    </div></div>\r\n            </div>\r\n        </div>\r\n        <div className=\"cui-flex-shrink\">\r\n            <div>\r\n                <Link to={MAPPIGNS.renderUrl(\"editTraining\", { \"id\": props.data.id })} className=\"cui-icon-button\" cui-icon=\"edit\"></Link>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { TrainingList } from \"./list\";\r\nimport { Training, WarmUp, CoolDown, Exercise } from \"../../../core/models\";\r\nimport { FlowTask } from \"../../../../node_modules/bpd-flow/dist/index\";\r\nimport { showMessage } from \"../../../core/helpers\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\n\r\nexport interface HomeProps {\r\n    site?: string;\r\n}\r\n\r\nexport interface HomeState {\r\n    list: Training[];\r\n}\r\n\r\nexport class Home extends React.Component<any, HomeState> {\r\n    list: Training[];\r\n    subscription: FlowTask<Training[]>\r\n    onDeleteSubscription: FlowTask<boolean>;\r\n    state: HomeState;\r\n    constructor(props: HomeProps) {\r\n        super(props);\r\n        this.state = {\r\n            list: []\r\n        }\r\n\r\n        this.updateList = this.updateList.bind(this);\r\n        this.onDeleteTrainingComplete = this.onDeleteTrainingComplete.bind(this);\r\n        this.deleteTraining = this.deleteTraining.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.subscription = window.$flow.subscribe(\"GET_ALL_TRAININGS\");\r\n        this.subscription.finish(this.updateList);\r\n        this.onDeleteSubscription = window.$flow.subscribe(\"DELETE_TRAINING\", { finish: this.onDeleteTrainingComplete })\r\n        window.$flow.perform(\"GET_ALL_TRAININGS\");\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.$flow.unsubscribe(\"GET_ALL_TRAININGS\", this.subscription.id);\r\n        window.$flow.unsubscribe(\"DELETE_TRAINING\", this.onDeleteSubscription.id);\r\n    }\r\n\r\n    deleteTraining(id: number) {\r\n        let list = [...this.state.list];\r\n        let elementIdx = list.findIndex(item => item.id === id);\r\n        if (elementIdx > -1) {\r\n            window.$cui.alert(\"delete-training-dialog\", \"YesNoCancel\", {\r\n                title: \"Delete training\",\r\n                message: \"Do you really want to delete training: \" + list[elementIdx].name + \"?\",\r\n                onYes: () => {\r\n                    window.$flow.perform(\"DELETE_TRAINING\", id)\r\n                }\r\n            })\r\n        } else {\r\n            showMessage(\"Delete training\", \"We cannot remove this training. Identified doesn't match.\")\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onDeleteTrainingComplete(flag: boolean) {\r\n        if (flag) {\r\n            window.$flow.perform(\"GET_ALL_TRAININGS\");\r\n        } else {\r\n            showMessage(\"Delete training\", \"Service could not remove training\")\r\n        }\r\n    }\r\n\r\n    updateList(list: Training[]) {\r\n        this.setState({\r\n            ...this.state,\r\n            list: list\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return <div className=\"stopwatch-page-layout\" >\r\n            <div className=\"stopwatch-page-top cui-container cui-center\">\r\n                <div>\r\n                    <span className=\"cui-icon stopwatch-icon\" cui-icon=\"stopwatch\"></span>\r\n                    <h1 className=\"cui-h3 cui-text-center cui-margin-small-top stopwatch-title\">Stopwatch</h1>\r\n                </div>\r\n            </div>\r\n            <div className=\"stopwatch-page-bottom\">\r\n                <div className=\"stopwatch-home-list cui-overflow-y-auto\">\r\n                    {this.state.list.length > 0 ? <TrainingList list={this.state.list} onDelete={this.deleteTraining} /> : <NoTrainings />}\r\n                </div>\r\n            </div>\r\n            <div className=\"cui-position-float cui-position-bottom cui-position-right cui-margin cui-margin-large--l z-index-100\">\r\n                <Link to={MAPPIGNS.renderUrl(\"newTraining\")} className=\"cui-button cui-icon cui-icon-margin cui-background-default cui-box-shadow cui-rounded\" cui-icon=\"plus\">Add New</Link>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport function NoTrainings() {\r\n    return <div className=\"cui-container cui-center\">\r\n        <p className=\"cui-text-muted cui-text-center\">There are no trainings recorded. <Link className=\"cui-link cui-accent\" to={MAPPIGNS.renderUrl(\"newTraining\")}>Add new</Link> training to start your execises!</p>\r\n    </div>;\r\n}\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport interface ErrorProps {\r\n}\r\n\r\n// 'HelloProps' describes the shape of props.\r\n// State is never set so we use the '{}' type.\r\nexport class ErrorRoute extends React.Component<ErrorProps, {}> {\r\n    constructor(props: ErrorProps) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        return <div className=\"cui-section cui-flex-center cui-height-viewport-1-2\">\r\n            <div className=\"cui-card cui-large\">\r\n                <div className=\"cui-card-header cui-text-error\">\r\n                    <span className=\"cui-card-title\">Error</span>\r\n                </div>\r\n                <div className=\"cui-card-body\">\r\n                    It appears that page you looking for does not exist.\r\n                    Try to look for it again or go back to our Home page\r\n                </div>\r\n                <div className=\"cui-card-footer cui-flex cui-right\">\r\n                    <Link to=\"/\" className=\"cui-link\">Go Home</Link>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    }\r\n}","import * as React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nexport interface NavbarLinkProps {\r\n    url: string;\r\n    name: string;\r\n    shouldClose?: boolean;\r\n    class?: string;\r\n}\r\n\r\nexport class NavbarLink extends React.Component<NavbarLinkProps, {}> {\r\n    constructor(props: NavbarLinkProps) {\r\n        super(props);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n\r\n    onClick() {\r\n        if (this.props.shouldClose) {\r\n            let offcanvas = window.$cui.get(\"#app-offcanvas\");\r\n            offcanvas.emit('close');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <NavLink exact activeClassName=\"cui-active\" className={this.props.class} to={this.props.url} onClick={this.onClick}>{this.props.name}</NavLink>;\r\n    }\r\n}","import * as React from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\nimport { NavbarLink } from \"../common/NavbarLink\";\r\n\r\nexport interface NavbarState {\r\n    currentSite: string;\r\n    darkMode: boolean;\r\n    soundEnabled: boolean\r\n}\r\n\r\nexport interface NavbarProps {\r\n    site?: string;\r\n    location?: any;\r\n}\r\n\r\nexport function Navbar(props: NavbarProps) {\r\n    const currentLocation = useLocation();\r\n    const [state, setState] = React.useState<NavbarState>({\r\n        currentSite: \"\",\r\n        darkMode: false,\r\n        soundEnabled: false\r\n    });\r\n\r\n    function onGetSound(flag: boolean): void {\r\n\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        let split = currentLocation.pathname.split('/');\r\n        setState({\r\n            ...state,\r\n            currentSite: split.length > 1 ? currentLocation.pathname.split('/')[1].toLocaleUpperCase() : \"\"\r\n        })\r\n    }, [currentLocation])\r\n    return <nav className={\"cui-navbar cui-sticky cui-box-shadow-remove stopwatch-layout-navigation\"}>\r\n        <div className=\"cui-navbar-left cui-width-1-1 cui-width-auto--m cui-flex cui-middle cui-between\" id=\"navbar-left\">\r\n            <ul>\r\n                {state.currentSite && <li><Link className=\"cui-icon\" to={MAPPIGNS.renderUrl(\"home\")} cui-icon=\"stopwatch_small\"></Link></li>}\r\n            </ul>\r\n            <a className=\"cui-icon cui-padding cui-button cui-hidden--m\" cui-icon=\"menu\" cui-open=\"target: #app-offcanvas\"></a>\r\n        </div>\r\n\r\n        <ul className=\"cui-navbar-right cui-visible--m\">\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"home\")} name={MAPPIGNS.getName(\"home\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"actions\")} name={MAPPIGNS.getName(\"actions\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"settings\")} name={MAPPIGNS.getName(\"settings\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"about\")} name={MAPPIGNS.getName(\"about\")} /></li>\r\n        </ul>\r\n    </nav>\r\n}","import * as React from \"react\";\r\nimport { ElementManager } from \"../../../../node_modules/cui-light/dist/index\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\nimport { NavbarLink } from \"../common/NavbarLink\";\r\n\r\nexport interface OffCanvasProps {\r\n}\r\n\r\n// 'HelloProps' describes the shape of props.\r\n// State is never set so we use the '{}' type.\r\nexport class OffCanvas extends React.Component<OffCanvasProps, {}> {\r\n    constructor(props: OffCanvasProps) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"cui-off-canvas\" id=\"app-offcanvas\" cui-off-canvas=\"escClose: y; outClose: y\">\r\n            <div className=\"cui-off-canvas-container cui-card off-canvas-layout\">\r\n                <div className=\"cui-card-header cui-flex cui-middle cui-right\">\r\n                    <a href=\"#\" className=\"cui-icon\" cui-icon=\"close\" cui-close=\"\"></a>\r\n                </div>\r\n                <div className=\"off-canvas-content cui-card-body\">\r\n\r\n                    <div className=\"cui-width-1-1\">\r\n                        <h3 className=\"cui-h3\">Menu</h3>\r\n                        <ul className=\"cui-list cui-interactive cui-margin-top\">\r\n                            <li><NavbarLink url={MAPPIGNS.renderUrl(\"home\")} name={MAPPIGNS.getName(\"home\")} shouldClose={true} /></li>\r\n                            <li><NavbarLink url={MAPPIGNS.renderUrl(\"actions\")} name={MAPPIGNS.getName(\"actions\")} shouldClose={true} /></li>\r\n                            <li><NavbarLink url={MAPPIGNS.renderUrl(\"settings\")} name={MAPPIGNS.getName(\"settings\")} shouldClose={true} /></li>\r\n                            <li><NavbarLink url={MAPPIGNS.renderUrl(\"about\")} name={MAPPIGNS.getName(\"about\")} shouldClose={true} /></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","export const StopwatchActionType = {\r\n    EXERCISE: 'exercise',\r\n    BREAK: 'break',\r\n    COOLDOWN: \"cooldown\",\r\n    WARMUP: \"warmup\"\r\n}\r\n\r\nexport interface Settings {\r\n    darkMode: boolean;\r\n    soundEnabled: boolean;\r\n}\r\n\r\nexport interface StopwatchAction {\r\n    name: string;\r\n    duration: number;\r\n    type?: string;\r\n    color?: string;\r\n    removable?: boolean;\r\n    editable?: boolean;\r\n}\r\n\r\nexport interface Round {\r\n    actions: StopwatchAction[];\r\n    break?: number;\r\n    \r\n}\r\n\r\nexport interface Training {\r\n    name: string;\r\n    description?: string;\r\n    id?: number;\r\n    rounds: Round[];\r\n}\r\n\r\nexport class Exercise implements StopwatchAction {\r\n    name: string;\r\n    duration: number;\r\n    type: string = StopwatchActionType.EXERCISE;\r\n    removable: false;\r\n    constructor(duration: number, name?: string) {\r\n        this.duration = duration;\r\n        this.name = name ? name : 'Exercise';\r\n    }\r\n}\r\n\r\nexport class WarmUp implements StopwatchAction {\r\n    name: string;\r\n    duration: number;\r\n    type: string = StopwatchActionType.WARMUP;\r\n    removable: boolean = false;\r\n\r\n    constructor(duration: number) {\r\n        this.duration = duration;\r\n        this.name = \"Warm Up\"\r\n    }\r\n}\r\n\r\nexport class CoolDown implements StopwatchAction {\r\n    name: string;\r\n    duration: number;\r\n    type: string = StopwatchActionType.COOLDOWN;\r\n    removable: false;\r\n    constructor(duration: number, name?: string) {\r\n        this.duration = duration;\r\n        this.name = name ? name : \"Cooldown\";\r\n    }\r\n}","import { StopwatchAction, StopwatchActionType } from \"./models\";\r\n\r\nexport const DefaultActions: StopwatchAction[] = [{\r\n    name: \"Warmup\",\r\n    duration: 5,\r\n    type: StopwatchActionType.WARMUP,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    name: \"Exercise\",\r\n    duration: 30,\r\n    type: StopwatchActionType.EXERCISE,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    name: \"Break\",\r\n    duration: 60,\r\n    type: StopwatchActionType.BREAK,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    name: \"Cooldown\",\r\n    duration: 90,\r\n    type: StopwatchActionType.WARMUP,\r\n    removable: false,\r\n    editable: false\r\n}]\r\n\r\nexport const ERROR_CODES = {\r\n    e0000: \"OK\",\r\n    e0100: \"Training is empty\",\r\n    e0101: \"Training name is not provided\",\r\n    e0102: \"Training has no rounds\",\r\n    e0200: \"Round is empty\",\r\n    e0201: \"Round has no actions\",\r\n    e0300: \"Action is empty\",\r\n    e0301: \"Action name is not provided\",\r\n    e0302: \"Action type is not provided\",\r\n    e0303: \"Action duration is not correct\"\r\n\r\n}","import { IActionsService } from \"../../core/services/interfaces\"\r\nimport { StopwatchAction } from \"../../core/models\";\r\n\r\nexport const ACTIONS_FLOW_ACTIONS = {\r\n    GET_ALL: \"GET_ALL\",\r\n    SET_ACTION: \"SET_ACTION\",\r\n    REMOVE_ACTION: \"REMOVE_ACTION\"\r\n}\r\n\r\nexport type ActionsFlowInput = StopwatchAction;\r\nexport type ActionsFlowOutput = boolean | StopwatchAction[];\r\n\r\nexport class ActionsFlow {\r\n    #service: IActionsService;\r\n    constructor(service: IActionsService) {\r\n        this.#service = service;\r\n    }\r\n    getActions() {\r\n        return {\r\n            [ACTIONS_FLOW_ACTIONS.GET_ALL]: () => {\r\n                return this.#service.getAllActions();\r\n            },\r\n            [ACTIONS_FLOW_ACTIONS.SET_ACTION]: (action: StopwatchAction) => {\r\n                return this.#service.setAction(action);\r\n            },\r\n            [ACTIONS_FLOW_ACTIONS.REMOVE_ACTION]: (action: StopwatchAction) => {\r\n                return this.#service.removeAction(action);\r\n            }\r\n        }\r\n    }\r\n}","import * as React from 'react'\r\n\r\nexport interface BpdActionIconProps {\r\n    type: string;\r\n}\r\n\r\nexport function BpdActionIcon(props: BpdActionIconProps) {\r\n    return (\r\n        <span className=\"cui-icon cui-tooltip\" data-tooltip={props.type} cui-icon={`stopwatch_${props.type}`}></span>\r\n    );\r\n}\r\n","import { Round, StopwatchAction, Training } from \"./models\";\r\nimport { ERROR_CODES } from \"./statics\";\r\nimport { is } from '../../node_modules/bpd-toolkit/dist/esm/index';\r\n\r\nexport interface ValidationResult {\r\n    status: boolean;\r\n    errors?: string[];\r\n}\r\n\r\nexport interface IValidator<T> {\r\n    validate(t: T): ValidationResult\r\n}\r\n\r\nexport abstract class ValidatorBase<T> implements IValidator<T> {\r\n    validate(t: T): ValidationResult {\r\n        const result: ValidationResult = { status: true }\r\n        try {\r\n            let errors = this.performValidation(t);\r\n            if (errors && errors.length > 0) {\r\n                result.status = false;\r\n                result.errors = errors;\r\n            }\r\n        } catch (e) {\r\n            let errorMsg = \"An error occured during validation\";\r\n            console.error(errorMsg)\r\n            console.error(e)\r\n            result.status = false;\r\n            result.errors = [errorMsg + \": \" + e.message]\r\n        }\r\n        return result;\r\n    }\r\n\r\n    protected abstract performValidation(t: T): string[];\r\n}\r\n\r\nexport class TrainingValidator extends ValidatorBase<Training> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: Training): string[] {\r\n        if (!is(t)) {\r\n            return ([ERROR_CODES.e0100]);\r\n        }\r\n        let errors = []\r\n        if (!is(t.name)) {\r\n            errors.push(ERROR_CODES.e0101)\r\n        }\r\n        if (!is(t.rounds)) {\r\n            errors.push(ERROR_CODES.e0102)\r\n        }\r\n        return errors;\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class RoundValidator extends ValidatorBase<Round> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: Round): string[] {\r\n        if (!is(t)) {\r\n            return ([ERROR_CODES.e0200]);\r\n        }\r\n        if (!is(t.actions))\r\n            return [ERROR_CODES.e0201]\r\n    }\r\n}\r\n\r\nexport class ActionValidator extends ValidatorBase<StopwatchAction> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: StopwatchAction): string[] {\r\n        if (!is(t)) {\r\n            return ([ERROR_CODES.e0300]);\r\n        }\r\n        let errors = []\r\n        if (!is(t.name)) {\r\n            errors.push(ERROR_CODES.e0301)\r\n        }\r\n        if (!is(t.type)) {\r\n            errors.push(ERROR_CODES.e0302)\r\n        }\r\n        if (t.duration < 0) {\r\n            errors.push(ERROR_CODES.e0303)\r\n        }\r\n        return errors;\r\n    }\r\n}","import * as React from 'react'\r\n\r\nexport interface BpdDialogProps {\r\n    title: string;\r\n    id: string;\r\n    body?: JSX.Element;\r\n    footer?: JSX.Element;\r\n    className?: string;\r\n}\r\n\r\nexport function BpdDialog(props: BpdDialogProps) {\r\n    React.useEffect(() => {\r\n    }, [props])\r\n    return (<div className={`cui-dialog ${props.className ?? \"\"}`} cui-dialog=\"escClose: Y\" id={props.id}>\r\n        <div className=\"cui-dialog-container\">\r\n            <div className=\"cui-dialog-header\">\r\n                <span className=\"cui-dialog-title\">{props.title}</span>\r\n                <a className=\"cui-icon\" cui-icon=\"close\" cui-close=\"\"></a>\r\n            </div>\r\n            <div className=\"cui-dialog-body\">\r\n                {props.body}\r\n            </div>\r\n\r\n            {props.footer && (<div className=\"cui-dialog-footer\">\r\n                {props.footer}\r\n            </div>)}\r\n\r\n        </div>\r\n    </div>)\r\n}\r\n","import * as React from 'react'\r\n\r\nexport interface ErrorsListProps {\r\n    errors: string[];\r\n}\r\n\r\n\r\nexport function ErrorsList(props: ErrorsListProps) {\r\n    return (\r\n        <>\r\n            {props.errors &&\r\n                props.errors.length > 0 &&\r\n                <ul className=\"cui-list\">\r\n                    {\r\n                        props.errors.map((error: string, index: number) => {\r\n                            return <li key={index} className=\"cui-animation-fade-in\"><span className=\"cui-text-error\">{error}</span></li>\r\n                        })\r\n                    }\r\n                </ul>}\r\n        </>\r\n    );\r\n}\r\n","import * as React from \"react\";\r\nimport { StopwatchAction, StopwatchActionType } from \"../../../core/models\";\r\nimport { ActionValidator } from \"../../../core/validators\";\r\nimport { BpdDialog } from \"../common/BpdDialog\";\r\nimport { ErrorsList } from \"../common/ErrorsList\";\r\n\r\nexport interface AddActionDialogProps {\r\n    action: StopwatchAction;\r\n    onSave: (action: StopwatchAction) => void;\r\n}\r\n\r\nexport function AddActionDialog(props: AddActionDialogProps) {\r\n    const [state, setState] = React.useState<StopwatchAction>({\r\n        name: \"\",\r\n        duration: 5,\r\n        removable: true,\r\n        editable: false,\r\n        type: StopwatchActionType.EXERCISE\r\n    })\r\n\r\n    const [errors, setErrors] = React.useState<string[]>([])\r\n\r\n    function onValueChange(event: any) {\r\n        let name = event.target.name;\r\n\r\n        switch (name) {\r\n            case \"name\":\r\n            case \"duration\":\r\n            case \"type\":\r\n                setState({ ...state, [name]: event.target.value })\r\n                break;\r\n            case \"removable\":\r\n            case \"editable\":\r\n                setState({ ...state, [name]: event.target.checked })\r\n                break;\r\n        }\r\n    }\r\n\r\n    function onSave() {\r\n        if (props.onSave) {\r\n            let action: StopwatchAction = { ...state };\r\n            let actionValidator = new ActionValidator().validate(action)\r\n            if (actionValidator.status) {\r\n                let dialogCui = window.$cui.get(\"#add-action-dialog\");\r\n                props.onSave(action);\r\n                dialogCui.emit('close');\r\n            }\r\n            setErrors(actionValidator.errors);\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (props.action) {\r\n            setState({\r\n                ...props.action\r\n            })\r\n            setErrors([]);\r\n        }\r\n        return () => {\r\n\r\n        }\r\n    }, [props.action])\r\n    return (<BpdDialog\r\n        title=\"Add new\"\r\n        id=\"add-action-dialog\"\r\n        body={<>\r\n            <div className=\"cui-form\">\r\n                <label className=\"cui-form-label\">Name</label>\r\n                <input className=\"cui-input stopwatch-input-width\" type=\"text\" name=\"name\" value={state.name} placeholder=\"Name\" onChange={onValueChange} />\r\n            </div>\r\n            <div className=\"cui-form cui-margin-top\">\r\n                <label className=\"cui-form-label\">Duration</label>\r\n                <input className=\"cui-input stopwatch-input-width\" type=\"number\" min=\"0\" max=\"100\" name=\"duration\" value={state.duration} placeholder=\"Duration\" onChange={onValueChange} />\r\n            </div>\r\n            <div className=\"cui-form cui-margin-top\">\r\n                <label className=\"cui-form-label\">Type</label>\r\n                <select className=\"cui-select stopwatch-input-width\" value={state.type} name=\"type\" onChange={onValueChange} >\r\n                    <option value=\"warmup\">Warmup</option>\r\n                    <option value=\"exercise\">Exercise</option>\r\n                    <option value=\"break\">Break</option>\r\n                    <option value=\"cooldown\">Cooldown</option>\r\n                </select>\r\n            </div>\r\n            <div className=\"cui-form cui-flex cui-middle cui-reverse cui-margin-top\">\r\n                <input type=\"checkbox\" className=\"cui-checkbox\" id=\"checkbox-1-2\" name=\"editable\" checked={state.editable} onChange={onValueChange} />\r\n                <label htmlFor=\"checkbox-1-2\"> Editable</label>\r\n            </div>\r\n            <div className=\"cui-form cui-flex cui-middle cui-reverse cui-margin-top\">\r\n                <input type=\"checkbox\" className=\"cui-checkbox\" id=\"checkbox-1-1\" name=\"removable\" checked={state.removable} onChange={onValueChange} />\r\n                <label htmlFor=\"checkbox-1-1\"> Removable</label>\r\n            </div>\r\n            <ErrorsList errors={errors} />\r\n        </>\r\n        }\r\n        footer={\r\n            <div className=\"cui-flex cui-right\">\r\n                <button className=\"cui-button cui-margin-small-right\" cui-close=\"\">Cancel</button>\r\n                <button className=\"cui-button cui-accent\" onClick={onSave}>Save</button>\r\n            </div>\r\n        }\r\n    />);\r\n}","import * as React from 'react'\r\n\r\nexport interface PageHeaderProps {\r\n    title: string;\r\n    description: string;\r\n}\r\n\r\n\r\nexport function PageHeader(props: PageHeaderProps) {\r\n    return (<div className=\"stopwatch-page-header cui-container cui-center\">\r\n        <div>\r\n            <h1 className=\"cui-h1 cui-text-center cui-margin-remove\">{props.title}</h1>\r\n            <p className=\"cui-text-center cui-text-muted\">{props.description}</p>\r\n        </div>\r\n    </div>);\r\n}\r\n","import * as React from 'react'\r\nimport { is } from '../../../../node_modules/bpd-toolkit/dist/esm/index';\r\n\r\nexport interface ClearableInputProps {\r\n    value: string;\r\n    onUpdate?: (value: string) => void;\r\n    className?: string;\r\n}\r\n\r\n\r\nexport function ClearableInput(props: ClearableInputProps) {\r\n    const [value, setValue] = React.useState<string>('');\r\n\r\n    function onInputChange(ev: any) {\r\n        changeValue(ev.target.value);\r\n    }\r\n\r\n    function changeValue(value: string) {\r\n        setValue(value);\r\n        if (is(props.onUpdate)) {\r\n            props.onUpdate(value);\r\n        }\r\n    }\r\n\r\n    return (<div className={\"cui-input-mix \" + props.className}>\r\n        <input type=\"text\" className=\"cui-input\" placeholder=\"Filter\" value={value} onChange={onInputChange} />\r\n        {is(value) && <a className=\"cui-icon\" cui-icon=\"close\" onClick={() => changeValue(\"\")}></a>}\r\n    </div>);\r\n}\r\n","import * as React from 'react'\r\nimport { StopwatchAction } from '../../../core/models';\r\nimport { DefaultActions } from '../../../core/statics';\r\nimport { ACTIONS_FLOW_ACTIONS } from '../../../app/flow/actions';\r\nimport { BpdActionIcon } from '../common/BpdActionIcon';\r\nimport { AddActionDialog } from './AddActionDialog';\r\nimport { PageHeader } from '../common/PageHeader';\r\nimport { deleteActionConfirmDialog } from '../common/Dialogs';\r\nimport { getBgClassByType } from '../../../core/helpers';\r\nimport { ICONS } from '../../../../node_modules/cui-light/dist/index';\r\nimport { is } from '../../../../node_modules/bpd-toolkit/dist/esm/index';\r\nimport { ClearableInput } from '../common/ClearableInput';\r\n\r\nconst defaultAction: StopwatchAction = {\r\n    name: \"\",\r\n    type: \"exercise\",\r\n    duration: 5,\r\n    removable: true,\r\n    editable: true\r\n}\r\n\r\nexport interface BpdDialogState {\r\n    action: StopwatchAction;\r\n}\r\n\r\nexport interface StopWatchActionsState {\r\n    actions: StopwatchAction[];\r\n    current: StopwatchAction;\r\n}\r\n\r\n\r\nexport function StopwatchActionsComponent() {\r\n    const [state, setState] = React.useState<StopWatchActionsState>({\r\n        actions: [...DefaultActions],\r\n        current: null\r\n    })\r\n\r\n    const [filter, setFilter] = React.useState<string>(\"\");\r\n\r\n    function onDialogSave(action: StopwatchAction) {\r\n        window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.SET_ACTION, action);\r\n    }\r\n\r\n    function onDelete(action: StopwatchAction) {\r\n        deleteActionConfirmDialog(action.name, () => {\r\n            window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.REMOVE_ACTION, action);\r\n        })\r\n    }\r\n\r\n    function onGetAll(actions: StopwatchAction[]) {\r\n        setState({\r\n            ...state,\r\n            actions: [...DefaultActions, ...actions]\r\n        })\r\n    }\r\n\r\n    function onAddOrEditClick(action?: StopwatchAction) {\r\n        setState({\r\n            ...state,\r\n            current: action || { ...defaultAction }\r\n        })\r\n        let dialogCui = window.$cui.get(\"#add-action-dialog\");\r\n        dialogCui.emit('open');\r\n    }\r\n\r\n    function updateFilter(value: string) {\r\n        setFilter(value);\r\n    }\r\n\r\n    function matchesName(name: string): boolean {\r\n        if (!is(filter)) {\r\n            return true;\r\n        }\r\n        let match = name.toLowerCase().match(filter.toLowerCase());\r\n        return is(match);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const getAllSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, { finish: onGetAll })\r\n        const setActionSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.SET_ACTION)\r\n        const removeActionSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.REMOVE_ACTION)\r\n        window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.GET_ALL);\r\n        return () => {\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, getAllSub.id);\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.SET_ACTION, setActionSub.id);\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.REMOVE_ACTION, removeActionSub.id);\r\n        }\r\n    }, [state.actions])\r\n\r\n    return (<><div className=\"stopwatch-content-width\">\r\n        <PageHeader title=\"Activities\" description=\"Define activies which you want to perform in trainings!\" />\r\n        <div className=\"cui-container cui-flex cui-middle cui-middle cui-center cui-right--s\">\r\n            <ClearableInput value={filter} onUpdate={updateFilter} className=\"cui-width-1-1 cui-width-1-3--m cui-width-1-4--l\" />\r\n        </div>\r\n        <div className=\"cui-container cui-flex-grid cui-flex-grid-match cui-child-width-1-2 cui-child-width-1-3--m\">\r\n            {is(state.actions) && state.actions.map((action: StopwatchAction, index: number) => {\r\n                return (matchesName(action.name) &&\r\n                    <div key={index} className=\"cui-animation-fade-in\">\r\n                        <div className={\"cui-card cui-default cui-hover \" + getBgClassByType(action.type)} onClick={() => { if (action.editable) { onAddOrEditClick(action) } }}>\r\n                            <div className=\"cui-card-header cui-flex cui-between cui-nowrap\">\r\n                                <span className=\"cui-card-title cui-text-truncate cui-overflow-hidden\">{action.name}</span>\r\n                                <BpdActionIcon type={action.type} />\r\n                            </div>\r\n                            <div className=\"cui-card-body cui-flex cui-middle action-card-height\">\r\n                                <div className=\"cui-flex-grow\">\r\n                                    <div className=\"cui-text-muted\"><span>{action.duration} seconds</span></div>\r\n                                </div>\r\n                                <div className=\"cui-flex-shrink\">\r\n                                    <ul className=\"cui-icon-nav\">\r\n                                        {action.removable && <li><a className=\"cui-icon\" cui-icon=\"trash\" onClick={() => onDelete(action)}></a></li>}\r\n                                    </ul>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>)\r\n            })}\r\n        </div>\r\n        <div className=\"cui-position-float cui-position-bottom cui-position-right cui-margin cui-margin-large--l z-index-100\">\r\n            <button className=\"cui-icon cui-button cui-icon-margin cui-background-default cui-box-shadow cui-rounded\" cui-icon=\"plus\" onClick={() => { onAddOrEditClick() }}>Add New</button>\r\n        </div>\r\n    </div>\r\n        <AddActionDialog action={state.current} onSave={onDialogSave} /></>);\r\n}\r\n","export function onDeleteTrainingDialog(name: string, onConfirm: () => void) {\r\n    window.$cui.alert(\"delete-training-dialog\", \"YesNoCancel\", {\r\n        title: \"Delete training\",\r\n        message: \"Do you really want to delete training: \" + name + \"?\",\r\n        onYes: onConfirm\r\n    })\r\n}\r\n\r\nexport function deleteRoundConfirmDialog(onOnfirm: () => void) {\r\n    window.$cui.alert(\"delete-round-dialog\", \"YesNoCancel\", {\r\n        title: \"Delete round\",\r\n        message: \"Do you really want to delete this round?\",\r\n        onYes: onOnfirm\r\n    })\r\n}\r\n\r\nexport function deleteActionConfirmDialog(name: string, onConfirm: () => void) {\r\n    window.$cui.alert(\"delete-action-dialog\", \"YesNoCancel\", {\r\n        title: \"Delete action\",\r\n        message: \"Do you really want to delete action: \" + name,\r\n        onYes: onConfirm\r\n    })\r\n}","import * as React from 'react'\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nfunction GoBack(props: any) {\r\n    const { history } = props;\r\n    return (<button className=\"cui-button cui-accent\" onClick={() => history.goBack()}>Go Back</button>)\r\n}\r\n\r\n\r\nexport default withRouter(GoBack);","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport GoBack from \"./GoBack\";\r\n\r\nexport interface NotFoundProps {\r\n    message: string;\r\n    classes?: string;\r\n    goBack?: boolean;\r\n}\r\n\r\nexport function NotFound(props: NotFoundProps) {\r\n    return (<div className={props.classes}>\r\n        <h2 className=\"cui-h2 cui-text-center cui-text-error\">{props.message}</h2>\r\n        <div className=\"\">\r\n            <div className=\"cui-flex cui-center\">\r\n                <Link to=\"/\" className=\"cui-button cui-margin-small-right\">Go Home</Link>\r\n                {props.goBack ?? <GoBack />}\r\n            </div>\r\n        </div>\r\n\r\n    </div>);\r\n}","import * as React from 'react'\r\nimport { StopwatchAction } from '../../../core/models';\r\nexport interface ActionsSelectProps {\r\n    actions: StopwatchAction[];\r\n    id: string;\r\n    name: string;\r\n    className?: string;\r\n    value?: string;\r\n    onSelect: (action: StopwatchAction) => void;\r\n}\r\nexport function ActionsSelect(props: ActionsSelectProps) {\r\n    function onChange(ev: any) {\r\n        if (props.onSelect) {\r\n            let name = ev.target.value;\r\n            props.onSelect(props.actions.find(item => item.name === name))\r\n        }\r\n    }\r\n    return (\r\n        <select className={\"cui-select \" + props.className} name={props.name} id={props.id} onChange={onChange} value={props.value}>\r\n            {props.actions && props.actions.map((action: StopwatchAction) => {\r\n                return <option key={action.name} value={action.name}>{action.name} (Type: {action.type}, Duration: {action.duration})</option>\r\n            })}\r\n        </select>\r\n    );\r\n}\r\n","import * as React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { ACTIONS_FLOW_ACTIONS } from \"../../../app/flow/actions\";\r\nimport { Round, StopwatchAction } from \"../../../core/models\";\r\nimport { RoundValidator } from \"../../../core/validators\";\r\nimport { ActionsSelect } from \"../actions/ActionsSelect\";\r\nimport { BpdActionIcon } from \"../common/BpdActionIcon\";\r\nimport { BpdDialog } from \"../common/BpdDialog\";\r\n\r\nexport interface EditRoundDialogProps {\r\n    onSave: (round: Round, index: number) => void;\r\n    definedActions: StopwatchAction[];\r\n    round: Round;\r\n    index: number;\r\n}\r\n\r\nexport interface EditRoundDialogState {\r\n    name: string;\r\n    actions?: StopwatchAction[];\r\n    selected: StopwatchAction;\r\n    errors: string[];\r\n}\r\n\r\nexport function EditRoundDialog(props: EditRoundDialogProps) {\r\n    const [state, setState] = useState<EditRoundDialogState>({\r\n        actions: [],\r\n        selected: null,\r\n        errors: [],\r\n        name: \"\"\r\n    })\r\n\r\n    function onSave() {\r\n        if (props.onSave) {\r\n            let round: Round = { actions: [...state.actions] }\r\n            let validation = new RoundValidator().validate(round);\r\n            if (validation.status) {\r\n                props.onSave(round, props.index);\r\n                return;\r\n            }\r\n            setState({\r\n                ...state,\r\n                errors: validation.errors\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    function onActionSelectChange(action: StopwatchAction) {\r\n        if (action) {\r\n            setState({\r\n                ...state,\r\n                selected: action\r\n            })\r\n        }\r\n    }\r\n\r\n    function onAddAction() {\r\n        if (state.selected) {\r\n            setActions([...state.actions, state.selected])\r\n        }\r\n    }\r\n\r\n    function onDeleteAction(index: number) {\r\n        let newActions = [...state.actions];\r\n        newActions.splice(index, 1);\r\n        setActions(newActions)\r\n    }\r\n\r\n    function setActions(actions: StopwatchAction[]) {\r\n        setState({\r\n            actions: actions,\r\n            selected: props.definedActions[0],\r\n            errors: [],\r\n            name: \"\"\r\n        })\r\n    }\r\n    React.useEffect(() => {\r\n        setActions(props.round && props.round !== null ? props.round.actions : []);\r\n\r\n        return () => {\r\n        }\r\n    }, [props.round, props.definedActions])\r\n    return (<BpdDialog\r\n        id=\"edit-round-dialog\"\r\n        title=\"Edit Round\"\r\n        body={<>\r\n            <div className=\"edit-round-dialog-body\">\r\n                <div className=\"cui-form\">\r\n                    <label htmlFor=\"\" className=\"cui-form-label\">Round name</label>\r\n                    <input type=\"text\" className=\"cui-input\" placeholder=\"Round name\" />\r\n                </div>\r\n                <ul className=\"cui-list cui-margin-top\">\r\n                    <div>Actions</div>\r\n                    {state.actions && state.actions.map((item: StopwatchAction, index: number) => {\r\n                        return <li key={index} className=\"animation-fade-in\" >\r\n                            <div className=\"cui-flex cui-middle\">\r\n                                <div className=\"cui-flex-grow\">\r\n                                    <div className=\"cui-flex cui-middle\">\r\n                                        <div className=\"cui-flex-center cui-margin-right\">\r\n                                            <BpdActionIcon type={item.type} />\r\n                                        </div>\r\n                                        <div className=\"cui-flex-grow\">\r\n                                            <div className=\"\">{item.name}</div>\r\n                                            <div className=\"cui-text-muted\">Lasts {item.duration} seconds</div>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                </div>\r\n                                <ul className=\"cui-icon-nav\">\r\n                                    <li><a className=\"cui-icon\" cui-icon=\"trash\" onClick={() => { onDeleteAction(index) }}></a></li>\r\n                                </ul>\r\n                            </div>\r\n                        </li>\r\n                    })}\r\n                    <li>\r\n                        <div className=\"cui-flex cui-middle cui-nowrap\">\r\n                            <div className=\"cui-flex-grow\">\r\n                                <ActionsSelect id=\"round-action-select\" className=\"cui-width-1-1 cui-width-5-6--s\" name=\"action\" value={state.selected?.name} actions={props.definedActions} onSelect={onActionSelectChange} />\r\n                            </div>\r\n                            <div className=\"\">\r\n                                <a cui-icon=\"plus\" className=\"cui-icon-button\" onClick={onAddAction}></a>\r\n                            </div>\r\n                        </div>\r\n                    </li>\r\n                </ul>\r\n                {state.errors && state.errors.length > 0 && <ul className=\"cui-list \">\r\n                    {state.errors.map((error: string, index: number) => {\r\n                        return <li key={index} className=\"cui-animation-slide-in\"><span className=\"cui-text-error\">{error}</span></li>\r\n                    })}\r\n                </ul>}\r\n            </div>\r\n        </>\r\n        }\r\n        footer={\r\n            <div className=\"cui-flex cui-right\" >\r\n                <button className=\"cui-button cui-margin-small-right\" cui-close=\"\">Cancel</button>\r\n                <button className=\"cui-button cui-accent\" onClick={onSave}>Save</button>\r\n            </div >\r\n        }\r\n    />)\r\n}","import * as React from 'react';\r\nimport { calculateDuration } from '../../../core/helpers';\r\nimport { Round } from \"../../../core/models\";\r\n\r\ninterface RoundListItemProps {\r\n    round: Round;\r\n    index: number;\r\n    isFirst: boolean;\r\n    isLast: boolean;\r\n    onEdit: (round: Round, index: number) => void;\r\n    onDelete: (round: Round, index: number) => void;\r\n    onMoveDown: (round: Round, index: number) => void;\r\n    onMoveUp: (round: Round, index: number) => void;\r\n    onClone: (round: Round, index: number) => void;\r\n}\r\n\r\nexport function EditRoundListItem(props: RoundListItemProps) {\r\n\r\n    return (\r\n        <div className=\"cui-flex cui-middle cui-nowrap\">\r\n            <div className=\"cui-flex-grow\">\r\n                <div><span className=\"cui-text-bold\">Round {props.index}</span></div>\r\n                <div className=\"cui-text-muted cui-text-small\"><span >{props.round.actions.length} actions, {calculateDuration(props.round.actions)} seconds of total length</span></div>\r\n\r\n            </div>\r\n\r\n            <ul className=\"cui-icon-nav cui-flex-shrink\">\r\n                {!props.isFirst && <li><a className=\"cui-icon\" cui-icon=\"chevron_up\" onClick={() => { props.onMoveUp(props.round, props.index) }}></a></li>}\r\n                {!props.isLast && <li><a className=\"cui-icon\" cui-icon=\"chevron_down\" onClick={() => { props.onMoveDown(props.round, props.index) }}></a></li>}\r\n                <li><a className=\"cui-icon\" cui-icon=\"copy\" onClick={() => { props.onClone(props.round, props.index) }}></a></li>\r\n                <li><a className=\"cui-icon\" cui-icon=\"edit\" onClick={() => { props.onEdit(props.round, props.index) }}></a></li>\r\n                <li><a className=\"cui-icon\" cui-icon=\"trash\" onClick={() => { props.onDelete(props.round, props.index) }}></a></li>\r\n            </ul>\r\n        </div>\r\n    );\r\n}","import * as React from 'react'\r\nimport { Link, useParams, withRouter } from 'react-router-dom';\r\nimport { clone, is } from '../../../../node_modules/bpd-toolkit/dist/esm/index';\r\nimport { ACTIONS_FLOW_ACTIONS } from '../../../app/flow/actions';\r\nimport { insert, move, showMessage } from '../../../core/helpers';\r\nimport { Round, StopwatchAction, Training } from '../../../core/models';\r\nimport { DefaultActions } from '../../../core/statics';\r\nimport { TrainingValidator } from '../../../core/validators';\r\nimport { MAPPIGNS } from '../../routes';\r\nimport { deleteRoundConfirmDialog, onDeleteTrainingDialog } from '../common/Dialogs';\r\nimport { NotFound } from '../common/NotFound';\r\nimport { PageHeader } from '../common/PageHeader';\r\nimport { EditRoundDialog } from './EditRoundDialog';\r\nimport { EditRoundListItem } from './EditRoundListItem';\r\n\r\nexport interface EditTrainingSectionProps {\r\n    training: Training;\r\n    onSave: (training: Training) => void;\r\n    onCancel: () => void;\r\n}\r\n\r\n\r\nexport interface EditTrainingProps {\r\n    history: any;\r\n}\r\n\r\ninterface EditTrainingState {\r\n    training: Training;\r\n}\r\n\r\ninterface EditTrainingSectionState {\r\n    training: Training;\r\n\r\n    currentIndex: number;\r\n    currentRound: Round;\r\n}\r\n\r\ninterface EditTrainingDefinedActions {\r\n    actions: StopwatchAction[];\r\n}\r\n\r\nfunction EditTraining(props: EditTrainingProps) {\r\n    const [state, setState] = React.useState<EditTrainingState>({\r\n        training: {\r\n            name: \"\",\r\n            rounds: []\r\n        }\r\n    })\r\n\r\n    const { id } = useParams();\r\n\r\n\r\n    function getTraining() {\r\n        if (id) {\r\n            window.$flow.perform(\"GET_TRAINING\", id);\r\n        }\r\n    }\r\n\r\n    function onUpdateTraining(result: boolean): void {\r\n        if (!result) {\r\n            showMessage(\"Fail\", \"Training was not saved\")\r\n        } else {\r\n            goBack();\r\n        }\r\n    }\r\n\r\n    function goBack() {\r\n        if (props.history) {\r\n            props.history.goBack();\r\n        }\r\n    }\r\n\r\n    function onGetTraining(training: Training): void {\r\n        if (training) {\r\n            setState({\r\n                training: { ...training }\r\n            })\r\n        } else {\r\n            showMessage(\"Fail\", \"Training was not found\")\r\n        }\r\n    }\r\n\r\n\r\n\r\n    function saveTraining(training: Training) {\r\n        window.$flow.perform(\"UPDATE_TRAINING\", training)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        console.log(\"Parent redraw\")\r\n        const updateTrainingSub = window.$flow.subscribe(\"UPDATE_TRAINING\", { finish: onUpdateTraining })\r\n        const getTrainingSub = window.$flow.subscribe(\"GET_TRAINING\", { finish: onGetTraining })\r\n\r\n        getTraining();\r\n\r\n        return () => {\r\n            window.$flow.unsubscribe(\"UPDATE_TRAINING\", updateTrainingSub.id);\r\n            window.$flow.unsubscribe(\"GET_TRAINING\", getTrainingSub.id);\r\n\r\n        }\r\n    }, [state.training.id])\r\n\r\n    return (<>\r\n        <div className=\"cui-container stopwatch-content-width\">\r\n            <PageHeader title={is(state.training?.name) ? \"Update training \" + state.training.name : \"Define training\"} description=\"Customize your training settings\" />\r\n        </div>\r\n        <div className=\"\">\r\n            {state.training ?\r\n                <EditTrainingSection training={state.training} onSave={saveTraining} onCancel={goBack} /> :\r\n                <NotFound message=\"The training you looking for could not be found\" classes=\"\" />}\r\n        </div>\r\n    </>);\r\n}\r\n\r\n\r\nfunction EditTrainingSection(props: EditTrainingSectionProps) {\r\n    const [state, setState] = React.useState<EditTrainingSectionState>({\r\n        training: props.training,\r\n        currentIndex: -1,\r\n        currentRound: null\r\n    })\r\n\r\n    const [definedActions, setDefinedActions] = React.useState<EditTrainingDefinedActions>({\r\n        actions: []\r\n    })\r\n\r\n\r\n    function onRoundEdit(round: Round, index: number) {\r\n        setState({\r\n            ...state,\r\n            currentIndex: index,\r\n            currentRound: round\r\n        })\r\n        window.$cui.get(\"#edit-round-dialog\").emit(\"open\")\r\n    }\r\n\r\n    function onRoundDelete(round: Round, index: number) {\r\n        deleteRoundConfirmDialog(() => {\r\n            let rounds = [...state.training.rounds]\r\n            rounds.splice(index, 1)\r\n            updateRoundsState(rounds)\r\n        })\r\n    }\r\n\r\n    function onRoundDown(round: Round, index: number) {\r\n        updateRoundsState(move(state.training.rounds, index, index + 1))\r\n    }\r\n\r\n\r\n    function onRoundUp(round: Round, index: number) {\r\n        updateRoundsState(move(state.training.rounds, index, index - 1))\r\n    }\r\n\r\n\r\n    function onRoundClone(round: Round, index: number) {\r\n        let idx = index + 1;\r\n        let cloned = clone(round);\r\n        updateRoundsState(insert(state.training.rounds, idx, cloned))\r\n    }\r\n\r\n\r\n    function onTrainingSave() {\r\n        if (props.onSave) {\r\n            let validaton = new TrainingValidator().validate(state.training);\r\n            if (validaton.status) {\r\n                props.onSave(state.training)\r\n            } else {\r\n                showMessage(\"Training not valid\", validaton.errors.join(\", \"))\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    function onRoundSave(round: Round, index: number) {\r\n        updateRoundsState(updateOrInsertRound(round, index));\r\n        window.$cui.get(\"#edit-round-dialog\").emit(\"close\");\r\n    }\r\n\r\n    function updateOrInsertRound(round: Round, index: number) {\r\n        let rounds = []\r\n        if (index > -1) {\r\n            rounds = [...state.training.rounds];\r\n            rounds[index] = round;\r\n        } else {\r\n            rounds = [...state.training.rounds, round];\r\n        }\r\n        return rounds;\r\n    }\r\n\r\n    function updateRoundsState(rounds: Round[]) {\r\n        setState({\r\n            ...state,\r\n            training: {\r\n                ...state.training,\r\n                rounds: rounds\r\n            }\r\n        })\r\n    }\r\n\r\n    function onFormChange(ev: any) {\r\n        let name = ev.target.name;\r\n        if (['name', 'description'].includes(name)) {\r\n            setState({\r\n                ...state,\r\n                training: {\r\n                    ...state.training,\r\n                    [name]: ev.target.value\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    function onDeleteTrainingSub(result: boolean) {\r\n        props.onCancel();\r\n    }\r\n\r\n    function onDeleteTraining() {\r\n        onDeleteTrainingDialog(state.training.name, onYes)\r\n    }\r\n\r\n    function onYes() {\r\n        window.$flow.perform(\"DELETE_TRAINING\", state.training.id)\r\n    }\r\n\r\n    function getDefinedActions(actions: StopwatchAction[]) {\r\n        setDefinedActions({\r\n            actions: [...DefaultActions, ...actions]\r\n        })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const deleteTraininSub = window.$flow.subscribe(\"DELETE_TRAINING\", {\r\n            finish: onDeleteTrainingSub\r\n        })\r\n        const getDefinedActionsSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, { finish: getDefinedActions });\r\n        window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.GET_ALL);\r\n        setState({\r\n            ...state,\r\n            training: props.training\r\n        })\r\n        return () => {\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, getDefinedActionsSub.id)\r\n            window.$flow.unsubscribe(\"DELETE_TRAINING\", deleteTraininSub.id);\r\n        }\r\n    }, [props.training])\r\n\r\n    return (<>\r\n        {state.training.id > -1 && <div className=\"cui-container cui-flex cui-right cui-middle stopwatch-content-width\">\r\n            <ul className=\"cui-list cui-inline\">\r\n                <li className=\"cui-padding-remove\"><Link to={MAPPIGNS.renderUrl('perform', { id: state.training.id })} className=\"cui-icon cui-accent cui-icon-margin cui-margin-right\" cui-icon=\"media_play\">Run</Link></li>\r\n                <li className=\"cui-padding-remove\"><a className=\"cui-icon cui-icon-margin\" cui-icon=\"trash\" onClick={onDeleteTraining}>Delete</a></li>\r\n            </ul>\r\n        </div>}\r\n        <div className=\"cui-container stopwatch-content-width cui-flex-grid cui-child-width-1-1 cui-child-width-1-2--m\">\r\n            <div className=\"cui-padding-small-right\">\r\n                <h3 className=\"cui-h3 cui-text-muted\">Common</h3>\r\n                <div className=\"cui-form\">\r\n                    <label htmlFor=\"\" className=\"cui-form-label\">Name</label>\r\n                    <input type=\"text\" className=\"cui-input stopwatch-input-width\" placeholder=\"Name\" name=\"name\" value={state.training.name} onChange={onFormChange} />\r\n                </div>\r\n                <div className=\"cui-form cui-margin-top\">\r\n                    <label htmlFor=\"\" className=\"cui-form-label\">Description</label>\r\n                    <textarea className=\"cui-textarea stopwatch-input-width stopwatch-text-area\" placeholder=\"Description\" name=\"description\" rows={5} value={state.training.description} onChange={onFormChange}></textarea>\r\n                </div>\r\n            </div>\r\n            <div className=\"cui-padding-small-left\">\r\n                <h3 className=\"cui-h3 cui-text-muted\">Rounds (total count: {state.training.rounds.length})</h3>\r\n                <ul className=\"cui-list\">\r\n                    {state.training && state.training.rounds.map((round: Round, index: number, arr: Round[]) => {\r\n                        return <li key={index} className=\"animation-fade-in\"><EditRoundListItem\r\n                            index={index}\r\n                            round={round}\r\n                            onEdit={onRoundEdit}\r\n                            onDelete={onRoundDelete}\r\n                            onMoveUp={onRoundUp}\r\n                            onMoveDown={onRoundDown}\r\n                            onClone={onRoundClone}\r\n                            isFirst={index === 0}\r\n                            isLast={index === arr.length - 1} />\r\n                        </li>\r\n                    })}\r\n                    <li>\r\n                        <button className=\"cui-button cui-icon cui-icon-margin cui-width-1-1\" cui-icon=\"plus\" onClick={() => {\r\n                            onRoundEdit(null, -1);\r\n                        }}>Add New</button>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div className=\"cui-container stopwatch-content-width cui-flex cui-right\">\r\n            <button className=\"cui-button cui-margin-small-right\" onClick={() => { props.onCancel() }}>Cancel</button>\r\n            <button className=\"cui-button cui-accent\" onClick={onTrainingSave}>Save</button>\r\n        </div>\r\n        <EditRoundDialog index={state.currentIndex} round={state.currentRound} onSave={onRoundSave} definedActions={definedActions.actions} />\r\n    </>);\r\n}\r\n\r\nexport default withRouter(EditTraining);","interface KeepScreenToggle {\r\n    activate(): void;\r\n    release(): void;\r\n}\r\n\r\nexport class KeepAwakeToggle implements KeepScreenToggle {\r\n    #screen: any;\r\n    constructor() {\r\n        this.#screen = screen;\r\n    }\r\n\r\n    activate() {\r\n        this.#screen.keepAwake = true;\r\n    }\r\n\r\n    release(): void {\r\n        this.#screen.keepAwake = false;\r\n    }\r\n\r\n}\r\n\r\nexport class WakeLockScreen implements KeepScreenToggle {\r\n    wakeLockRequest: any;\r\n\r\n    activate() {\r\n        let nav = navigator as any;\r\n        nav.wakeLock.request('screen').then((wakelock: any) => {\r\n            this.wakeLockRequest = wakelock;\r\n            console.log(\"Wakelock activated\");\r\n        })\r\n    }\r\n\r\n    release() {\r\n        if (this.wakeLockRequest) {\r\n            this.wakeLockRequest.release();\r\n            this.wakeLockRequest = null;\r\n            console.log(\"Wakelock deactivated\");\r\n        }\r\n    }\r\n}\r\n\r\nexport class LoopLockScreen implements KeepScreenToggle {\r\n    element: Element | undefined;\r\n\r\n    constructor() {\r\n        this.element = undefined;\r\n    }\r\n\r\n    activate(): void {\r\n        if (this.element) {\r\n            return;\r\n        }\r\n        this.element = this.createElement(\"/static/video/Screen.mp4\");\r\n        document.body.appendChild(this.element);\r\n    }\r\n\r\n    release(): void {\r\n        if (!this.element) {\r\n            return;\r\n        }\r\n        this.element.remove();\r\n        this.element = undefined;\r\n    }\r\n\r\n    private createElement(src: string): Element {\r\n        let newEl = document.createElement(\"video\");\r\n        newEl.autoplay = true;\r\n        newEl.muted = true;\r\n        newEl.loop = true;\r\n        newEl.src = src;\r\n        newEl.classList.add('loop-screen')\r\n        newEl.textContent = \"Not Supported\";\r\n        return newEl;\r\n    }\r\n\r\n}\r\n\r\nexport class KeepScreenAwakeFeature {\r\n    #toggle: KeepScreenToggle;\r\n\r\n    constructor() {\r\n        this.#toggle = this.getToggle();\r\n    }\r\n    activate() {\r\n        this.#toggle.activate();\r\n    }\r\n    release() {\r\n        this.#toggle.release();\r\n    }\r\n    private getToggle() {\r\n        if ('keepAwake' in screen) {\r\n            return new KeepAwakeToggle();\r\n        } else {\r\n            return new LoopLockScreen();\r\n            //return new WakeLockScreen();\r\n        }\r\n    }\r\n}","export const StopWatchStateOptions: any = {\r\n    RUNNING: \"RUNNING\",\r\n    STOPPED: \"STOPPED\",\r\n    PAUSED: \"PAUSED\",\r\n}\r\n\r\nexport type StopWatchState = \"RUNNING\" | 'PAUSED' | \"STOPPED\";\r\n\r\nexport interface StopwatchCallback {\r\n    (current: number, total: number, stopWatch: StopWatch): boolean;\r\n}\r\n\r\nexport interface IStopWatch {\r\n    start(): boolean;\r\n    stop(): boolean;\r\n    pause(): boolean;\r\n    resume(): boolean;\r\n    finish(): void;\r\n    getState(): StopWatchState;\r\n}\r\n\r\nexport class StopWatch implements IStopWatch {\r\n    #callback: StopwatchCallback;\r\n    #current: number;\r\n    #total: number;\r\n    #isReset: boolean;\r\n    #state: StopWatchState;\r\n    #id: any;\r\n    constructor() {\r\n        this.#current = 0;\r\n        this.#total = 0;\r\n        this.#isReset = false;\r\n        this.#state = StopWatchStateOptions.STOPPED;\r\n        this.#id = undefined;\r\n    }\r\n\r\n    onTick(callback: StopwatchCallback) {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    tick() {\r\n        this.#id = setTimeout(() => {\r\n            try {\r\n                if (this.#state === StopWatchStateOptions.RUNNING && this.#callback(this.#current, this.#total, this)) {\r\n                    if (this.#isReset) {\r\n                        this.#current = 0;\r\n                        this.#isReset = false;\r\n                    } else {\r\n                        this.#current += 1;\r\n                        this.#total += 1;\r\n                    }\r\n                    this.tick();\r\n                } else if (this.#state !== StopWatchStateOptions.PAUSED) {\r\n                    this.stop();\r\n                }\r\n            } catch (e) {\r\n                console.error(\"An error occured on stopwatch tick\")\r\n                console.error(e)\r\n                this.stop();\r\n            }\r\n        }, 1000)\r\n    }\r\n\r\n    reset() {\r\n        this.#isReset = true;\r\n    }\r\n\r\n    start(): boolean {\r\n        if (this.#state === StopWatchStateOptions.RUNNING) {\r\n            return false;\r\n        }\r\n        this.#current = 0;\r\n        this.#state = StopWatchStateOptions.RUNNING;\r\n        this.tick();\r\n        return true;\r\n    }\r\n\r\n    stop(): boolean {\r\n        if (this.#state === StopWatchStateOptions.RUNNING) {\r\n            this.finish();\r\n            this.#state = StopWatchStateOptions.STOPPED;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    pause(): boolean {\r\n        if (this.#state === StopWatchStateOptions.RUNNING) {\r\n            this.#state = StopWatchStateOptions.PAUSED;\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n    resume() {\r\n        if (this.#state === StopWatchStateOptions.PAUSED) {\r\n            this.#state = StopWatchStateOptions.RUNNING;\r\n            this.tick();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    finish(): void {\r\n        if (this.#id) {\r\n            clearTimeout(this.#id);\r\n            this.#id = undefined;\r\n        }\r\n        this.#current = 0;\r\n        this.#total = 0;\r\n    }\r\n    getState() {\r\n        return this.#state;\r\n    }\r\n}","import { Settings } from \"../../core/models\";\r\nimport { ISettingsService } from \"../../core/services/interfaces\";\r\n\r\n\r\nexport const SETTINGS_FLOW_ACTIONS = {\r\n    GET_DARK_MODE: \"GET_DARK_MODE\",\r\n    SET_DARK_MODE: \"SET_DARK_MODE\",\r\n    GET_SOUND_ENABLED: \"GET_SOUND_ENABLED\",\r\n    SET_SOUND_ENABLED: \"SET_SOUND_ENABLED\",\r\n    SET_SETTINGS: \"SET_SETTINGS\",\r\n    GET_SETTINGS: \"GET_SETTINGS\"\r\n}\r\n\r\nexport type SettingsFlowInput = Settings | boolean;\r\nexport type SettingsFlowOutput = boolean | void | Settings;\r\n\r\nexport class SettingsFlow {\r\n    #service: ISettingsService;\r\n    constructor(service: ISettingsService) {\r\n        this.#service = service;\r\n    }\r\n    getActions() {\r\n        return {\r\n            [SETTINGS_FLOW_ACTIONS.GET_SOUND_ENABLED]: () => {\r\n                return this.#service.isSoundEnabled();\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_SOUND_ENABLED]: (flag: boolean) => {\r\n                this.#service.setSoundEnabled(flag);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.GET_DARK_MODE]: () => {\r\n                return this.#service.isDarkMode();\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_DARK_MODE]: (flag: boolean) => {\r\n                this.#service.setDarkMode(flag);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_SETTINGS]: (value: Settings) => {\r\n                this.#service.setSettings(value);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.GET_SETTINGS]: () => {\r\n                console.log(\"getSettings\")\r\n                return this.#service.getSettings();\r\n            }\r\n        }\r\n    }\r\n}","import * as React from 'react'\r\nimport { StopwatchState } from './PerformTraining';\r\n\r\nexport interface CountDownTimerProps {\r\n    watchState: StopwatchState;\r\n    actionIdx: number;\r\n}\r\n\r\nexport function CountDownTimer(props: CountDownTimerProps) {\r\n    return (<span className=\"cui-svg total-circle-progress\" cui-circle-progress={props.watchState.trainingProgress}>\r\n        <div className=\"\">\r\n            <span className=\"cui-svg current-circle-progress\" cui-circle-progress={props.watchState.roundProgress}>\r\n                <div>\r\n                    <span className=\"cui-svg countdown-circle-progress\" cui-circle-progress={props.watchState.progress}>\r\n                        <div>\r\n                            <span className=\"cui-block cui-text-small\">{props.actionIdx + 1}</span>\r\n                            <h1 className={\"cui-h1 cui-margin-remove \" + props.watchState.timerCls}>{props.watchState.timer}</h1>\r\n                        </div>\r\n                    </span>\r\n                </div>\r\n            </span>\r\n        </div>\r\n    </span>);\r\n}\r\n","import * as React from 'react'\r\nimport { useParams } from 'react-router-dom';\r\nimport { is } from '../../../../node_modules/bpd-toolkit/dist/esm/index';\r\nimport { KeepScreenAwakeFeature } from '../../../api/screen/screen';\r\nimport { StopWatch, StopWatchState, StopWatchStateOptions } from '../../../api/stopwatch/stopwatch';\r\nimport { SETTINGS_FLOW_ACTIONS } from '../../../app/flow/settings';\r\nimport { calcDisplayTimer, calculateDuration, calculateProgress, getBgClassByType, getTotalDuration, showMessage, getClassByType } from '../../../core/helpers';\r\nimport { Round, StopwatchAction, Training } from '../../../core/models';\r\nimport { ActionValidator, RoundValidator, TrainingValidator } from '../../../core/validators';\r\nimport { NotFound } from '../common/NotFound'; import { CountDownTimer } from './CountDownTimer';\r\n;\r\n\r\ninterface TimeStateData {\r\n    time: number;\r\n    progress: number;\r\n    ct?: number;\r\n    total: number;\r\n}\r\n\r\ninterface PerfromTrainingState {\r\n    training: Training;\r\n}\r\n\r\nexport interface CurrentTrainingState {\r\n    round: Round;\r\n    roundIdx: number;\r\n    action: StopwatchAction;\r\n    actionIdx: number;\r\n    class: string;\r\n    roundDuration: number;\r\n    totalDuration: number;\r\n}\r\n\r\nexport interface StopwatchState {\r\n    timer: string;\r\n    state: StopWatchState;\r\n    startBtnCls: string;\r\n    timerCls: string;\r\n    progress: number;\r\n    roundProgress: number;\r\n    trainingProgress: number;\r\n}\r\n\r\nconst defaultCurrent: CurrentTrainingState = {\r\n    round: undefined,\r\n    roundIdx: -1,\r\n    actionIdx: -1,\r\n    action: undefined,\r\n    class: \"\",\r\n    roundDuration: 0,\r\n    totalDuration: 0\r\n}\r\n\r\nexport function PerfromTraining() {\r\n    const [state, setState] = React.useState<PerfromTrainingState>({\r\n        training: undefined\r\n    })\r\n\r\n    const [stopwatch, setStopwatch] = React.useState<StopWatch>(undefined)\r\n    const [current, setCurrent] = React.useState<CurrentTrainingState>(defaultCurrent)\r\n    const [canPlay, setCanPlay] = React.useState<boolean>(false);\r\n\r\n    const [watchState, setWatchState] = React.useState<StopwatchState>({\r\n        timer: \"00:00\",\r\n        state: StopWatchStateOptions.STOPPED,\r\n        startBtnCls: getStartBtnCls(StopWatchStateOptions.STOPPED),\r\n        timerCls: \"\",\r\n        progress: 100,\r\n        roundProgress: 100,\r\n        trainingProgress: 100,\r\n    })\r\n\r\n    const [errorMessage, setErrorMessage] = React.useState(\"\");\r\n    const { id } = useParams();\r\n\r\n    const currentRef = React.useRef(current);\r\n    currentRef.current = current;\r\n    const trainingRef = React.useRef(state.training);\r\n    trainingRef.current = state.training;\r\n\r\n    const countdownSound = React.useRef(null);\r\n    const endSound = React.useRef(null);\r\n\r\n    function onGetTraining(training: Training) {\r\n        let validation = new TrainingValidator().validate(training);\r\n        if (!validation.status) {\r\n            showMessage(\"Incorrect training\", `Training is not correct: ${validation.errors.join(\", \")}`)\r\n            return;\r\n        }\r\n        let roundValidator = new RoundValidator().validate(training.rounds[0]);\r\n        if (!roundValidator.status) {\r\n            showMessage(\"Incorrect training\", `Training is not correct: ${roundValidator.errors.join(\", \")}`)\r\n            return;\r\n        }\r\n        let actionValidator = new ActionValidator().validate(training.rounds[0].actions[0]);\r\n        if (!actionValidator.status) {\r\n            showMessage(\"Incorrect training\", `Training is not correct: ${actionValidator.errors.join(\", \")}`)\r\n            return;\r\n        }\r\n        setState({\r\n            ...state,\r\n            training: training\r\n        })\r\n        setDefaultCurrentState(training);\r\n    }\r\n\r\n\r\n    function setDefaultCurrentState(training: Training) {\r\n        let round = training.rounds[0];\r\n        let action = round.actions[0];\r\n        setCurrent({\r\n            roundIdx: 0,\r\n            round: round,\r\n            action: action,\r\n            actionIdx: 0,\r\n            class: getClassByType(action.type),\r\n            roundDuration: calculateDuration(round.actions),\r\n            totalDuration: getTotalDuration(training)[1]\r\n        })\r\n    }\r\n\r\n    function setNextAction(): boolean {\r\n        let nextActionIdx = currentRef.current.actionIdx + 1;\r\n        if (currentRef.current.round.actions.length > nextActionIdx) {\r\n            let newAction = currentRef.current.round.actions[nextActionIdx]\r\n            setCurrent({\r\n                ...currentRef.current,\r\n                actionIdx: nextActionIdx,\r\n                action: newAction,\r\n                class: getClassByType(newAction.type)\r\n            })\r\n            return true;\r\n        }\r\n        let nextRoundIdx = currentRef.current.roundIdx + 1;\r\n        if (trainingRef.current.rounds.length > nextRoundIdx) {\r\n            let newRound = trainingRef.current.rounds[nextRoundIdx];\r\n            let newAction = newRound.actions[0];\r\n            setCurrent({\r\n                ...currentRef.current,\r\n                round: newRound,\r\n                roundIdx: nextRoundIdx,\r\n                actionIdx: 0,\r\n                action: newAction,\r\n                class: getClassByType(newAction.type),\r\n                roundDuration: calculateDuration(newRound.actions),\r\n            })\r\n            return true;\r\n        }\r\n        setDefaultCurrentState(trainingRef.current);\r\n        return false;\r\n    }\r\n\r\n    function onStopwatchTick(currentTime: number, total: number, stopwatch: StopWatch): boolean {\r\n        let ct = currentRef.current.action.duration - currentTime;\r\n        let progress = calculateProgress(currentTime, currentRef.current.action.duration)\r\n        console.log(total)\r\n        if (ct > 0) {\r\n            setStopWatchState(stopwatch.getState(), {\r\n                time: ct,\r\n                progress: 100 - progress,\r\n                ct: currentTime,\r\n                total: total\r\n            })\r\n            if (ct > 0 && ct <= 3) {\r\n                play(\"countdown\");\r\n            }\r\n            return true;\r\n        } else {\r\n            play(\"end\");\r\n            stopwatch.reset();\r\n            setStopWatchState(StopWatchStateOptions.RUNNING, { time: 0, progress: 100, ct: currentTime, total: total })\r\n            if (!setNextAction()) {\r\n                setStopWatchState(StopWatchStateOptions.STOPPED, {\r\n                    time: 0, progress: 100, ct: 0, total: 0\r\n                })\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\n    function onStartClick() {\r\n        if (watchState.state === StopWatchStateOptions.STOPPED && stopwatch.start()) {\r\n            setStopWatchState(StopWatchStateOptions.RUNNING);\r\n        } else if (watchState.state !== StopWatchStateOptions.STOPPED && stopwatch.stop()) {\r\n            setDefaultCurrentState(state.training);\r\n            setStopWatchState(StopWatchStateOptions.STOPPED, { time: 0, progress: 100, ct: 0, total: 0 });\r\n\r\n        }\r\n    }\r\n\r\n    function onPauseClick() {\r\n        if (watchState.state === StopWatchStateOptions.RUNNING && stopwatch.pause()) {\r\n            setStopWatchState(StopWatchStateOptions.PAUSED);\r\n        } else if (watchState.state === StopWatchStateOptions.PAUSED && stopwatch && stopwatch.resume()) {\r\n            setStopWatchState(StopWatchStateOptions.RUNNING);\r\n        }\r\n    }\r\n\r\n    function setStopWatchState(watchstate: StopWatchState, timeData?: TimeStateData) {\r\n        if (!is(timeData) || timeData.time < 0) {\r\n            setWatchState({\r\n                ...watchState,\r\n                state: watchstate,\r\n                startBtnCls: getStartBtnCls(watchstate)\r\n            })\r\n        } else {\r\n            let roundProgress = calculateRoundProgress(timeData.ct);\r\n            let trainginProgress = calculateTrainingProgress(timeData.total);\r\n            setWatchState({\r\n                timer: calcDisplayTimer(timeData.time),\r\n                timerCls: getTimerCls(timeData.time),\r\n                state: watchstate,\r\n                startBtnCls: getStartBtnCls(watchstate),\r\n                progress: timeData.progress,\r\n                roundProgress: roundProgress,\r\n                trainingProgress: trainginProgress\r\n            })\r\n        }\r\n    }\r\n\r\n    function calculateRoundCurrentTime(ct: number) {\r\n        return currentRef.current.round.actions.reduce<number>((result: number, act: StopwatchAction, idx: number) => {\r\n            if (idx < currentRef.current.actionIdx) {\r\n                return result + act.duration;\r\n            }\r\n            return result;\r\n        }, 0) + ct;\r\n    }\r\n\r\n    function calculateRoundProgress(ct: number) {\r\n        return 100 - calculateProgress(calculateRoundCurrentTime(ct), currentRef.current.roundDuration);\r\n    }\r\n\r\n    function calculateTrainingProgress(ct: number) {\r\n        return 100 - calculateProgress(ct, currentRef.current.totalDuration);\r\n    }\r\n\r\n    function play(type: string) {\r\n        let element = undefined;\r\n        switch (type) {\r\n            case \"countdown\":\r\n                element = countdownSound.current;\r\n                break;\r\n            case \"end\":\r\n                element = endSound.current;\r\n                break;\r\n        }\r\n        if (element) {\r\n            element.currentTime = 0;\r\n            element.play();\r\n        }\r\n    }\r\n\r\n    function getTimerCls(timer: number): string {\r\n        return timer > 0 && timer <= 3 ? \"cui-text-warning timer-blink-animation\" : \"\";\r\n    }\r\n\r\n    function getStartBtnCls(state: StopWatchState) {\r\n        return state !== StopWatchStateOptions.STOPPED ? \"cui-error\" : \"cui-accent\";\r\n    }\r\n\r\n    function onGetPlaySound(canPlay: boolean) {\r\n        setCanPlay(canPlay);\r\n    }\r\n\r\n    function getBackgroundClass(action: StopwatchAction) {\r\n        return !is(action) ? \"\" : getBgClassByType(action.type);\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const getTrainingSubscription = window.$flow.subscribe(\"GET_TRAINING\", { finish: onGetTraining })\r\n        const settingsPlaySound = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.GET_SOUND_ENABLED, {\r\n            finish: onGetPlaySound\r\n        })\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.GET_SOUND_ENABLED);\r\n        const wakeLock = new KeepScreenAwakeFeature();\r\n        try {\r\n            wakeLock.activate();\r\n        } catch (e) {\r\n            setErrorMessage(\"We could not activate feature to keep your device's screen awake during training performance\")\r\n        }\r\n        let stop = new StopWatch();\r\n        stop.onTick(onStopwatchTick);\r\n        setStopwatch(stop);\r\n        if (id > -1) {\r\n            window.$flow.perform(\"GET_TRAINING\", id)\r\n\r\n        }\r\n        return () => {\r\n            window.$flow.unsubscribe(\"GET_TRAINING\", getTrainingSubscription.id)\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.GET_SOUND_ENABLED, settingsPlaySound.id);\r\n            if (stopwatch)\r\n                stopwatch.stop();\r\n            wakeLock.release();\r\n        }\r\n    }, [id, canPlay])\r\n    return (<>\r\n        {!state.training ?\r\n            <NotFound message=\"We couldn't find training\" /> :\r\n            <div className={\"stopwatch-layout-content cui-flex-center \" + getBackgroundClass(current.action)}>\r\n                <div className=\"stopwatch-content-width perform-layout cui-text-center animation-fade-in\">\r\n                    <div className=\"perform-main-controls\">\r\n                        <h2 className=\"cui-h2 cui-margin-remove\">{state.training.name}</h2>\r\n                        <p className=\"cui-text-muted cui-text-small cui-margin-remove\">Round {current.roundIdx + 1} of {state.training.rounds.length}</p>\r\n                        <CountDownTimer actionIdx={current.actionIdx} watchState={watchState} />\r\n                    </div>\r\n                    <div className=\"perform-buttons\">\r\n                        <div className=\"cui-width-1-1\">\r\n                            <h3 className={\"cui-h3 \" + current.class}>{current.action && current.action.name}</h3>\r\n                            <div className=\"cui-flex cui-center\">\r\n                                {watchState.state !== StopWatchStateOptions.STOPPED && <button className=\"cui-button cui-default cui-margin-small-right\" onClick={onPauseClick}>{watchState.state === StopWatchStateOptions.PAUSED ? \"Resume\" : \"Pause\"}</button>}\r\n                                <button className={\"cui-button \" + watchState.startBtnCls} onClick={onStartClick}>{watchState.state === StopWatchStateOptions.STOPPED ? \"Start\" : \"Stop\"}</button>\r\n                            </div>\r\n                            <p className=\"cui-text-muted\">{state.training.description}</p>\r\n                            <div className=\"\">\r\n                                {is(errorMessage) && <span className=\"cui-icon cui-error cui-tooltip\" cui-icon=\"ban\" data-tooltip={errorMessage}></span>}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <audio ref={countdownSound} id=\"stopwatch-countdown\" src=\"/static/audio/stopwatch_countdown.mp3\" />\r\n                <audio ref={endSound} id=\"stopwatch-end\" src=\"/static/audio/stopwatch_end.mp3\" />\r\n            </div>\r\n        }\r\n    </>);\r\n}\r\n","import * as React from 'react'\r\nexport interface OnSwitchValueUpdate {\r\n    (name: string, value: boolean): void;\r\n}\r\n\r\n\r\nexport interface SettingsSwitchListItemProps {\r\n    label: string,\r\n    value: boolean,\r\n    name: string,\r\n    onUpdate: OnSwitchValueUpdate;\r\n}\r\n\r\nexport function SettingsSwitchListItem(props: SettingsSwitchListItemProps) {\r\n    function onChange(ev: any) {\r\n        let target = ev.target\r\n        if (props.onUpdate) {\r\n            props.onUpdate(target.name, target.checked);\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n\r\n    }, [props.value, props.name])\r\n    return (\r\n        <div className=\"cui-flex cui-middle cui-padding-small\">\r\n            <div className=\"cui-flex-grow\">{props.label}</div>\r\n            <div className=\"cui-input-switch\">\r\n                <input type=\"checkbox\" id={props.name} name={props.name} checked={props.value} onChange={onChange} />\r\n                <label htmlFor={props.name} className=\"cui-content\"></label>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n","import * as React from 'react'\r\nimport { SETTINGS_FLOW_ACTIONS } from '../../../app/flow/settings';\r\nimport { setDarkMode } from '../../../core/helpers';\r\nimport { Settings } from '../../../core/models';\r\nimport { PageHeader } from '../common/PageHeader';\r\nimport { SettingsSwitchListItem } from './SettingsSwitchListItem'\r\nexport interface SettingsState {\r\n    darkModeEnabled: boolean;\r\n    soundEnabled: boolean;\r\n}\r\nexport function StopwatchSettings() {\r\n    const [settings, setSettings] = React.useState<Settings>({\r\n        soundEnabled: false,\r\n        darkMode: false\r\n    })\r\n\r\n    function onValueChange(name: string, value: boolean) {\r\n        if (name !== 'soundEnabled' && name !== \"darkMode\") {\r\n            return;\r\n        }\r\n        let newSettings = {\r\n            ...settings,\r\n            [name]: value\r\n        }\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.SET_SETTINGS, newSettings);\r\n        setSettings(newSettings)\r\n    }\r\n\r\n    function onUpdateSettings() {\r\n        console.log(\"Update\")\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.GET_SETTINGS);\r\n    }\r\n\r\n    function onGetSettings(settings: Settings) {\r\n        console.log(\"GetSetting\")\r\n        if (settings) {\r\n            setSettings(settings);\r\n            setDarkMode(settings.darkMode);\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        console.log(\"Reload\")\r\n        const settingsSub = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.GET_SETTINGS, { finish: onGetSettings })\r\n        const settingsUpdateSub = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.SET_SETTINGS, { finish: onUpdateSettings })\r\n\r\n        onUpdateSettings();\r\n        return () => {\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.GET_SETTINGS, settingsSub.id);\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.SET_SETTINGS, settingsUpdateSub.id);\r\n        }\r\n    }, [settings.darkMode, settings.soundEnabled])\r\n    return (<><div className=\"stopwatch-content-width\">\r\n        <PageHeader title=\"Settings\" description=\"Change application setup\" />\r\n        <div className=\"\">\r\n            <ul className=\"cui-list\">\r\n                <li>\r\n                    <SettingsSwitchListItem label=\"Dark mode\" name=\"darkMode\" value={settings.darkMode} onUpdate={onValueChange} />\r\n                </li>\r\n                <li>\r\n                    <SettingsSwitchListItem label=\"Play sound\" name=\"soundEnabled\" value={settings.soundEnabled} onUpdate={onValueChange} />\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div></>);\r\n}\r\n\r\n\r\n","import * as React from 'react'\r\nimport { PageHeader } from '../common/PageHeader';\r\n\r\nexport function About() {\r\n    return (<><div className=\"stopwatch-content-width\">\r\n        <PageHeader title=\"About\" description=\"Some details about the application\" />\r\n        <div className=\"\">\r\n            <div className=\"cui-container \">\r\n                <h3 className=\"cui-h3\">Repository</h3>\r\n                <p className=\"\">Project sources can be found on Github under following link: <a className=\"cui-link cui-accent\" href=\"https://github.com/bpd-d/bpd-stopwatch-app\">bpd-stopwatch-app</a></p>\r\n            </div>\r\n            <div className=\"cui-container\">\r\n                <h3 className=\"cui-h3\">Links</h3>\r\n                <p className=\"\">Project uses third party libraries, see following list: </p>\r\n                <ul className=\"cui-list\">\r\n                    <li>\r\n                        <div className=\"\">\r\n                            <div className=\"\">\r\n                                <span>React</span>\r\n                            </div>\r\n                            <a href=\"https://github.com/facebook/react\" className=\"cui-link\">Github</a>\r\n                            <a href=\"https://reactjs.org/\" className=\"cui-link cui-margin-left\">React JS home page</a>\r\n                        </div>\r\n                    </li>\r\n                    <li>\r\n                        <div className=\"\">\r\n                            <div className=\"\">\r\n                                <span>cUI Light</span>\r\n                            </div>\r\n                            <a href=\"https://github.com/bpd-d/cui-light\" className=\"cui-link\">cUI Light on Github</a>\r\n                            <a href=\"https://github.com/bpd-d/cui-styles\" className=\"cui-link cui-margin-left\">cUI Styles on Github</a>\r\n                            <a href=\"https://github.com/bpd-d/cui-icons\" className=\"cui-link cui-margin-left\">cUI Icons on Github</a>\r\n                        </div></li>\r\n                    <li>\r\n                        <div className=\"\">\r\n                            <div className=\"\">\r\n                                <span>BPD Flow</span>\r\n                            </div>\r\n                            <a href=\"https://github.com/bpd-d/bpd-flow\" className=\"cui-link\">Github</a>\r\n                        </div>\r\n\r\n                    </li>\r\n                    <li>\r\n                        <div className=\"\">\r\n                            <div className=\"\">\r\n                                <span>BPD Storage</span>\r\n                            </div>\r\n                            <a href=\"https://github.com/bpd-d/bpd-storage\" className=\"cui-link\">Github</a>\r\n                        </div>\r\n\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div></>);\r\n}\r\n","import * as React from 'react'\r\n\r\nexport function Footer() {\r\n    function currentYear(): string {\r\n        return new Date().getFullYear() + \"\";\r\n    }\r\n    return (\r\n        <div className=\"stopwatch-footer cui-flex cui-right--l cui-middle\">\r\n            <div className=\"cui-margin-horizontal\">\r\n                <span className=\"cui-margin-small-right\">Copyrights {currentYear()}</span>\r\n                <a href=\"https://github.com/bpd-d\" target=\"_blank\" className=\"cui-link cui-accent\">BPDDev</a>\r\n            </div>\r\n        </div>);\r\n}\r\n","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { Switch, Route, BrowserRouter, useLocation } from \"react-router-dom\";\r\nimport { Home } from \"./components/home/home\";\r\nimport { ErrorRoute } from \"./error\";\r\nimport { Navbar } from \"./components/navbar/navbar\";\r\nimport { OffCanvas } from \"./components/offacanvas/offcanvas\";\r\nimport { StopwatchActionsComponent } from \"./components/actions/StopwatchActionsComponent\";\r\nimport EditTraining from \"./components/trainings/EditTraining\";\r\nimport { PerfromTraining } from \"./components/perform/PerformTraining\";\r\nimport { StopwatchSettings } from \"./components/settings/StopwatchSettings\";\r\nimport { FlowTask } from \"../../node_modules/bpd-flow/dist/index\";\r\nimport { SETTINGS_FLOW_ACTIONS } from \"../app/flow/settings\";\r\nimport { setDarkMode } from \"../core/helpers\";\r\nimport { About } from \"./components/about/About\";\r\nimport { Footer } from \"./components/footer/Footer\";\r\nimport { MAPPIGNS } from \"./routes\";\r\n\r\nexport interface AppProps {\r\n}\r\nexport interface AppState {\r\n    currentSite?: string;\r\n}\r\n\r\n// 'HelloProps' describes the shape of props.\r\n// State is never set so we use the '{}' type.\r\nexport class App extends React.Component<AppProps, AppState> {\r\n    darkModeSub: FlowTask<any>;\r\n    constructor(props: AppProps) {\r\n        super(props);\r\n        this.state = {\r\n            currentSite: \"\"\r\n        }\r\n        this.darkModeSub = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.GET_DARK_MODE, { finish: this.onDarkMode.bind(this) });\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.GET_DARK_MODE);\r\n    }\r\n\r\n    componentDidUpdate() {\r\n\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.darkModeSub) {\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.GET_DARK_MODE, this.darkModeSub.id);\r\n        }\r\n    }\r\n\r\n    onDarkMode(flag: boolean) {\r\n        setDarkMode(flag);\r\n    }\r\n\r\n    render() {\r\n        return <BrowserRouter>\r\n            <div className=\"stopwatch-layout-main\">\r\n                <Navbar />\r\n                <div className=\"stopwatch-layout-content cui-overflow-y-auto\">\r\n                    <Switch>\r\n                        <Route path={MAPPIGNS.getUrl(\"perform\")} component={PerfromTraining}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"newTraining\")} component={EditTraining}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"editTraining\")} component={EditTraining}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"actions\")} component={StopwatchActionsComponent}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"settings\")} component={StopwatchSettings}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"about\")} component={About}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"home\")} component={Home}></Route>\r\n                        <Route>\r\n                            <ErrorRoute />\r\n                        </Route>\r\n                    </Switch>\r\n                </div>\r\n                <Footer />\r\n\r\n                <OffCanvas />\r\n            </div></BrowserRouter >;\r\n    }\r\n}","import { ITrainingsService, IActionsService, ISettingsService } from \"./interfaces\";\r\nimport { Training, StopwatchAction, Settings } from \"../models\";\r\nimport { BpdStorage } from \"../../../node_modules/bpd-storage/dist/index\";\r\nimport { ActionValidator, TrainingValidator } from \"../validators\";\r\n\r\nexport class TrainingsStorageService implements ITrainingsService {\r\n    #storage: BpdStorage;\r\n    #trainings: Training[];\r\n    #STORAGE_NAME: string;\r\n    #validator: TrainingValidator;\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_TRAININGS\");\r\n        this.#STORAGE_NAME = \"Trainings\";\r\n        this.#trainings = [];\r\n        this.#validator = new TrainingValidator();\r\n    }\r\n\r\n\r\n    getAllTrainings(): Training[] {\r\n        console.log(\"Get All\")\r\n        return this.getTrainings();\r\n    }\r\n\r\n    addTraining(training: Training): boolean {\r\n        let result = false;\r\n        if (this.validate(training)) {\r\n            this.onAction((t: Training[]) => {\r\n                let len = t.length\r\n                if (!training.id) {\r\n                    training.id = len > 0 ? t[len - 1].id + 1 : 0;\r\n                    t.push(training)\r\n\r\n                    result = true;\r\n                }\r\n                return result;\r\n            })\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    updateTraining(training: Training): boolean {\r\n        let result = false;\r\n        if (this.validate(training)) {\r\n            if (!training.id || training.id < 0) {\r\n                result = this.addTraining(training)\r\n            } else {\r\n                this.onAction((t: Training[]) => {\r\n                    let idx = t.findIndex(item => item.id === training.id);\r\n                    if (idx > -1) {\r\n                        t[idx] = training;\r\n                        result = true;\r\n                    }\r\n                    return result;\r\n                })\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    deleteTraining(id: number): boolean {\r\n        let result = false;\r\n        if (id < 0) {\r\n            return false;\r\n        }\r\n        this.onAction((t: Training[]) => {\r\n            let idx = t.findIndex(item => item.id === id);\r\n            if (idx > -1) {\r\n                t.splice(idx, 1);\r\n                result = true;\r\n            }\r\n            return result;\r\n        })\r\n        return result;\r\n    }\r\n\r\n    getTraining(id: number): Training {\r\n        let training = undefined;\r\n        this.onAction((t) => {\r\n            training = t.find(item => { return item.id == id });\r\n            return false;\r\n        })\r\n        return training;\r\n    }\r\n\r\n    getCurrentTraining(): Training {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    setCurrentTraining(training: Training): void {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    private getTrainings(): Training[] {\r\n        if (this.#trainings.length === 0) {\r\n            let res = this.#storage.getAny(this.#STORAGE_NAME);\r\n            this.#trainings = res ?? [];\r\n        }\r\n        return this.#storage.getAny(this.#STORAGE_NAME) ?? [];\r\n    }\r\n\r\n    private setTrainings(t: Training[]): void {\r\n        this.#storage.setAny(this.#STORAGE_NAME, t);\r\n    }\r\n\r\n\r\n    private validate(training: Training): boolean {\r\n        return this.#validator.validate(training).status;\r\n    }\r\n\r\n    private onAction(callback: (t: Training[]) => boolean) {\r\n        let t = this.getTrainings();\r\n        if (callback(t)) {\r\n            console.log(t)\r\n            this.setTrainings(t);\r\n        }\r\n    }\r\n}\r\n\r\nexport class ActionStorageService implements IActionsService {\r\n    #storage: BpdStorage;\r\n    #actions: StopwatchAction[];\r\n    #validator: ActionValidator;\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_TRAININGS\");\r\n        this.#actions = [];\r\n        this.#validator = new ActionValidator();\r\n        this.getActionsFromStorage();\r\n    }\r\n    getAllActions(): StopwatchAction[] {\r\n        return [...this.#actions];\r\n    }\r\n\r\n    setAction(action: StopwatchAction): boolean {\r\n        if (!this.#validator.validate(action).status) {\r\n            return false;\r\n        }\r\n        let existingIndex = this.getIndex(action);\r\n        if (existingIndex > -1) {\r\n            this.#actions[existingIndex] = action;\r\n        } else {\r\n            this.#actions.push(action)\r\n        }\r\n        this.setActionsToStorage();\r\n        return true;\r\n    }\r\n\r\n    removeAction(action: StopwatchAction): boolean {\r\n        if (!this.#validator.validate(action).status) {\r\n            return false;\r\n        }\r\n\r\n        let existingIndex = this.getIndex(action);\r\n        if (existingIndex < 0) {\r\n            return false;\r\n        }\r\n        this.#actions.splice(existingIndex, 1);\r\n        this.setActionsToStorage();\r\n        return true;\r\n\r\n    }\r\n\r\n    private getIndex(action: StopwatchAction): number {\r\n        return this.#actions.findIndex(item => item.name === action.name);\r\n    }\r\n    private getActionsFromStorage() {\r\n        let val = this.#storage.getAny(\"ACTIONS\");\r\n        this.#actions = val ?? [];\r\n    }\r\n\r\n    private setActionsToStorage() {\r\n        this.#storage.setAny(\"ACTIONS\", this.#actions);\r\n    }\r\n}\r\n\r\nexport class SettingsService implements ISettingsService {\r\n    #storage: BpdStorage;\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_SETTINGS\");\r\n\r\n    }\r\n\r\n    setSettings(value: Settings): boolean {\r\n        this.#storage.setAny(\"SETTINGS\", value);\r\n        return true;\r\n    }\r\n\r\n    getSettings(): Settings {\r\n        return this.#storage.getAny(\"SETTINGS\") || {\r\n            darkMode: false,\r\n            soundEnabled: false\r\n        };\r\n    }\r\n\r\n    setSoundEnabled(flag: boolean): void {\r\n        let settings = this.getSettings();\r\n        if (flag !== settings.soundEnabled) {\r\n            settings.soundEnabled = flag;\r\n            this.setSettings(settings)\r\n        }\r\n    }\r\n\r\n    isSoundEnabled(): boolean {\r\n        return this.getSettings()?.soundEnabled;\r\n    }\r\n\r\n    setDarkMode(flag: boolean): void {\r\n        let settings = this.getSettings();\r\n        if (flag !== settings.darkMode) {\r\n            settings.darkMode = flag;\r\n            this.setSettings(settings)\r\n        }\r\n    }\r\n\r\n    isDarkMode(): boolean {\r\n        return this.getSettings()?.darkMode;\r\n    }\r\n}","import { Training } from \"../../core/models\";\r\nimport { ITrainingsService } from \"../../core/services/interfaces\";\r\n\r\nexport const ACTIONS = {\r\n    GET_ALL_TRAININGS: \"GET_ALL_TRAININGS\",\r\n    ADD_TRAINING: \"ADD_TRAINING\"\r\n}\r\n\r\nexport type TrainingsFlowInput = void | Training | number;\r\nexport type TrainingsFlowOutput = Training[] | Training | boolean;\r\n\r\nexport class TrainingsFlow {\r\n    #service: ITrainingsService;\r\n    constructor(service: ITrainingsService) {\r\n        this.#service = service;\r\n    }\r\n\r\n    getActions() {\r\n        return {\r\n            \"GET_ALL_TRAININGS\": () => {\r\n                return this.#service.getAllTrainings();\r\n            },\r\n            \"ADD_TRAINING\": (t: Training) => {\r\n                return this.#service.addTraining(t);\r\n            },\r\n            \"UPDATE_TRAINING\": (t: Training) => {\r\n                return this.#service.updateTraining(t);\r\n            },\r\n            \"DELETE_TRAINING\": (id: number) => {\r\n                return this.#service.deleteTraining(id);\r\n            },\r\n            \"GET_TRAINING\": (id: number) => {\r\n                return this.#service.getTraining(id);\r\n            },\r\n        }\r\n    }\r\n}","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport '../styles/styles.scss';\r\nimport { App } from \"./ui/app\";\r\nimport { CuiInit, CuiInitData, CuiSetupInit, CuiInstance } from \"../node_modules/cui-light/dist/index\";\r\nimport { CuiIconsPack } from '../node_modules/bpd-cui-icons/index';\r\nimport { Flow, FlowFactory } from '../node_modules/bpd-flow/dist/index';\r\nimport { TrainingsStorageService, ActionStorageService, SettingsService } from './core/services/storage';\r\nimport { TrainingsFlow, TrainingsFlowInput, TrainingsFlowOutput } from \"./app/flow/trainings\";\r\nimport { ActionsFlowInput, ActionsFlowOutput, ActionsFlow } from \"./app/flow/actions\";\r\nimport { SettingsFlow, SettingsFlowInput, SettingsFlowOutput } from \"./app/flow/settings\";\r\n\r\n\r\ndeclare global {\r\n    interface Window {\r\n        cuiInit: CuiInit;\r\n        $cui: CuiInstance;\r\n        $flow: Flow<any, any>;\r\n        $actionsFlow: Flow<ActionsFlowInput, ActionsFlowOutput>;\r\n        $settingsFlow: Flow<SettingsFlowInput, SettingsFlowOutput>;\r\n    }\r\n}\r\n\r\nlet rootElement = document.getElementById('root');\r\nlet app_icons = require(\"../static/icons/all.json\");\r\nlet setup = new CuiSetupInit();\r\nsetup.logLevel = 'debug';\r\nsetup.root = rootElement;\r\nlet cuiSetup: CuiInitData = {\r\n    setup: setup,\r\n    icons: {\r\n        ...CuiIconsPack,\r\n        ...app_icons\r\n    }\r\n};\r\n\r\nlet service = new TrainingsStorageService();\r\nlet traningsFlow = new TrainingsFlow(service);\r\nlet actionsService = new ActionStorageService();\r\nlet actionsFlow = new ActionsFlow(actionsService);\r\nlet settingsService = new SettingsService();\r\nlet settingsFlow = new SettingsFlow(settingsService);\r\n\r\nwindow.$flow = FlowFactory.create<TrainingsFlowInput, TrainingsFlowOutput>(traningsFlow.getActions());\r\nwindow.$actionsFlow = FlowFactory.create<ActionsFlowInput, ActionsFlowOutput>(actionsFlow.getActions());\r\nwindow.$settingsFlow = FlowFactory.create<SettingsFlowInput, SettingsFlowOutput>(settingsFlow.getActions());\r\n\r\nwindow.cuiInit.init(cuiSetup).then((result) => {\r\n    ReactDOM.render(<App />, rootElement);\r\n});\r\n\r\n"],"sourceRoot":""}