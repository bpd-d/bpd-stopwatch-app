{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/core/statics.ts","webpack:///./src/core/models.ts","webpack:///./src/app/flow/settings.ts","webpack:///./src/core/helpers.ts","webpack:///./src/app/push/push.ts","webpack:///./src/core/validators.ts","webpack:///./src/ui/components/common/TriangleShadow.tsx","webpack:///./src/ui/routes.ts","webpack:///./src/api/routes/routes.ts","webpack:///./src/ui/components/common/BpdDialog.tsx","webpack:///./src/app/flow/actions.ts","webpack:///./src/ui/components/common/Loading.tsx","webpack:///./src/app/flow/trainings.ts","webpack:///./src/ui/hooks/AppSettings.ts","webpack:///./src/ui/components/home/list.tsx","webpack:///./src/ui/components/home/home.tsx","webpack:///./src/ui/error.tsx","webpack:///./src/ui/components/common/NavbarLink.tsx","webpack:///./src/ui/components/navbar/navbar.tsx","webpack:///./src/ui/hooks/NavbarTitle.tsx","webpack:///./src/ui/components/offacanvas/offcanvas.tsx","webpack:///./src/ui/components/footer/Footer.tsx","webpack:///./src/ui/components/tutorial/TutorialDialog.tsx","webpack:///./src/ui/app.tsx","webpack:///./src/core/services/storage.tsx","webpack:///./src/core/services/push.ts","webpack:///./src/core/services/app.ts","webpack:///../cui-light-app/dist/esm/core/models/setup.js","webpack:///./src/index.tsx","webpack:///./src/ui/imports.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","DefaultActions","id","duration","StopwatchActionType","WARMUP","removable","editable","EXERCISE","BREAK","COOLDOWN","ERROR_CODES","e0000","e0001","e0100","e0101","e0102","e0200","e0201","e0202","e0300","e0301","e0302","e0303","getDefaultRoundName","index","DefaultSettings","darkMode","soundEnabled","isWelcome","simpleView","countdownView","APP_NAME","TrainingState","DRAFT","PUBLISH","NEW","AppRunningModes","DEVELOPMENT","PRODUCTION","SETTINGS_FLOW_ACTIONS","GET_DARK_MODE","SET_DARK_MODE","GET_SOUND_ENABLED","SET_SOUND_ENABLED","SET_SETTINGS","GET_SETTINGS","GET_IS_WELCOME","SET_IS_WELCOME","GET_SIMPLE_VIEW","CLEAR_SETTINGS","SettingsFlow","service","this","isSoundEnabled","flag","setSoundEnabled","isDarkMode","setDarkMode","setSettings","getSettings","isWelcomeSet","setIsWelcome","clearSettings","showMessage","title","$cui","alert","showToast","toast","calculateDuration","actions","is","reduce","Number","parseInt","calcDisplayTimer","seconds","getSimplifiedDuration","getDisplayTimerValue","getUserDisplayNotation","format","restSeconds","Math","floor","secondsLeft","getUtils","setLightMode","calculateProgress","current","max","getTotalDuration","training","rounds","getBgClassByType","getTextClassByActionType","insert","collection","move","from","to","size","amount","el","newLength","newTo","groupActionsByType","out","item","buildQuickRoundActions","exerciseCount","stopwatchActions","warmup","exercise","cooldown","setPageTitle","text","setNavbarTitle","$push","perform","PUSH_ACTIONS","SET_NAVBAR_TITLE","createArray","Array","isArray","SET_NAVBAR_BG","PushServiceFlow","bg","ValidatorBase","status","errors","performValidation","errorMsg","TrainingValidator","RoundValidator","ActionValidator","CompleteTrainingValidator","validate","validateRounds","len","validateActions","TriangleShadow","className","MAPPIGNS","routes","route","getRoute","url","icon","attributes","uri","getUrl","enumerateObject","prop","replace","description","BpdDialog","props","React","cui-dialog","cui-icon","cui-close","body","footer","ACTIONS_FLOW_ACTIONS","GET_ALL","SET_ACTION","REMOVE_ACTION","CLEAR_ACTIONS","ActionsFlow","getAllActions","action","setAction","removeAction","clearActions","Loading","classes","modifiers","ACTIONS","GET_ALL_TRAININGS","ADD_TRAINING","UPDATE_TRAINING","DELETE_TRAINING","GET_TRAINING","CLEAR_TRAININGS","GET_DRAFT","SET_DRAFT","CLEAR_DRAFT","GET_FOR_EDIT","TrainingsFlow","getAllTrainings","addTraining","updateTraining","deleteTraining","getTraining","getDraft","setDraft","clearDraft","draft","clearTrainings","useAppSettings","$appSettings","TrainingList","list","map","TrainingListItem","onDelete","history","useHistory","deleteSubscription","$flow","subscribe","finish","unsubscribe","onClick","renderUrl","toUpperCase","getActionsDuration","cui-tooltip","Home","state","updateList","onDeleteTrainingComplete","subscription","onDeleteSubscription","elementIdx","findIndex","onYes","setState","NoTrainings","ErrorRoute","NavbarLink","shouldClose","emit","exact","activeClassName","isIcon","IconNavLabel","RouteNavbarLink","class","Navbar","currentLocation","useLocation","currentSite","location","setLocation","init","setTitle","onUpdate","pushServiceTitleSub","useNavbarTitle","split","pathname","toLocaleUpperCase","goBack","cui-open","getName","OffCanvas","cui-off-canvas","href","Footer","appSettings","Date","getFullYear","TutorialDialog","isLast","setIsLast","switchElement","onSwitched","ids","on","forEach","detach","cui-switch","cui-switcher","PerfromTraining","EditTraining","StopwatchActionsComponent","StopwatchSettings","About","DevTools","Help","AppBase","path","App","welcomeDialogHandle","onDarkMode","onWelcomeScreen","welcomeDialogCloseEventIds","onWelcomeDialogClose","$settingsFlow","darkModeSub","welcomeScreenGetSub","fallback","render","component","TrainingsStorageService","BpdStorage","getTrainings","onAction","getNextIndex","idx","find","trainings","getAny","setAny","removeItem","getNumber","NaN","setNumber","callback","setTrainings","ActionStorageService","getActionsFromStorage","existingIndex","getIndex","setActionsToStorage","log","includes","val","SettingsService","settings","PushService","AppSettingsService","CuiSetupInit","prefix","app","logLevel","interaction","animationTime","animationTimeShort","animationTimeLong","cacheSize","autoLightMode","scrollThreshold","resizeThreshold","root","busSetup","development","loadingIndicator","getElementById","loading","setText","requestAnimationFrame","textContent","fetch","then","response","json","icons","rootElement","setup","eventsDef","handler","priority","cuiSetup","components","CuiIconComponent","CuiTooltipComponent","CuiCircleComponent","CuiSpinnerComponent","CuiOpenComponent","CuiCloseComponent","CuiDialogComponent","CuiOffCanvasComponent","CuiAccordionComponent","CuiDropComponenet","CuiSwitchComponent","CuiSwitcherComponent","CuiSliderComponent","plugins","CuiAutoLightModePlugin","autoLight","CuiAutoPrintModePlugin","autoPrint","CuiToastPlugin","CuiAlertsPlugin","CuiIconsPack","traningsFlow","actionsService","actionsFlow","settingsService","settingsFlow","pushService","FlowFactory","getActions","$actionsFlow","CuiInitializer","ReactDOM","remove","classList","onDataFetch","add"],"mappings":"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","file":"stopwatch.index.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"stopwatch.\" + ({}[chunkId]||chunkId) + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([78,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { Settings, StopwatchAction, StopwatchActionType } from \"./models\";\r\n\r\nexport const DefaultActions: StopwatchAction[] = [{\r\n    id: \"9996\",\r\n    name: \"Warmup\",\r\n    duration: \"5\",\r\n    type: StopwatchActionType.WARMUP,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    id: \"9997\",\r\n    name: \"Exercise\",\r\n    duration: \"30\",\r\n    type: StopwatchActionType.EXERCISE,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    id: \"9998\",\r\n    name: \"Break\",\r\n    duration: \"60\",\r\n    type: StopwatchActionType.BREAK,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    id: \"9999\",\r\n    name: \"Cooldown\",\r\n    duration: \"90\",\r\n    type: StopwatchActionType.COOLDOWN,\r\n    removable: false,\r\n    editable: false\r\n}]\r\n\r\nexport const ERROR_CODES = {\r\n    e0000: \"OK\",\r\n    e0001: \"An error occured\",\r\n    e0100: \"Training is empty\",\r\n    e0101: \"Training name is not provided\",\r\n    e0102: \"Training has no rounds\",\r\n    e0200: \"Round is empty\",\r\n    e0201: \"Round has no actions\",\r\n    e0202: \"Round name is missing\",\r\n    e0300: \"Action is empty\",\r\n    e0301: \"Action name is not provided\",\r\n    e0302: \"Action type is not provided\",\r\n    e0303: \"Action duration is not correct\"\r\n\r\n}\r\n\r\nexport function getDefaultRoundName(index: number) {\r\n    return \"Round \" + index;\r\n}\r\n\r\nexport const DefaultSettings: Settings = {\r\n    darkMode: false,\r\n    soundEnabled: false,\r\n    isWelcome: false,\r\n    simpleView: false,\r\n    countdownView: \"simple\"\r\n}\r\n\r\nexport const APP_NAME = \"bpd Stopwatch\"","export const StopwatchActionType = {\r\n    EXERCISE: 'exercise',\r\n    BREAK: 'break',\r\n    COOLDOWN: \"cooldown\",\r\n    WARMUP: \"warmup\"\r\n}\r\n\r\nexport const TrainingState = {\r\n    DRAFT: 'draft',\r\n    PUBLISH: 'publish',\r\n    NEW: \"new\",\r\n}\r\n\r\nexport type AppRunningMode = \"production\" | 'development';\r\nexport const AppRunningModes = {\r\n    DEVELOPMENT: \"development\",\r\n    PRODUCTION: \"production\"\r\n};\r\nexport interface Settings {\r\n    darkMode: boolean;\r\n    soundEnabled: boolean;\r\n    isWelcome: boolean;\r\n    simpleView: boolean; // deprecated\r\n    countdownView: string;\r\n}\r\n\r\nexport interface AppSettings {\r\n    version: string;\r\n    mode: AppRunningMode;\r\n}\r\n\r\nexport interface StopwatchAction {\r\n    id: string;\r\n    name: string;\r\n    duration: string;\r\n    type?: string;\r\n    color?: string;\r\n    removable?: boolean;\r\n    editable?: boolean;\r\n}\r\n\r\nexport interface Round {\r\n    actions: StopwatchAction[];\r\n    break?: number;\r\n    name?: string;\r\n}\r\n\r\nexport interface Training {\r\n    name: string;\r\n    description?: string;\r\n    id?: string;\r\n    rounds: Round[];\r\n    state: string;\r\n}\r\n\r\nexport class Exercise implements StopwatchAction {\r\n    id: string;\r\n    name: string;\r\n    duration: string;\r\n    type: string = StopwatchActionType.EXERCISE;\r\n    removable: false;\r\n    constructor(duration: number, name?: string) {\r\n        this.id = \"00001\";\r\n        this.duration = \"\" + duration;\r\n        this.name = name ? name : 'Exercise';\r\n    }\r\n}\r\n\r\nexport class WarmUp implements StopwatchAction {\r\n    id: string;\r\n    name: string;\r\n    duration: string;\r\n    type: string = StopwatchActionType.WARMUP;\r\n    removable: boolean = false;\r\n\r\n    constructor(duration: number) {\r\n        this.id = \"00002\";\r\n        this.duration = \"\" + duration;\r\n        this.name = \"Warm Up\"\r\n    }\r\n}\r\n\r\nexport class CoolDown implements StopwatchAction {\r\n    id: string;\r\n    name: string;\r\n    duration: string;\r\n    type: string = StopwatchActionType.COOLDOWN;\r\n    removable: false;\r\n    constructor(duration: number, name?: string) {\r\n        this.id = \"00003\";\r\n        this.duration = \"\" + duration;\r\n        this.name = name ? name : \"Cooldown\";\r\n    }\r\n}\r\n\r\nexport interface ActionsGroup {\r\n    [id: string]: StopwatchAction[];\r\n}\r\n\r\nexport interface RoundActions {\r\n    warmup: StopwatchAction;\r\n    exercise: StopwatchAction;\r\n    break: StopwatchAction;\r\n    cooldown: StopwatchAction;\r\n}","import { Settings } from \"../../core/models\";\r\nimport { ISettingsService } from \"../../core/services/interfaces\";\r\n\r\n\r\nexport const SETTINGS_FLOW_ACTIONS = {\r\n    GET_DARK_MODE: \"GET_DARK_MODE\",\r\n    SET_DARK_MODE: \"SET_DARK_MODE\",\r\n    GET_SOUND_ENABLED: \"GET_SOUND_ENABLED\",\r\n    SET_SOUND_ENABLED: \"SET_SOUND_ENABLED\",\r\n    SET_SETTINGS: \"SET_SETTINGS\",\r\n    GET_SETTINGS: \"GET_SETTINGS\",\r\n    GET_IS_WELCOME: \"GET_IS_WELCOME\",\r\n    SET_IS_WELCOME: \"SET_IS_WELCOME\",\r\n    GET_SIMPLE_VIEW: \"GET_SIMPLE_VIEW\",\r\n    CLEAR_SETTINGS: \"CLEAR_SETTINGS\"\r\n}\r\n\r\nexport type SettingsFlowInput = Settings | boolean;\r\nexport type SettingsFlowOutput = boolean | void | Settings;\r\n\r\nexport class SettingsFlow {\r\n    #service: ISettingsService;\r\n    constructor(service: ISettingsService) {\r\n        this.#service = service;\r\n    }\r\n    getActions() {\r\n        return {\r\n            [SETTINGS_FLOW_ACTIONS.GET_SOUND_ENABLED]: () => {\r\n                return this.#service.isSoundEnabled();\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_SOUND_ENABLED]: (flag: boolean) => {\r\n                this.#service.setSoundEnabled(flag);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.GET_DARK_MODE]: () => {\r\n                return this.#service.isDarkMode();\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_DARK_MODE]: (flag: boolean) => {\r\n                this.#service.setDarkMode(flag);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_SETTINGS]: (value: Settings) => {\r\n                this.#service.setSettings(value);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.GET_SETTINGS]: () => {\r\n                return this.#service.getSettings();\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.GET_IS_WELCOME]: () => {\r\n                return this.#service.isWelcomeSet();\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.GET_SIMPLE_VIEW]: () => {\r\n                let sett = this.#service.getSettings();\r\n                return sett.simpleView;\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.SET_IS_WELCOME]: (flag: boolean) => {\r\n                this.#service.setIsWelcome(flag);\r\n            },\r\n            [SETTINGS_FLOW_ACTIONS.CLEAR_SETTINGS]: () => {\r\n                this.#service.clearSettings();\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n}","import { is } from \"bpd-toolkit/dist/esm/index\";\r\nimport { PUSH_ACTIONS } from \"../app/push/push\";\r\nimport { ActionsGroup, Round, RoundActions, StopwatchAction, Training } from \"./models\";\r\nimport { APP_NAME } from \"./statics\";\r\n\r\nexport function showMessage(title: string, message: string) {\r\n    window.$cui.alert(\"common-info-dialog\", \"Info\", {\r\n        title: title,\r\n        message: message\r\n    })\r\n}\r\n\r\nexport function showToast(message: string) {\r\n    window.$cui.toast(message);\r\n}\r\n\r\nexport function calculateDuration(actions: StopwatchAction[]) {\r\n    return is(actions) ? actions.reduce<number>((result: number, value: StopwatchAction) => {\r\n        return result + Number.parseInt(value.duration);\r\n    }, 0) : 0\r\n}\r\n\r\nexport function calcDisplayTimer(seconds: number): string {\r\n    if (seconds < 0) {\r\n        return \"Error\"\r\n    }\r\n    return getSimplifiedDuration(seconds, (value: number, type: string) => {\r\n        switch (type) {\r\n            case \"hour\":\r\n            case \"minute\":\r\n                return getDisplayTimerValue(value) + \":\"\r\n            default:\r\n                return getDisplayTimerValue(value)\r\n        }\r\n    })\r\n    // if (seconds < 60) {\r\n    //     return \"00:\" + getDisplayTimerValue(seconds)\r\n    // } else if (seconds < 3600) {\r\n    //     let minutes = Math.floor(seconds / 60);\r\n    //     let restSeconds = seconds % 60;\r\n    //     return getDisplayTimerValue(minutes) + \":\" + getDisplayTimerValue(restSeconds);\r\n    // } else {\r\n    //     let hours = Math.floor(seconds / 3600);\r\n    //     let secondsLeft = seconds % 3600\r\n    //     return getDisplayTimerValue(hours) + \":\" + calcDisplayTimer(secondsLeft);\r\n    // }\r\n}\r\n\r\nexport function getUserDisplayNotation(seconds: number) {\r\n    return getSimplifiedDuration(seconds, (value: number, type: string) => {\r\n        switch (type) {\r\n            case \"hour\":\r\n                return `${value}h`\r\n            case \"minute\":\r\n                return `${value}m`\r\n            default:\r\n                return `${value}s`\r\n        }\r\n    })\r\n}\r\n\r\nexport function getSimplifiedDuration(seconds: number, format: (value: number, type: string) => string): string {\r\n    if (seconds < 60) {\r\n        return format(seconds, \"second\");\r\n    } else if (seconds < 3600) {\r\n        let minutes = Math.floor(seconds / 60);\r\n        let restSeconds = seconds % 60;\r\n        return format(minutes, 'minute') + getSimplifiedDuration(restSeconds, format);\r\n    } else {\r\n        let hours = Math.floor(seconds / 3600);\r\n        let secondsLeft = seconds % 3600;\r\n        return format(hours, 'hours') + getSimplifiedDuration(secondsLeft, format);\r\n    }\r\n}\r\n\r\n\r\n\r\nexport function getDisplayTimerValue(value: number): string {\r\n    if (value < 0 || value > 59) {\r\n        return \"Error\";\r\n    }\r\n    return value < 10 ? \"0\" + value : \"\" + value;\r\n}\r\n\r\n\r\n\r\nexport function setDarkMode(darkMode: boolean) {\r\n    if (window.$cui) {\r\n        let utils = window.$cui.getUtils();\r\n        utils.setLightMode(darkMode ? \"dark\" : \"light\");\r\n    }\r\n}\r\n\r\nexport function calculateProgress(current: number, max: number) {\r\n    return Math.floor((current * 100) / max);\r\n}\r\n\r\n/**\r\n * Calculates total actions count and total duration of the training\r\n * @param training \r\n * @returns total actions count and total duration\r\n */\r\nexport function getTotalDuration(training: Training) {\r\n    return training.rounds.reduce<[number, number]>((result: [number, number], current: Round) => {\r\n        return [result[0] + current.actions.length, result[1] + calculateDuration(current.actions)];\r\n    }, [0, 0]);\r\n}\r\n\r\nexport function getBgClassByType(type: string) {\r\n    return \"action-background-\" + type;\r\n}\r\n\r\nexport function getTextClassByActionType(type: string) {\r\n    switch (type) {\r\n        case 'warmup':\r\n            return \"cui-text-success\";\r\n        case 'break':\r\n            return \"cui-text-error\";\r\n        case 'exercise':\r\n            return \"cui-text-accent\";\r\n        case 'cooldown':\r\n            return \"cui-text-secondar\";\r\n        default:\r\n            return \"\";\r\n    }\r\n}\r\n\r\n/**\r\n * Inserts new item to the collection at specific index. If index is lower than 0 then item is added at position 0, if index is bigger than collection size then item is added at the end\r\n * @param collection Collection of items\r\n * @param index position which new item should be added to - if undefined or null provided item will be inserted at last position\r\n * @param t new items to add\r\n * @returns Copy of the collection with new item inserted at specific position\r\n */\r\nexport function insert<T>(collection: T[], index: number, ...t: T[]): T[] {\r\n    if (!collection || collection === null || !t || t === null || t.length === 0) {\r\n        return collection;\r\n    }\r\n    let length = collection.length;\r\n    // If not provided then add then treat it like last\r\n    if (!index || index === 0 || index >= length) {\r\n        return [...collection, ...t];\r\n    }\r\n    if (index <= 0) {\r\n        return [...t, ...collection];\r\n    }\r\n    collection.splice(index, 0, ...t);\r\n    return [...collection]\r\n}\r\n\r\nexport function move<T>(collection: T[], from: number, to: number, size?: number): T[] {\r\n    if (!collection || collection === null || from < 0) {\r\n        return collection;\r\n    }\r\n    let amount = size ?? 1;\r\n    let length = collection.length;\r\n    if (length < 2 || from >= length) {\r\n        return [...collection];\r\n    }\r\n    const el = collection.splice(from, amount);\r\n    const newLength = length - amount;\r\n    const newTo = to;\r\n    //let newIdx = newTo < 0 ? 0 : newTo > length - amount ? length - amount : newTo;\r\n    if (newTo <= 0) {\r\n        return [...el, ...collection];\r\n    }\r\n    if (newTo >= newLength) {\r\n        return [...collection, ...el];\r\n    }\r\n    collection.splice(newTo, 0, ...el)\r\n    return [...collection];\r\n\r\n}\r\n\r\nexport function groupActionsByType(actions: StopwatchAction[]): ActionsGroup {\r\n    return actions.reduce<ActionsGroup>((out: ActionsGroup, item: StopwatchAction) => {\r\n        const type = item.type ?? \"Unknown\";\r\n        if (!out[type]) {\r\n            out[type] = [item];\r\n        } else {\r\n            out[type].push(item);\r\n        }\r\n        return out;\r\n    }, {})\r\n}\r\n\r\nexport function buildQuickRoundActions(actions: RoundActions, exerciseCount: number): StopwatchAction[] {\r\n    const stopwatchActions: StopwatchAction[] = [];\r\n    if (actions.warmup) {\r\n        stopwatchActions.push(actions.warmup);\r\n    }\r\n    if (actions.exercise) {\r\n        for (let i = 0; i < exerciseCount; i++) {\r\n            stopwatchActions.push(actions.exercise);\r\n            if (actions.break && i < exerciseCount - 1) {\r\n                stopwatchActions.push(actions.break);\r\n            }\r\n        }\r\n    }\r\n    if (actions.cooldown) {\r\n        stopwatchActions.push(actions.cooldown)\r\n    }\r\n    return stopwatchActions;\r\n}\r\n\r\nexport function setPageTitle(text: string): void {\r\n    if (is(text)) {\r\n        document.title = `${APP_NAME} - ${text}`;\r\n        return;\r\n    }\r\n    document.title = APP_NAME;\r\n}\r\n\r\nexport function setNavbarTitle(text: string): void {\r\n    window.$push.perform(PUSH_ACTIONS.SET_NAVBAR_TITLE, text);\r\n}\r\n\r\nexport function createArray<T>(t: T | T[] | undefined): T[] {\r\n    if (!t) {\r\n        return []\r\n    }\r\n    if (Array.isArray(t)) {\r\n        return t;\r\n    }\r\n    return [t];\r\n}","import { IPushService } from \"src/core/services/interfaces\";\r\n\r\nexport const PUSH_ACTIONS = {\r\n    SET_NAVBAR_TITLE: \"SET_NAVBAR_TITLE\",\r\n    SET_NAVBAR_BG: \"SET_NAVBAR_BG\",\r\n}\r\n\r\nexport type PushServiceInput = string;\r\nexport type PushServiceOutput = string;\r\n\r\n\r\nexport class PushServiceFlow {\r\n    #service: IPushService;\r\n    constructor(service: IPushService) {\r\n        this.#service = service;\r\n    }\r\n\r\n    getActions() {\r\n        return {\r\n            [PUSH_ACTIONS.SET_NAVBAR_TITLE]: (title: string) => {\r\n                return this.#service.setNavbarTitle(title);\r\n            },\r\n            [PUSH_ACTIONS.SET_NAVBAR_BG]: (bg: string) => {\r\n                return bg;\r\n            }\r\n        }\r\n    }\r\n}","import { Round, StopwatchAction, Training } from \"./models\";\r\nimport { ERROR_CODES } from \"./statics\";\r\nimport { is } from '../../node_modules/bpd-toolkit/dist/esm/index';\r\nimport { Footer } from \"src/ui/components/footer/Footer\";\r\n\r\nexport interface ValidationResult {\r\n    status: boolean;\r\n    errors?: string[];\r\n}\r\n\r\nexport interface IValidator<T> {\r\n    validate(t: T): ValidationResult\r\n}\r\n\r\nexport abstract class ValidatorBase<T> implements IValidator<T> {\r\n    validate(t: T): ValidationResult {\r\n        const result: ValidationResult = { status: true }\r\n        try {\r\n            let errors = this.performValidation(t);\r\n            if (errors && errors.length > 0) {\r\n                result.status = false;\r\n                result.errors = errors;\r\n            }\r\n        } catch (e) {\r\n            let errorMsg = \"An error occured during validation\";\r\n            console.error(errorMsg)\r\n            console.error(e)\r\n            result.status = false;\r\n            result.errors = [errorMsg + \": \" + e.message]\r\n        }\r\n        return result;\r\n    }\r\n\r\n    protected abstract performValidation(t: T): string[];\r\n}\r\n\r\nexport class TrainingValidator extends ValidatorBase<Training> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: Training): string[] {\r\n        if (!is(t)) {\r\n            return ([ERROR_CODES.e0100]);\r\n        }\r\n        let errors = []\r\n        if (!is(t.name)) {\r\n            errors.push(ERROR_CODES.e0101)\r\n        }\r\n        if (!is(t.rounds)) {\r\n            errors.push(ERROR_CODES.e0102)\r\n        }\r\n        return errors;\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class RoundValidator extends ValidatorBase<Round> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: Round): string[] {\r\n        if (!is(t)) {\r\n            return ([ERROR_CODES.e0200]);\r\n        }\r\n        let errors = []\r\n        if (!is(t.name))\r\n            errors.push(ERROR_CODES.e0202);\r\n        if (!is(t.actions))\r\n            errors.push(ERROR_CODES.e0201)\r\n        return errors;\r\n    }\r\n}\r\n\r\nexport class ActionValidator extends ValidatorBase<StopwatchAction> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: StopwatchAction): string[] {\r\n        if (!is(t)) {\r\n            return ([ERROR_CODES.e0300]);\r\n        }\r\n        let errors = []\r\n        if (!is(t.name)) {\r\n            errors.push(ERROR_CODES.e0301)\r\n        }\r\n        if (!is(t.type)) {\r\n            errors.push(ERROR_CODES.e0302)\r\n        }\r\n        if (!is(t.duration)) {\r\n            errors.push(ERROR_CODES.e0303)\r\n        }\r\n        return errors;\r\n    }\r\n}\r\n\r\nexport class CompleteTrainingValidator extends ValidatorBase<Training> {\r\n    #trainingValidator: TrainingValidator;\r\n    #actionValidator: ActionValidator;\r\n    #roundValidator: RoundValidator;\r\n    constructor() {\r\n        super();\r\n        this.#trainingValidator = new TrainingValidator();\r\n        this.#roundValidator = new RoundValidator();\r\n        this.#actionValidator = new ActionValidator();\r\n    }\r\n    protected performValidation(t: Training): string[] {\r\n        let err = this.#trainingValidator.validate(t);\r\n        if (err.status) {\r\n            try {\r\n                err = this.validateRounds(t.rounds);\r\n            } catch (e) {\r\n                return [ERROR_CODES.e0001]\r\n            }\r\n        }\r\n        return err.errors;\r\n    }\r\n\r\n    private validateRounds(rounds: Round[]): ValidationResult {\r\n        let err: ValidationResult = null;\r\n        let len = rounds.length;\r\n        for (let i = 0; i < len; i++) {\r\n            err = this.#roundValidator.validate(rounds[i]);\r\n            if (err.status) {\r\n                err = this.validateActions(rounds[i].actions)\r\n                if (!err.status) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return err;\r\n    }\r\n\r\n    private validateActions(actions: StopwatchAction[]): ValidationResult {\r\n        let err: ValidationResult = null;\r\n        let len = actions.length;\r\n        for (let i = 0; i < len; i++) {\r\n            err = this.#actionValidator.validate(actions[i]);\r\n            if (!err.status) {\r\n                return;\r\n            }\r\n        }\r\n        return err;\r\n    }\r\n\r\n}","import * as React from 'react'\r\n\r\nexport function TriangleShadow() {\r\n    return (<div className=\"triangle-wrap\">\r\n        <div className=\"triangle cui-background-default\"> </div>\r\n    </div>);\r\n}\r\n","import { AppMapping } from \"../api/routes/routes\";\r\n\r\nexport const MAPPIGNS = new AppMapping({\r\n    \"home\": { url: \"/\", name: \"Home\", icon: \"home\", description: \"Home page\" },\r\n    \"about\": { url: \"/about\", name: \"About\", icon: \"info\", description: \"Information about the project\" },\r\n    \"settings\": { url: \"/settings\", name: \"Settings\", icon: \"settings\", description: \"User options to change\" },\r\n    \"actions\": { url: \"/actions\", name: \"Actions\", icon: \"dumbbell\", description: \"Define activies to be used in trainings\" },\r\n    \"help\": {\r\n        url: \"/help\", name: \"Help\", icon: \"emoji_smile\", description: \"Get information about app features\"\r\n    },\r\n    \"devtools\": { url: \"/dev\", name: \"Dev Tools\", icon: \"wrench\", description: \"Developer settings\" },\r\n    \"newTraining\": { url: \"/trainings/edit/new\", name: \"New Training\" },\r\n    \"editTraining\": { url: \"/trainings/edit/:id\", name: \"Edit Training\" },\r\n    \"perform\": { url: \"/trainings/perform/:id\", name: \"Perform Training\" }\r\n});","import { enumerateObject, is } from \"../../../node_modules/bpd-toolkit/dist/esm/index\";\r\n\r\n\r\nexport interface RouteDetails {\r\n    url: string,\r\n    name: string,\r\n    icon?: string,\r\n    description?: string;\r\n}\r\nexport interface RoutesMapping {\r\n    [id: string]: RouteDetails;\r\n}\r\n\r\nexport interface AppRouteAttributes {\r\n    [id: string]: string | number;\r\n}\r\n\r\nexport class AppMapping {\r\n    #mapping: RoutesMapping\r\n    constructor(routes: RoutesMapping) {\r\n        this.#mapping = routes;\r\n    }\r\n\r\n    getRoute(id: string) {\r\n        return is(id) ? this.#mapping[id] : undefined;\r\n    }\r\n\r\n    getUrl(id: string) {\r\n        let route = this.getRoute(id);\r\n        return is(route) ? route.url : undefined;\r\n    }\r\n\r\n    getIcon(id: string) {\r\n        let route = this.getRoute(id);\r\n        return is(route) ? route.icon : undefined;\r\n    }\r\n\r\n    getName(id: string) {\r\n        let route = this.getRoute(id);\r\n        return is(route) ? route.name : undefined;\r\n    }\r\n\r\n    renderUrl(id: string, attributes?: AppRouteAttributes): string {\r\n        let uri = this.getUrl(id)\r\n        if (!is(attributes)) {\r\n            return uri;\r\n        }\r\n        enumerateObject(attributes, (prop: string, value: string) => {\r\n            uri = uri.replace(\":\" + prop, value);\r\n        })\r\n        return uri;\r\n    }\r\n}","import * as React from 'react'\r\n\r\nexport interface BpdDialogProps {\r\n    title: string;\r\n    id: string;\r\n    body?: JSX.Element;\r\n    footer?: JSX.Element;\r\n    className?: string;\r\n}\r\n\r\nexport function BpdDialog(props: BpdDialogProps) {\r\n    React.useEffect(() => {\r\n    }, [props])\r\n    return (<div className={`cui-dialog ${props.className ?? \"\"}`} cui-dialog=\"escClose: Y\" id={props.id}>\r\n        <div className=\"cui-dialog-container\">\r\n            <div className=\"cui-dialog-header\">\r\n                <span className=\"cui-dialog-title\">{props.title}</span>\r\n                <a className=\"cui-icon\" cui-icon=\"close\" cui-close=\"\"></a>\r\n            </div>\r\n            <div className=\"cui-dialog-body\">\r\n                {props.body}\r\n            </div>\r\n\r\n            {props.footer && (<div className=\"cui-dialog-footer\">\r\n                {props.footer}\r\n            </div>)}\r\n\r\n        </div>\r\n    </div>)\r\n}\r\n","import { IActionsService } from \"../../core/services/interfaces\"\r\nimport { StopwatchAction } from \"../../core/models\";\r\n\r\nexport const ACTIONS_FLOW_ACTIONS = {\r\n    GET_ALL: \"GET_ALL\",\r\n    SET_ACTION: \"SET_ACTION\",\r\n    REMOVE_ACTION: \"REMOVE_ACTION\",\r\n    CLEAR_ACTIONS: \"CLEAR_ACTIONS\"\r\n}\r\n\r\nexport type ActionsFlowInput = StopwatchAction;\r\nexport type ActionsFlowOutput = boolean | StopwatchAction[];\r\n\r\nexport class ActionsFlow {\r\n    #service: IActionsService;\r\n    constructor(service: IActionsService) {\r\n        this.#service = service;\r\n    }\r\n    getActions() {\r\n        return {\r\n            [ACTIONS_FLOW_ACTIONS.GET_ALL]: () => {\r\n                return this.#service.getAllActions();\r\n            },\r\n            [ACTIONS_FLOW_ACTIONS.SET_ACTION]: (action: StopwatchAction) => {\r\n                return this.#service.setAction(action);\r\n            },\r\n            [ACTIONS_FLOW_ACTIONS.REMOVE_ACTION]: (action: StopwatchAction) => {\r\n                return this.#service.removeAction(action);\r\n            },\r\n            [ACTIONS_FLOW_ACTIONS.CLEAR_ACTIONS]: () => {\r\n                this.#service.clearActions();\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n}","import * as React from 'react'\r\n\r\nexport interface LoadingProps {\r\n    text?: string;\r\n    modifiers?: string;\r\n}\r\n\r\nexport function Loading(props: LoadingProps) {\r\n    let classes = \"cui-container cui-flex-center\";\r\n    const text = \"Loading...\"\r\n    if (props.modifiers) {\r\n        classes += \" \" + props.modifiers;\r\n    }\r\n    return (<div className={classes}>\r\n        <span>{props.text ?? text}</span>\r\n    </div>);\r\n}\r\n","import { is } from \"bpd-toolkit/dist/esm/index\";\r\nimport { Training } from \"../../core/models\";\r\nimport { ITrainingsService } from \"../../core/services/interfaces\";\r\n\r\nexport const ACTIONS = {\r\n    GET_ALL_TRAININGS: \"GET_ALL_TRAININGS\",\r\n    ADD_TRAINING: \"ADD_TRAINING\",\r\n    UPDATE_TRAINING: \"UPDATE_TRAINING\",\r\n    DELETE_TRAINING: \"DELETE_TRAINING\",\r\n    GET_TRAINING: \"GET_TRAINING\",\r\n    CLEAR_TRAININGS: \"CLEAR_TRAININGS\",\r\n    GET_DRAFT: \"GET_DRAFT\",\r\n    SET_DRAFT: \"SET_DRAFT\",\r\n    CLEAR_DRAFT: \"CLEAR_DRAFT\",\r\n    GET_FOR_EDIT: \"GET_FOR_EDIT\"\r\n}\r\n\r\nexport type TrainingsFlowInput = void | Training | number;\r\nexport type TrainingsFlowOutput = Training[] | Training | boolean;\r\n\r\nexport class TrainingsFlow {\r\n    #service: ITrainingsService;\r\n    constructor(service: ITrainingsService) {\r\n        this.#service = service;\r\n    }\r\n\r\n    getActions() {\r\n        return {\r\n            [ACTIONS.GET_ALL_TRAININGS]: () => {\r\n                return this.#service.getAllTrainings();\r\n            },\r\n            [ACTIONS.ADD_TRAINING]: (t: Training) => {\r\n                return this.#service.addTraining(t);\r\n            },\r\n            [ACTIONS.UPDATE_TRAINING]: (t: Training) => {\r\n                return this.#service.updateTraining(t);\r\n            },\r\n            [ACTIONS.DELETE_TRAINING]: (id: string) => {\r\n                return this.#service.deleteTraining(id);\r\n            },\r\n            [ACTIONS.GET_TRAINING]: (id: string) => {\r\n                return this.#service.getTraining(id);\r\n            },\r\n            [ACTIONS.GET_DRAFT]: () => {\r\n                return this.#service.getDraft();\r\n            },\r\n            [ACTIONS.SET_DRAFT]: (training: Training) => {\r\n                return this.#service.setDraft(training);\r\n            },\r\n            [ACTIONS.CLEAR_DRAFT]: () => {\r\n                return this.#service.clearDraft();\r\n            },\r\n            [ACTIONS.GET_FOR_EDIT]: (id: string) => {\r\n                let draft = this.#service.getDraft();\r\n                if (is(draft) && draft.id === id) {\r\n                    return draft;\r\n                }\r\n                if (!is(id) && is(draft.id)) {\r\n                    return undefined;\r\n                }\r\n                return this.#service.getTraining(id);\r\n            },\r\n            [ACTIONS.CLEAR_TRAININGS]: () => {\r\n                this.#service.clearTrainings();\r\n                return true;\r\n            },\r\n        }\r\n    }\r\n}","import { AppSettings } from \"src/core/models\";\r\n\r\nexport function useAppSettings(): AppSettings {\r\n    return window.$appSettings.getSettings();\r\n}","import * as React from \"react\";\r\nimport { Round, Training } from \"../../../core/models\";\r\nimport { Link, useHistory } from \"react-router-dom\";\r\nimport { calculateDuration, getUserDisplayNotation } from \"../../../core/helpers\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\n\r\nconst delays = [' delay-100', ' delay-200', ' delay-300', ' delay-400']\r\n\r\nexport interface TrainingListProps {\r\n    list: Training[];\r\n    onDelete: (id: string) => void;\r\n}\r\n\r\nexport interface TrainingListItemProps {\r\n    data: Training;\r\n    index: number;\r\n    onDelete: (id: string) => void;\r\n}\r\n\r\nexport function TrainingList(props: TrainingListProps) {\r\n    return <ul className=\"cui-list cui-hover\">\r\n        {props.list && props.list.map((item, index) => {\r\n            return <li key={item.id} className=\"stopwatch-content-width cui-corner-round\"><TrainingListItem data={item} onDelete={props.onDelete} index={index} /></li>\r\n        })}\r\n    </ul>\r\n}\r\n\r\nexport function TrainingListItem(props: TrainingListItemProps) {\r\n    const deleteTrainingAction = \"DELETE_TRAINING\";\r\n    let history = useHistory();\r\n\r\n    function getActionsDuration(training: Training) {\r\n        return training.rounds.reduce<[number, number]>((result: [number, number], current: Round) => {\r\n            return [result[0] + current.actions.length, result[1] + calculateDuration(current.actions)];\r\n        }, [0, 0]);\r\n    }\r\n\r\n    function getDetails(training: Training) {\r\n        const [actions, duration] = getActionsDuration(training);\r\n        return getUserDisplayNotation(duration);//`${duration} seconds`;\r\n    }\r\n\r\n    function onItemClick() {\r\n        history.push(MAPPIGNS.renderUrl(\"perform\", { id: props.data.id }))\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const deleteSubscription = window.$flow.subscribe(deleteTrainingAction).finish((result) => {\r\n            window.$flow.perform(\"GET_TRAININGS\")\r\n        });\r\n\r\n        return () => {\r\n            window.$flow.unsubscribe(deleteTrainingAction, deleteSubscription.id)\r\n        }\r\n    })\r\n\r\n    return <div className={\"cui-flex cui-middle cui-animation-fade-in cui-padding-bottom cui-padding-top\"}>\r\n        <div className=\"cui-flex-grow\" onClick={onItemClick}>\r\n            <div className=\"cui-flex cui-middle cui-nowrap\">\r\n                <div className=\"training-list-item-icon\">\r\n                    <span className=\"cui-text-bold\">{props.data.name[0].toUpperCase()}</span>\r\n                </div>\r\n                <div className=\"cui-flex-grow cui-margin-left\">\r\n                    <span>{props.data.name}</span>\r\n                    <div className=\"cui-text-muted cui-text-truncate cui-overflow-hidden\">\r\n                        <span>{getDetails(props.data)}</span>\r\n                    </div></div>\r\n            </div>\r\n        </div>\r\n        <div className=\"cui-flex-shrink\">\r\n            <div>\r\n                <Link to={MAPPIGNS.renderUrl(\"editTraining\", { \"id\": props.data.id })} className=\"cui-icon-button\" cui-icon=\"edit\" cui-tooltip=\"Edit training\"></Link>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { TrainingList } from \"./list\";\r\nimport { Training, WarmUp, CoolDown, Exercise } from \"../../../core/models\";\r\nimport { FlowTask } from \"../../../../node_modules/bpd-flow/dist/index\";\r\nimport { setPageTitle, showMessage } from \"../../../core/helpers\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\nimport { TriangleShadow } from \"../common/TriangleShadow\";\r\n\r\nexport interface HomeProps {\r\n    site?: string;\r\n}\r\n\r\nexport interface HomeState {\r\n    list: Training[];\r\n}\r\n\r\nexport class Home extends React.Component<any, HomeState> {\r\n    list: Training[];\r\n    subscription: FlowTask<Training[]>\r\n    onDeleteSubscription: FlowTask<boolean>;\r\n    state: HomeState;\r\n    constructor(props: HomeProps) {\r\n        super(props);\r\n        this.state = {\r\n            list: []\r\n        }\r\n\r\n        this.updateList = this.updateList.bind(this);\r\n        this.onDeleteTrainingComplete = this.onDeleteTrainingComplete.bind(this);\r\n        this.deleteTraining = this.deleteTraining.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        setPageTitle(\"Home\");\r\n        this.subscription = window.$flow.subscribe(\"GET_ALL_TRAININGS\");\r\n        this.subscription.finish(this.updateList);\r\n        this.onDeleteSubscription = window.$flow.subscribe(\"DELETE_TRAINING\", { finish: this.onDeleteTrainingComplete })\r\n        window.$flow.perform(\"GET_ALL_TRAININGS\");\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.$flow.unsubscribe(\"GET_ALL_TRAININGS\", this.subscription.id);\r\n        window.$flow.unsubscribe(\"DELETE_TRAINING\", this.onDeleteSubscription.id);\r\n    }\r\n\r\n    deleteTraining(id: string) {\r\n        let list = [...this.state.list];\r\n        let elementIdx = list.findIndex(item => item.id === id);\r\n        if (elementIdx > -1) {\r\n            window.$cui.alert(\"delete-training-dialog\", \"YesNoCancel\", {\r\n                title: \"Delete training\",\r\n                message: \"Do you really want to delete training: \" + list[elementIdx].name + \"?\",\r\n                onYes: () => {\r\n                    window.$flow.perform(\"DELETE_TRAINING\", id)\r\n                }\r\n            })\r\n        } else {\r\n            showMessage(\"Delete training\", \"We cannot remove this training. Identified doesn't match.\")\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onDeleteTrainingComplete(flag: boolean) {\r\n        if (flag) {\r\n            window.$flow.perform(\"GET_ALL_TRAININGS\");\r\n        } else {\r\n            showMessage(\"Delete training\", \"Service could not remove training\")\r\n        }\r\n    }\r\n\r\n    updateList(list: Training[]) {\r\n        this.setState({\r\n            ...this.state,\r\n            list: list\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return <div className=\"stopwatch-page-layout\" >\r\n            <div className=\"stopwatch-page-top \">\r\n                <div className=\"cui-container cui-center cui-background-default cui-padding-large-vertical\">\r\n                    <div>\r\n                        <span className=\"cui-icon stopwatch-icon\" cui-icon=\"stopwatch_7\"></span>\r\n                        <h1 className=\"cui-h1 cui-text-center cui-margin-small-top stopwatch-title\">Stopwatch</h1>\r\n                    </div>\r\n                </div>\r\n                <TriangleShadow />\r\n            </div>\r\n            <div className=\"stopwatch-page-bottom\">\r\n                <div className=\"stopwatch-home-list cui-overflow-y-auto\">\r\n                    {this.state.list.length > 0 ? <TrainingList list={this.state.list} onDelete={this.deleteTraining} /> : <NoTrainings />}\r\n                </div>\r\n            </div>\r\n            <div className=\"cui-position-float cui-position-bottom cui-position-center cui-margin-large-bottom app-float-bottom z-index-100\">\r\n                <Link to={MAPPIGNS.renderUrl(\"newTraining\")} className=\"cui-icon-button cui-large cui-background-default cui-box-shadow\" cui-icon=\"plus\"></Link>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport function NoTrainings() {\r\n    return <div className=\"cui-container cui-center\">\r\n        <p className=\"cui-text-muted cui-text-center\">There are no trainings recorded. <Link className=\"cui-link cui-accent\" to={MAPPIGNS.renderUrl(\"newTraining\")}>Add new</Link> training to start your execises!</p>\r\n    </div>;\r\n}\r\n\r\n\r\n{/* <div className=\"stopwatch-page-layout\" >\r\n    <div className=\"stopwatch-page-top \">\r\n        <div className=\"cui-container cui-center cui-background-default\">\r\n            <div>\r\n                <span className=\"cui-icon stopwatch-icon\" cui-icon=\"stopwatch_7\"></span>\r\n                <h1 className=\"cui-h1 cui-text-center cui-margin-small-top stopwatch-title\">Stopwatch</h1>\r\n            </div>\r\n        </div>\r\n        <TriangleShadow />\r\n    </div>\r\n    <div className=\"stopwatch-page-bottom\">\r\n        <div className=\"stopwatch-home-list cui-overflow-y-auto\">\r\n            {this.state.list.length > 0 ? <TrainingList list={this.state.list} onDelete={this.deleteTraining} /> : <NoTrainings />}\r\n        </div>\r\n    </div>\r\n    <div className=\"cui-position-float cui-position-bottom cui-position-center cui-margin-large-bottom app-float-bottom z-index-100\">\r\n        <Link to={MAPPIGNS.renderUrl(\"newTraining\")} className=\"cui-icon-button cui-large cui-background-default cui-box-shadow\" cui-icon=\"plus\"></Link>\r\n    </div>\r\n</div>; */}","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport interface ErrorProps {\r\n}\r\n\r\n// 'HelloProps' describes the shape of props.\r\n// State is never set so we use the '{}' type.\r\nexport class ErrorRoute extends React.Component<ErrorProps, {}> {\r\n    constructor(props: ErrorProps) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        return <div className=\"cui-section cui-flex-center cui-height-viewport-1-2\">\r\n            <div className=\"cui-card cui-large\">\r\n                <div className=\"cui-card-header cui-text-error\">\r\n                    <span className=\"cui-card-title\">Error</span>\r\n                </div>\r\n                <div className=\"cui-card-body\">\r\n                    It appears that page you looking for does not exist.\r\n                    Try to look for it again or go back to our Home page\r\n                </div>\r\n                <div className=\"cui-card-footer cui-flex cui-right\">\r\n                    <Link to=\"/\" className=\"cui-link\">Go Home</Link>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    }\r\n}","import * as React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { RouteDetails } from \"src/api/routes/routes\";\r\n\r\nexport interface NavbarLinkProps {\r\n    url: string;\r\n    name: string;\r\n    icon?: string;\r\n}\r\n\r\nexport interface NavbarLinkBase {\r\n    isIcon?: boolean;\r\n    shouldClose?: boolean;\r\n    class?: string;\r\n}\r\n\r\nexport class NavbarLink extends React.Component<NavbarLinkProps & NavbarLinkBase, {}> {\r\n    constructor(props: NavbarLinkProps & NavbarLinkBase) {\r\n        super(props);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n\r\n    onClick() {\r\n        if (this.props.shouldClose) {\r\n            let offcanvas = window.$cui.get(\"#app-offcanvas\");\r\n            offcanvas.emit('close');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <NavLink exact activeClassName=\"cui-active\" className={this.props.class} to={this.props.url} onClick={this.onClick}>{this.props.isIcon ? <IconNavLabel name={this.props.name} icon={this.props.icon} /> : this.props.name}</NavLink>;\r\n    }\r\n}\r\n\r\nexport interface RouteNavbarLinkProps {\r\n    route?: RouteDetails;\r\n    url?: string;\r\n}\r\n\r\nexport function RouteNavbarLink(props: RouteNavbarLinkProps & NavbarLinkBase) {\r\n    if (!props.route) {\r\n        return (<span className=\"cui-text-error\">Unknown</span>)\r\n    }\r\n    return (<NavbarLink class={props.class} isIcon={props.isIcon} shouldClose={props.shouldClose} icon={props.route.icon} name={props.route.name} url={props.url ?? props.route.url} />);\r\n}\r\n\r\n\r\nexport interface LinkLabelProps {\r\n    name: string;\r\n    icon: string;\r\n}\r\n\r\nexport function IconNavLabel(props: LinkLabelProps) {\r\n    return (<span className=\"cui-flex cui-middle\"><span cui-icon={props.icon}></span><span className=\"cui-margin-small-left\">{props.name}</span></span>)\r\n}\r\n\r\nexport function SimpleNavLabel(props: LinkLabelProps) {\r\n    return (<span>{props.name}</span>)\r\n}","import * as React from \"react\";\r\nimport { Link, useHistory, useLocation } from \"react-router-dom\";\r\nimport { setNavbarTitle } from \"../../../core/helpers\";\r\nimport { PUSH_ACTIONS } from \"../../../app/push/push\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\nimport { NavbarLink } from \"../common/NavbarLink\";\r\nimport { useNavbarTitle } from \"../../../ui/hooks/NavbarTitle\";\r\n\r\nexport interface NavbarState {\r\n    currentSite: string;\r\n    darkMode: boolean;\r\n    soundEnabled: boolean\r\n}\r\n\r\nexport interface NavbarProps {\r\n    site?: string;\r\n    location?: any;\r\n}\r\n\r\nexport function Navbar(props: NavbarProps) {\r\n    const currentLocation = useLocation();\r\n    const [state, setState] = React.useState<NavbarState>({\r\n        currentSite: \"\",\r\n        darkMode: false,\r\n        soundEnabled: false,\r\n    });\r\n    const [location, setLocation] = React.useState(\"\")\r\n    const title = useNavbarTitle(\"\");\r\n    const history = useHistory();\r\n\r\n    // function onTitleUpdate(value: string): void {\r\n    //     setState({\r\n    //         ...state,\r\n    //         currentSite: value\r\n    //     })\r\n    // }\r\n\r\n    React.useEffect(() => {\r\n        let split = currentLocation.pathname.split('/');\r\n        setLocation(split.length > 1 ? split[1].toLocaleUpperCase() : \"\")\r\n        // const pushServiceTitleSub = window.$push.subscribe(PUSH_ACTIONS.SET_NAVBAR_TITLE, { finish: onTitleUpdate })\r\n\r\n        return () => {\r\n            //window.$push.unsubscribe(PUSH_ACTIONS.SET_NAVBAR_TITLE, pushServiceTitleSub.id);\r\n        }\r\n    }, [currentLocation])\r\n    return <nav className={\"cui-navbar cui-sticky cui-box-shadow-remove stopwatch-layout-navigation\"}>\r\n        <div className=\"cui-navbar-left cui-width-1-1 cui-width-auto--m cui-flex cui-middle cui-between\" id=\"navbar-left\">\r\n            <ul>\r\n                {location && <><li><a cui-icon=\"chevron_small_left\" onClick={() => { history.goBack() }} ></a></li>\r\n                    <li><Link className=\"cui-icon\" to={MAPPIGNS.renderUrl(\"home\")} cui-icon=\"stopwatch_small_1\"></Link></li>\r\n                    <li><span>{title}</span></li>\r\n                </>}\r\n            </ul>\r\n            <a className=\"cui-icon cui-padding cui-button cui-hidden--m\" cui-icon=\"menu\" cui-open=\"target: #app-offcanvas\"></a>\r\n        </div>\r\n\r\n        <ul className=\"cui-navbar-right cui-unhidden--m\">\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"home\")} name={MAPPIGNS.getName(\"home\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"actions\")} name={MAPPIGNS.getName(\"actions\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"settings\")} name={MAPPIGNS.getName(\"settings\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"help\")} name={MAPPIGNS.getName(\"help\")} /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url={MAPPIGNS.renderUrl(\"about\")} name={MAPPIGNS.getName(\"about\")} /></li>\r\n        </ul>\r\n    </nav>\r\n}","import * as React from \"react\";\r\nimport { PUSH_ACTIONS } from \"../../app/push/push\";\r\n\r\nexport function useNavbarTitle(init: string): string {\r\n    const [title, setTitle] = React.useState(init);\r\n\r\n    function onUpdate(value: string) {\r\n        setTitle(value);\r\n    }\r\n    React.useEffect(() => {\r\n        const pushServiceTitleSub = window.$push.subscribe(PUSH_ACTIONS.SET_NAVBAR_TITLE, { finish: onUpdate })\r\n        return () => {\r\n            window.$push.unsubscribe(PUSH_ACTIONS.SET_NAVBAR_TITLE, pushServiceTitleSub.id);\r\n        }\r\n    })\r\n    return title;\r\n}","import * as React from \"react\";\r\nimport { ElementManager } from \"../../../../node_modules/cui-light/dist/index\";\r\nimport { MAPPIGNS } from \"../../routes\";\r\nimport { NavbarLink, RouteNavbarLink } from \"../common/NavbarLink\";\r\n\r\nexport interface OffCanvasProps {\r\n}\r\n\r\n// 'HelloProps' describes the shape of props.\r\n// State is never set so we use the '{}' type.\r\nexport class OffCanvas extends React.Component<OffCanvasProps, {}> {\r\n    constructor(props: OffCanvasProps) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"cui-off-canvas\" id=\"app-offcanvas\" cui-off-canvas=\"escClose: y; outClose: y\">\r\n            <div className=\"cui-off-canvas-container cui-card off-canvas-layout cui-flex cui-flex-direction-column\">\r\n                <div className=\"cui-card-header cui-flex cui-middle cui-right cui-width-1-1\">\r\n                    <a href=\"#\" className=\"cui-icon\" cui-icon=\"close\" cui-close=\"\"></a>\r\n                </div>\r\n                <div className=\"off-canvas-content cui-card-body cui-flex-grow cui-flex cui-middle cui-width-1-1\">\r\n                    <div className=\"cui-width-1-1\">\r\n                        <h3 className=\"cui-h3 cui-text-center\">Menu</h3>\r\n                        <ul className=\"cui-list cui-highlight cui-accent cui-margin-top\">\r\n                            <li><RouteNavbarLink route={MAPPIGNS.getRoute(\"home\")} shouldClose={true} isIcon={true} /></li>\r\n                            <li><RouteNavbarLink route={MAPPIGNS.getRoute(\"actions\")} shouldClose={true} isIcon={true} /></li>\r\n                            <li><RouteNavbarLink route={MAPPIGNS.getRoute(\"settings\")} shouldClose={true} isIcon={true} /></li>\r\n                            <li><RouteNavbarLink route={MAPPIGNS.getRoute(\"help\")} shouldClose={true} isIcon={true} /></li>\r\n                            <li><RouteNavbarLink route={MAPPIGNS.getRoute(\"about\")} shouldClose={true} isIcon={true} /></li>\r\n                        </ul>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","import * as React from 'react'\r\nimport { Link } from 'react-router-dom';\r\nimport { MAPPIGNS } from '../../../ui/routes';\r\nimport { AppRunningModes } from '../../../core/models';\r\nimport { useAppSettings } from '../../../ui/hooks/AppSettings';\r\n\r\nexport interface FooterProps {\r\n    mode: string;\r\n}\r\n\r\nexport function Footer(props: FooterProps) {\r\n    const appSettings = useAppSettings();\r\n    function currentYear(): string {\r\n        return new Date().getFullYear() + \"\";\r\n    }\r\n    return (\r\n        <div className=\"stopwatch-footer cui-flex cui-right cui-middle\">\r\n            <div className=\"cui-margin-horizontal\">\r\n                <span className=\"cui-margin-small-right\">Copyrights {currentYear()}</span>\r\n                <a href=\"https://github.com/bpd-d\" target=\"_blank\" className=\"cui-link cui-accent\">BPDDev</a>\r\n                {appSettings.mode === AppRunningModes.DEVELOPMENT && <Link to={MAPPIGNS.getUrl('devtools')} className=\"cui-link cui-secondary cui-margin-left cui-text-bold\">Dev</Link>}\r\n            </div>\r\n        </div>);\r\n}\r\n","import { is } from 'bpd-toolkit/dist/esm/index';\r\nimport * as React from 'react'\r\nimport { ElementManager } from 'cui-light/dist/esm/managers/element';\r\nimport { BpdDialog } from '../common/BpdDialog';\r\n\r\nexport function TutorialDialog() {\r\n    const [isLast, setIsLast] = React.useState(false);\r\n    const switchElement = React.useRef<ElementManager>(null);\r\n    function onSwitched(data: any) {\r\n        if (is(data) && is(data.index) && data.index === 2) {\r\n            setIsLast(true)\r\n            return\r\n        }\r\n        setIsLast(false)\r\n    }\r\n\r\n    function onNextClick() {\r\n        if (isLast) {\r\n            window.$cui.get(\"#welcome-dialog\").emit(\"close\");\r\n            return;\r\n        }\r\n        switchElement.current.emit(\"switch\", \"next\")\r\n\r\n    }\r\n\r\n    function getElement() { }\r\n\r\n    React.useEffect(() => {\r\n        switchElement.current = window.$cui.get(\"#welcome-switch\");\r\n        const ids: string[] = switchElement.current.on(\"switched\", onSwitched);\r\n        return () => {\r\n            if (is(ids)) {\r\n                ids.forEach(id => {\r\n                    switchElement.current.detach(\"switched\", id)\r\n                })\r\n\r\n            }\r\n\r\n        }\r\n    }, [isLast])\r\n    return (\r\n        <BpdDialog id=\"welcome-dialog\" title=\"Welcome\"\r\n            body={\r\n                <ul id=\"welcome-switch\" cui-switch=\"links: #welcome-step-indicator > li; height: 250px\">\r\n                    <li className=\"cui-active\"><div>Welcome to <span className=\"cui-text-bold cui-text-accent\">Bpd Stopwatch</span> app. It is simple, offline tool which will allow you to perform highly custimzed trainings that need stopwatch.</div></li>\r\n                    <li><div>Set up some <span className=\"cui-text-bold cui-text-accent\">Actions</span> to build your trainings from. You can define action name, type and it's duration. Action type has it's indications in <span className=\"cui-text-bold\">colors</span> and <span className=\"cui-text-bold\">sounds</span> later when your training is performed, so choose type accordingly to your action type.\r\n                    You can choose from <span className=\"cui-text-italic\">warmup</span>, <span className=\"cui-text-italic\">exercise</span>, <span className=\"cui-text-italic\">break</span> and <span className=\"cui-text-italic\">cooldown</span>. There are some actions already defined (they cannot be modified or deleted), which can help you to start with building your trainings.</div></li>\r\n                    <li><div>Give your <span className=\"cui-text-bold cui-text-accent\">training</span> a name and optionally  <span className=\"cui-text-bold cui-accent\">description</span>, then setup <span className=\"cui-text-bold cui-accent\">rounds</span>. You can define rounds from available actions.\r\n                        Once added they can be <span className=\"cui-text-italic\">re-positioned</span>, <span className=\"cui-text-italic\">cloned</span> or <span className=\"cui-text-italic\">deleted</span>.</div></li>\r\n                </ul>\r\n            }\r\n            footer={\r\n                <div className=\"cui-flex cui-middle\">\r\n                    <ul id=\"welcome-step-indicator\" className=\"cui-switcher-indicator cui-flex-grow\" cui-switcher=\"target: #welcome-switch\">\r\n                        <li><a></a></li>\r\n                        <li><a></a></li>\r\n                        <li><a></a></li>\r\n                    </ul>\r\n                    <div>\r\n                        <button className=\"cui-button\" onClick={onNextClick}>{isLast ? \"Close\" : \"Next\"}</button>\r\n                    </div>\r\n                </div>\r\n            }\r\n        />\r\n    );\r\n}\r\n","import * as React from \"react\";\r\nimport { Switch, Route, BrowserRouter, useLocation } from \"react-router-dom\";\r\nimport { Home } from \"./components/home/home\";\r\nimport { ErrorRoute } from \"./error\";\r\nimport { Navbar } from \"./components/navbar/navbar\";\r\nimport { OffCanvas } from \"./components/offacanvas/offcanvas\";\r\n// import { StopwatchActionsComponent } from \"./components/actions/StopwatchActionsComponent\";\r\n//import EditTraining from \"./components/trainings/EditTraining\";\r\n//import { PerfromTraining } from \"./components/perform/PerformTraining\";\r\n// import { StopwatchSettings } from \"./components/settings/StopwatchSettings\";\r\nimport { SETTINGS_FLOW_ACTIONS } from \"../app/flow/settings\";\r\nimport { setDarkMode } from \"../core/helpers\";\r\n// import { About } from \"./components/about/About\";\r\nimport { Footer } from \"./components/footer/Footer\";\r\nimport { MAPPIGNS } from \"./routes\";\r\nimport { ElementManager } from \"cui-light-app/dist/esm/app/managers/element\";\r\nimport { is } from \"bpd-toolkit/dist/esm/index\";\r\nimport { TutorialDialog } from \"./components/tutorial/TutorialDialog\";\r\n// import { Help } from \"./components/help/help\";\r\n// import { DevTools } from \"./components/devtools/DevTools\";\r\nimport { Loading } from \"./components/common/Loading\";\r\n\r\nconst PerfromTraining = React.lazy(() => import('./components/perform/PerformTraining'));\r\nconst EditTraining = React.lazy(() => import('./components/trainings/EditTraining'));\r\nconst StopwatchActionsComponent = React.lazy(() => import('./components/actions/StopwatchActionsComponent'));\r\nconst StopwatchSettings = React.lazy(() => import('./components/settings/StopwatchSettings'));\r\nconst About = React.lazy(() => import('./components/about/About'));\r\nconst DevTools = React.lazy(() => import('./components/devtools/DevTools'));\r\nconst Help = React.lazy(() => import('./components/help/help'));\r\n\r\n\r\nexport interface AppProps {\r\n    mode: string;\r\n}\r\nexport interface AppState {\r\n    currentSite?: string;\r\n}\r\n\r\nexport function AppBase(props: AppProps) {\r\n    return (<BrowserRouter>\r\n        <Route path=\"*\">\r\n            <App mode={props.mode} />\r\n        </Route>\r\n    </BrowserRouter>)\r\n}\r\n\r\nexport function App(props: AppProps) {\r\n\r\n    let welcomeDialogHandle: ElementManager;\r\n    let location = useLocation();\r\n\r\n    function onDarkMode(flag: boolean) {\r\n        setDarkMode(flag);\r\n    }\r\n\r\n    function onWelcomeScreen(flag: boolean) {\r\n        if (!flag) {\r\n            setTimeout(() => {\r\n                this.welcomeDialogHandle = window.$cui.get(\"#welcome-dialog\");\r\n                this.welcomeDialogCloseEventIds = this.welcomeDialogHandle.on(\"close\", this.onWelcomeDialogClose.bind(this));\r\n                window.$cui.get(\"#welcome-dialog\").emit(\"open\");\r\n            }, 100)\r\n\r\n        }\r\n    }\r\n\r\n    function onWelcomeDialogClose() {\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.SET_IS_WELCOME, true);\r\n    }\r\n\r\n\r\n    React.useEffect(() => {\r\n        const darkModeSub = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.GET_DARK_MODE, { finish: onDarkMode });\r\n        const welcomeScreenGetSub = window.$settingsFlow.subscribe(SETTINGS_FLOW_ACTIONS.GET_IS_WELCOME, { finish: onWelcomeScreen });\r\n        welcomeDialogHandle = window.$cui.get(\"#welcome-dialog\");\r\n        const welcomeDialogCloseEventIds = welcomeDialogHandle.on(\"close\", onWelcomeDialogClose);\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.GET_IS_WELCOME);\r\n        window.$settingsFlow.perform(SETTINGS_FLOW_ACTIONS.GET_DARK_MODE);\r\n\r\n        return () => {\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.GET_DARK_MODE, darkModeSub.id);\r\n            window.$settingsFlow.unsubscribe(SETTINGS_FLOW_ACTIONS.GET_IS_WELCOME, welcomeScreenGetSub.id);\r\n\r\n            if (is(welcomeDialogCloseEventIds)) {\r\n                welcomeDialogCloseEventIds.forEach((id: string) => {\r\n                    welcomeDialogHandle.detach(\"close\", id);\r\n                })\r\n            }\r\n        }\r\n    })\r\n    return (\r\n        <div className=\"stopwatch-layout-main\">\r\n            <Navbar />\r\n            <div className=\"stopwatch-layout-content cui-overflow-y-auto\">\r\n                <React.Suspense fallback={<Loading />}>\r\n                    <Switch location={location}>\r\n                        <Route path={MAPPIGNS.getUrl(\"perform\")} render={() => <PerfromTraining />}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"newTraining\")} render={() => <EditTraining />}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"editTraining\")} render={() => <EditTraining />}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"actions\")} render={() => <StopwatchActionsComponent />}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"settings\")} render={() => <StopwatchSettings />}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"about\")} render={() => <About />}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"devtools\")} render={() => <DevTools />}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"help\")} render={() => <Help />}></Route>\r\n                        <Route path={MAPPIGNS.getUrl(\"home\")} component={Home}></Route>\r\n                        <Route>\r\n                            <ErrorRoute />\r\n                        </Route>\r\n                    </Switch>\r\n                </React.Suspense>\r\n            </div>\r\n            <Footer mode={props.mode} />\r\n            <OffCanvas />\r\n            <TutorialDialog />\r\n        </div >);\r\n}","import { ITrainingsService, IActionsService, ISettingsService } from \"./interfaces\";\r\nimport { Training, StopwatchAction, Settings, TrainingState } from \"../models\";\r\nimport { BpdStorage } from \"../../../node_modules/bpd-storage/dist/index\";\r\nimport { ActionValidator, TrainingValidator } from \"../validators\";\r\nimport { is } from \"bpd-toolkit/dist/esm/index\";\r\nimport { DefaultSettings } from \"../statics\";\r\n\r\nconst TRAININGS_STORAGE = \"Trainings\";\r\nconst DRAFT_STORAGE = \"DRAFT_TRAINING\";\r\n\r\nexport class TrainingsStorageService implements ITrainingsService {\r\n    #storage: BpdStorage;\r\n    // #trainings: Training[];\r\n    #validator: TrainingValidator;\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_TRAININGS\");\r\n        // this.#trainings = [];\r\n        this.#validator = new TrainingValidator();\r\n    }\r\n\r\n\r\n    getAllTrainings(): Training[] {\r\n        return this.getTrainings();\r\n    }\r\n\r\n    addTraining(training: Training): boolean {\r\n        let result = false;\r\n\r\n        if (this.validate(training)) {\r\n            this.onAction((t: Training[]) => {\r\n                if (!is(training.id)) {\r\n                    if (training.state === TrainingState.DRAFT) {\r\n                        this.clearDraft();\r\n                    }\r\n                    training.id = \"00\" + this.getNextIndex();\r\n                    training.state = TrainingState.PUBLISH;\r\n                    t.push(training)\r\n                    result = true;\r\n                    return t;\r\n                }\r\n                return null;\r\n            })\r\n        }\r\n        return result;\r\n    }\r\n\r\n    updateTraining(training: Training): boolean {\r\n        let result = false;\r\n\r\n        if (this.validate(training)) {\r\n            if (!is(training.id)) {\r\n                result = this.addTraining(training)\r\n            } else {\r\n                this.onAction((t: Training[]) => {\r\n                    let idx = t.findIndex(item => item.id === training.id);\r\n                    if (idx > -1) {\r\n                        if (training.state === TrainingState.DRAFT) {\r\n                            this.clearDraft();\r\n                        }\r\n                        training.state = TrainingState.PUBLISH;\r\n                        t[idx] = training;\r\n                        result = true;\r\n                        return t;\r\n                    }\r\n                    return null;\r\n                })\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Removes training from storage\r\n     * @param id Id of training\r\n     */\r\n    deleteTraining(id: string): boolean {\r\n        let result = false;\r\n        if (!is(id)) {\r\n            return false;\r\n        }\r\n        this.onAction((t: Training[]) => {\r\n            let idx = t.findIndex(item => item.id === id);\r\n            if (idx > -1) {\r\n                t.splice(idx, 1);\r\n                result = true;\r\n                return t;\r\n            }\r\n            return null;\r\n        })\r\n        return result;\r\n    }\r\n\r\n    getTraining(id: string): Training {\r\n        let training = undefined;\r\n        this.onAction((t) => {\r\n            training = t.find(item => { return item.id === id });\r\n            return null;\r\n        })\r\n        return training;\r\n    }\r\n\r\n    /**\r\n     * Removes all trainings from storage\r\n     */\r\n    clearTrainings(): void {\r\n        this.onAction((trainings: Training[]) => {\r\n            return [];\r\n        })\r\n    }\r\n\r\n    isDraft(): boolean {\r\n        throw is(this.#storage.getAny(DRAFT_STORAGE));\r\n    }\r\n\r\n    getDraft(): Training {\r\n        return this.#storage.getAny(DRAFT_STORAGE) ?? undefined;\r\n    }\r\n\r\n    setDraft(training: Training): boolean {\r\n        if (!is(training)) {\r\n            return;\r\n        }\r\n        training.state = TrainingState.DRAFT;\r\n        this.#storage.setAny(DRAFT_STORAGE, training);\r\n    }\r\n\r\n    clearDraft(): void {\r\n        this.#storage.removeItem(DRAFT_STORAGE);\r\n    }\r\n\r\n    getCurrentTraining(): Training {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    setCurrentTraining(training: Training): void {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    private getTrainings(): Training[] {\r\n        return this.#storage.getAny(TRAININGS_STORAGE) ?? [];\r\n    }\r\n\r\n    private setTrainings(t: Training[]): void {\r\n        this.#storage.setAny(TRAININGS_STORAGE, t);\r\n    }\r\n\r\n    private getNextIndex(): number {\r\n        let idx = this.#storage.getNumber(\"TRAININGS_INDEX\");\r\n        if (!idx || idx === NaN) {\r\n            idx = 1;\r\n        } else {\r\n            idx += 1;\r\n        }\r\n        this.#storage.setNumber(\"TRAININGS_INDEX\", idx);\r\n        return idx;\r\n    }\r\n\r\n    private validate(training: Training): boolean {\r\n        return this.#validator.validate(training).status;\r\n    }\r\n\r\n    private onAction(callback: (t: Training[]) => Training[] | null) {\r\n        let t = this.getTrainings();\r\n        let result = callback(t)\r\n        if (result !== null) {\r\n            this.setTrainings(result);\r\n        }\r\n    }\r\n}\r\n\r\nexport class ActionStorageService implements IActionsService {\r\n    #storage: BpdStorage;\r\n    #actions: StopwatchAction[];\r\n    #validator: ActionValidator;\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_TRAININGS\");\r\n        this.#actions = [];\r\n        this.#validator = new ActionValidator();\r\n        this.getActionsFromStorage();\r\n    }\r\n\r\n    getAllActions(): StopwatchAction[] {\r\n        return [...this.#actions];\r\n    }\r\n\r\n    setAction(action: StopwatchAction): boolean {\r\n        if (!this.#validator.validate(action).status) {\r\n            return false;\r\n        }\r\n        if (!is(action.id)) {\r\n            action.id = \"000\" + this.getNextIndex();\r\n            this.#actions.push(action);\r\n        }\r\n        let existingIndex = this.getIndex(action);\r\n        if (existingIndex > -1) {\r\n            this.#actions[existingIndex] = action;\r\n            this.setActionsToStorage();\r\n            return true;\r\n        }\r\n        console.log(\"Unknown action id: \" + action.id);\r\n        return false;\r\n    }\r\n\r\n    removeAction(action: StopwatchAction): boolean {\r\n        if (!this.#validator.validate(action).status) {\r\n            return false;\r\n        }\r\n        let existingIndex = this.getIndex(action);\r\n        if (existingIndex < 0) {\r\n            console.log(\"Unknown action id: \" + action.id);\r\n            return false;\r\n        }\r\n        this.#actions.splice(existingIndex, 1);\r\n        this.setActionsToStorage();\r\n        return true;\r\n    }\r\n\r\n    clearActions(): void {\r\n        this.#actions = [];\r\n        this.setActionsToStorage();\r\n    }\r\n\r\n    getActionsById(...id: string[]): StopwatchAction[] | undefined {\r\n        if (!is(id)) {\r\n            return undefined;\r\n        }\r\n        return this.#actions.reduce((result: StopwatchAction[], action: StopwatchAction, index: number) => {\r\n            if (id.includes(action.id)) {\r\n                result.push(action);\r\n            }\r\n            return result;\r\n        }, []);\r\n    }\r\n\r\n    private getIndex(action: StopwatchAction): number {\r\n        return this.#actions.findIndex(item => item.id === action.id);\r\n    }\r\n\r\n    private getActionsFromStorage() {\r\n        let val = this.#storage.getAny(\"ACTIONS\");\r\n        this.#actions = val ?? [];\r\n    }\r\n\r\n    private setActionsToStorage() {\r\n        this.#storage.setAny(\"ACTIONS\", this.#actions);\r\n    }\r\n\r\n    private getNextIndex() {\r\n        let item = this.#storage.getNumber(\"ACTION_INDEX\");\r\n        if (!item) {\r\n            item = 5;\r\n        } else {\r\n            item = item + 1;\r\n        }\r\n        this.#storage.setNumber(\"ACTION_INDEX\", item);\r\n        return item;\r\n    }\r\n\r\n}\r\n\r\nexport class SettingsService implements ISettingsService {\r\n    #storage: BpdStorage;\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_SETTINGS\");\r\n    }\r\n\r\n\r\n    setSettings(value: Settings): boolean {\r\n        this.#storage.setAny(\"SETTINGS\", value);\r\n        return true;\r\n    }\r\n\r\n    getSettings(): Settings {\r\n        return this.#storage.getAny(\"SETTINGS\") || {\r\n            darkMode: false,\r\n            soundEnabled: false\r\n        };\r\n    }\r\n\r\n    setSoundEnabled(flag: boolean): void {\r\n        let settings = this.getSettings();\r\n        if (flag !== settings.soundEnabled) {\r\n            settings.soundEnabled = flag;\r\n            this.setSettings(settings)\r\n        }\r\n    }\r\n\r\n    isSoundEnabled(): boolean {\r\n        return this.getSettings()?.soundEnabled;\r\n    }\r\n\r\n    setDarkMode(flag: boolean): void {\r\n        let settings = this.getSettings();\r\n        if (flag !== settings.darkMode) {\r\n            settings.darkMode = flag;\r\n            this.setSettings(settings)\r\n        }\r\n    }\r\n\r\n    isDarkMode(): boolean {\r\n        return this.getSettings()?.darkMode;\r\n    }\r\n\r\n    isWelcomeSet(): boolean {\r\n        return this.getSettings()?.isWelcome;\r\n    }\r\n\r\n    setIsWelcome(flag: boolean) {\r\n        let settings = this.getSettings();\r\n        if (flag !== settings.isWelcome) {\r\n            settings.isWelcome = flag;\r\n            this.setSettings(settings)\r\n        }\r\n    }\r\n\r\n    clearSettings(): void {\r\n        this.setSettings({\r\n            ...DefaultSettings\r\n        })\r\n    }\r\n}","import { IPushService } from \"./interfaces\";\r\n\r\nexport class PushService implements IPushService {\r\n    constructor() {\r\n\r\n    }\r\n\r\n    setNavbarTitle(title: string): string {\r\n        return title ?? \"\";\r\n    }\r\n}","import { AppSettings } from \"../models\";\r\nimport { IAppSettingsService } from \"./interfaces\";\r\n\r\nexport class AppSettingsService implements IAppSettingsService {\r\n    #settings: AppSettings;\r\n    constructor(settings: AppSettings) {\r\n        this.#settings = settings;\r\n    }\r\n    \r\n    getSettings(): AppSettings {\r\n        return this.#settings;\r\n    }\r\n\r\n}","export class CuiSetup {\r\n    constructor() {\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.prefix = \"cui\";\r\n        this.plugins = {};\r\n        this.root = document.body;\r\n    }\r\n    fromInit(init) {\r\n        var _a;\r\n        this.prefix = (_a = init.prefix) !== null && _a !== void 0 ? _a : \"cui\";\r\n        this.logLevel = init.logLevel;\r\n        this.cacheSize = init.cacheSize;\r\n        this.autoLightMode = init.autoLightMode;\r\n        this.animationTime = init.animationTime;\r\n        this.animationTimeShort = init.animationTimeShort;\r\n        this.animationTimeLong = init.animationTimeLong;\r\n        this.scrollThreshold = init.scrollThreshold;\r\n        this.resizeThreshold = init.resizeThreshold;\r\n        this.root = init.root;\r\n        return this;\r\n    }\r\n}\r\nexport class CuiSetupInit {\r\n    constructor() {\r\n        this.prefix = 'cui';\r\n        this.app = '$cui';\r\n        this.logLevel = 'warning';\r\n        this.interaction = 'async';\r\n        this.animationTime = 300;\r\n        this.animationTimeShort = 150;\r\n        this.animationTimeLong = 500;\r\n        this.cacheSize = 500;\r\n        this.autoLightMode = false;\r\n        this.scrollThreshold = 20;\r\n        this.resizeThreshold = 20;\r\n        this.root = document.body;\r\n        this.busSetup = undefined;\r\n        this.development = undefined;\r\n    }\r\n}\r\n","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport '../styles/styles.scss';\r\nimport { AppBase } from \"./ui/app\";\r\nimport { CuiIconsPack } from 'bpd-cui-icons/esm/index';\r\nimport { Flow, FlowFactory } from '../node_modules/bpd-flow/dist/index';\r\nimport { TrainingsStorageService, ActionStorageService, SettingsService } from './core/services/storage';\r\nimport { TrainingsFlow, TrainingsFlowInput, TrainingsFlowOutput } from \"./app/flow/trainings\";\r\nimport { ActionsFlowInput, ActionsFlowOutput, ActionsFlow } from \"./app/flow/actions\";\r\nimport { SettingsFlow, SettingsFlowInput, SettingsFlowOutput } from \"./app/flow/settings\";\r\nimport { CuiInstance } from \"cui-light-app/dist/esm/index\";\r\nimport { CuiInitData, CuiInitializer } from \"cui-light-app/dist/esm/app/initializer\";\r\nimport { PushServiceFlow, PushServiceInput, PushServiceOutput } from \"./app/push/push\";\r\nimport { PushService } from \"./core/services/push\";\r\nimport { AppSettingsService } from \"./core/services/app\";\r\nimport { IAppSettingsService } from \"./core/services/interfaces\";\r\nimport { CuiSetupInit } from \"../../cui-light-app/dist/esm/core/models/setup\";\r\nimport { getUsedCuiComponents, getUsedPlugins } from \"./ui/imports\";\r\n\r\n\r\ndeclare global {\r\n    interface Window {\r\n        // cuiInit: CuiInit;\r\n        $cui: CuiInstance;\r\n        $flow: Flow<any, any>;\r\n        $actionsFlow: Flow<ActionsFlowInput, ActionsFlowOutput>;\r\n        $settingsFlow: Flow<SettingsFlowInput, SettingsFlowOutput>;\r\n        $push: Flow<PushServiceInput, PushServiceOutput>;\r\n        $appSettings: IAppSettingsService;\r\n    }\r\n}\r\n\r\nconst loadingIndicator = document.getElementById(\"loading-indicator\");\r\nconst loading = document.getElementById(\"loading-screen\");\r\n\r\nfunction setText(text: string) {\r\n    if (window.requestAnimationFrame) {\r\n        window.requestAnimationFrame(() => {\r\n            loadingIndicator.textContent = text;\r\n        })\r\n    } else {\r\n        loadingIndicator.textContent = text;\r\n    }\r\n}\r\n\r\nPromise.all([\r\n    fetch('/app_settings.json').then(response => response.json()),\r\n    fetch('/static/icons/all.json').then(response => response.json())\r\n]).then((result) => {\r\n    onDataFetch(result[0], result[1])\r\n}).catch(() => {\r\n    loadingIndicator.classList.add(\"error\");\r\n    setText(\"Application cannot be loaded!\")\r\n})\r\n\r\nfunction onDataFetch(settings: any, icons: any) {\r\n    setText(\"Initializing...\")\r\n    const rootElement = document.getElementById('root');\r\n    const setup = new CuiSetupInit();\r\n    setup.logLevel = settings?.mode === \"production\" ? 'error' : \"debug\";\r\n    setup.root = rootElement;\r\n    setup.busSetup = [\r\n        {\r\n            name: \"MoveQueue\",\r\n            eventsDef: [\"global_move\"],\r\n            handler: 'tasked',\r\n            priority: 0\r\n        },\r\n        {\r\n            name: \"InteractQueue\",\r\n            eventsDef: [\"open\", \"close\", \"switch\"],\r\n            handler: 'tasked',\r\n            priority: 0\r\n        },\r\n        {\r\n            name: \"ResponsesQueue\",\r\n            eventsDef: [\"opened\", \"closed\", \"switched\", \"resize\", \"offset\"],\r\n            handler: 'tasked',\r\n            priority: 1\r\n        },\r\n        {\r\n            name: \"GlobalSimple\",\r\n            eventsDef: [\"keydown\", \"scroll\", \"intersection\", \"windowclick\"],\r\n            handler: 'tasked',\r\n            priority: 2\r\n        },\r\n    ]\r\n\r\n    const cuiSetup: CuiInitData = {\r\n        setup: setup,\r\n        components: getUsedCuiComponents(),\r\n        plugins: getUsedPlugins(),\r\n        icons: {\r\n            ...CuiIconsPack,\r\n            ...icons\r\n        }\r\n    };\r\n\r\n    const service = new TrainingsStorageService();\r\n    const traningsFlow = new TrainingsFlow(service);\r\n    const actionsService = new ActionStorageService();\r\n    const actionsFlow = new ActionsFlow(actionsService);\r\n    const settingsService = new SettingsService();\r\n    const settingsFlow = new SettingsFlow(settingsService);\r\n    const pushService = new PushServiceFlow(new PushService());\r\n\r\n    window.$appSettings = new AppSettingsService(settings);\r\n\r\n    window.$flow = FlowFactory.create<TrainingsFlowInput, TrainingsFlowOutput>(traningsFlow.getActions());\r\n    window.$actionsFlow = FlowFactory.create<ActionsFlowInput, ActionsFlowOutput>(actionsFlow.getActions());\r\n    window.$settingsFlow = FlowFactory.create<SettingsFlowInput, SettingsFlowOutput>(settingsFlow.getActions());\r\n    window.$push = FlowFactory.create<PushServiceInput, PushServiceOutput>(pushService.getActions());\r\n\r\n    setTimeout(() => {\r\n        new CuiInitializer().init(cuiSetup).then((result) => {\r\n            ReactDOM.render(<AppBase mode={settings.mode} />, rootElement);\r\n            loading.remove();\r\n            rootElement.classList.remove(\"hidden\");\r\n        });\r\n    }, 0)\r\n\r\n}\r\n\r\n\r\n\r\n","import { ICuiComponent, ICuiPlugin } from \"cui-light-app/dist/esm/core/models/interfaces\";\r\nimport { CuiAccordionComponent } from \"cui-light-app/dist/esm/components/accordion/accordion\";\r\nimport { CuiCircleComponent } from \"cui-light-app/dist/esm/components/circle/circle\";\r\nimport { CuiCloseComponent } from \"cui-light-app/dist/esm/components/close/close\";\r\nimport { CuiDialogComponent } from \"cui-light-app/dist/esm/components/dialog/dialog\";\r\nimport { CuiDropComponenet } from \"cui-light-app/dist/esm/components/drop/drop\";\r\nimport { CuiIconComponent } from \"cui-light-app/dist/esm/components/icon/icon\";\r\nimport { CuiOffCanvasComponent } from \"cui-light-app/dist/esm/components/offcanvas/offcanvas\";\r\nimport { CuiOpenComponent } from \"cui-light-app/dist/esm/components/open/open\";\r\nimport { CuiSpinnerComponent } from \"cui-light-app/dist/esm/components/spinner/spinner\";\r\nimport { CuiSliderComponent } from \"cui-light-app/dist/esm/components/switch/slider\";\r\nimport { CuiSwitchComponent } from \"cui-light-app/dist/esm/components/switch/switch\";\r\nimport { CuiSwitcherComponent } from \"cui-light-app/dist/esm/components/switch/switcher\";\r\nimport { CuiTooltipComponent } from \"cui-light-app/dist/esm/components/tooltip/tooltip\";\r\n\r\nimport { CuiAutoLightModePlugin } from \"cui-light-app/dist/esm/plugins/light/light\";\r\nimport { CuiAutoPrintModePlugin } from \"cui-light-app/dist/esm/plugins/print/print\";\r\nimport { CuiToastPlugin } from \"cui-light-app/dist/esm/plugins/toast/toast\";\r\nimport { CuiAlertsPlugin } from \"cui-light-app/dist/esm/plugins/alert/alert\";\r\n\r\nexport function getUsedCuiComponents(): ICuiComponent[] {\r\n    let prefix = 'cui'\r\n    return [\r\n        new CuiIconComponent(prefix),\r\n        new CuiTooltipComponent(prefix),\r\n        new CuiCircleComponent(prefix),\r\n        new CuiSpinnerComponent(prefix),\r\n        new CuiOpenComponent(prefix),\r\n        new CuiCloseComponent(prefix),\r\n        new CuiDialogComponent(prefix),\r\n        new CuiOffCanvasComponent(prefix),\r\n        new CuiAccordionComponent(prefix),\r\n        new CuiDropComponenet(prefix),\r\n        new CuiSwitchComponent(prefix),\r\n        new CuiSwitcherComponent(prefix),\r\n        new CuiSliderComponent(prefix),\r\n    ]\r\n}\r\n\r\nexport function getUsedPlugins(): ICuiPlugin[] {\r\n    return [\r\n        new CuiAutoLightModePlugin({ autoLight: true }),\r\n        new CuiAutoPrintModePlugin({ autoPrint: false }),\r\n        new CuiToastPlugin({}),\r\n        new CuiAlertsPlugin()\r\n    ]\r\n}"],"sourceRoot":""}