{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/ui/components/home/list.tsx","webpack:///./src/core/helpers.ts","webpack:///./src/ui/components/home/home.tsx","webpack:///./src/ui/error.tsx","webpack:///./src/ui/components/common/NavbarLink.tsx","webpack:///./src/ui/components/navbar/navbar.tsx","webpack:///./src/ui/components/offacanvas/offcanvas.tsx","webpack:///./src/core/models.ts","webpack:///./src/core/statics.ts","webpack:///./src/app/flow/actions.ts","webpack:///./src/ui/components/common/BpdActionIcon.tsx","webpack:///./src/core/validators.ts","webpack:///./src/ui/components/common/BpdDialog.tsx","webpack:///./src/ui/components/common/ErrorsList.tsx","webpack:///./src/ui/components/actions/AddActionDialog.tsx","webpack:///./src/ui/components/actions/StopwatchActionsComponent.tsx","webpack:///./src/ui/components/common/GoBack.tsx","webpack:///./src/ui/components/common/NotFound.tsx","webpack:///./src/ui/components/actions/ActionsSelect.tsx","webpack:///./src/ui/components/trainings/EditRoundDialog.tsx","webpack:///./src/ui/components/trainings/EditRoundListItem.tsx","webpack:///./src/ui/components/trainings/EditTraining.tsx","webpack:///./src/api/stopwatch/stopwatch.ts","webpack:///./src/ui/components/perform/PerformTraining.tsx","webpack:///./src/ui/app.tsx","webpack:///./src/core/services/storage.tsx","webpack:///./src/app/flow/trainings.ts","webpack:///./src/index.tsx"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","0","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","TrainingList","props","className","list","map","item","id","TrainingListItem","onDelete","React","deleteSubscription","$flow","subscribe","finish","perform","unsubscribe","rounds","to","cui-icon","data-tooltip","onClick","validateStopwatchAction","action","duration","type","showMessage","title","message","$cui","alert","calcDisplayTimer","seconds","getDisplayTimerValue","restSeconds","Math","floor","secondsLeft","Home","state","updateList","onDeleteTrainingComplete","deleteTraining","this","subscription","onDeleteSubscription","elementIdx","findIndex","onYes","flag","setState","NoTrainings","ErrorRoute","NavbarLink","shouldClose","emit","exact","activeClassName","url","Navbar","currentLocation","useLocation","currentSite","split","pathname","toLocaleUpperCase","cui-open","class","OffCanvas","cui-off-canvas","href","cui-close","StopwatchActionType","DefaultActions","removable","editable","ERROR_CODES","ACTIONS_FLOW_ACTIONS","ActionsFlow","service","getAllActions","setAction","removeAction","BpdActionIcon","ValidatorBase","status","errors","performValidation","e","console","error","TrainingValidator","isNotObject","isEmptyString","isEmptyArray","RoundValidator","actions","ActionValidator","BpdDialog","cui-dialog","body","footer","ErrorsList","index","AddActionDialog","setErrors","onValueChange","event","target","checked","placeholder","onChange","min","max","htmlFor","onSave","actionValidator","validate","dialogCui","StopwatchActionsComponent","current","onGetAll","onAddOrEditClick","getAllSub","$actionsFlow","setActionSub","removeActionSub","cui-item-height","withRouter","history","goBack","NotFound","classes","ActionsSelect","ev","onSelect","find","EditRoundDialog","useState","selected","setActions","definedActions","round","newActions","onDeleteAction","validation","EditRoundListItem","reduce","onEdit","EditTrainingSection","training","currentIndex","currentRound","setDefinedActions","onRoundEdit","onRoundDelete","updateRoundsState","onFormChange","includes","getDefinedActions","log","getDefinedActionsSub","rows","description","onCancel","validaton","join","updateOrInsertRound","useParams","onUpdateTraining","onGetTraining","updateTrainingSub","getTrainingSub","StopWatchStateOptions","StopWatch","undefined","callback","setTimeout","tick","stop","clearTimeout","defaultCurrent","roundIdx","actionIdx","PerfromTraining","stopwatch","setStopwatch","setCurrent","timer","startBtnCls","getStartBtnCls","timerCls","watchState","setWatchState","currentRef","trainingRef","roundValidator","setDefaultCurrentState","getClassByType","onStopwatchTick","currentTime","ct","setStopWatchState","getState","reset","nextActionIdx","newAction","nextRoundIdx","newRound","setNextAction","watchstate","time","getTrainingSubscription","onTick","pause","resume","start","src","App","path","component","EditTraining","TrainingsStorageService","BpdStorage","getTrainings","onAction","len","addTraining","idx","Error","res","getAny","setAny","setTrainings","ActionStorageService","getActionsFromStorage","existingIndex","getIndex","setActionsToStorage","val","TrainingsFlow","getAllTrainings","updateTraining","getTraining","rootElement","document","getElementById","app_icons","require","setup","CuiSetupInit","logLevel","root","cuiSetup","icons","CuiIconsPack","traningsFlow","actionsFlow","FlowFactory","getActions","cuiInit","init","then","ReactDOM"],"mappings":"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","file":"stopwatch.index.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([31,1]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as React from \"react\";\r\nimport { Training } from \"../../../core/models\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport interface TrainingListProps {\r\n    list: Training[];\r\n    onDelete: (id: number) => void;\r\n}\r\n\r\nexport interface TrainingListItemProps {\r\n    data: Training;\r\n    onDelete: (id: number) => void;\r\n}\r\n\r\nexport function TrainingList(props: TrainingListProps) {\r\n    return <ul className=\"cui-list\">\r\n        {props.list && props.list.map(item => {\r\n            return <li key={item.id}><TrainingListItem data={item} onDelete={props.onDelete} /></li>\r\n        })}\r\n    </ul>\r\n}\r\n\r\nexport function TrainingListItem(props: TrainingListItemProps) {\r\n    const deleteTrainingAction = \"DELETE_TRAINING\"\r\n    function onDelete() {\r\n        if (props.onDelete) {\r\n            props.onDelete(props.data.id)\r\n        }        // window.$cui.alert(\"delete-training-dialog\", \"YesNoCancel\", {\r\n        //     title: \"Delete training\",\r\n        //     message: \"Do you really want to delete training: \" + props.data.name + \"?\",\r\n        //     onYes: () => {\r\n\r\n        //         window.$flow.perform(deleteTrainingAction, props.data.id)\r\n        //     }\r\n        // })\r\n\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const deleteSubscription = window.$flow.subscribe(deleteTrainingAction).finish((result) => {\r\n            window.$flow.perform(\"GET_TRAININGS\")\r\n        });\r\n\r\n        return () => {\r\n            window.$flow.unsubscribe(deleteTrainingAction, deleteSubscription.id)\r\n        }\r\n    })\r\n\r\n    return <div className=\"cui-flex animation-fade-in\">\r\n        <div className=\"cui-flex-grow\">\r\n            <span className=\"cui-text-bold cui-text-large\">{props.data.name}</span>\r\n            <div className=\"\">\r\n                <span>Rounds: {props.data.rounds.length}</span>\r\n            </div>\r\n        </div>\r\n        <div className=\"cui-flex-shrink cui-flex-center\">\r\n            <ul className=\"cui-icon-nav\">\r\n                <li><Link to={`/trainings/perform/${props.data.id}`} className=\"cui-icon cui-accent cui-tooltip\" cui-icon=\"media_play\" data-tooltip=\"Start training\"></Link></li>\r\n                <li><Link to={`/trainings/edit/${props.data.id}`} className=\"cui-icon\" cui-icon=\"edit\"></Link></li>\r\n                <li><a onClick={onDelete} className=\"cui-icon\" cui-icon=\"trash\"></a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n}\r\n","import { StopwatchActionType, StopwatchAction, Training } from \"./models\";\r\n\r\nexport function validateStopwatchAction(action: StopwatchAction): boolean {\r\n    if (!action || !action.name || !action.duration || !action.type) {\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\n\r\nexport function validateTraining(training: Training) {\r\n    return training && training.name && training.name !== \"\" && training.rounds && training.rounds.length > 0;\r\n}\r\n\r\nexport function showMessage(title: string, message: string) {\r\n    window.$cui.alert(\"common-info-dialog\", \"Info\", {\r\n        title: title,\r\n        message: message\r\n    })\r\n}\r\n\r\nexport function calculateDuration(actions: StopwatchAction[]) {\r\n    return actions && actions.length > 0 ? actions.reduce<number>((result: number, value: StopwatchAction) => {\r\n        return result + value.duration;\r\n    }, 0) : 0\r\n}\r\n\r\nexport function calcDisplayTimer(seconds: number): string {\r\n    if (seconds < 0) {\r\n        return \"Error\"\r\n    }\r\n    if (seconds < 60) {\r\n        return \"00:\" + getDisplayTimerValue(seconds)\r\n    } else if (seconds < 3600) {\r\n        let minutes = Math.floor(seconds / 60);\r\n        let restSeconds = seconds % 60;\r\n        return getDisplayTimerValue(minutes) + \":\" + getDisplayTimerValue(restSeconds);\r\n    } else {\r\n        let hours = Math.floor(seconds / 3600);\r\n        let secondsLeft = seconds % 3600\r\n        return getDisplayTimerValue(hours) + \":\" + calcDisplayTimer(secondsLeft);\r\n    }\r\n}\r\n\r\nexport function getDisplayTimerValue(value: number): string {\r\n    if (value < 0 || value > 59) {\r\n        return \"Error\";\r\n    }\r\n    return value < 10 ? \"0\" + value : \"\" + value;\r\n}","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { TrainingList } from \"./list\";\r\nimport { Training, WarmUp, CoolDown, Exercise } from \"../../../core/models\";\r\nimport { FlowTask } from \"../../../../node_modules/bpd-flow/dist/index\";\r\nimport { showMessage } from \"../../../core/helpers\";\r\n\r\nexport interface HomeProps {\r\n    site?: string;\r\n}\r\n\r\nexport interface HomeState {\r\n    list: Training[];\r\n}\r\n\r\nexport class Home extends React.Component<any, HomeState> {\r\n    list: Training[];\r\n    subscription: FlowTask<Training[]>\r\n    onDeleteSubscription: FlowTask<boolean>;\r\n    state: HomeState;\r\n    constructor(props: HomeProps) {\r\n        super(props);\r\n        this.state = {\r\n            list: []\r\n        }\r\n\r\n        this.updateList = this.updateList.bind(this);\r\n        this.onDeleteTrainingComplete = this.onDeleteTrainingComplete.bind(this);\r\n        this.deleteTraining = this.deleteTraining.bind(this);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.subscription = window.$flow.subscribe(\"GET_ALL_TRAININGS\");\r\n        this.subscription.finish(this.updateList);\r\n        this.onDeleteSubscription = window.$flow.subscribe(\"DELETE_TRAINING\", { finish: this.onDeleteTrainingComplete })\r\n        window.$flow.perform(\"GET_ALL_TRAININGS\");\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.$flow.unsubscribe(\"GET_ALL_TRAININGS\", this.subscription.id);\r\n        window.$flow.unsubscribe(\"DELETE_TRAINING\", this.onDeleteSubscription.id);\r\n    }\r\n\r\n    deleteTraining(id: number) {\r\n        let list = [...this.state.list];\r\n        let elementIdx = list.findIndex(item => item.id === id);\r\n        if (elementIdx > -1) {\r\n            window.$cui.alert(\"delete-training-dialog\", \"YesNoCancel\", {\r\n                title: \"Delete training\",\r\n                message: \"Do you really want to delete training: \" + list[elementIdx].name + \"?\",\r\n                onYes: () => {\r\n                    window.$flow.perform(\"DELETE_TRAINING\", id)\r\n                }\r\n            })\r\n        } else {\r\n            showMessage(\"Delete training\", \"We cannot remove this training. Identified doesn't match.\")\r\n        }\r\n\r\n\r\n    }\r\n\r\n    onDeleteTrainingComplete(flag: boolean) {\r\n        if (flag) {\r\n            window.$flow.perform(\"GET_ALL_TRAININGS\");\r\n        } else {\r\n            showMessage(\"Delete training\", \"Service could not remove training\")\r\n        }\r\n    }\r\n\r\n    updateList(list: Training[]) {\r\n        this.setState({\r\n            ...this.state,\r\n            list: list\r\n        });\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return <div className=\"stopwatch-page-layout cui-accent\" >\r\n            <div className=\"stopwatch-page-top cui-container cui-center\">\r\n                <div>\r\n                    <span className=\"cui-icon cui-dark\" cui-icon=\"stopwatch\"></span>\r\n                    <h1 className=\"cui-h1 cui-text-center cui-text-dark\">Stopwatch</h1>\r\n                </div>\r\n            </div>\r\n            <div className=\"stopwatch-page-bottom cui-card cui-overflow-y-auto stopwatch-content-width\">\r\n                <div className=\"cui-card-header\">\r\n                    <span className=\"cui-card-title cui-text-muted\">Your trainings</span>\r\n                </div>\r\n                <div className=\"cui-card-body\" >\r\n                    {this.state.list.length > 0 ? <TrainingList list={this.state.list} onDelete={this.deleteTraining} /> : <NoTrainings />}\r\n                </div>\r\n            </div>\r\n            <div className=\"cui-position-float cui-position-bottom cui-position-right cui-margin\">\r\n                <Link to=\"/trainings/edit/new\" className=\"cui-icon-button cui-default\" cui-icon=\"plus\"></Link>\r\n            </div>\r\n        </div>;\r\n    }\r\n}\r\n\r\nexport function NoTrainings() {\r\n    return <div className=\"cui-container cui-center\">\r\n        <p className=\"cui-text-muted cui-text-center\">There are no trainings recorded. <Link className=\"cui-link cui-accent\" to=\"/trainings/edit/new\">Add new</Link> training to start your execises!</p>\r\n    </div>;\r\n}\r\n","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport interface ErrorProps {\r\n}\r\n\r\n// 'HelloProps' describes the shape of props.\r\n// State is never set so we use the '{}' type.\r\nexport class ErrorRoute extends React.Component<ErrorProps, {}> {\r\n    constructor(props: ErrorProps) {\r\n        super(props);\r\n    }\r\n    render() {\r\n        return <div className=\"cui-section cui-flex-center cui-height-viewport-1-2\">\r\n            <div className=\"cui-card cui-large\">\r\n                <div className=\"cui-card-header cui-text-error\">\r\n                    <span className=\"cui-card-title\">Error</span>\r\n                </div>\r\n                <div className=\"cui-card-body\">\r\n                    It appears that page you looking for does not exist.\r\n                    Try to look for it again or go back to our Home page\r\n                </div>\r\n                <div className=\"cui-card-footer cui-flex cui-right\">\r\n                    <Link to=\"/\" className=\"cui-link\">Go Home</Link>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    }\r\n}","import * as React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nexport interface NavbarLinkProps {\r\n    url: string;\r\n    name: string;\r\n    shouldClose?: boolean;\r\n    class?: string;\r\n}\r\n\r\nexport class NavbarLink extends React.Component<NavbarLinkProps, {}> {\r\n    constructor(props: NavbarLinkProps) {\r\n        super(props);\r\n        this.onClick = this.onClick.bind(this);\r\n    }\r\n\r\n    onClick() {\r\n        if (this.props.shouldClose) {\r\n            let offcanvas = window.$cui.get(\"#app-offcanvas\");\r\n            offcanvas.emit('close');\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <NavLink exact activeClassName=\"cui-active\" className={this.props.class} to={this.props.url} onClick={this.onClick}>{this.props.name}</NavLink>;\r\n    }\r\n}","import * as React from \"react\";\r\nimport { Link, useLocation } from \"react-router-dom\";\r\nimport { NavbarLink } from \"../common/NavbarLink\";\r\n\r\nexport interface NavbarState {\r\n    currentSite: string;\r\n}\r\n\r\nexport interface NavbarProps {\r\n    site?: string;\r\n    location?: any;\r\n}\r\n\r\nexport function Navbar(props: NavbarProps) {\r\n    const currentLocation = useLocation();\r\n    const [state, setState] = React.useState<NavbarState>({ currentSite: \"\" });\r\n    React.useEffect(() => {\r\n        let split = currentLocation.pathname.split('/');\r\n        setState({\r\n            currentSite: split.length > 1 ? currentLocation.pathname.split('/')[1].toLocaleUpperCase() : \"\"\r\n        })\r\n    }, [currentLocation])\r\n    return <nav className={\"cui-navbar cui-transparent cui-sticky stopwatch-layout-navigation\"}>\r\n        <div className=\"cui-navbar-left cui-width-1-1 cui-width-auto--m cui-flex cui-middle cui-between\" id=\"navbar-left\">\r\n            <ul>\r\n                {state.currentSite && <li><Link className=\"cui-icon\" to=\"/\" cui-icon=\"stopwatch_small\"></Link></li>}\r\n            </ul>\r\n            <a className=\"cui-icon cui-padding cui-button cui-hidden--m\" cui-icon=\"menu\" cui-open=\"target: #app-offcanvas\"></a>\r\n        </div>\r\n\r\n        <ul className=\"cui-navbar-right cui-visible--m\">\r\n            <li><NavbarLink class=\"cui-navbar-item\" url=\"/\" name=\"Home\" /></li>\r\n            <li><NavbarLink class=\"cui-navbar-item\" url=\"/actions\" name=\"Actions\" /></li>\r\n        </ul>\r\n    </nav>\r\n}","import * as React from \"react\";\r\nimport { ElementManager } from \"../../../../node_modules/cui-light/dist/index\";\r\nimport { NavbarLink } from \"../common/NavbarLink\";\r\n\r\nexport interface OffCanvasProps {\r\n}\r\n\r\n// 'HelloProps' describes the shape of props.\r\n// State is never set so we use the '{}' type.\r\nexport class OffCanvas extends React.Component<OffCanvasProps, {}> {\r\n    offcanvas: ElementManager;\r\n    constructor(props: OffCanvasProps) {\r\n        super(props);\r\n    }\r\n\r\n    render() {\r\n        return <div className=\"cui-off-canvas\" id=\"app-offcanvas\" cui-off-canvas=\"escClose: y; outClose: y\">\r\n            <div className=\"cui-off-canvas-container cui-card off-canvas-layout\">\r\n                <div className=\"cui-card-header cui-flex cui-middle cui-right\">\r\n                    <a href=\"#\" className=\"cui-icon\" cui-icon=\"close\" cui-close=\"\"></a>\r\n                </div>\r\n                <div className=\"off-canvas-content cui-card-body\">\r\n\r\n                    <div className=\"cui-width-1-1\">\r\n                        <h3 className=\"cui-h3\">Menu</h3>\r\n                        <ul className=\"cui-list cui-interactive cui-margin-top\">\r\n                            <li><NavbarLink url=\"/\" name=\"Home\" shouldClose={true} /></li>\r\n                            <li><NavbarLink url=\"/actions\" name=\"Actions\" shouldClose={true} /></li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    }\r\n}","export const StopwatchActionType = {\r\n    EXERCISE: 'exercise',\r\n    BREAK: 'break',\r\n    COOLDOWN: \"cooldown\",\r\n    WARMUP: \"warmup\"\r\n}\r\n\r\nexport interface StopwatchAction {\r\n    name: string;\r\n    duration: number;\r\n    type?: string;\r\n    color?: string;\r\n    removable?: boolean;\r\n    editable?: boolean;\r\n}\r\n\r\nexport interface Round {\r\n    actions: StopwatchAction[];\r\n    break?: number;\r\n}\r\n\r\nexport interface Training {\r\n    name: string;\r\n    description?: string;\r\n    id?: number;\r\n    rounds: Round[];\r\n}\r\n\r\nexport class Exercise implements StopwatchAction {\r\n    name: string;\r\n    duration: number;\r\n    type: string = StopwatchActionType.EXERCISE;\r\n    removable: false;\r\n    constructor(duration: number, name?: string) {\r\n        this.duration = duration;\r\n        this.name = name ? name : 'Exercise';\r\n    }\r\n}\r\n\r\nexport class WarmUp implements StopwatchAction {\r\n    name: string;\r\n    duration: number;\r\n    type: string = StopwatchActionType.WARMUP;\r\n    removable: boolean = false;\r\n\r\n    constructor(duration: number) {\r\n        this.duration = duration;\r\n        this.name = \"Warm Up\"\r\n    }\r\n}\r\n\r\nexport class CoolDown implements StopwatchAction {\r\n    name: string;\r\n    duration: number;\r\n    type: string = StopwatchActionType.COOLDOWN;\r\n    removable: false;\r\n    constructor(duration: number, name?: string) {\r\n        this.duration = duration;\r\n        this.name = name ? name : \"Cooldown\";\r\n    }\r\n}","import { StopwatchAction, StopwatchActionType } from \"./models\";\r\n\r\nexport const DefaultActions: StopwatchAction[] = [{\r\n    name: \"Warmup\",\r\n    duration: 5,\r\n    type: StopwatchActionType.WARMUP,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    name: \"Exercise\",\r\n    duration: 30,\r\n    type: StopwatchActionType.EXERCISE,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    name: \"Break\",\r\n    duration: 60,\r\n    type: StopwatchActionType.BREAK,\r\n    removable: false,\r\n    editable: false\r\n},\r\n{\r\n    name: \"Cooldown\",\r\n    duration: 90,\r\n    type: StopwatchActionType.WARMUP,\r\n    removable: false,\r\n    editable: false\r\n}]\r\n\r\nexport const ERROR_CODES = {\r\n    e0000: \"OK\",\r\n    e0100: \"Training is empty\",\r\n    e0101: \"Training name is not provided\",\r\n    e0102: \"Training has no rounds\",\r\n    e0200: \"Round is empty\",\r\n    e0201: \"Round has no actions\",\r\n    e0300: \"Action is empty\",\r\n    e0301: \"Action name is not provided\",\r\n    e0302: \"Action type is not provided\",\r\n    e0303: \"Action duration is not correct\"\r\n\r\n}","import { IActionsService } from \"../../core/services/interfaces\"\r\nimport { StopwatchAction } from \"../../core/models\";\r\n\r\nexport const ACTIONS_FLOW_ACTIONS = {\r\n    GET_ALL: \"GET_ALL\",\r\n    SET_ACTION: \"SET_ACTION\",\r\n    REMOVE_ACTION: \"REMOVE_ACTION\"\r\n}\r\n\r\nexport type ActionsFlowInput = StopwatchAction;\r\nexport type ActionsFlowOutput = boolean | StopwatchAction[];\r\n\r\nexport class ActionsFlow {\r\n    #service: IActionsService;\r\n    constructor(service: IActionsService) {\r\n        this.#service = service;\r\n    }\r\n    getActions() {\r\n        return {\r\n            [ACTIONS_FLOW_ACTIONS.GET_ALL]: () => {\r\n                return this.#service.getAllActions();\r\n            },\r\n            [ACTIONS_FLOW_ACTIONS.SET_ACTION]: (action: StopwatchAction) => {\r\n                return this.#service.setAction(action);\r\n            },\r\n            [ACTIONS_FLOW_ACTIONS.REMOVE_ACTION]: (action: StopwatchAction) => {\r\n                return this.#service.removeAction(action);\r\n            }\r\n        }\r\n    }\r\n}","import * as React from 'react'\r\n\r\nexport interface BpdActionIconProps {\r\n    type: string;\r\n}\r\n\r\nexport function BpdActionIcon(props: BpdActionIconProps) {\r\n    return (\r\n        <span className=\"cui-icon cui-tooltip\" data-tooltip={props.type} cui-icon={`stopwatch_${props.type}`}></span>\r\n    );\r\n}\r\n","import { is } from \"../../node_modules/cui-light/dist/index\";\r\nimport { Round, StopwatchAction, Training } from \"./models\";\r\nimport { ERROR_CODES } from \"./statics\";\r\n\r\nexport interface ValidationResult {\r\n    status: boolean;\r\n    errors?: string[];\r\n}\r\n\r\nexport interface IValidator<T> {\r\n    validate(t: T): ValidationResult\r\n}\r\n\r\nexport abstract class ValidatorBase<T> implements IValidator<T> {\r\n    validate(t: T): ValidationResult {\r\n        const result: ValidationResult = { status: true }\r\n        try {\r\n            let errors = this.performValidation(t);\r\n            if (errors && errors.length > 0) {\r\n                result.status = false;\r\n                result.errors = errors;\r\n            }\r\n        } catch (e) {\r\n            console.error(\"An error occured during validation\")\r\n            console.error(e)\r\n            result.status = false;\r\n            result.errors = [\"Error during validation: \" + e.message]\r\n        }\r\n        return result;\r\n    }\r\n\r\n    protected abstract performValidation(t: T): string[];\r\n}\r\n\r\nexport class TrainingValidator extends ValidatorBase<Training> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: Training): string[] {\r\n        if (isNotObject(t)) {\r\n            return ([ERROR_CODES.e0100]);\r\n        }\r\n        let errors = []\r\n        if (isEmptyString(t.name)) {\r\n            errors.push(ERROR_CODES.e0101)\r\n        }\r\n        if (isEmptyArray(t.rounds)) {\r\n            errors.push(ERROR_CODES.e0102)\r\n        }\r\n        return errors;\r\n    }\r\n\r\n}\r\n\r\n\r\nexport class RoundValidator extends ValidatorBase<Round> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: Round): string[] {\r\n        if (isNotObject(t)) {\r\n            return ([ERROR_CODES.e0200]);\r\n        }\r\n        if (isEmptyArray(t.actions))\r\n            return [ERROR_CODES.e0201]\r\n    }\r\n}\r\n\r\nexport class ActionValidator extends ValidatorBase<StopwatchAction> {\r\n    constructor() {\r\n        super();\r\n    }\r\n\r\n    protected performValidation(t: StopwatchAction): string[] {\r\n        if (isNotObject(t)) {\r\n            return ([ERROR_CODES.e0300]);\r\n        }\r\n        let errors = []\r\n        if (isEmptyString(t.name)) {\r\n            errors.push(ERROR_CODES.e0301)\r\n        }\r\n        if (isEmptyString(t.type)) {\r\n            errors.push(ERROR_CODES.e0302)\r\n        }\r\n        if (t.duration < 0) {\r\n            errors.push(ERROR_CODES.e0303)\r\n        }\r\n        return errors;\r\n    }\r\n}\r\n\r\nfunction isEmptyArray<T>(t: T[]) {\r\n    return isNotObject(t) || t.length === 0;\r\n}\r\n\r\nfunction isNotObject<T>(t: T) {\r\n    return !t || t === null;\r\n}\r\n\r\nfunction isEmptyString(t: string) {\r\n    return isNotObject(t) || t === \"\";\r\n}","import * as React from 'react'\r\n\r\nexport interface BpdDialogProps {\r\n    title: string;\r\n    id: string;\r\n    body?: JSX.Element;\r\n    footer?: JSX.Element;\r\n}\r\n\r\nexport function BpdDialog(props: BpdDialogProps) {\r\n    React.useEffect(() => {\r\n    }, [props])\r\n    return (<div className=\"cui-dialog\" cui-dialog=\"escClose: Y\" id={props.id}>\r\n        <div className=\"cui-dialog-container\">\r\n            <div className=\"cui-dialog-header\">\r\n                <span className=\"cui-dialog-title\">{props.title}</span>\r\n                <a className=\"cui-icon\" cui-icon=\"close\" cui-close=\"\"></a>\r\n            </div>\r\n            <div className=\"cui-dialog-body\">\r\n                {props.body}\r\n            </div>\r\n\r\n            {props.footer && (<div className=\"cui-dialog-footer\">\r\n                {props.footer}\r\n            </div>)}\r\n\r\n        </div>\r\n    </div>)\r\n}\r\n","import * as React from 'react'\r\n\r\nexport interface ErrorsListProps {\r\n    errors: string[];\r\n}\r\n\r\n\r\nexport function ErrorsList(props: ErrorsListProps) {\r\n    return (\r\n        <>\r\n            {props.errors &&\r\n                props.errors.length > 0 &&\r\n                <ul className=\"cui-list\">\r\n                    {\r\n                        props.errors.map((error: string, index: number) => {\r\n                            return <li key={index} className=\"cui-animation-fade-in\"><span className=\"cui-text-error\">{error}</span></li>\r\n                        })\r\n                    }\r\n                </ul>}\r\n        </>\r\n    );\r\n}\r\n","import * as React from \"react\";\r\nimport { StopwatchAction, StopwatchActionType } from \"../../../core/models\";\r\nimport { ActionValidator } from \"../../../core/validators\";\r\nimport { BpdDialog } from \"../common/BpdDialog\";\r\nimport { ErrorsList } from \"../common/ErrorsList\";\r\n\r\nexport interface AddActionDialogProps {\r\n    action: StopwatchAction;\r\n    onSave: (action: StopwatchAction) => void;\r\n}\r\n\r\nexport function AddActionDialog(props: AddActionDialogProps) {\r\n    const [state, setState] = React.useState<StopwatchAction>({\r\n        name: \"\",\r\n        duration: 5,\r\n        removable: true,\r\n        editable: false,\r\n        type: StopwatchActionType.EXERCISE\r\n    })\r\n\r\n    const [errors, setErrors] = React.useState<string[]>([])\r\n\r\n    function onValueChange(event: any) {\r\n        let name = event.target.name;\r\n\r\n        switch (name) {\r\n            case \"name\":\r\n            case \"duration\":\r\n            case \"type\":\r\n                setState({ ...state, [name]: event.target.value })\r\n                break;\r\n            case \"removable\":\r\n            case \"editable\":\r\n                setState({ ...state, [name]: event.target.checked })\r\n                break;\r\n        }\r\n    }\r\n\r\n    function onSave() {\r\n        if (props.onSave) {\r\n            let action: StopwatchAction = { ...state };\r\n            let actionValidator = new ActionValidator().validate(action)\r\n            if (actionValidator.status) {\r\n                let dialogCui = window.$cui.get(\"#add-action-dialog\");\r\n                props.onSave(action);\r\n                dialogCui.emit('close');\r\n            }\r\n            setErrors(actionValidator.errors);\r\n        }\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        if (props.action) {\r\n            setState({\r\n                ...props.action\r\n            })\r\n            setErrors([]);\r\n        }\r\n        return () => {\r\n\r\n        }\r\n    }, [props.action])\r\n    return (<BpdDialog\r\n        title=\"Add new\"\r\n        id=\"add-action-dialog\"\r\n        body={<>\r\n            <div className=\"cui-form\">\r\n                <label className=\"cui-form-label\">Name</label>\r\n                <input className=\"cui-input stopwatch-input-width\" type=\"text\" name=\"name\" value={state.name} placeholder=\"Name\" onChange={onValueChange} />\r\n            </div>\r\n            <div className=\"cui-form cui-margin-top\">\r\n                <label className=\"cui-form-label\">Duration</label>\r\n                <input className=\"cui-input stopwatch-input-width\" type=\"number\" min=\"0\" max=\"100\" name=\"duration\" value={state.duration} placeholder=\"Duration\" onChange={onValueChange} />\r\n            </div>\r\n            <div className=\"cui-form cui-margin-top\">\r\n                <label className=\"cui-form-label\">Type</label>\r\n                <select className=\"cui-select stopwatch-input-width\" value={state.type} name=\"type\" onChange={onValueChange} >\r\n                    <option value=\"warmup\">Warmup</option>\r\n                    <option value=\"exercise\">Exercise</option>\r\n                    <option value=\"break\">Break</option>\r\n                    <option value=\"cooldown\">Cooldown</option>\r\n                </select>\r\n            </div>\r\n            <div className=\"cui-form cui-margin-top\">\r\n                <input type=\"checkbox\" className=\"cui-checkbox\" id=\"checkbox-1-1\" name=\"removable\" checked={state.removable} onChange={onValueChange} />\r\n                <label htmlFor=\"checkbox-1-1\"> Removable</label>\r\n            </div>\r\n            <div className=\"cui-form cui-margin-top\">\r\n                <input type=\"checkbox\" className=\"cui-checkbox\" id=\"checkbox-1-2\" name=\"editable\" checked={state.editable} onChange={onValueChange} />\r\n                <label htmlFor=\"checkbox-1-2\"> Editable</label>\r\n            </div>\r\n            <ErrorsList errors={errors} />\r\n        </>\r\n        }\r\n        footer={\r\n            <div className=\"cui-flex cui-right\">\r\n                <button className=\"cui-button cui-default cui-margin-small-right\" cui-close=\"\">Cancel</button>\r\n                <button className=\"cui-button cui-accent\" onClick={onSave}>Save</button>\r\n            </div>\r\n        }\r\n    />);\r\n}","import * as React from 'react'\r\nimport { StopwatchAction, StopwatchActionType } from '../../../core/models';\r\nimport { DefaultActions } from '../../../core/statics';\r\nimport { validateStopwatchAction } from '../../../core/helpers';\r\nimport { ACTIONS_FLOW_ACTIONS } from '../../../app/flow/actions';\r\nimport { BpdActionIcon } from '../common/BpdActionIcon';\r\nimport { AddActionDialog } from './AddActionDialog';\r\n\r\n\r\nexport interface BpdDialogState {\r\n    action: StopwatchAction;\r\n}\r\n\r\nexport interface StopWatchActionsState {\r\n    actions: StopwatchAction[];\r\n    current: StopwatchAction;\r\n}\r\n\r\n\r\n\r\nexport function StopwatchActionsComponent() {\r\n    const [state, setState] = React.useState<StopWatchActionsState>({\r\n        actions: [...DefaultActions],\r\n        current: null\r\n    })\r\n\r\n\r\n\r\n    function onDialogSave(action: StopwatchAction) {\r\n        if (validateStopwatchAction(action)) {\r\n            window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.SET_ACTION, action);\r\n        }\r\n    }\r\n\r\n    function onDelete(action: StopwatchAction) {\r\n        window.$cui.alert(\"delete-action-dialog\", \"YesNoCancel\", {\r\n            title: \"Delete action\",\r\n            message: \"Do you really want to delete action: \" + action.name,\r\n            onYes: () => {\r\n                window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.REMOVE_ACTION, action);\r\n            }\r\n        })\r\n    }\r\n\r\n    function onGetAll(actions: StopwatchAction[]) {\r\n        setState({\r\n            ...state,\r\n            actions: [...DefaultActions, ...actions]\r\n        })\r\n    }\r\n\r\n    function onAddOrEditClick(action?: StopwatchAction) {\r\n        setState({\r\n            ...state,\r\n            current: action\r\n        })\r\n        let dialogCui = window.$cui.get(\"#add-action-dialog\");\r\n        dialogCui.emit('open');\r\n\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const getAllSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, { finish: onGetAll })\r\n        const setActionSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.SET_ACTION)\r\n        const removeActionSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.REMOVE_ACTION)\r\n        window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.GET_ALL);\r\n        return () => {\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, getAllSub.id);\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.SET_ACTION, setActionSub.id);\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.REMOVE_ACTION, removeActionSub.id);\r\n        }\r\n    }, [state.actions])\r\n\r\n    return (<><div className=\"cui-container stopwatch-content-width\">\r\n        <div className=\"stopwatch-page-header cui-container cui-center\">\r\n            <div>\r\n                <h1 className=\"cui-h1 cui-text-center\">Activities</h1>\r\n                <p className=\"cui-text-center\">Define activies which you want to perform in trainings!</p>\r\n            </div>\r\n        </div>\r\n        <div className=\"cui-margin-top cui-flex-grid cui-flex-grid-match cui-child-width-1-1-s cui-child-width-1-3--m\" cui-item-height=\"130px\">\r\n            {state.actions && state.actions.map((action: StopwatchAction, index: number) => {\r\n                return (\r\n                    <div key={index} className=\"cui-animation-fade-in\">\r\n                        <div className=\"cui-card cui-default\">\r\n                            <div className=\"cui-card-header cui-flex cui-between\">\r\n                                <span className=\"cui-card-title\">{action.name}</span>\r\n                                <BpdActionIcon type={action.type} />\r\n                            </div>\r\n                            <div className=\"cui-card-body\">\r\n                                <div className=\"cui-flex cui-middle\">\r\n                                    <div className=\"cui-flex-grow\">\r\n                                        <div className=\"cui-text-muted\">Duration: <span>{action.duration} seconds</span></div>\r\n                                    </div>\r\n                                    <div className=\"cui-flex-shrink\">\r\n                                        <ul className=\"cui-icon-nav\">\r\n                                            {action.editable && <li><a className=\"cui-icon\" cui-icon=\"edit\" onClick={() => onAddOrEditClick(action)}></a></li>}\r\n                                            {action.removable && <li><a className=\"cui-icon\" cui-icon=\"trash\" onClick={() => onDelete(action)}></a></li>}\r\n                                        </ul>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>)\r\n            })}\r\n            <div className=\"actions-add-new-button\">\r\n                <div className=\"cui-flex-center cui-card\">\r\n                    <button className=\"cui-icon cui-button\" cui-icon=\"plus\" onClick={() => { onAddOrEditClick() }}><span className=\"cui-margin-small-left\"> Add new</span></button>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n        <AddActionDialog action={state.current} onSave={onDialogSave} /></>);\r\n}\r\n","import * as React from 'react'\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nfunction GoBack(props: any) {\r\n    const { history } = props;\r\n    return (<button className=\"cui-button cui-accent\" onClick={() => history.goBack()}>Go Back</button>)\r\n}\r\n\r\n\r\nexport default withRouter(GoBack);","import * as React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport GoBack from \"./GoBack\";\r\n\r\nexport interface NotFoundProps {\r\n    message: string;\r\n    classes?: string;\r\n    goBack?: boolean;\r\n}\r\n\r\nexport function NotFound(props: NotFoundProps) {\r\n    return (<div className={props.classes}>\r\n        <h2 className=\"cui-h2 cui-text-center cui-text-error\">{props.message}</h2>\r\n        <div className=\"\">\r\n            <div className=\"cui-flex cui-center\">\r\n                <Link to=\"/\" className=\"cui-button cui-margin-small-right\">Go Home</Link>\r\n                {props.goBack ?? <GoBack />}\r\n            </div>\r\n        </div>\r\n\r\n    </div>);\r\n}","import * as React from 'react'\r\nimport { StopwatchAction } from '../../../core/models';\r\nexport interface ActionsSelectProps {\r\n    actions: StopwatchAction[];\r\n    id: string;\r\n    name: string;\r\n    className?: string;\r\n    value?: string;\r\n    onSelect: (action: StopwatchAction) => void;\r\n}\r\nexport function ActionsSelect(props: ActionsSelectProps) {\r\n    function onChange(ev: any) {\r\n        if (props.onSelect) {\r\n            let name = ev.target.value;\r\n            props.onSelect(props.actions.find(item => item.name === name))\r\n        }\r\n    }\r\n    return (\r\n        <select className={\"cui-select \" + props.className} name={props.name} id={props.id} onChange={onChange} value={props.value}>\r\n            {props.actions && props.actions.map((action: StopwatchAction) => {\r\n                return <option key={action.name} value={action.name}>{action.name} (Type: {action.type}, Duration: {action.duration})</option>\r\n            })}\r\n        </select>\r\n    );\r\n}\r\n","import * as React from \"react\";\r\nimport { useState } from \"react\";\r\nimport { ACTIONS_FLOW_ACTIONS } from \"../../../app/flow/actions\";\r\nimport { Round, StopwatchAction } from \"../../../core/models\";\r\nimport { RoundValidator } from \"../../../core/validators\";\r\nimport { ActionsSelect } from \"../actions/ActionsSelect\";\r\nimport { BpdActionIcon } from \"../common/BpdActionIcon\";\r\nimport { BpdDialog } from \"../common/BpdDialog\";\r\n\r\nexport interface EditRoundDialogProps {\r\n    onSave: (round: Round, index: number) => void;\r\n    definedActions: StopwatchAction[];\r\n    round: Round;\r\n    index: number;\r\n}\r\n\r\nexport interface EditRoundDialogState {\r\n    actions?: StopwatchAction[];\r\n    selected: StopwatchAction;\r\n    errors: string[];\r\n}\r\n\r\nexport function EditRoundDialog(props: EditRoundDialogProps) {\r\n    const [state, setState] = useState<EditRoundDialogState>({\r\n        actions: [],\r\n        selected: null,\r\n        errors: []\r\n    })\r\n\r\n    function onSave() {\r\n        if (props.onSave) {\r\n            let round: Round = { actions: [...state.actions] }\r\n            let validation = new RoundValidator().validate(round);\r\n            if (validation.status) {\r\n                props.onSave(round, props.index);\r\n                return;\r\n            }\r\n            setState({\r\n                ...state,\r\n                errors: validation.errors\r\n            })\r\n\r\n        }\r\n    }\r\n\r\n    function onActionSelectChange(action: StopwatchAction) {\r\n        if (action) {\r\n            setState({\r\n                ...state,\r\n                selected: action\r\n            })\r\n        }\r\n    }\r\n\r\n    function onAddAction() {\r\n        if (state.selected) {\r\n            setActions([...state.actions, state.selected])\r\n        }\r\n    }\r\n\r\n    function onDeleteAction(index: number) {\r\n        let newActions = [...state.actions];\r\n        newActions.splice(index, 1);\r\n        setActions(newActions)\r\n    }\r\n\r\n    function setActions(actions: StopwatchAction[]) {\r\n        setState({\r\n            actions: actions,\r\n            selected: props.definedActions[0],\r\n            errors: []\r\n        })\r\n    }\r\n    React.useEffect(() => {\r\n        setActions(props.round && props.round !== null ? props.round.actions : []);\r\n\r\n        return () => {\r\n        }\r\n    }, [props.round, props.definedActions])\r\n    return (<BpdDialog\r\n        id=\"edit-round-dialog\"\r\n        title=\"Edit Round\"\r\n        body={<>\r\n            <ul className=\"cui-list\">\r\n                {state.actions && state.actions.map((item: StopwatchAction, index: number) => {\r\n                    return <li key={index} className=\"animation-fade-in\" >\r\n                        <div className=\"cui-flex cui-middle\">\r\n                            <div className=\"cui-flex-grow\">\r\n                                <div className=\"cui-flex cui-middle\">\r\n                                    <div className=\"cui-flex-center cui-margin-right\">\r\n                                        <BpdActionIcon type={item.type} />\r\n                                    </div>\r\n                                    <div className=\"cui-flex-grow\">\r\n                                        <div className=\"\">{item.name}</div>\r\n                                        <div className=\"cui-text-muted\">Lasts {item.duration} seconds</div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                            </div>\r\n                            <ul className=\"cui-icon-nav\">\r\n                                <li><a className=\"cui-icon\" cui-icon=\"trash\" onClick={() => { onDeleteAction(index) }}></a></li>\r\n                            </ul>\r\n                        </div>\r\n                    </li>\r\n                })}\r\n                <li>\r\n                    <div className=\"cui-flex cui-middle cui-nowrap\">\r\n                        <div className=\"cui-flex-grow\">\r\n                            <ActionsSelect id=\"round-action-select\" className=\"cui-width-1-2\" name=\"action\" value={state.selected?.name} actions={props.definedActions} onSelect={onActionSelectChange} />\r\n                        </div>\r\n                        <div className=\"\">\r\n                            <a cui-icon=\"plus\" className=\"cui-icon-button\" onClick={onAddAction}></a>\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n            {state.errors && state.errors.length > 0 && <ul className=\"cui-list \">\r\n                {state.errors.map((error: string, index: number) => {\r\n                    return <li key={index} className=\"cui-animation-slide-in\"><span className=\"cui-text-error\">{error}</span></li>\r\n                })}\r\n            </ul>}\r\n        </>\r\n        }\r\n        footer={\r\n            <div className=\"cui-flex cui-right\" >\r\n                <button className=\"cui-button cui-margin-small-right\" cui-close=\"\">Cancel</button>\r\n                <button className=\"cui-button cui-accent\" onClick={onSave}>Save</button>\r\n            </div >\r\n        }\r\n    />)\r\n}","import * as React from 'react';\r\nimport { calculateDuration } from '../../../core/helpers';\r\nimport { Round } from \"../../../core/models\";\r\n\r\ninterface RoundListItemProps {\r\n    round: Round;\r\n    index: number;\r\n    onEdit: (round: Round, index: number) => void;\r\n    onDelete: (round: Round, index: number) => void;\r\n}\r\n\r\nexport function EditRoundListItem(props: RoundListItemProps) {\r\n\r\n    return (\r\n        <div className=\"cui-flex cui-middle cui-nowrap\">\r\n            <div className=\"cui-flex-grow\">\r\n                <div><span className=\"cui-text-bold\">Round {props.index}</span></div>\r\n                <div className=\"cui-text-muted\"><span >{props.round.actions.length} actions, {calculateDuration(props.round.actions)} seconds of total length</span></div>\r\n\r\n            </div>\r\n\r\n            <ul className=\"cui-icon-nav cui-flex-shrink\">\r\n                <li><a className=\"cui-icon\" cui-icon=\"edit\" onClick={() => { props.onEdit(props.round, props.index) }}></a></li>\r\n                <li><a className=\"cui-icon\" cui-icon=\"trash\" onClick={() => { props.onDelete(props.round, props.index) }}></a></li>\r\n            </ul>\r\n        </div>\r\n    );\r\n}","import * as React from 'react'\r\nimport { useParams, withRouter } from 'react-router-dom';\r\nimport { ElementManager } from '../../../../node_modules/cui-light/dist/index';\r\nimport { ACTIONS_FLOW_ACTIONS } from '../../../app/flow/actions';\r\nimport { showMessage, validateTraining } from '../../../core/helpers';\r\nimport { Round, StopwatchAction, Training } from '../../../core/models';\r\nimport { DefaultActions } from '../../../core/statics';\r\nimport { RoundValidator, TrainingValidator } from '../../../core/validators';\r\nimport { NotFound } from '../common/NotFound';\r\nimport { EditRoundDialog } from './EditRoundDialog';\r\nimport { EditRoundListItem } from './EditRoundListItem';\r\n\r\nexport interface EditTrainingSectionProps {\r\n    training: Training;\r\n    onSave: (training: Training) => void;\r\n    onCancel: () => void;\r\n}\r\n\r\n\r\nexport interface EditTrainingProps {\r\n    history: any;\r\n}\r\n\r\ninterface EditTrainingState {\r\n    training: Training;\r\n}\r\n\r\ninterface EditTrainingSectionState {\r\n    training: Training;\r\n\r\n    currentIndex: number;\r\n    currentRound: Round;\r\n}\r\n\r\ninterface EditTrainingDefinedActions {\r\n    actions: StopwatchAction[];\r\n}\r\n\r\nfunction EditTraining(props: EditTrainingProps) {\r\n    const [state, setState] = React.useState<EditTrainingState>({\r\n        training: {\r\n            name: \"\",\r\n            rounds: []\r\n        }\r\n    })\r\n\r\n    const { id } = useParams();\r\n\r\n\r\n    function getTraining() {\r\n        if (id) {\r\n            window.$flow.perform(\"GET_TRAINING\", id);\r\n        }\r\n    }\r\n\r\n    function onUpdateTraining(result: boolean): void {\r\n        if (!result) {\r\n            showMessage(\"Fail\", \"Training was not saved\")\r\n        } else {\r\n            if (props.history) {\r\n                props.history.goBack();\r\n            }\r\n        }\r\n    }\r\n\r\n    function onCancel() {\r\n        if (props.history) {\r\n            props.history.goBack();\r\n        }\r\n    }\r\n\r\n    function onGetTraining(training: Training): void {\r\n        if (training) {\r\n            setState({\r\n                training: { ...training }\r\n            })\r\n        } else {\r\n            showMessage(\"Fail\", \"Training was not found\")\r\n        }\r\n    }\r\n\r\n\r\n\r\n    function saveTraining(training: Training) {\r\n        window.$flow.perform(\"UPDATE_TRAINING\", training)\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        console.log(\"Parent redraw\")\r\n        const updateTrainingSub = window.$flow.subscribe(\"UPDATE_TRAINING\", { finish: onUpdateTraining })\r\n        const getTrainingSub = window.$flow.subscribe(\"GET_TRAINING\", { finish: onGetTraining })\r\n\r\n        getTraining();\r\n\r\n        return () => {\r\n            window.$flow.unsubscribe(\"UPDATE_TRAINING\", updateTrainingSub.id);\r\n            window.$flow.unsubscribe(\"GET_TRAINING\", getTrainingSub.id);\r\n\r\n        }\r\n    }, [state.training.id])\r\n\r\n    return (<>\r\n        <div className=\"cui-container stopwatch-content-width\">\r\n            <div className=\"stopwatch-page-header cui-container cui-center\">\r\n                <div>\r\n                    <h1 className=\"cui-h1 cui-text-center\">Define training</h1>\r\n                    <p className=\"cui-text-center\">Customize your training settings</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div className=\"\">\r\n            {state.training ?\r\n                <EditTrainingSection training={state.training} onSave={saveTraining} onCancel={onCancel} /> :\r\n                <NotFound message=\"The training you looking for could not be found\" classes=\"\" />}\r\n        </div>\r\n    </>);\r\n}\r\n\r\n\r\nfunction EditTrainingSection(props: EditTrainingSectionProps) {\r\n    const [state, setState] = React.useState<EditTrainingSectionState>({\r\n        training: props.training,\r\n        currentIndex: -1,\r\n        currentRound: null\r\n    })\r\n\r\n    const [definedActions, setDefinedActions] = React.useState<EditTrainingDefinedActions>({\r\n        actions: []\r\n    })\r\n\r\n\r\n    function onRoundEdit(round: Round, index: number) {\r\n        setState({\r\n            ...state,\r\n            currentIndex: index,\r\n            currentRound: round\r\n        })\r\n        window.$cui.get(\"#edit-round-dialog\").emit(\"open\")\r\n        //rounds[index] = \r\n    }\r\n\r\n    function onRoundDelete(round: Round, index: number) {\r\n        window.$cui.alert(\"delete-round-dialog\", \"YesNoCancel\", {\r\n            title: \"Delete round\",\r\n            message: \"Do you really want to delete this round?\",\r\n            onYes: () => {\r\n                let rounds = [...state.training.rounds]\r\n                rounds.splice(index, 1)\r\n                updateRoundsState(rounds)\r\n            }\r\n        })\r\n    }\r\n\r\n    function onTrainingSave() {\r\n        if (props.onSave) {\r\n            let validaton = new TrainingValidator().validate(state.training);\r\n            if (validaton.status) {\r\n                props.onSave(state.training)\r\n            } else {\r\n                showMessage(\"Training not valid\", validaton.errors.join(\", \"))\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n    function onRoundSave(round: Round, index: number) {\r\n        // let validation = new RoundValidator().validate(round);\r\n        //   if (validation.status) {\r\n        updateRoundsState(updateOrInsertRound(round, index));\r\n        window.$cui.get(\"#edit-round-dialog\").emit(\"close\");\r\n        // } else {\r\n        // alert(validation.errors.join('\\n'))\r\n        // }\r\n\r\n    }\r\n\r\n    function updateOrInsertRound(round: Round, index: number) {\r\n        let rounds = []\r\n        if (index > -1) {\r\n            rounds = [...state.training.rounds];\r\n            rounds[index] = round;\r\n        } else {\r\n            rounds = [...state.training.rounds, round];\r\n        }\r\n        return rounds;\r\n    }\r\n\r\n    function updateRoundsState(rounds: Round[]) {\r\n        setState({\r\n            ...state,\r\n            training: {\r\n                ...state.training,\r\n                rounds: rounds\r\n            }\r\n        })\r\n    }\r\n\r\n    function onFormChange(ev: any) {\r\n        let name = ev.target.name;\r\n        if (['name', 'description'].includes(name)) {\r\n            setState({\r\n                ...state,\r\n                training: {\r\n                    ...state.training,\r\n                    [name]: ev.target.value\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    function getDefinedActions(actions: StopwatchAction[]) {\r\n        setDefinedActions({\r\n            actions: [...DefaultActions, ...actions]\r\n        })\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        console.log(\"Edit redraw\")\r\n\r\n        const getDefinedActionsSub = window.$actionsFlow.subscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, { finish: getDefinedActions });\r\n        window.$actionsFlow.perform(ACTIONS_FLOW_ACTIONS.GET_ALL);\r\n        setState({\r\n            ...state,\r\n            training: props.training\r\n        })\r\n        return () => {\r\n            window.$actionsFlow.unsubscribe(ACTIONS_FLOW_ACTIONS.GET_ALL, getDefinedActionsSub.id)\r\n        }\r\n    }, [props])\r\n\r\n    return (<>\r\n        <div className=\"cui-container stopwatch-content-width cui-flex-grid cui-child-width-1-1 cui-child-width-1-2--m\">\r\n            <div className=\"cui-padding-small-right\">\r\n                <h3 className=\"cui-h3 cui-text-muted\">Common</h3>\r\n                <div className=\"cui-form\">\r\n                    <label htmlFor=\"\" className=\"cui-form-label\">Name</label>\r\n                    <input type=\"text\" className=\"cui-input stopwatch-input-width\" placeholder=\"Name\" name=\"name\" value={state.training.name} onChange={onFormChange} />\r\n                </div>\r\n                <div className=\"cui-form cui-margin-top\">\r\n                    <label htmlFor=\"\" className=\"cui-form-label\">Description</label>\r\n                    <textarea className=\"cui-textarea stopwatch-input-width stopwatch-text-area\" placeholder=\"Description\" name=\"description\" rows={5} value={state.training.description} onChange={onFormChange}></textarea>\r\n                </div>\r\n            </div>\r\n            <div className=\"cui-padding-small-left\">\r\n                <h3 className=\"cui-h3 cui-text-muted\">Rounds (total count: {state.training.rounds.length})</h3>\r\n                <ul className=\"cui-list\">\r\n                    {state.training && state.training.rounds.map((round: Round, index: number) => {\r\n                        return <li key={index} className=\"animation-fade-in\"><EditRoundListItem index={index} round={round} onEdit={onRoundEdit} onDelete={onRoundDelete} /></li>\r\n                    })}\r\n                    <li>\r\n                        <button className=\"cui-button cui-icon cui-width-1-1\" cui-icon=\"plus\" onClick={() => {\r\n                            onRoundEdit(null, -1);\r\n                        }}><span className=\"cui-margin-small-left\">Add New</span></button>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div className=\"cui-container stopwatch-content-width cui-flex cui-right\">\r\n            <button className=\"cui-button cui-margin-small-right\" onClick={() => { props.onCancel() }}>Cancel</button>\r\n            <button className=\"cui-button cui-accent\" onClick={onTrainingSave}>Save</button>\r\n        </div>\r\n        <EditRoundDialog index={state.currentIndex} round={state.currentRound} onSave={onRoundSave} definedActions={definedActions.actions} />\r\n    </>);\r\n}\r\n\r\nexport default withRouter(EditTraining);","export const StopWatchStateOptions: any = {\r\n    RUNNING: \"RUNNING\",\r\n    STOPPED: \"STOPPED\",\r\n    PAUSED: \"PAUSED\",\r\n}\r\n\r\nexport type StopWatchState = \"RUNNING\" | 'PAUSED' | \"STOPPED\";\r\n\r\nexport interface StopwatchCallback {\r\n    (current: number, stopWatch: StopWatch): boolean;\r\n}\r\n\r\nexport interface IStopWatch {\r\n    start(): boolean;\r\n    stop(): boolean;\r\n    pause(): boolean;\r\n    resume(): boolean;\r\n    finish(): void;\r\n    getState(): StopWatchState;\r\n}\r\n\r\nexport class StopWatch implements IStopWatch {\r\n    #callback: StopwatchCallback;\r\n    current: number;\r\n    #isReset: boolean;\r\n    #state: StopWatchState;\r\n    #id: any;\r\n    constructor() {\r\n        this.current = 0;\r\n        this.#isReset = false;\r\n        this.#state = StopWatchStateOptions.STOPPED;\r\n        this.#id = undefined;\r\n    }\r\n\r\n    onTick(callback: StopwatchCallback) {\r\n        this.#callback = callback;\r\n    }\r\n\r\n    tick() {\r\n        this.#id = setTimeout(() => {\r\n            try {\r\n                if (this.#state === StopWatchStateOptions.RUNNING && this.#callback(this.current, this)) {\r\n                    if (this.#isReset) {\r\n                        this.current = 0;\r\n                        this.#isReset = false;\r\n                    } else {\r\n                        this.current += 1;\r\n                    }\r\n\r\n                    this.tick();\r\n                } else if (this.#state !== StopWatchStateOptions.PAUSED) {\r\n                    this.stop();\r\n                }\r\n            } catch (e) {\r\n                console.error(\"An error occured on stopwatch tick\")\r\n                console.error(e)\r\n                this.stop();\r\n            }\r\n        }, 1000)\r\n    }\r\n\r\n    tickCallback() {\r\n        try {\r\n            if (this.#state === StopWatchStateOptions.RUNNING && this.#callback(this.current, this)) {\r\n                console.log(\"tick\");\r\n                if (this.#isReset) {\r\n                    this.current = 0;\r\n                    this.#isReset = false;\r\n                } else {\r\n                    this.current += 1;\r\n                }\r\n\r\n                this.tick();\r\n            } else if (this.#state !== StopWatchStateOptions.PAUSED) {\r\n                this.stop();\r\n            }\r\n        } catch (e) {\r\n            console.error(\"An error occured on stopwatch tick\")\r\n            console.error(e)\r\n            this.stop();\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.#isReset = true;\r\n    }\r\n\r\n    start(): boolean {\r\n        if (this.#state === StopWatchStateOptions.RUNNING) {\r\n            return false;\r\n        }\r\n        console.log(\"Starting stopwatch\")\r\n        this.current = 0;\r\n        this.#state = StopWatchStateOptions.RUNNING;\r\n        this.tick();\r\n        return true;\r\n    }\r\n\r\n    stop(): boolean {\r\n        if (this.#state === StopWatchStateOptions.RUNNING) {\r\n            console.log(\"Stopping stopwatch\")\r\n            this.finish();\r\n            this.#state = StopWatchStateOptions.STOPPED;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    pause(): boolean {\r\n        if (this.#state === StopWatchStateOptions.RUNNING) {\r\n            console.log(\"Pausing stopwatch\")\r\n            this.#state = StopWatchStateOptions.PAUSED;\r\n            return true\r\n        }\r\n        return false;\r\n    }\r\n\r\n    resume() {\r\n        if (this.#state === StopWatchStateOptions.PAUSED) {\r\n            console.log(\"Resuming stopwatch\")\r\n            this.#state = StopWatchStateOptions.RUNNING;\r\n            this.tick();\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    finish(): void {\r\n        if (this.#id) {\r\n            clearTimeout(this.#id);\r\n            this.#id = undefined;\r\n        }\r\n    }\r\n    getState() {\r\n        return this.#state;\r\n    }\r\n}","import * as React from 'react'\r\nimport { useParams } from 'react-router-dom';\r\nimport { FlowTask } from '../../../../node_modules/bpd-flow/dist/index';\r\nimport { StopWatch, StopWatchState, StopWatchStateOptions } from '../../../api/stopwatch/stopwatch';\r\nimport { TestApi } from '../../../api/test/test';\r\nimport { calcDisplayTimer, showMessage } from '../../../core/helpers';\r\nimport { Round, StopwatchAction, Training } from '../../../core/models';\r\nimport { ActionValidator, RoundValidator, TrainingValidator } from '../../../core/validators';\r\nimport { NotFound } from '../common/NotFound';\r\nimport { RoundListItem } from '../edit/list';\r\nimport { useStopwatch } from './hook';\r\n\r\ninterface PerfromTrainingStateCls {\r\n    training: Training;\r\n    round: Round;\r\n    roundIdx: number;\r\n    action: StopwatchAction;\r\n    actionIdx: number;\r\n    timer: string;\r\n    state: StopWatchState;\r\n    stopwatch: StopWatch;\r\n}\r\n\r\ninterface PerfromTrainingState {\r\n    training: Training;\r\n}\r\n\r\ninterface CurrentTrainingState {\r\n    round: Round;\r\n    roundIdx: number;\r\n    action: StopwatchAction;\r\n    actionIdx: number;\r\n    class: string;\r\n}\r\n\r\ninterface StopwatchState {\r\n    timer: string;\r\n    state: StopWatchState;\r\n    startBtnCls: string;\r\n    timerCls: string;\r\n}\r\n\r\nconst defaultCurrent: CurrentTrainingState = {\r\n    round: undefined,\r\n    roundIdx: -1,\r\n    actionIdx: -1,\r\n    action: undefined,\r\n    class: \"\"\r\n}\r\n\r\nexport function PerfromTraining() {\r\n    const [state, setState] = React.useState<PerfromTrainingState>({\r\n        training: undefined,\r\n    })\r\n\r\n    const [stopwatch, setStopwatch] = React.useState<StopWatch>(undefined)\r\n    const [current, setCurrent] = React.useState<CurrentTrainingState>(defaultCurrent)\r\n\r\n    const [watchState, setWatchState] = React.useState<StopwatchState>({\r\n        timer: \"00:00\",\r\n        state: StopWatchStateOptions.STOPPED,\r\n        startBtnCls: getStartBtnCls(StopWatchStateOptions.STOPPED),\r\n        timerCls: \"\"\r\n    })\r\n\r\n\r\n    const { id } = useParams();\r\n\r\n    const currentRef = React.useRef(current);\r\n    currentRef.current = current;\r\n    const trainingRef = React.useRef(state.training);\r\n    trainingRef.current = state.training;\r\n\r\n    function onGetTraining(training: Training) {\r\n        let validation = new TrainingValidator().validate(training);\r\n        if (!validation.status) {\r\n            showMessage(\"Incorrect training\", `Training is not correct: ${validation.errors.join(\", \")}`)\r\n            return;\r\n        }\r\n        let roundValidator = new RoundValidator().validate(training.rounds[0]);\r\n        if (!roundValidator.status) {\r\n            showMessage(\"Incorrect training\", `Training is not correct: ${roundValidator.errors.join(\", \")}`)\r\n            return;\r\n        }\r\n        let actionValidator = new ActionValidator().validate(training.rounds[0].actions[0]);\r\n        if (!actionValidator.status) {\r\n            showMessage(\"Incorrect training\", `Training is not correct: ${actionValidator.errors.join(\", \")}`)\r\n            return;\r\n        }\r\n        setState({\r\n            ...state,\r\n            training: training,\r\n        })\r\n        setDefaultCurrentState(training);\r\n    }\r\n\r\n\r\n    function setDefaultCurrentState(training: Training) {\r\n        let round = training.rounds[0];\r\n        let action = round.actions[0];\r\n        setCurrent({\r\n            roundIdx: 0,\r\n            round: round,\r\n            action: action,\r\n            actionIdx: 0,\r\n            class: getClassByType(action.type)\r\n        })\r\n    }\r\n\r\n    function setNextAction(): boolean {\r\n        let nextActionIdx = currentRef.current.actionIdx + 1;\r\n        if (currentRef.current.round.actions.length > nextActionIdx) {\r\n            let newAction = currentRef.current.round.actions[nextActionIdx]\r\n            setCurrent({\r\n                ...currentRef.current,\r\n                actionIdx: nextActionIdx,\r\n                action: newAction,\r\n                class: getClassByType(newAction.type)\r\n            })\r\n            return true;\r\n        }\r\n        let nextRoundIdx = currentRef.current.roundIdx + 1;\r\n        if (trainingRef.current.rounds.length > nextRoundIdx) {\r\n            let newRound = trainingRef.current.rounds[nextRoundIdx];\r\n            let newAction = newRound.actions[0];\r\n            setCurrent({\r\n                round: newRound,\r\n                roundIdx: nextRoundIdx,\r\n                actionIdx: 0,\r\n                action: newAction,\r\n                class: getClassByType(newAction.type)\r\n            })\r\n            return true;\r\n        }\r\n        setDefaultCurrentState(trainingRef.current);\r\n        return false;\r\n    }\r\n\r\n    function onStopwatchTick(currentTime: number, stopwatch: StopWatch): boolean {\r\n        let ct = currentRef.current.action.duration - currentTime;\r\n        if (currentTime === 0) {\r\n            //playSound();\r\n        }\r\n        if (ct > 0) {\r\n            setStopWatchState(stopwatch.getState(), ct)\r\n            if (ct > 0 && ct <= 3) {\r\n                //  playSound();\r\n            }\r\n            return true;\r\n        } else {\r\n            stopwatch.reset();\r\n            setStopWatchState(StopWatchStateOptions.RUNNING, 0)\r\n            if (!setNextAction()) {\r\n                setStopWatchState(StopWatchStateOptions.STOPPED)\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\n    function onStartClick() {\r\n        if (watchState.state === StopWatchStateOptions.STOPPED && stopwatch.start()) {\r\n            setStopWatchState(StopWatchStateOptions.RUNNING);\r\n        } else if (watchState.state !== StopWatchStateOptions.STOPPED && stopwatch.stop()) {\r\n            setStopWatchState(StopWatchStateOptions.STOPPED, 0);\r\n            setDefaultCurrentState(state.training);\r\n        }\r\n    }\r\n\r\n    function onPauseClick() {\r\n        if (watchState.state === StopWatchStateOptions.RUNNING && stopwatch.pause()) {\r\n            setStopWatchState(StopWatchStateOptions.PAUSED);\r\n        } else if (watchState.state === StopWatchStateOptions.PAUSED && stopwatch && stopwatch.resume()) {\r\n            setStopWatchState(StopWatchStateOptions.RUNNING);\r\n        }\r\n    }\r\n\r\n    function setStopWatchState(watchstate: StopWatchState, time?: number) {\r\n        if (typeof time === 'undefined' || time === null || time < 0) {\r\n            setWatchState({\r\n                ...watchState,\r\n                state: watchstate,\r\n                startBtnCls: getStartBtnCls(watchstate)\r\n            })\r\n        } else {\r\n            setWatchState({\r\n                timer: calcDisplayTimer(time),\r\n                timerCls: getTimerCls(time),\r\n                state: watchstate,\r\n                startBtnCls: getStartBtnCls(watchstate)\r\n            })\r\n        }\r\n    }\r\n\r\n    function playSound() {\r\n        let note = document.getElementById(\"note-sound\") as HTMLAudioElement;\r\n        note.currentTime = 0;\r\n        note.play();\r\n    }\r\n\r\n\r\n    function getClassByType(type: string) {\r\n        switch (type) {\r\n            case 'warmup':\r\n                return \"cui-text-success\";\r\n            case 'break':\r\n                return \"scui-text-error\";\r\n            case 'exercise':\r\n                return \"cui-text-accent\";\r\n            case 'cooldown':\r\n                return \"cui-text-secondar\";\r\n            default:\r\n                return \"\";\r\n        }\r\n    }\r\n\r\n    function getTimerCls(timer: number): string {\r\n        return timer > 0 && timer <= 3 ? \"cui-text-warning timer-blink-animation\" : \"\";\r\n    }\r\n\r\n    function getStartBtnCls(state: StopWatchState) {\r\n        console.log(state)\r\n        return state !== StopWatchStateOptions.STOPPED ? \"cui-error\" : \"cui-accent\";\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        const getTrainingSubscription = window.$flow.subscribe(\"GET_TRAINING\", { finish: onGetTraining })\r\n        let stop = new StopWatch();\r\n        stop.onTick(onStopwatchTick);\r\n        setStopwatch(stop);\r\n        if (id > -1) {\r\n            window.$flow.perform(\"GET_TRAINING\", id)\r\n\r\n        }\r\n        return () => {\r\n            window.$flow.unsubscribe(\"GET_TRAINING\", getTrainingSubscription.id)\r\n            if (stopwatch)\r\n                stopwatch.finish();\r\n        }\r\n    }, [id])\r\n    return (<>\r\n        {!state.training ?\r\n            <NotFound message=\"We couldn't find training\" /> :\r\n            <div className=\"stopwatch-layout-content cui-flex-center \">\r\n                <div className=\"stopwatch-content-width cui-text-center animation-fade-in\">\r\n                    <h2 className=\"cui-h2 \">{state.training.name}</h2>\r\n                    <p>Round {current.roundIdx + 1} of {state.training.rounds.length}</p>\r\n\r\n                    <h1 className={\"cui-h1 cui-margin-remove-top \" + watchState.timerCls}>{watchState.timer}</h1>\r\n                    <div className=\"cui-text-bold\">{current.actionIdx + 1}</div>\r\n                    <h3 className={\"cui-h3 \" + current.class}>{current.action && current.action.name}</h3>\r\n                    <div className=\"cui-flex cui-center\">\r\n                        {watchState.state !== StopWatchStateOptions.STOPPED && <button className=\"cui-button cui-default cui-margin-small-right\" onClick={onPauseClick}>{watchState.state === StopWatchStateOptions.PAUSED ? \"Resume\" : \"Pause\"}</button>}\r\n                        <button className={\"cui-button \" + watchState.startBtnCls} onClick={onStartClick}>{watchState.state === StopWatchStateOptions.STOPPED ? \"Start\" : \"Stop\"}</button>\r\n                    </div>\r\n                    <p className=\"cui-text-muted\">{state.training.description}</p>\r\n                </div>\r\n                <audio id=\"note-sound\" src=\"/static/audio/pik.mp3\" />\r\n            </div>\r\n        }\r\n    </>);\r\n}\r\n","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { Switch, Route, BrowserRouter, useLocation } from \"react-router-dom\";\r\nimport { Home } from \"./components/home/home\";\r\nimport { ErrorRoute } from \"./error\";\r\nimport { Navbar } from \"./components/navbar/navbar\";\r\nimport { OffCanvas } from \"./components/offacanvas/offcanvas\";\r\nimport { Edit } from \"./components/edit/edit\";\r\nimport { StopwatchActionsComponent } from \"./components/actions/StopwatchActionsComponent\";\r\nimport EditTraining from \"./components/trainings/EditTraining\";\r\nimport { PerfromTraining } from \"./components/perform/PerformTraining\";\r\n\r\nexport interface AppProps {\r\n}\r\nexport interface AppState {\r\n    currentSite?: string;\r\n}\r\n\r\n// 'HelloProps' describes the shape of props.\r\n// State is never set so we use the '{}' type.\r\nexport class App extends React.Component<AppProps, AppState> {\r\n    constructor(props: AppProps) {\r\n        super(props);\r\n        this.state = {\r\n            currentSite: \"\"\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n    }\r\n\r\n    render() {\r\n        return <BrowserRouter>\r\n            <div className=\"stopwatch-layout-main\">\r\n                <Navbar />\r\n                <div className=\"stopwatch-layout-content\">\r\n                    <Switch>\r\n                        <Route path=\"/trainings/perform/:id\" component={PerfromTraining}></Route>\r\n                        <Route path=\"/trainings/edit/new\" component={EditTraining}></Route>\r\n                        <Route path=\"/trainings/edit/:id\" component={EditTraining}></Route>\r\n                        <Route path=\"/actions\" component={StopwatchActionsComponent}></Route>\r\n                        <Route path=\"/\" component={Home}></Route>\r\n                        <Route>\r\n                            <ErrorRoute />\r\n                        </Route>\r\n                    </Switch>\r\n                </div>\r\n                <OffCanvas />\r\n            </div></BrowserRouter>;\r\n    }\r\n}","import { ITrainingsService, IActionsService } from \"./interfaces\";\r\nimport { Training, StopwatchAction } from \"../models\";\r\nimport { BpdStorage } from \"../../../node_modules/bpd-storage/dist/index\";\r\nimport { validateStopwatchAction } from \"../helpers\";\r\nimport { TaskedEventEmitHandler } from \"../../../node_modules/cui-light/dist/index\";\r\n\r\nexport class TrainingsStorageService implements ITrainingsService {\r\n    #storage: BpdStorage;\r\n    #trainings: Training[];\r\n    #STORAGE_NAME: string;\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_TRAININGS\");\r\n        this.#STORAGE_NAME = \"Trainings\";\r\n        this.#trainings = [];\r\n    }\r\n\r\n\r\n    getAllTrainings(): Training[] {\r\n        console.log(\"Get All\")\r\n        return this.getTrainings();\r\n    }\r\n\r\n    addTraining(training: Training): boolean {\r\n        let result = false;\r\n        if (this.validate(training)) {\r\n            console.log(\"Add valid\")\r\n            this.onAction((t: Training[]) => {\r\n                console.log(\"Add on Action\")\r\n                let len = t.length\r\n                if (!training.id) {\r\n                    training.id = len > 0 ? t[len - 1].id + 1 : 0;\r\n                    t.push(training)\r\n\r\n                    result = true;\r\n                }\r\n                return result;\r\n            })\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n    updateTraining(training: Training): boolean {\r\n        let result = false;\r\n        if (this.validate(training)) {\r\n            if (!training.id || training.id < 0) {\r\n                result = this.addTraining(training)\r\n            } else {\r\n                this.onAction((t: Training[]) => {\r\n                    let idx = t.findIndex(item => item.id === training.id);\r\n                    if (idx > -1) {\r\n                        t[idx] = training;\r\n                        result = true;\r\n                    }\r\n                    return result;\r\n                })\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    deleteTraining(id: number): boolean {\r\n        let result = false;\r\n        if (id < 0) {\r\n            return false;\r\n        }\r\n        this.onAction((t: Training[]) => {\r\n            let idx = t.findIndex(item => item.id === id);\r\n            if (idx > -1) {\r\n                t.splice(idx, 1);\r\n                result = true;\r\n            }\r\n            return result;\r\n        })\r\n        return result;\r\n    }\r\n\r\n    getTraining(id: number): Training {\r\n        let training = undefined;\r\n        this.onAction((t) => {\r\n            training = t.find(item => { return item.id == id });\r\n            return false;\r\n        })\r\n        return training;\r\n    }\r\n\r\n    getCurrentTraining(): Training {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    setCurrentTraining(training: Training): void {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n    private getTrainings(): Training[] {\r\n        if (this.#trainings.length === 0) {\r\n            let res = this.#storage.getAny(this.#STORAGE_NAME);\r\n            this.#trainings = res ?? [];\r\n        }\r\n        return this.#trainings\r\n    }\r\n\r\n    private setTrainings(): void {\r\n        this.#storage.setAny(this.#STORAGE_NAME, this.#trainings);\r\n    }\r\n\r\n    private validate(training: Training): boolean {\r\n        return training && training.name && training.name.length > 0;\r\n    }\r\n\r\n    private onAction(callback: (t: Training[]) => boolean) {\r\n        let t = this.getTrainings();\r\n        if (callback(t)) {\r\n            this.setTrainings();\r\n        }\r\n    }\r\n}\r\n\r\nexport class ActionStorageService implements IActionsService {\r\n    #storage: BpdStorage;\r\n    #actions: StopwatchAction[];\r\n    constructor() {\r\n        this.#storage = new BpdStorage(\"local\", \"BPD_TRAININGS\");\r\n        this.getActionsFromStorage();\r\n    }\r\n    getAllActions(): StopwatchAction[] {\r\n        return [...this.#actions];\r\n    }\r\n\r\n    setAction(action: StopwatchAction): boolean {\r\n        if (!validateStopwatchAction(action)) {\r\n            return false;\r\n        }\r\n        let existingIndex = this.getIndex(action);\r\n        if (existingIndex > -1) {\r\n            this.#actions[existingIndex] = action;\r\n        } else {\r\n            this.#actions.push(action)\r\n        }\r\n        this.setActionsToStorage();\r\n        return true;\r\n    }\r\n\r\n    removeAction(action: StopwatchAction): boolean {\r\n        if (!validateStopwatchAction(action)) {\r\n            return false;\r\n        }\r\n\r\n        let existingIndex = this.getIndex(action);\r\n        if (existingIndex < 0) {\r\n            return false;\r\n        }\r\n        this.#actions.splice(existingIndex, 1);\r\n        this.setActionsToStorage();\r\n        return true;\r\n\r\n    }\r\n\r\n    private getIndex(action: StopwatchAction): number {\r\n        return this.#actions.findIndex(item => item.name === action.name);\r\n    }\r\n    private getActionsFromStorage() {\r\n        let val = this.#storage.getAny(\"ACTIONS\");\r\n        this.#actions = val;\r\n    }\r\n\r\n    private setActionsToStorage() {\r\n        this.#storage.setAny(\"ACTIONS\", this.#actions);\r\n    }\r\n}","import { Training } from \"../../core/models\";\r\nimport { ITrainingsService } from \"../../core/services/interfaces\";\r\n\r\nexport const ACTIONS = {\r\n    GET_ALL_TRAININGS: \"GET_ALL_TRAININGS\",\r\n    ADD_TRAINING: \"ADD_TRAINING\"\r\n}\r\n\r\nexport type TrainingsFlowInput = void | Training | number;\r\nexport type TrainingsFlowOutput = Training[] | Training | boolean;\r\n\r\nexport class TrainingsFlow {\r\n    #service: ITrainingsService;\r\n    constructor(service: ITrainingsService) {\r\n        this.#service = service;\r\n    }\r\n\r\n    getActions() {\r\n        return {\r\n            \"GET_ALL_TRAININGS\": () => {\r\n                return this.#service.getAllTrainings();\r\n            },\r\n            \"ADD_TRAINING\": (t: Training) => {\r\n                return this.#service.addTraining(t);\r\n            },\r\n            \"UPDATE_TRAINING\": (t: Training) => {\r\n                return this.#service.updateTraining(t);\r\n            },\r\n            \"DELETE_TRAINING\": (id: number) => {\r\n                return this.#service.deleteTraining(id);\r\n            },\r\n            \"GET_TRAINING\": (id: number) => {\r\n                return this.#service.getTraining(id);\r\n            },\r\n        }\r\n    }\r\n}","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport '../styles/styles.scss';\r\nimport { App } from \"./ui/app\";\r\nimport { CuiInit, CuiInitData, CuiSetupInit, CuiInstance } from \"../node_modules/cui-light/dist/index\";\r\nimport { CuiIconsPack } from '../node_modules/bpd-cui-icons/index';\r\nimport { Flow, FlowFactory } from '../node_modules/bpd-flow/dist/index';\r\nimport { TrainingsStorageService, ActionStorageService } from './core/services/storage';\r\nimport { TrainingsFlow, TrainingsFlowInput, TrainingsFlowOutput } from \"./app/flow/trainings\";\r\nimport { ActionsFlowInput, ActionsFlowOutput, ActionsFlow } from \"./app/flow/actions\";\r\nimport { StopWatch } from \"./api/stopwatch/stopwatch\";\r\nimport { TestApi } from \"./api/test/test\";\r\n\r\n\r\ndeclare global {\r\n    interface Window {\r\n        cuiInit: CuiInit;\r\n        $cui: CuiInstance;\r\n        $flow: Flow<any, any>;\r\n        $actionsFlow: Flow<ActionsFlowInput, ActionsFlowOutput>;\r\n    }\r\n}\r\n\r\nlet rootElement = document.getElementById('root');\r\nlet app_icons = require(\"../static/icons/all.json\");\r\nlet setup = new CuiSetupInit();\r\nsetup.logLevel = 'debug';\r\nsetup.root = rootElement;\r\nlet cuiSetup: CuiInitData = {\r\n    setup: setup,\r\n    icons: {\r\n        ...CuiIconsPack,\r\n        ...app_icons\r\n    }\r\n};\r\n\r\nlet service = new TrainingsStorageService();\r\nlet traningsFlow = new TrainingsFlow(service);\r\nlet actionsService = new ActionStorageService();\r\nlet actionsFlow = new ActionsFlow(actionsService);\r\n\r\nwindow.$flow = FlowFactory.create<TrainingsFlowInput, TrainingsFlowOutput>(traningsFlow.getActions());\r\nwindow.$actionsFlow = FlowFactory.create<ActionsFlowInput, ActionsFlowOutput>(actionsFlow.getActions());\r\n\r\nwindow.cuiInit.init(cuiSetup).then((result) => {\r\n    ReactDOM.render(<App />, rootElement);\r\n});\r\n\r\n"],"sourceRoot":""}