!function(e){function t(t){for(var i,o,c=t[0],s=t[1],u=t[2],f=0,d=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);for(l&&l(t);d.length;)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={0:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;a.push([45,1]),n()}({39:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var i=n(0),r=n(28),a=(n(39),n(10)),o=n(8),c=n(3);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l="SET_NAVBAR_TITLE",f="SET_NAVBAR_BG",d=new WeakMap,m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,d,t)}var t,n,i;return t=e,(n=[{key:"getActions",value:function(){var e,t=this;return s(e={},l,(function(e){return function(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}(t,d).setNavbarTitle(e)})),s(e,f,(function(e){return e})),e}}])&&u(t.prototype,n),i&&u(t,i),e}();var h="exercise",p="break",b="cooldown",v="warmup",g="draft",w="publish",y="new",E=[{id:"9996",name:"Warmup",duration:"5",type:v,removable:!1,editable:!1},{id:"9997",name:"Exercise",duration:"30",type:h,removable:!1,editable:!1},{id:"9998",name:"Break",duration:"60",type:p,removable:!1,editable:!1},{id:"9999",name:"Cooldown",duration:"90",type:b,removable:!1,editable:!1}],O="An error occured",N="Training is empty",k="Training name is not provided",j="Training has no rounds",x="Round is empty",S="Round has no actions",A="Round name is missing",T="Action is empty",C="Action name is not provided",I="Action type is not provided",P="Action duration is not correct";function D(e){return"Round "+e}var M={darkMode:!1,soundEnabled:!1,isWelcome:!1,simpleView:!1};function _(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function L(e,t){window.$cui.alert("common-info-dialog","Info",{title:e,message:t})}function R(e){window.$cui.toast(e)}function W(e){return Object(c.e)(e)?e.reduce((function(e,t){return e+Number.parseInt(t.duration)}),0):0}function F(e){return U(e,(function(e,t){switch(t){case"hour":return"".concat(e,"h");case"minute":return"".concat(e,"m");default:return"".concat(e,"s")}}))}function U(e,t){if(e<60)return t(e,"second");if(e<3600){var n=e%60;return t(Math.floor(e/60),"minute")+U(n,t)}var i=e%3600;return t(Math.floor(e/3600),"hours")+U(i,t)}function G(e){return e<0||e>59?"Error":e<10?"0"+e:""+e}function B(e){window.$cui&&window.$cui.getUtils().setLightMode(e?"dark":"light")}function V(e,t){return Math.floor(100*e/t)}function H(e){return e.rounds.reduce((function(e,t){return[e[0]+t.actions.length,e[1]+W(t.actions)]}),[0,0])}function z(e){return"action-background-"+e}function Y(e,t,n,i){if(!e||null===e||t<0)return e;var r=null!=i?i:1,a=e.length;if(a<2||t>=a)return _(e);var o=e.splice(t,r),c=a-r,s=n;return s<=0?[].concat(_(o),_(e)):s>=c?[].concat(_(e),_(o)):(e.splice.apply(e,[s,0].concat(_(o))),_(e))}function q(e,t){var n=[];if(e.warmup&&n.push(e.warmup),e.exercise)for(var i=0;i<t;i++)n.push(e.exercise),e.break&&i<t-1&&n.push(e.break);return e.cooldown&&n.push(e.cooldown),n}function Q(e){Object(c.e)(e)?document.title="".concat("bpd Stopwatch"," - ").concat(e):document.title="bpd Stopwatch"}function K(e){window.$push.perform(l,e)}function X(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var J=new WeakMap,Z=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),J.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,J,t)}var t,n,i;return t=e,(n=[{key:"getRoute",value:function(e){return Object(c.e)(e)?function(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}(this,J)[e]:void 0}},{key:"getUrl",value:function(e){var t=this.getRoute(e);return Object(c.e)(t)?t.url:void 0}},{key:"getName",value:function(e){var t=this.getRoute(e);return Object(c.e)(t)?t.name:void 0}},{key:"renderUrl",value:function(e,t){var n=this.getUrl(e);return Object(c.e)(t)?(Object(c.d)(t,(function(e,t){n=n.replace(":"+e,t)})),n):n}}])&&X(t.prototype,n),i&&X(t,i),e}())({home:{url:"/",name:"Home",icon:"home"},about:{url:"/about",name:"About",icon:"info"},settings:{url:"/settings",name:"Settings",icon:"settings"},actions:{url:"/actions",name:"Actions",icon:"home"},help:{url:"/help",name:"Help",icon:"emoji_smile"},newTraining:{url:"/trainings/edit/new",name:"New Training"},editTraining:{url:"/trainings/edit/:id",name:"Edit Training"},perform:{url:"/trainings/perform/:id",name:"Perform Training"}});function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ne(e){return i.createElement("ul",{className:"cui-list cui-hover"},e.list&&e.list.map((function(t,n){return i.createElement("li",{key:t.id,className:"stopwatch-content-width cui-corner-round"},i.createElement(ie,{data:t,onDelete:e.onDelete,index:n}))})))}function ie(e){var t,n,r=Object(o.f)();return i.useEffect((function(){var e=window.$flow.subscribe("DELETE_TRAINING").finish((function(e){window.$flow.perform("GET_TRAININGS")}));return function(){window.$flow.unsubscribe("DELETE_TRAINING",e.id)}})),i.createElement("div",{className:"cui-flex cui-middle cui-animation-fade-in cui-padding-bottom cui-padding-top"},i.createElement("div",{className:"cui-flex-grow",onClick:function(){r.push(Z.renderUrl("perform",{id:e.data.id}))}},i.createElement("div",{className:"cui-flex cui-middle cui-nowrap"},i.createElement("div",{className:"training-list-item-icon"},i.createElement("span",{className:"cui-text-bold"},e.data.name[0].toUpperCase())),i.createElement("div",{className:"cui-flex-grow cui-margin-left"},i.createElement("span",null,e.data.name),i.createElement("div",{className:"cui-text-muted cui-text-truncate cui-overflow-hidden"},i.createElement("span",null,(t=e.data,(n=ee(function(e){return e.rounds.reduce((function(e,t){return[e[0]+t.actions.length,e[1]+W(t.actions)]}),[0,0])}(t),2))[0],F(n[1]))))))),i.createElement("div",{className:"cui-flex-shrink"},i.createElement("div",null,i.createElement(a.b,{to:Z.renderUrl("editTraining",{id:e.data.id}),className:"cui-icon-button","cui-icon":"edit","cui-tooltip":"Edit training"}))))}function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e){return function(e){if(Array.isArray(e))return se(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=he(e);if(t){var r=he(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return de(this,n)}}function de(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?me(e):t}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(c,e);var t,n,r,o=fe(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),pe(me(t=o.call(this,e)),"list",void 0),pe(me(t),"subscription",void 0),pe(me(t),"onDeleteSubscription",void 0),pe(me(t),"state",void 0),t.state={list:[]},t.updateList=t.updateList.bind(me(t)),t.onDeleteTrainingComplete=t.onDeleteTrainingComplete.bind(me(t)),t.deleteTraining=t.deleteTraining.bind(me(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){Q("Home"),this.subscription=window.$flow.subscribe("GET_ALL_TRAININGS"),this.subscription.finish(this.updateList),this.onDeleteSubscription=window.$flow.subscribe("DELETE_TRAINING",{finish:this.onDeleteTrainingComplete}),window.$flow.perform("GET_ALL_TRAININGS")}},{key:"componentWillUnmount",value:function(){window.$flow.unsubscribe("GET_ALL_TRAININGS",this.subscription.id),window.$flow.unsubscribe("DELETE_TRAINING",this.onDeleteSubscription.id)}},{key:"deleteTraining",value:function(e){var t=ce(this.state.list),n=t.findIndex((function(t){return t.id===e}));n>-1?window.$cui.alert("delete-training-dialog","YesNoCancel",{title:"Delete training",message:"Do you really want to delete training: "+t[n].name+"?",onYes:function(){window.$flow.perform("DELETE_TRAINING",e)}}):L("Delete training","We cannot remove this training. Identified doesn't match.")}},{key:"onDeleteTrainingComplete",value:function(e){e?window.$flow.perform("GET_ALL_TRAININGS"):L("Delete training","Service could not remove training")}},{key:"updateList",value:function(e){this.setState(oe(oe({},this.state),{},{list:e}))}},{key:"render",value:function(){return i.createElement("div",{className:"stopwatch-page-layout"},i.createElement("div",{className:"stopwatch-page-top cui-container cui-center"},i.createElement("div",null,i.createElement("span",{className:"cui-icon stopwatch-icon","cui-icon":"stopwatch"}),i.createElement("h1",{className:"cui-h3 cui-text-center cui-margin-small-top stopwatch-title"},"Stopwatch"))),i.createElement("div",{className:"stopwatch-page-bottom"},i.createElement("div",{className:"stopwatch-home-list cui-overflow-y-auto"},this.state.list.length>0?i.createElement(ne,{list:this.state.list,onDelete:this.deleteTraining}):i.createElement(ve,null))),i.createElement("div",{className:"cui-position-float cui-position-bottom cui-position-center cui-margin-large-bottom app-float-bottom z-index-100"},i.createElement(a.b,{to:Z.renderUrl("newTraining"),className:"cui-icon-button cui-large cui-background-default cui-box-shadow","cui-icon":"plus"})))}}])&&ue(t.prototype,n),r&&ue(t,r),c}(i.Component);function ve(){return i.createElement("div",{className:"cui-container cui-center"},i.createElement("p",{className:"cui-text-muted cui-text-center"},"There are no trainings recorded. ",i.createElement(a.b,{className:"cui-link cui-accent",to:Z.renderUrl("newTraining")},"Add new")," training to start your execises!"))}function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ne(e);if(t){var r=Ne(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){return!t||"object"!==ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(c,e);var t,n,r,o=Ee(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),o.call(this,e)}return t=c,(n=[{key:"render",value:function(){return i.createElement("div",{className:"cui-section cui-flex-center cui-height-viewport-1-2"},i.createElement("div",{className:"cui-card cui-large"},i.createElement("div",{className:"cui-card-header cui-text-error"},i.createElement("span",{className:"cui-card-title"},"Error")),i.createElement("div",{className:"cui-card-body"},"It appears that page you looking for does not exist. Try to look for it again or go back to our Home page"),i.createElement("div",{className:"cui-card-footer cui-flex cui-right"},i.createElement(a.b,{to:"/",className:"cui-link"},"Go Home"))))}}])&&we(t.prototype,n),r&&we(t,r),c}(i.Component);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ie(e);if(t){var r=Ie(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Te(this,n)}}function Te(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?Ce(e):t}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(c,e);var t,n,r,o=Ae(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).onClick=t.onClick.bind(Ce(t)),t}return t=c,(n=[{key:"onClick",value:function(){this.props.shouldClose&&window.$cui.get("#app-offcanvas").emit("close")}},{key:"render",value:function(){return i.createElement(a.c,{exact:!0,activeClassName:"cui-active",className:this.props.class,to:this.props.url,onClick:this.onClick},this.props.isIcon?i.createElement(De,{name:this.props.name,icon:this.props.icon}):this.props.name)}}])&&xe(t.prototype,n),r&&xe(t,r),c}(i.Component);function De(e){return i.createElement("span",{className:"cui-flex cui-middle"},i.createElement("span",{"cui-icon":e.icon}),i.createElement("span",{className:"cui-margin-small-left"},e.name))}function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Re(e){var t=Object(o.g)(),n=$e(i.useState({currentSite:"",darkMode:!1,soundEnabled:!1}),2),r=(n[0],n[1],$e(i.useState(""),2)),c=r[0],s=r[1],u=function(e){var t=Me(i.useState(e),2),n=t[0],r=t[1];function a(e){r(e)}return i.useEffect((function(){var e=window.$push.subscribe(l,{finish:a});return function(){window.$push.unsubscribe(l,e.id)}})),n}(""),f=Object(o.f)();return i.useEffect((function(){var e=t.pathname.split("/");return s(e.length>1?e[1].toLocaleUpperCase():""),function(){}}),[t]),i.createElement("nav",{className:"cui-navbar cui-sticky cui-transparent stopwatch-layout-navigation"},i.createElement("div",{className:"cui-navbar-left cui-width-1-1 cui-width-auto--m cui-flex cui-middle cui-between",id:"navbar-left"},i.createElement("ul",null,c&&i.createElement(i.Fragment,null,i.createElement("li",null,i.createElement("a",{"cui-icon":"chevron_small_left",onClick:function(){f.goBack()}})),i.createElement("li",null,i.createElement(a.b,{className:"cui-icon",to:Z.renderUrl("home"),"cui-icon":"stopwatch_small"})),i.createElement("li",null,i.createElement("span",null,u)))),i.createElement("a",{className:"cui-icon cui-padding cui-button cui-hidden--m","cui-icon":"menu","cui-open":"target: #app-offcanvas"})),i.createElement("ul",{className:"cui-navbar-right cui-unhidden--m"},i.createElement("li",null,i.createElement(Pe,{class:"cui-navbar-item",url:Z.renderUrl("home"),name:Z.getName("home")})),i.createElement("li",null,i.createElement(Pe,{class:"cui-navbar-item",url:Z.renderUrl("actions"),name:Z.getName("actions")})),i.createElement("li",null,i.createElement(Pe,{class:"cui-navbar-item",url:Z.renderUrl("settings"),name:Z.getName("settings")})),i.createElement("li",null,i.createElement(Pe,{class:"cui-navbar-item",url:Z.renderUrl("help"),name:Z.getName("help")})),i.createElement("li",null,i.createElement(Pe,{class:"cui-navbar-item",url:Z.renderUrl("about"),name:Z.getName("about")}))))}function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Ve(e);if(t){var r=Ve(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Be(this,n)}}function Be(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var He=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(o,e);var t,n,r,a=Ge(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.call(this,e)}return t=o,(n=[{key:"render",value:function(){return i.createElement("div",{className:"cui-off-canvas",id:"app-offcanvas","cui-off-canvas":"escClose: y; outClose: y"},i.createElement("div",{className:"cui-off-canvas-container cui-card off-canvas-layout cui-flex cui-flex-direction-column"},i.createElement("div",{className:"cui-card-header cui-flex cui-middle cui-right cui-width-1-1"},i.createElement("a",{href:"#",className:"cui-icon","cui-icon":"close","cui-close":""})),i.createElement("div",{className:"off-canvas-content cui-card-body cui-flex-grow cui-flex cui-middle cui-width-1-1"},i.createElement("div",{className:"cui-width-1-1"},i.createElement("h3",{className:"cui-h3 cui-text-center"},"Menu"),i.createElement("ul",{className:"cui-list cui-highlight cui-accent cui-margin-top"},i.createElement("li",null,i.createElement(Pe,{url:Z.renderUrl("home"),name:Z.getName("home"),icon:"home",shouldClose:!0,isIcon:!0})),i.createElement("li",null,i.createElement(Pe,{url:Z.renderUrl("actions"),name:Z.getName("actions"),icon:"link",shouldClose:!0,isIcon:!0})),i.createElement("li",null,i.createElement(Pe,{url:Z.renderUrl("settings"),name:Z.getName("settings"),icon:"setup",shouldClose:!0,isIcon:!0})),i.createElement("li",null,i.createElement(Pe,{url:Z.renderUrl("help"),name:Z.getName("help"),icon:"emoji_smile",shouldClose:!0,isIcon:!0})),i.createElement("li",null,i.createElement(Pe,{url:Z.renderUrl("about"),name:Z.getName("about"),icon:"info",shouldClose:!0,isIcon:!0})))))))}}])&&Fe(t.prototype,n),r&&Fe(t,r),o}(i.Component);function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qe(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var Qe="GET_ALL",Ke="SET_ACTION",Xe="REMOVE_ACTION",Je="CLEAR_ACTIONS",Ze=new WeakMap,et=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ze.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,Ze,t)}var t,n,i;return t=e,(n=[{key:"getActions",value:function(){var e,t=this;return ze(e={},Qe,(function(){return qe(t,Ze).getAllActions()})),ze(e,Ke,(function(e){return qe(t,Ze).setAction(e)})),ze(e,Xe,(function(e){return qe(t,Ze).removeAction(e)})),ze(e,Je,(function(){return qe(t,Ze).clearActions(),!0})),e}}])&&Ye(t.prototype,n),i&&Ye(t,i),e}();function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function it(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}function rt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ot(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ut(e);if(t){var r=ut(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ct(this,n)}}function ct(e,t){return!t||"object"!==tt(t)&&"function"!=typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ft(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function dt(e,t,n){return t&&ft(e.prototype,t),n&&ft(e,n),e}var mt=function(){function e(){lt(this,e)}return dt(e,[{key:"validate",value:function(e){var t={status:!0};try{var n=this.performValidation(e);n&&n.length>0&&(t.status=!1,t.errors=n)}catch(e){var i="An error occured during validation";console.error(i),console.error(e),t.status=!1,t.errors=[i+": "+e.message]}return t}}]),e}(),ht=function(e){rt(n,e);var t=ot(n);function n(){return lt(this,n),t.call(this)}return dt(n,[{key:"performValidation",value:function(e){if(!Object(c.e)(e))return[N];var t=[];return Object(c.e)(e.name)||t.push(k),Object(c.e)(e.rounds)||t.push(j),t}}]),n}(mt),pt=function(e){rt(n,e);var t=ot(n);function n(){return lt(this,n),t.call(this)}return dt(n,[{key:"performValidation",value:function(e){if(!Object(c.e)(e))return[x];var t=[];return Object(c.e)(e.name)||t.push(A),Object(c.e)(e.actions)||t.push(S),t}}]),n}(mt),bt=function(e){rt(n,e);var t=ot(n);function n(){return lt(this,n),t.call(this)}return dt(n,[{key:"performValidation",value:function(e){if(!Object(c.e)(e))return[T];var t=[];return Object(c.e)(e.name)||t.push(C),Object(c.e)(e.type)||t.push(I),Object(c.e)(e.duration)||t.push(P),t}}]),n}(mt),vt=new WeakMap,gt=new WeakMap,wt=new WeakMap,yt=function(e){rt(n,e);var t=ot(n);function n(){var e;return lt(this,n),e=t.call(this),vt.set(st(e),{writable:!0,value:void 0}),gt.set(st(e),{writable:!0,value:void 0}),wt.set(st(e),{writable:!0,value:void 0}),it(st(e),vt,new ht),it(st(e),wt,new pt),it(st(e),gt,new bt),e}return dt(n,[{key:"performValidation",value:function(e){var t=nt(this,vt).validate(e);if(t.status)try{t=this.validateRounds(e.rounds)}catch(e){return[O]}return t.errors}},{key:"validateRounds",value:function(e){for(var t=null,n=e.length,i=0;i<n&&(!(t=nt(this,wt).validate(e[i])).status||(t=this.validateActions(e[i].actions)).status);i++);return t}},{key:"validateActions",value:function(e){for(var t=null,n=e.length,i=0;i<n;i++)if(!(t=nt(this,gt).validate(e[i])).status)return;return t}}]),n}(mt);function Et(e){var t;return i.useEffect((function(){}),[e]),i.createElement("div",{className:"cui-dialog ".concat(null!==(t=e.className)&&void 0!==t?t:""),"cui-dialog":"escClose: Y",id:e.id},i.createElement("div",{className:"cui-dialog-container"},i.createElement("div",{className:"cui-dialog-header"},i.createElement("span",{className:"cui-dialog-title"},e.title),i.createElement("a",{className:"cui-icon","cui-icon":"close","cui-close":""})),i.createElement("div",{className:"cui-dialog-body"},e.body),e.footer&&i.createElement("div",{className:"cui-dialog-footer"},e.footer)))}function Ot(e){return i.createElement(i.Fragment,null,e.errors&&e.errors.length>0&&i.createElement("ul",{className:"cui-list"},e.errors.map((function(e,t){return i.createElement("li",{key:t,className:"cui-animation-fade-in"},i.createElement("span",{className:"cui-text-error"},e))}))))}function Nt(e){var t;return i.createElement("span",{className:"cui-icon "+(null!==(t=e.className)&&void 0!==t?t:""),"cui-icon":"stopwatch_".concat(e.type)})}function kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function xt(e){var t="radio-group"+e.id,n="radio-"+e.id,r=kt(i.useState([]),2),a=r[0],o=r[1];function s(t){if(e.onChange&&t.target.checked){var n=a.find((function(e){return e.id===t.target.id}));Object(c.e)(n)&&n.name!==e.value&&e.onChange(n.name)}}function u(t){return e.value===t}function l(e,t){return{name:e,checked:u(e),id:n+t}}return i.useEffect((function(){return o([l(v,0),l(h,1),l(p,2),l(b,3)]),function(){}}),[e.value]),i.createElement("div",{id:e.id,className:"cui-flex-grid cui-child-width-1-4"},a.map((function(e){return i.createElement("div",{key:e.id},i.createElement("div",{className:"cui-radio-custom cui-width-1-1"},i.createElement("input",{type:"radio",id:e.id,name:t,checked:e.checked,onChange:s}),i.createElement("label",{htmlFor:e.id,className:"cui-content cui-padding-small cui-width-1-1"},i.createElement("div",{className:"cui-flex cui-center"},i.createElement(Nt,{type:e.name})),i.createElement("div",{className:"cui-flex cui-center"},i.createElement("span",{className:"cui-text-small"},e.name)))))})))}function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){Tt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Tt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return It(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return It(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Pt(e){var t=Ct(i.useState({id:void 0,name:"",duration:"5",removable:!0,editable:!1,type:h}),2),n=t[0],r=t[1],a=Ct(i.useState([]),2),o=a[0],c=a[1];function s(e){e.target.value;var t=e.target.name;switch(t){case"name":case"duration":case"type":r(At(At({},n),{},Tt({},t,e.target.value)));break;case"removable":case"editable":r(At(At({},n),{},Tt({},t,e.target.checked)))}}return i.useEffect((function(){return e.action&&(r(At({},e.action)),c([])),function(){}}),[e.action]),i.createElement(Et,{title:"Add new",id:"add-action-dialog",body:i.createElement(i.Fragment,null,i.createElement("div",{className:"cui-form"},i.createElement("label",{className:"cui-form-label"},"Name"),i.createElement("input",{className:"cui-input stopwatch-input-width",type:"text",name:"name",value:n.name,placeholder:"Name",onChange:s})),i.createElement("div",{className:"cui-form cui-margin-top"},i.createElement("label",{className:"cui-form-label"},"Duration"),i.createElement("input",{className:"cui-input stopwatch-input-width",type:"number",min:"0",max:"100",name:"duration",value:n.duration,placeholder:"Duration",onChange:s})),i.createElement("div",{className:"cui-form cui-margin-top"},i.createElement("label",{className:"cui-form-label"},"Type"),i.createElement("div",{className:"stopwatch-input-width cui-margin-top"},i.createElement(xt,{id:"add-action",value:n.type,onChange:function(e){r(At(At({},n),{},{type:e}))}}))),i.createElement("div",{className:"cui-form cui-flex cui-middle cui-reverse cui-margin-top"},i.createElement("input",{type:"checkbox",className:"cui-checkbox",id:"checkbox-1-2",name:"editable",checked:n.editable,onChange:s}),i.createElement("label",{htmlFor:"checkbox-1-2"}," Editable")),i.createElement("div",{className:"cui-form cui-flex cui-middle cui-reverse cui-margin-top"},i.createElement("input",{type:"checkbox",className:"cui-checkbox",id:"checkbox-1-1",name:"removable",checked:n.removable,onChange:s}),i.createElement("label",{htmlFor:"checkbox-1-1"}," Removable")),i.createElement(Ot,{errors:o})),footer:i.createElement("div",{className:"cui-flex cui-right"},i.createElement("button",{className:"cui-button cui-margin-small-right","cui-close":""},"Cancel"),i.createElement("button",{className:"cui-button cui-accent",onClick:function(){if(e.onSave){var t=At({},n),i=(new bt).validate(t);if(i.status){var r=window.$cui.get("#add-action-dialog");e.onSave(t),r.emit("close")}c(i.errors)}}},"Save"))})}function Dt(e){return i.createElement("div",{className:"stopwatch-page-header cui-container cui-center"},i.createElement("div",null,e.icon&&i.createElement("div",{className:"cui-flex-center cui-margin-bottom"},i.createElement("span",{"cui-icon":e.icon})),i.createElement("h1",{className:"cui-h1 cui-text-center cui-margin-remove cui-anim-fade-in"},e.title),i.createElement("p",{className:"cui-text-center cui-text-muted cui-scale-y-in cui-animation-delay cui-margin-small-top"},e.description)))}function Mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _t(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function $t(e){var t=Mt(i.useState(""),2),n=t[0],r=t[1];function a(t){r(t),Object(c.e)(e.onUpdate)&&e.onUpdate(t)}return i.createElement("div",{className:"cui-input-mix "+e.className},i.createElement("input",{type:"text",className:"cui-input",placeholder:"Filter",value:n,onChange:function(e){a(e.target.value)}}),Object(c.e)(n)&&i.createElement("a",{className:"cui-icon","cui-icon":"close",onClick:function(){return a("")}}))}function Lt(e){return i.createElement("span",{className:"cui-margin-small-left cui-unhidden--m"},e.label)}function Rt(e){var t,n,r=null!==(t=e.cancelLabel)&&void 0!==t?t:"Cancel",a=null!==(n=e.confirmLabel)&&void 0!==n?n:"OK";return i.createElement("div",{className:"cui-dropdown cui-section drop-max-width","cui-drop":"outClose: Y; autoClose: Y",id:e.id},i.createElement("p",null,e.message),i.createElement("div",{className:"cui-flex cui-right cui-margin-top"},i.createElement("button",{className:"cui-button cui-small",onClick:function(){window.$cui.get("#"+e.id).emit("close"),e.onCancel&&e.onCancel()}},r),i.createElement("button",{className:"cui-button cui-accent cui-small cui-margin-small-left",onClick:function(){window.$cui.get("#"+e.id).emit("close"),e.onConfirm()}},a)))}function Wt(e){return i.createElement("div",{className:"cui-container cui-flex-grid cui-flex-grid-match cui-child-width-1-1 cui-child-width-1-3--m cui-animatio-fade-in"},Object(c.e)(e.actions)&&e.actions.map((function(t,n){return function(t){if(!Object(c.e)(e.filter))return!0;var n=t.toLowerCase().match(e.filter.toLowerCase());return Object(c.e)(n)}(t.name)&&i.createElement("div",{key:n},i.createElement("div",{className:"cui-card cui-default cui-animation-fade-in "+z(t.type)},i.createElement("div",{className:"cui-card-header cui-flex cui-between cui-nowrap cui-middle"},i.createElement("span",{className:"cui-card-title cui-text-truncate cui-overflow-hidden"},t.name),i.createElement(Nt,{className:"cui-padding-small",type:t.type})),i.createElement("div",{className:"cui-card-body cui-flex cui-middle cui-nowrap action-card-height"},i.createElement("div",{className:"cui-flex-grow cui-overflow-hidden"},i.createElement("div",{className:"cui-text-truncate"},i.createElement("span",null,t.duration," seconds"))),i.createElement("div",{className:"cui-flex-shrink"},i.createElement("ul",{className:"cui-icon-nav"},t.editable&&i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"edit",onClick:function(){!function(t,n){switch(t){case"edit":e.onEdit(n);break;case"delete":e.onDelete(n)}}("edit",t)}},i.createElement(Lt,{label:"Edit"}))),t.removable&&i.createElement("li",null," ",i.createElement("div",{className:"cui-drop-trigger"},i.createElement("a",{className:"cui-icon","cui-icon":"trash"},i.createElement(Lt,{label:"Delete"})),i.createElement(Rt,{message:"Do you really want to delete this action?",cancelLabel:"No",confirmLabel:"Yes",id:"action-delete-drop",onConfirm:function(){e.onDelete(t)}}))))))))})))}function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){Gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bt(e){return function(e){if(Array.isArray(e))return zt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ht(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||Ht(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e,t){if(e){if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var Yt={id:void 0,name:"",type:"exercise",duration:"5",removable:!0,editable:!0};function qt(){var e=Vt(i.useState({actions:Bt(E),current:null}),2),t=e[0],n=e[1],r=Vt(i.useState(""),2),a=r[0],o=r[1];function c(e){n(Ut(Ut({},t),{},{actions:[].concat(Bt(E),Bt(e))}))}function s(e){n(Ut(Ut({},t),{},{current:e||Ut({},Yt)})),window.$cui.get("#add-action-dialog").emit("open")}return i.useEffect((function(){Q("Actions"),K("Actions");var e=window.$actionsFlow.subscribe(Qe,{finish:c}),t=window.$actionsFlow.subscribe(Ke),n=window.$actionsFlow.subscribe(Xe);return window.$actionsFlow.perform(Qe),function(){window.$actionsFlow.unsubscribe(Qe,e.id),window.$actionsFlow.unsubscribe(Ke,t.id),window.$actionsFlow.unsubscribe(Xe,n.id)}}),[t.actions]),i.createElement(i.Fragment,null,i.createElement("div",{className:"stopwatch-content-width"},i.createElement(Dt,{title:"Activities",description:"Define activies which you want to perform in trainings!",icon:"link"}),i.createElement("div",{className:"cui-container cui-flex cui-middle cui-middle cui-center cui-right--s"},i.createElement($t,{value:a,onUpdate:function(e){o(e)},className:"cui-width-1-1 cui-width-1-3--m cui-width-1-4--l"})),i.createElement(Wt,{filter:a,actions:t.actions,onEdit:s,onDelete:function(e){window.$actionsFlow.perform(Xe,e)}}),i.createElement("div",{className:"cui-position-float cui-position-bottom cui-position-center cui-margin-large-bottom app-float-bottom z-index-100"},i.createElement("button",{className:"cui-icon-button cui-large cui-background-default cui-box-shadow","cui-icon":"plus",onClick:function(){s()}}))),i.createElement(Pt,{action:t.current,onSave:function(e){window.$actionsFlow.perform(Ke,e)}}))}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xt(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var Jt="GET_ALL_TRAININGS",Zt="ADD_TRAINING",en="UPDATE_TRAINING",tn="DELETE_TRAINING",nn="GET_TRAINING",rn="CLEAR_TRAININGS",an="GET_DRAFT",on="SET_DRAFT",cn="CLEAR_DRAFT",sn="GET_FOR_EDIT",un=new WeakMap,ln=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),un.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,un,t)}var t,n,i;return t=e,(n=[{key:"getActions",value:function(){var e,t=this;return Qt(e={},Jt,(function(){return Xt(t,un).getAllTrainings()})),Qt(e,Zt,(function(e){return Xt(t,un).addTraining(e)})),Qt(e,en,(function(e){return Xt(t,un).updateTraining(e)})),Qt(e,tn,(function(e){return Xt(t,un).deleteTraining(e)})),Qt(e,nn,(function(e){return Xt(t,un).getTraining(e)})),Qt(e,an,(function(){return Xt(t,un).getDraft()})),Qt(e,on,(function(e){return Xt(t,un).setDraft(e)})),Qt(e,cn,(function(){return Xt(t,un).clearDraft()})),Qt(e,sn,(function(e){var n=Xt(t,un).getDraft();return Object(c.e)(n)&&n.id===e?n:Object(c.e)(e)||!Object(c.e)(n.id)?Xt(t,un).getTraining(e):void 0})),Qt(e,rn,(function(){return Xt(t,un).clearTrainings(),!0})),e}}])&&Kt(t.prototype,n),i&&Kt(t,i),e}();var fn=Object(o.i)((function(e){var t=e.history;return i.createElement("button",{className:"cui-button cui-accent",onClick:function(){return t.goBack()}},"Go Back")}));function dn(e){var t;return i.createElement("div",{className:e.classes},i.createElement("div",null,i.createElement("h2",{className:"cui-h2 cui-text-center cui-text-error"},e.message),i.createElement("div",{className:""},i.createElement("div",{className:"cui-flex cui-center"},i.createElement(a.b,{to:"/",className:"cui-button cui-margin-small-right"},"Go Home"),null!==(t=e.goBack)&&void 0!==t?t:i.createElement(fn,null)))))}function mn(e){return i.useEffect((function(){}),[e.items]),i.createElement("ul",{className:"cui-list cui-inline"},e.items&&e.items.length>0&&e.items.map((function(e,t){return i.createElement(hn,{key:e.icon,icon:e.icon,label:e.label,onClick:e.onClick,modifiers:e.modifiers})})))}function hn(e){var t,n="cui-button cui-rounded "+(null!==(t=e.modifiers)&&void 0!==t?t:"");return i.createElement("li",{className:"cui-padding-small-horizontal"},i.createElement("a",{className:n,"cui-icon":e.icon,onClick:e.onClick},i.createElement(Lt,{label:e.label})))}function pn(e){return i.createElement("div",{className:"cui-flex cui-middle"},i.createElement("div",{className:"cui-flex-center cui-margin-right"},i.createElement(Nt,{type:e.action.type})),i.createElement("div",{className:"cui-flex-grow"},i.createElement("div",{className:""},e.action.name),i.createElement("div",{className:"cui-text-muted"},"Lasts ",e.action.duration," seconds")))}function bn(e){return i.createElement("div",{className:"cui-drop-trigger cui-block"},i.createElement("a",{className:"cui-link cui-block"},i.createElement(vn,{action:e.value})),i.createElement("div",{className:"cui-dropdown drop-height","cui-drop":"outClose: Y;",id:e.id},i.createElement("ul",{className:"cui-drop-nav drop-max-width"},e.actions&&e.actions.map((function(t){return i.createElement("li",{key:t.id},i.createElement("a",{className:"cui-overflow-hidden cui-text-truncate",onClick:function(){!function(t){!e.onSelect||e.value&&e.value.id===t.id||e.onSelect(t),window.$cui.get("#"+e.id).emit("close")}(t)}},i.createElement(pn,{action:t})))})))))}function vn(e){return i.createElement("div",{className:"cui-flex cui-middle cui-width-1-1"},i.createElement("div",{className:"cui-flex-grow"},e.action?i.createElement(pn,{action:e.action}):i.createElement("span",{className:"cui-inline-block cui-padding-small"},"No action selected")),i.createElement("span",{"cui-icon":"chevron_small_down"}))}function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gn(Object(n),!0).forEach((function(t){yn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function En(e){return function(e){if(Array.isArray(e))return kn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Nn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||Nn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(e,t){if(e){if("string"==typeof e)return kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(e,t):void 0}}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function jn(e){var t=On(Object(i.useState)({actions:[],selected:null,errors:[],name:""}),2),n=t[0],r=t[1];function a(t,i){var a;r(wn(wn({},n),{},{actions:t,selected:null!==(a=n.selected)&&void 0!==a?a:e.definedActions[0],errors:[],name:i||n.name}))}return i.useEffect((function(){var t=e.round&&e.round.name?e.round.name:D(e.currentCount);return a(Object(c.e)(e.round)?e.round.actions:[],t),function(){}}),[e.round,e.definedActions,e.currentCount]),i.createElement(Et,{id:"edit-round-dialog",title:"Edit Round",body:i.createElement(i.Fragment,null,i.createElement("div",{className:""},i.createElement("div",{className:"cui-form"},i.createElement("label",{htmlFor:"",className:"cui-form-label"},"Round name"),i.createElement("input",{type:"text",className:"cui-input",placeholder:"Round name",value:n.name,onChange:function(e){var t=e.target.value,i=[];Object(c.e)(t)||i.push("Name cannot be empty"),r(wn(wn({},n),{},{errors:i,name:t}))}})),i.createElement("div",{className:"cui-margin-top"},"Actions"),i.createElement("ul",{className:"cui-list cui-margin-top edit-round-dialog-body"},n.actions&&n.actions.map((function(e,t){return i.createElement("li",{key:e.id+t,className:"animation-fade-in"},i.createElement("div",{className:"cui-flex cui-middle"},i.createElement("div",{className:"cui-flex-grow"},i.createElement(pn,{action:e})),i.createElement("ul",{className:"cui-icon-nav"},i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"swap",onClick:function(){!function(e){if(Object(c.a)(n.selected,n.actions)){var t=En(n.actions);t[e]=n.selected,r(wn(wn({},n),{},{actions:t}))}}(t)}})),i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"trash",onClick:function(){!function(e){var t=En(n.actions);t.splice(e,1),a(t)}(t)}})))))}))),i.createElement("div",{className:"cui-flex cui-middle cui-nowrap cui-margin-top"},i.createElement("div",{className:"cui-flex-grow"},i.createElement(bn,{value:n.selected,actions:e.definedActions,onSelect:function(e){e&&r(wn(wn({},n),{},{selected:e}))},name:"actioonaa",id:"round-select-drop"})),i.createElement("div",{className:"cui-padding-horizontal"},i.createElement("button",{"cui-icon":"plus",className:"cui-icon cui-icon-button",onClick:function(){n.selected&&a([].concat(En(n.actions),[n.selected]))}}))),i.createElement(Ot,{errors:n.errors}))),footer:i.createElement("div",{className:"cui-flex cui-right"},i.createElement("button",{className:"cui-button cui-margin-small-right","cui-close":""},"Cancel"),i.createElement("button",{className:"cui-button cui-accent",onClick:function(){if(e.onSave){var t={actions:En(n.actions),name:n.name},i=(new pt).validate(t);if(i.status)return e.onSave(t,e.index),void r(wn(wn({},n),{},{name:D(e.currentCount+1),selected:null,actions:[]}));r(wn(wn({},n),{},{errors:i.errors}))}}},"Save"))})}function xn(e){return i.createElement("div",{className:"cui-flex cui-middle cui-nowrap"},i.createElement("div",{className:"cui-flex-grow"},i.createElement("div",null,i.createElement("span",{className:"cui-text-bold"},e.round.name)),i.createElement("div",{className:"cui-text-muted cui-text-small cui-text-no-wrap"},i.createElement("span",null,e.round.actions.length," actions, ",F(W(e.round.actions))))),i.createElement("ul",{className:"cui-icon-nav cui-flex-shrink"},!e.isFirst&&i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"chevron_up",onClick:function(){e.onMoveUp(e.round,e.index)},"cui-tooltip":"Move up"})),!e.isLast&&i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"chevron_down",onClick:function(){e.onMoveDown(e.round,e.index)},"cui-tooltip":"Move down"})),i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"copy",onClick:function(){e.onClone(e.round,e.index)},"cui-tooltip":"Clone"})),i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"edit",onClick:function(){e.onEdit(e.round,e.index)},"cui-tooltip":"Edit"})),i.createElement("li",null,i.createElement("div",{className:"cui-drop-trigger"},i.createElement("a",{className:"cui-icon","cui-icon":"trash"}),i.createElement(Rt,{id:"delete-confirm-drop",message:"Do you really want to delete this round?",cancelLabel:"No",confirmLabel:"Yes",onConfirm:function(){e.onDelete(e.round,e.index)}})))))}function Sn(e){return i.createElement("div",{className:"cui-flex cui-right cui-middle"},i.createElement("button",{className:"cui-button",onClick:e.onCancel},"Cancel"),i.createElement("button",{className:"cui-button cui-accent cui-margin-small-left",onClick:e.onConfirm},e.confirmLabel))}function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){Cn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Dn(e){var t=i.useMemo((function(){return function(e){return e.reduce((function(e,t){var n,i=null!==(n=t.type)&&void 0!==n?n:"Unknown";return e[i]?e[i].push(t):e[i]=[t],e}),{})}(e.actions)}),[e.actions]),n=In(i.useState({warmup:t.warmup?t.warmup[0]:null,exercise:t.exercise?t.exercise[0]:null,break:t.break?t.break[0]:null,cooldown:t.cooldown?t.cooldown[0]:null}),2),r=n[0],a=n[1],o=In(i.useState(1),2),c=o[0],s=o[1];return i.useEffect((function(){return a({warmup:t.warmup?t.warmup[0]:null,break:t.break?t.break[0]:null,exercise:t.exercise?t.exercise[0]:null,cooldown:t.cooldown?t.cooldown[0]:null}),function(){}}),[e.actions]),i.createElement(Et,{title:"Quick Round",id:e.id,body:i.createElement(Mn,{actions:t,onUpdate:function(e,t){a(Tn(Tn({},r),{},Cn({},t,e)))},data:r,count:c,onCounterUpdate:function(e){s(e)}}),footer:i.createElement(Sn,{confirmLabel:"Save",onCancel:function(){window.$cui.get("#"+e.id).emit("close")},onConfirm:function(){if(!(c<1)){var t={name:"Quick",actions:q(r,c)};e.onSave(t)}}})})}function Mn(e){function t(t){t>0&&t<12&&e.onCounterUpdate(t)}return i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(_n,{actions:e.actions[v],value:e.data.warmup,onUpdate:e.onUpdate,type:v,id:"warmup-select-drop",name:"warmup-action"})),i.createElement("div",{className:"cui-margin-top"},i.createElement(_n,{actions:e.actions[h],value:e.data.exercise,onUpdate:e.onUpdate,type:h,id:"exercise-select-drop",name:"exercise-action"})),i.createElement("div",{className:"cui-form cui-margin-top"},i.createElement(_n,{actions:e.actions[p],value:e.data.break,onUpdate:e.onUpdate,type:p,id:"break-select-drop",name:"break-action"})),i.createElement("div",{className:"cui-margin-top"},i.createElement(_n,{actions:e.actions[b],value:e.data.cooldown,onUpdate:e.onUpdate,type:b,id:"cooldown-select-drop",name:"cooldown-action"})),i.createElement("div",{className:"cui-form cui-margin-top"},i.createElement("label",{className:"cui-form-label"},"Number of exercises"),i.createElement("div",{className:"cui-flex cui-middle cui-margin-small-top"},i.createElement("button",{className:"cui-icon-button","cui-icon":"minus",onClick:function(){return t(e.count-1)}}),i.createElement("span",{className:"cui-margin-horizontal"},e.count),i.createElement("button",{className:"cui-icon-button","cui-icon":"plus",onClick:function(){return t(e.count+1)}}))))}function _n(e){return i.createElement(i.Fragment,null,i.createElement("span",{className:"cui-text-capital cui-inline-block"},e.type),i.createElement("div",{className:"cui-flex cui-middle cui-margin-small-top"},i.createElement("div",{className:"cui-flex-grow"},i.createElement(bn,{value:e.value,actions:e.actions,onSelect:function(t){e.onUpdate(t,e.type)},name:e.name,id:e.id})),i.createElement("button",{className:"cui-icon-button","cui-icon":"close",onClick:function(){e.onUpdate(null,"cooldown")}})))}function $n(e){return function(e){if(Array.isArray(e))return Gn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Un(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){Wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||Un(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){if(e){if("string"==typeof e)return Gn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gn(e,t):void 0}}function Gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Bn(e){var t=Fn(i.useState({currentIndex:-1,currentCount:0,currentRound:null}),2),n=t[0],r=t[1],a=Fn(i.useState({actions:[]}),2),o=a[0],s=a[1];function u(t,i){r(Rn(Rn({},n),{},{currentIndex:i,currentRound:t,currentCount:e.training&&e.training.rounds?e.training.rounds.length:0})),window.$cui.get("#edit-round-dialog").emit("open")}function l(t,n){var i=$n(e.training.rounds);i.splice(n,1),p(i)}function f(t,n){p(Y(e.training.rounds,n,n+1))}function d(t,n){p(Y(e.training.rounds,n,n-1))}function m(t,n){var i=n+1,r=Object(c.b)(t);p(function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(!e||null===e||!i||null===i||0===i.length)return e;var a=e.length;return!t||0===t||t>=a?[].concat(_(e),i):t<=0?[].concat(i,_(e)):(e.splice.apply(e,[t,0].concat(i)),_(e))}(e.training.rounds,i,r))}function h(t,n){var i=[];return n>-1?(i=$n(e.training.rounds))[n]=t:i=[].concat($n(e.training.rounds),[t]),i}function p(t){e.onUpdate(Rn(Rn({},e.training),{},{rounds:t}))}function b(t){var n=t.target.name;["name","description"].includes(n)&&e.onUpdate(Rn(Rn({},e.training),{},Wn({},n,t.target.value)))}function v(e){s({actions:[].concat($n(E),$n(e))})}return i.useEffect((function(){var e=window.$actionsFlow.subscribe(Qe,{finish:v});return window.$actionsFlow.perform(Qe),r(Rn({},n)),function(){window.$actionsFlow.unsubscribe(Qe,e.id)}}),[e.training]),i.createElement(i.Fragment,null,i.createElement("div",{className:"cui-container stopwatch-content-width cui-flex-grid cui-child-width-1-1 cui-child-width-1-2--m"},i.createElement("div",{className:"cui-padding-small-right"},i.createElement("div",{className:"cui-form"},i.createElement("label",{htmlFor:"",className:"cui-form-label"},"Name"),i.createElement("input",{type:"text",className:"cui-input stopwatch-input-width",placeholder:"Name",name:"name",value:e.training.name,onChange:b})),i.createElement("div",{className:"cui-form cui-margin-top"},i.createElement("label",{htmlFor:"",className:"cui-form-label"},"Description"),i.createElement("textarea",{className:"cui-textarea stopwatch-input-width stopwatch-text-area",placeholder:"Description",name:"description",rows:5,value:e.training.description,onChange:b}))),i.createElement("div",{className:"cui-padding-small-left"},i.createElement("ul",{className:"cui-list"},e.training&&e.training.rounds.map((function(e,t,n){return i.createElement("li",{key:t,className:"animation-fade-in"},i.createElement(xn,{index:t,round:e,onEdit:u,onDelete:l,onMoveUp:d,onMoveDown:f,onClone:m,isFirst:0===t,isLast:t===n.length-1}))})),i.createElement("li",null,i.createElement("div",{className:"cui-flex-grid cui-center cui-child-width-1-2--m"},i.createElement("div",{className:""},i.createElement("button",{className:"cui-button cui-default cui-icon cui-icon-margin cui-width-1-1","cui-icon":"plus",onClick:function(){u(null,-1)}},"Add Round")),i.createElement("div",null,i.createElement("button",{className:"cui-button cui-accent cui-icon cui-icon-margin cui-width-1-1","cui-icon":"bolt",onClick:function(){window.$cui.get("#quick-round-create").emit("open")}},"Quick Round"))))))),i.createElement(jn,{index:n.currentIndex,round:n.currentRound,onSave:function(e,t){p(h(e,t)),window.$cui.get("#edit-round-dialog").emit("close")},currentCount:n.currentCount,definedActions:o.actions}),i.createElement(Dn,{id:"quick-round-create",actions:o.actions,onSave:function(e){p(h(e,-1)),window.$cui.get("#quick-round-create").emit("close")}}))}var Vn=Object(o.i)((function(e){var t,n=Fn(i.useState(!1),2),r=(n[0],n[1]),a=Fn(i.useState({training:{name:"",rounds:[],state:y}}),2),s=a[0],u=a[1],l=Object(o.h)().id;function f(e){e?(R("Saved"),d()):L("Fail","Training was not saved")}function d(){e.history&&e.history.goBack()}function m(e){e?(Q("Edit "+e.name),u({training:Rn({},e)})):L("Fail","Training was not found")}function h(e){r(!1),e&&!Object(c.e)(e.id)&&u({training:Rn({},e)})}function p(){var e=(new ht).validate(s.training);e.status?window.$flow.perform(en,s.training):L("Training not valid",e.errors.join(", "))}function b(){var e,t;Object(c.e)(s.training.id)&&s.training.state===w?(e=s.training.name,t=v,window.$cui.alert("delete-training-dialog","YesNoCancel",{title:"Delete training",message:"Do you really want to delete training: "+e+"?",onYes:t})):(R("Draft removed"),window.$flow.perform(cn),d())}function v(){window.$flow.perform("DELETE_TRAINING",s.training.id)}function E(e){R("Removed"),d()}return i.useEffect((function(){Q("Edit training"),K("Edit training");var e=window.$flow.subscribe("UPDATE_TRAINING",{finish:f}),t=window.$flow.subscribe(sn,{finish:m}),n=window.$flow.subscribe("GET_DRAFT",{finish:h}),i=window.$flow.subscribe("DELETE_TRAINING",{finish:E});return r(!0),l?window.$flow.perform(sn,l):window.$flow.perform(an),function(){window.$flow.unsubscribe("UPDATE_TRAINING",e.id),window.$flow.unsubscribe(sn,t.id),window.$flow.unsubscribe("DELETE_TRAINING",i.id),window.$flow.unsubscribe("GET_DRAFT",n.id)}}),[s.training.id]),i.createElement(i.Fragment,null,i.createElement("div",{className:"edit-container"},i.createElement("div",{className:"edit-container-content cui-overflow-y-auto"},i.createElement("div",{className:"cui-container stopwatch-content-width"},i.createElement(Dt,{title:Object(c.e)(s.training)&&Object(c.e)(s.training.name)?"Update ".concat(s.training.state===g?"draft":"training"," ").concat(s.training.name):"Define training",description:"Customize your training settings",icon:"dumbbell"})),i.createElement("div",{className:""},s.training?i.createElement(Bn,{training:s.training,onUpdate:function(e){!function(e){window.$flow.perform(on,e),u({training:Rn(Rn({},e),{},{state:g})})}(e)},onCancel:d}):i.createElement(dn,{message:"The training you looking for could not be found",classes:""}))),i.createElement("div",{className:"edit-container-bottom cui-padding-small-vertical cui-border-top cui-border-remove--l cui-flex stopwatch-content-width"},i.createElement("div",{className:"stopwatch-content-width cui-flex cui-middle cui-center"},i.createElement(mn,{items:(t=[],Object(c.e)(s.training.id)&&t.push({icon:"media_play",label:"Run",onClick:function(){e.history.push(Z.renderUrl("perform",{id:s.training.id}))}}),s.training.state!==y&&t.push({icon:"trash",label:"Delete",onClick:function(){b()}}),t.push({icon:"checkmark",label:"Save",onClick:p,modifiers:"cui-success"}),t)})))))}));function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function qn(e,t,n){return t&&Yn(e.prototype,t),n&&Yn(e,n),e}function Qn(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Kn(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var Xn=new WeakMap,Jn=function(){function e(){zn(this,e),Xn.set(this,{writable:!0,value:void 0}),Kn(this,Xn,screen)}return qn(e,[{key:"activate",value:function(){Qn(this,Xn).keepAwake=!0}},{key:"release",value:function(){Qn(this,Xn).keepAwake=!1}}]),e}(),Zn=function(){function e(){zn(this,e),Hn(this,"element",void 0),this.element=void 0}return qn(e,[{key:"activate",value:function(){this.element||(this.element=this.createElement("/static/video/Screen.mp4"),document.body.appendChild(this.element))}},{key:"release",value:function(){this.element&&(this.element.remove(),this.element=void 0)}},{key:"createElement",value:function(e){var t=document.createElement("video");return t.autoplay=!0,t.muted=!0,t.loop=!0,t.src=e,t.classList.add("loop-screen"),t.textContent="Not Supported",t}}]),e}(),ei=new WeakMap,ti=function(){function e(){zn(this,e),ei.set(this,{writable:!0,value:void 0}),Kn(this,ei,this.getToggle())}return qn(e,[{key:"activate",value:function(){Qn(this,ei).activate()}},{key:"release",value:function(){Qn(this,ei).release()}},{key:"getToggle",value:function(){return"keepAwake"in screen?new Jn:new Zn}}]),e}();function ni(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ii(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function ri(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var ai="RUNNING",oi="STOPPED",ci="PAUSED",si=new WeakMap,ui=new WeakMap,li=new WeakMap,fi=new WeakMap,di=new WeakMap,mi=new WeakMap,hi=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),si.set(this,{writable:!0,value:void 0}),ui.set(this,{writable:!0,value:void 0}),li.set(this,{writable:!0,value:void 0}),fi.set(this,{writable:!0,value:void 0}),di.set(this,{writable:!0,value:void 0}),mi.set(this,{writable:!0,value:void 0}),ri(this,ui,0),ri(this,li,0),ri(this,fi,!1),ri(this,di,oi),ri(this,mi,void 0)}var t,n,i;return t=e,(n=[{key:"onTick",value:function(e){ri(this,si,e)}},{key:"tick",value:function(){var e=this;ri(this,mi,setTimeout((function(){try{ii(e,di)===ai&&ii(e,si).call(e,ii(e,ui),ii(e,li),e)?(ii(e,fi)?(ri(e,ui,0),ri(e,fi,!1)):(ri(e,ui,ii(e,ui)+1),ri(e,li,ii(e,li)+1)),e.tick()):ii(e,di)!==ci&&e.stop()}catch(t){console.error("An error occured on stopwatch tick"),console.error(t),e.stop()}}),1e3))}},{key:"reset",value:function(){ri(this,fi,!0)}},{key:"start",value:function(){return ii(this,di)!==ai&&(ri(this,ui,0),ri(this,di,ai),this.tick(),!0)}},{key:"stop",value:function(){return ii(this,di)===ai&&(this.finish(),ri(this,di,oi),!0)}},{key:"pause",value:function(){return ii(this,di)===ai&&(ri(this,di,ci),!0)}},{key:"resume",value:function(){return ii(this,di)===ci&&(ri(this,di,ai),this.tick(),!0)}},{key:"finish",value:function(){ii(this,mi)&&(clearTimeout(ii(this,mi)),ri(this,mi,void 0)),ri(this,ui,0),ri(this,li,0)}},{key:"getState",value:function(){return ii(this,di)}}])&&ni(t.prototype,n),i&&ni(t,i),e}();function pi(e){return i.createElement("span",{className:"cui-svg total-circle-progress","cui-circle-progress":e.watchState.trainingProgress},i.createElement("div",{className:""},i.createElement("span",{className:"cui-svg current-circle-progress","cui-circle-progress":e.watchState.roundProgress},i.createElement("div",null,i.createElement("span",{className:"cui-svg countdown-circle-progress","cui-circle-progress":e.watchState.progress},i.createElement("div",null,i.createElement("span",{className:"cui-block cui-text-small"},e.actionIdx+1),i.createElement("h1",{className:"cui-h1 cui-margin-remove "+e.watchState.timerCls},e.watchState.timer)))))))}function bi(e){var t,n;return i.createElement("div",null,i.createElement("p",{className:"cui-margin-remove"},null===(t=e.watchState.round)||void 0===t?void 0:t.name),i.createElement("p",{className:"cui-text-muted cui-text-small cui-margin-remove"},"Round ",e.watchState.roundIdx+1," of ",e.watchState.roundTotal),i.createElement("span",{className:"cui-block cui-text-small"},e.actionIdx+1),i.createElement("h1",{className:"cui-h1 cui-margin-remove countdown-timer-size "+e.watchState.timerCls},e.watchState.timer),i.createElement("h3",{className:"cui-h3 "},null===(n=e.watchState.action)||void 0===n?void 0:n.name))}function vi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wi(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var yi="GET_DARK_MODE",Ei="SET_DARK_MODE",Oi="GET_SOUND_ENABLED",Ni="SET_SOUND_ENABLED",ki="SET_SETTINGS",ji="GET_SETTINGS",xi="GET_IS_WELCOME",Si="SET_IS_WELCOME",Ai="GET_SIMPLE_VIEW",Ti="CLEAR_SETTINGS",Ci=new WeakMap,Ii=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ci.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,Ci,t)}var t,n,i;return t=e,(n=[{key:"getActions",value:function(){var e,t=this;return vi(e={},Oi,(function(){return wi(t,Ci).isSoundEnabled()})),vi(e,Ni,(function(e){wi(t,Ci).setSoundEnabled(e)})),vi(e,yi,(function(){return wi(t,Ci).isDarkMode()})),vi(e,Ei,(function(e){wi(t,Ci).setDarkMode(e)})),vi(e,ki,(function(e){wi(t,Ci).setSettings(e)})),vi(e,ji,(function(){return wi(t,Ci).getSettings()})),vi(e,xi,(function(){return wi(t,Ci).isWelcomeSet()})),vi(e,Ai,(function(){return wi(t,Ci).getSettings().simpleView})),vi(e,Si,(function(e){wi(t,Ci).setIsWelcome(e)})),vi(e,Ti,(function(){return wi(t,Ci).clearSettings(),!0})),e}}])&&gi(t.prototype,n),i&&gi(t,i),e}();function Pi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function $i(){var e=Mi(i.useState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pi(Object(n),!0).forEach((function(t){Di(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},M)),2),t=e[0],n=e[1];function r(){window.$settingsFlow.perform(ji)}function a(e){n(e),B(e.darkMode)}return i.useEffect((function(){var e=window.$settingsFlow.subscribe(ji,{finish:a}),t=window.$settingsFlow.subscribe(ki,{finish:r});return r(),function(){window.$settingsFlow.unsubscribe(ji,e.id),window.$settingsFlow.unsubscribe(ki,t.id)}}),[t.darkMode,t.soundEnabled]),[t,function(e){window.$settingsFlow.perform(ki,e)}]}function Li(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ri(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Wi(e){!function(e,t){function n(){t&&e&&t(e)}i.useEffect((function(){return e&&window.addEventListener("resize",n),function(){e&&window.removeEventListener("resize",n)}}),[e])}(e,(function(e){Object(c.e)(e)&&r(a(e))}));var t=Li(i.useState(a(e)),2),n=t[0],r=t[1];function a(e){return!!Object(c.e)(e)&&(e&&e.clientHeight>=(screen.availHeight||screen.height)-30&&e.clientWidth>=(screen.availWidth||screen.width)-30)}return i.useEffect((function(){}),[n]),n}function Fi(e){var t="cui-icon-button cui-icon";return e.modifiers&&(t+=" "+e.modifiers),i.createElement("button",{className:t,onClick:e.onClick,"cui-icon":e.icon})}function Ui(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(n),!0).forEach((function(t){Bi(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ui(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function zi(){var e,t,n=Vi(i.useState({training:void 0}),2),r=n[0],a=n[1],c=Vi((e=!1,t=i.useRef(e),i.useEffect((function(){t.current=e}),[]),[t.current,function(e){console.log("Flag: "+e+", Loading: "+t),t.current!=e&&(t.current=e)}]),2),s=c[0],u=c[1],l=Object(o.h)().id;function f(e){var t=(new yt).validate(e);t.status?(u(!1),a({training:e})):L("Incorrect training","Training is not correct: ".concat(t.errors.join(", ")))}return i.useEffect((function(){Q("Perform training");var e=window.$flow.subscribe("GET_TRAINING",{finish:f});return l>-1&&(u(!0),window.$flow.perform("GET_TRAINING",l)),function(){window.$flow.unsubscribe("GET_TRAINING",e.id)}}),[l]),i.createElement(i.Fragment,null,s?i.createElement("div",{className:"cui-height-1-1 cui-flex-center"},"Loading..."):r.training?i.createElement(Yi,{training:r.training}):i.createElement(dn,{message:"We couldn't find training",classes:"cui-height-1-1 cui-flex-center"}))}function Yi(e){var t=Vi(i.useState(void 0),2),n=t[0],r=t[1],a=Vi(i.useState({timer:"-",state:oi,timerCls:"",progress:100,roundProgress:100,trainingProgress:100,roundIdx:0,roundTotal:0,actionIdx:0,actionTotal:0,roundDuration:0,totalDuration:0,action:void 0,round:void 0}),2),o=a[0],s=a[1],u=Vi(i.useState({startBtnText:"Start",startBtnCls:"cui-accent",pauseBtnText:"Pause",isPauseVisible:!1,startBtnIcon:"media_play",pauseBtnIcon:"media_pause"}),2),l=u[0],f=u[1],d=Vi($i(),2),m=d[0],h=d[1],p=Vi(i.useState(""),2),b=p[0],v=p[1],g=i.useRef(e.training);g.current=e.training;var w=i.useRef(o);w.current=o;var y=i.useRef(m);y.current=m;var E,O=i.useRef(null),N=i.useRef(null),k=i.useRef(null),j=i.useRef(null),x=i.useRef(null),S=i.useRef(null),A=i.useRef(null),T=Wi(A.current);function C(e){var t=e.rounds[0],n=t.actions[0];s(Gi(Gi({},o),{},{round:t,roundIdx:0,roundTotal:e.rounds.length,roundDuration:W(t.actions),actionIdx:0,action:n,actionTotal:t.actions.length,totalDuration:H(e)[1]}))}function I(e,t,n){var i=parseInt(w.current.action.duration),r=i-e,a=V(e,i);return 0===e&&D(w.current.action.type),r>0?(P(n.getState(),{time:r,progress:100-a,ct:e,total:t}),r<=2&&D("countdown"),!0):function(){var e=w.current.actionIdx+1;if(w.current.round.actions.length>e){var t=w.current.round.actions[e];return s(Gi(Gi({},w.current),{},{actionIdx:e,action:t})),!0}var n=w.current.roundIdx+1;if(g.current.rounds.length>n){var i=g.current.rounds[n],r=i.actions[0];return s(Gi(Gi({},w.current),{},{actionIdx:0,action:r,actionTotal:i.actions.length,round:i,roundIdx:n,roundDuration:W(i.actions)})),!0}return C(g.current),!1}()?(D("countdown"),P(ai,{time:0,progress:0,ct:r,total:t}),n.reset(),!0):(D("end"),P(oi,{time:0,progress:100,ct:0,total:0}),!1)}function P(e,t){if(!Object(c.e)(t)||t.time<0)s(Gi(Gi({},w.current),{},{state:e}));else{var n=100-V(function(e){return w.current.round.actions.reduce((function(e,t,n){return n<w.current.actionIdx?e+parseInt(t.duration):e}),0)+e}(t.ct),w.current.roundDuration),i=function(e){return 100-V(e,w.current.totalDuration)}(t.total);s(Gi(Gi({},w.current),{},{timer:(o=t.time,o<0?"Error":U(o,(function(e,t){switch(t){case"hour":case"minute":return G(e)+":";default:return G(e)}}))),timerCls:(r=t.time,a=e,a===ai&&r>=0&&r<3?"cui-text-warning timer-blink-animation":""),state:e,progress:t.progress,roundProgress:n,trainingProgress:i}))}var r,a,o;!function(e){switch(e){case ai:f({startBtnCls:"cui-error",startBtnIcon:"media_stop",startBtnText:"Stop",isPauseVisible:!0,pauseBtnIcon:"media_pause",pauseBtnText:"Pause"});break;case ci:f({startBtnCls:"cui-error",startBtnIcon:"media_stop",startBtnText:"Stop",isPauseVisible:!0,pauseBtnIcon:"media_play",pauseBtnText:"Resume"});break;case oi:f({startBtnCls:"cui-accent",startBtnIcon:"media_play",startBtnText:"Start",isPauseVisible:!1,pauseBtnIcon:"media_pause",pauseBtnText:"Pause"})}}(e)}function D(e){if(y.current.soundEnabled){var t=void 0;switch(e){case"countdown":t=O.current;break;case"end":t=S.current;break;case"exercise":t=N.current;break;case"warmup":t=k.current;break;case"break":t=j.current;break;case"cooldown":t=x.current}t&&(t.currentTime=0,t.play())}}return i.useEffect((function(){Q("Perform training");var t=new ti;if(e.training){Q(e.training.name),K(e.training.name),C(e.training);try{t.activate()}catch(e){v("We could not activate feature to keep your device's screen awake during training performance")}var i=new hi;i.onTick(I),r(i)}return function(){n&&n.stop(),t.release()}}),[e.training,m.soundEnabled]),i.createElement("div",{className:"stopwatch-layout-content cui-background-default",ref:A},i.createElement("div",{className:"cui-height-1-1 cui-overflow-y-auto cui-flex cui-center cui-middle "+(E=o.action,Object(c.e)(E)?z(E.type):"")},i.createElement("div",{className:"stopwatch-content-width cui-text-center cui-flex-center animation-fade-in"},m.simpleView?i.createElement(bi,{actionIdx:o.actionIdx,watchState:o}):i.createElement(pi,{actionIdx:o.actionIdx,watchState:o}))),i.createElement("div",{className:"training-control-btns"},i.createElement("a",{className:"cui-icon-button cui-default cui-margin-small","cui-icon":m.soundEnabled?"speaker":"volume_muted",onClick:function(){h(Gi(Gi({},m),{},{soundEnabled:!m.soundEnabled}))}}),l.isPauseVisible&&i.createElement(Fi,{icon:l.pauseBtnIcon,onClick:function(){o.state===ai&&n.pause()?P(ci):o.state===ci&&n&&n.resume()&&P(ai)},modifiers:"cui-margin-small cui-large cui-default"}),i.createElement(Fi,{icon:l.startBtnIcon,onClick:function(){o.state===oi&&n.start()?P(ai):o.state!==oi&&n.stop()&&(C(e.training),P(oi,{time:0,progress:100,ct:0,total:0}))},modifiers:"cui-large "+l.startBtnCls}),i.createElement("a",{className:"cui-icon-button cui-default cui-margin-small","cui-icon":T?"shrink":"expand",onClick:function(){A.current&&(T&&Object(c.c)(),Object(c.f)(A.current))}})),Object(c.e)(b)&&i.createElement("div",{className:"cui-position-float cui-position-bottom cui-position-right app-float-bottom cui-margin-right"},i.createElement("span",{className:"cui-icon cui-error cui-tooltip","cui-icon":"ban","cui-tooltip":b})),i.createElement("audio",{ref:O,id:"stopwatch-countdown",src:"/static/audio/stopwatch_countdown.mp3"}),i.createElement("audio",{ref:N,id:"stopwatch-exercise",src:"/static/audio/stopwatch_exercise.mp3"}),i.createElement("audio",{ref:k,id:"stopwatch-warmup",src:"/static/audio/stopwatch_warmup.mp3"}),i.createElement("audio",{ref:j,id:"stopwatch-break",src:"/static/audio/stopwatch_break.mp3"}),i.createElement("audio",{ref:x,id:"stopwatch-cooldown",src:"/static/audio/stopwatch_cooldown.mp3"}),i.createElement("audio",{ref:S,id:"stopwatch-cooldown",src:"/static/audio/stopwatch_end.mp3"}))}function qi(){function e(){window.$cui.toast("Data cleared")}function t(){console.log("Settings cleared"),window.$settingsFlow.perform(ji)}return i.useEffect((function(){var n=window.$settingsFlow.subscribe(Ti,{finish:t}),i=window.$actionsFlow.subscribe(Je,{finish:e}),r=window.$flow.subscribe(rn,{finish:e});return function(){window.$settingsFlow.unsubscribe(Ti,n.id),window.$actionsFlow.unsubscribe(Je,i.id),window.$flow.unsubscribe(rn,r.id)}}),[]),i.createElement("div",{className:"cui-section"},i.createElement("h3",{className:"cui-h3"},"Dev tools"),i.createElement("div",{className:""},i.createElement("div",null),i.createElement("button",{className:"cui-button cui-margin-small cui-default ",onClick:function(){window.$actionsFlow.perform(Je)}},"Clear actions only")),i.createElement("div",null,i.createElement("button",{className:"cui-button cui-margin-small cui-default",onClick:function(){window.$flow.perform(rn)}},"Clear trainings only")),i.createElement("div",null,i.createElement("button",{className:"cui-button cui-margin-small cui-default",onClick:function(){window.$settingsFlow.perform(Ti)}},"Clear settings only")),i.createElement("div",null,i.createElement("button",{className:"cui-button cui-margin-small cui-error",onClick:function(){window.$actionsFlow.perform(Je),window.$flow.perform(rn),window.$settingsFlow.perform(Ti)}},"Clear data")))}function Qi(e){return i.useEffect((function(){}),[e.value,e.name]),i.createElement("div",{className:"cui-flex cui-middle cui-padding-small"},i.createElement("div",{className:"cui-flex-grow"},e.label),i.createElement("div",{className:"cui-input-switch"},i.createElement("input",{type:"checkbox",id:e.name,name:e.name,checked:e.value,onChange:function(t){var n=t.target;e.onUpdate&&e.onUpdate(n.name,n.checked)}}),i.createElement("label",{htmlFor:e.name,className:"cui-content"})))}function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){Ji(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return er(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function tr(){var e=Zi($i(),2),t=e[0],n=e[1];function r(e,i){if("soundEnabled"===e||"darkMode"===e||"simpleView"===e){var r=Xi(Xi({},t),{},Ji({},e,i));n(r)}}return i.useEffect((function(){Q("Settings"),K("Settings")}),[t.darkMode,t.soundEnabled]),i.createElement(i.Fragment,null,i.createElement("div",{className:"stopwatch-content-width"},i.createElement(Dt,{title:"Settings",description:"Change application setup",icon:"setup"}),i.createElement("div",{className:"cui-section"},i.createElement("ul",{className:"cui-list"},i.createElement("li",null,i.createElement(Qi,{label:"Dark mode",name:"darkMode",value:t.darkMode,onUpdate:r})),i.createElement("li",null,i.createElement(Qi,{label:"Play sound",name:"soundEnabled",value:t.soundEnabled,onUpdate:r})),i.createElement("li",null,i.createElement(Qi,{label:"Simple timer view",name:"simpleView",value:t.simpleView,onUpdate:r})),i.createElement("li",null,"Welcome screen status: ",t.isWelcome?"Yes":"No")),i.createElement("div",{className:"cui-section"},i.createElement("button",{className:"cui-button cui-default",onClick:function(){window.$cui.get("#welcome-dialog").emit("open")}},"Show tutorial dialog"))),i.createElement(qi,null)))}function nr(){return Q("About"),K("About"),i.createElement(i.Fragment,null,i.createElement("div",{className:"stopwatch-content-width"},i.createElement(Dt,{title:"About",description:"Some details about the application",icon:"info"}),i.createElement("div",{className:""},i.createElement("div",{className:"cui-container "},i.createElement("h3",{className:"cui-h3"},"Creator"),i.createElement("p",{className:""},"Project was created and is devloped by ",i.createElement("span",{className:"cui-text-accent cui-text-bold"},"BPDev"),": ",i.createElement("a",{href:"https://github.com/bpd-d",className:"cui-link cui-accent"},"Visit Github")," ")),i.createElement("div",{className:"cui-container "},i.createElement("h3",{className:"cui-h3"},"Repository"),i.createElement("p",{className:""},"Project sources can be found on Github under following link: ",i.createElement("a",{className:"cui-link cui-accent",href:"https://github.com/bpd-d/bpd-stopwatch-app"},"bpd-stopwatch-app"))),i.createElement("div",{className:"cui-container"},i.createElement("h3",{className:"cui-h3"},"Links"),i.createElement("p",{className:""},"Project uses third party libraries, see following list: "),i.createElement("ul",{className:"cui-list"},i.createElement("li",null,i.createElement("div",{className:""},i.createElement("div",{className:""},i.createElement("span",null,"React")),i.createElement("a",{href:"https://github.com/facebook/react",className:"cui-link"},"Github"),i.createElement("a",{href:"https://reactjs.org/",className:"cui-link cui-margin-left"},"React JS home page"))),i.createElement("li",null,i.createElement("div",{className:""},i.createElement("div",{className:""},i.createElement("span",null,"cUI Light")),i.createElement("a",{href:"https://github.com/bpd-d/cui-light",className:"cui-link"},"cUI Light on Github"),i.createElement("a",{href:"https://github.com/bpd-d/cui-styles",className:"cui-link cui-margin-left"},"cUI Styles on Github"),i.createElement("a",{href:"https://github.com/bpd-d/cui-icons",className:"cui-link cui-margin-left"},"cUI Icons on Github"))),i.createElement("li",null,i.createElement("div",{className:""},i.createElement("div",{className:""},i.createElement("span",null,"BPD Flow")),i.createElement("a",{href:"https://github.com/bpd-d/bpd-flow",className:"cui-link"},"Github"))),i.createElement("li",null,i.createElement("div",{className:""},i.createElement("div",{className:""},i.createElement("span",null,"BPD Storage")),i.createElement("a",{href:"https://github.com/bpd-d/bpd-storage",className:"cui-link"},"Github"))))))))}function ir(e){return i.createElement("div",{className:"stopwatch-footer cui-flex cui-right cui-middle"},i.createElement("div",{className:"cui-margin-horizontal"},i.createElement("span",{className:"cui-margin-small-right"},"Copyrights ",(new Date).getFullYear()+""),i.createElement("a",{href:"https://github.com/bpd-d",target:"_blank",className:"cui-link cui-accent"},"BPDDev"),"development"===e.mode&&i.createElement("span",{className:"cui-margin-left cui-text-bold"},"Dev")))}function rr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(i=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function or(){var e=rr(i.useState(!1),2),t=e[0],n=e[1],r=i.useRef(null);function a(e){Object(c.e)(e)&&Object(c.e)(e.index)&&2===e.index?n(!0):n(!1)}return i.useEffect((function(){r.current=window.$cui.get("#welcome-switch");var e=r.current.on("switched",a);return function(){Object(c.e)(e)&&e.forEach((function(e){r.current.detach("switched",e)}))}}),[t]),i.createElement(Et,{id:"welcome-dialog",title:"Welcome",body:i.createElement("ul",{id:"welcome-switch","cui-switch":"links: #welcome-step-indicator > li; height: 250px"},i.createElement("li",{className:"cui-active"},i.createElement("div",null,"Welcome to ",i.createElement("span",{className:"cui-text-bold cui-text-accent"},"Bpd Stopwatch")," app. It is simple, offline tool which will allow you to perform highly custimzed trainings that need stopwatch.")),i.createElement("li",null,i.createElement("div",null,"Set up some ",i.createElement("span",{className:"cui-text-bold cui-text-accent"},"Actions")," to build your trainings from. You can define action name, type and it's duration. Action type has it's indications in ",i.createElement("span",{className:"cui-text-bold"},"colors")," and ",i.createElement("span",{className:"cui-text-bold"},"sounds")," later when your training is performed, so choose type accordingly to your action type. You can choose from ",i.createElement("span",{className:"cui-text-italic"},"warmup"),", ",i.createElement("span",{className:"cui-text-italic"},"exercise"),", ",i.createElement("span",{className:"cui-text-italic"},"break")," and ",i.createElement("span",{className:"cui-text-italic"},"cooldown"),". There are some actions already defined (they cannot be modified or deleted), which can help you to start with building your trainings.")),i.createElement("li",null,i.createElement("div",null,"Give your ",i.createElement("span",{className:"cui-text-bold cui-text-accent"},"training")," a name and optionally  ",i.createElement("span",{className:"cui-text-bold cui-accent"},"description"),", then setup ",i.createElement("span",{className:"cui-text-bold cui-accent"},"rounds"),". You can define rounds from available actions. Once added they can be ",i.createElement("span",{className:"cui-text-italic"},"re-positioned"),", ",i.createElement("span",{className:"cui-text-italic"},"cloned")," or ",i.createElement("span",{className:"cui-text-italic"},"deleted"),"."))),footer:i.createElement("div",{className:"cui-flex cui-middle"},i.createElement("ul",{id:"welcome-step-indicator",className:"cui-switcher-indicator cui-flex-grow","cui-switcher":"target: #welcome-switch"},i.createElement("li",null,i.createElement("a",null)),i.createElement("li",null,i.createElement("a",null)),i.createElement("li",null,i.createElement("a",null))),i.createElement("div",null,i.createElement("button",{className:"cui-button",onClick:function(){t?window.$cui.get("#welcome-dialog").emit("close"):r.current.emit("switch","next")}},t?"Close":"Next")))})}function cr(){return Q("Help"),K("Help"),i.createElement("div",{className:"stopwatch-content-width"},i.createElement(Dt,{title:"Help",description:"Get started with bpd Stopwatch app",icon:"emoji_smile"}),i.createElement("div",{className:"cui-container cui-flex-center"},"Work in progress..."))}function sr(e){return i.createElement(a.a,null,i.createElement(o.a,{path:"*"},i.createElement(ur,{mode:e.mode})))}function ur(e){var t,n=Object(o.g)();function r(e){B(e)}function a(e){var t=this;e||setTimeout((function(){t.welcomeDialogHandle=window.$cui.get("#welcome-dialog"),t.welcomeDialogCloseEventIds=t.welcomeDialogHandle.on("close",t.onWelcomeDialogClose.bind(t)),window.$cui.get("#welcome-dialog").emit("open")}),100)}function s(){window.$settingsFlow.perform(Si,!0)}return i.useEffect((function(){var e=window.$settingsFlow.subscribe(yi,{finish:r}),n=window.$settingsFlow.subscribe(xi,{finish:a}),i=(t=window.$cui.get("#welcome-dialog")).on("close",s);return window.$settingsFlow.perform(xi),window.$settingsFlow.perform(yi),function(){window.$settingsFlow.unsubscribe(yi,e.id),window.$settingsFlow.unsubscribe(xi,n.id),Object(c.e)(i)&&i.forEach((function(e){t.detach("close",e)}))}})),i.createElement("div",{className:"stopwatch-layout-main"},i.createElement(Re,null),i.createElement("div",{className:"stopwatch-layout-content cui-overflow-y-auto"},i.createElement(o.c,{location:n},i.createElement(o.a,{path:Z.getUrl("perform"),component:zi}),i.createElement(o.a,{path:Z.getUrl("newTraining"),component:Vn}),i.createElement(o.a,{path:Z.getUrl("editTraining"),component:Vn}),i.createElement(o.a,{path:Z.getUrl("actions"),component:qt}),i.createElement(o.a,{path:Z.getUrl("settings"),component:tr}),i.createElement(o.a,{path:Z.getUrl("about"),component:nr}),i.createElement(o.a,{path:Z.getUrl("help"),component:cr}),i.createElement(o.a,{path:Z.getUrl("home"),component:be}),i.createElement(o.a,null,i.createElement(ke,null)))),i.createElement(ir,{mode:e.mode}),i.createElement(He,null),i.createElement(or,null))}var lr=n(30),fr=n(18),dr=n(22);function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pr(e){return function(e){if(Array.isArray(e))return br(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return br(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function br(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function vr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gr(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function wr(e,t,n){return t&&gr(e.prototype,t),n&&gr(e,n),e}function yr(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Er(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var Or,Nr,kr,jr,xr,Sr,Ar=new WeakMap,Tr=new WeakMap,Cr=function(){function e(){vr(this,e),Ar.set(this,{writable:!0,value:void 0}),Tr.set(this,{writable:!0,value:void 0}),Er(this,Ar,new dr.BpdStorage("local","BPD_TRAININGS")),Er(this,Tr,new ht)}return wr(e,[{key:"getAllTrainings",value:function(){return this.getTrainings()}},{key:"addTraining",value:function(e){var t=this,n=!1;return this.validate(e)&&this.onAction((function(i){return Object(c.e)(e.id)?null:(e.state===g&&t.clearDraft(),e.id="00"+t.getNextIndex(),e.state=w,i.push(e),n=!0,i)})),n}},{key:"updateTraining",value:function(e){var t=this,n=!1;return this.validate(e)&&(Object(c.e)(e.id)?this.onAction((function(i){var r=i.findIndex((function(t){return t.id===e.id}));return r>-1?(e.state===g&&t.clearDraft(),e.state=w,i[r]=e,n=!0,i):null})):n=this.addTraining(e)),n}},{key:"deleteTraining",value:function(e){var t=!1;return!!Object(c.e)(e)&&(this.onAction((function(n){var i=n.findIndex((function(t){return t.id===e}));return i>-1?(n.splice(i,1),t=!0,n):null})),t)}},{key:"getTraining",value:function(e){var t=void 0;return this.onAction((function(n){return t=n.find((function(t){return t.id===e})),null})),t}},{key:"clearTrainings",value:function(){this.onAction((function(e){return[]}))}},{key:"isDraft",value:function(){throw Object(c.e)(yr(this,Ar).getAny("DRAFT_TRAINING"))}},{key:"getDraft",value:function(){var e;return null!==(e=yr(this,Ar).getAny("DRAFT_TRAINING"))&&void 0!==e?e:void 0}},{key:"setDraft",value:function(e){Object(c.e)(e)&&(e.state=g,yr(this,Ar).setAny("DRAFT_TRAINING",e))}},{key:"clearDraft",value:function(){yr(this,Ar).removeItem("DRAFT_TRAINING")}},{key:"getCurrentTraining",value:function(){throw new Error("Method not implemented.")}},{key:"setCurrentTraining",value:function(e){throw new Error("Method not implemented.")}},{key:"getTrainings",value:function(){var e;return null!==(e=yr(this,Ar).getAny("Trainings"))&&void 0!==e?e:[]}},{key:"setTrainings",value:function(e){yr(this,Ar).setAny("Trainings",e)}},{key:"getNextIndex",value:function(){var e=yr(this,Ar).getNumber("TRAININGS_INDEX");return e&&NaN!==e?e+=1:e=1,yr(this,Ar).setNumber("TRAININGS_INDEX",e),e}},{key:"validate",value:function(e){return yr(this,Tr).validate(e).status}},{key:"onAction",value:function(e){var t=e(this.getTrainings());null!==t&&this.setTrainings(t)}}]),e}(),Ir=new WeakMap,Pr=new WeakMap,Dr=new WeakMap,Mr=function(){function e(){vr(this,e),Ir.set(this,{writable:!0,value:void 0}),Pr.set(this,{writable:!0,value:void 0}),Dr.set(this,{writable:!0,value:void 0}),Er(this,Ir,new dr.BpdStorage("local","BPD_TRAININGS")),Er(this,Pr,[]),Er(this,Dr,new bt),this.getActionsFromStorage()}return wr(e,[{key:"getAllActions",value:function(){return pr(yr(this,Pr))}},{key:"setAction",value:function(e){if(!yr(this,Dr).validate(e).status)return!1;Object(c.e)(e.id)||(e.id="000"+this.getNextIndex(),yr(this,Pr).push(e));var t=this.getIndex(e);return t>-1?(yr(this,Pr)[t]=e,this.setActionsToStorage(),!0):(console.log("Unknown action id: "+e.id),!1)}},{key:"removeAction",value:function(e){if(!yr(this,Dr).validate(e).status)return!1;var t=this.getIndex(e);return t<0?(console.log("Unknown action id: "+e.id),!1):(yr(this,Pr).splice(t,1),this.setActionsToStorage(),!0)}},{key:"clearActions",value:function(){Er(this,Pr,[]),this.setActionsToStorage()}},{key:"getActionsById",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Object(c.e)(t))return yr(this,Pr).reduce((function(e,n,i){return t.includes(n.id)&&e.push(n),e}),[])}},{key:"getIndex",value:function(e){return yr(this,Pr).findIndex((function(t){return t.id===e.id}))}},{key:"getActionsFromStorage",value:function(){var e=yr(this,Ir).getAny("ACTIONS");Er(this,Pr,null!=e?e:[])}},{key:"setActionsToStorage",value:function(){yr(this,Ir).setAny("ACTIONS",yr(this,Pr))}},{key:"getNextIndex",value:function(){var e=yr(this,Ir).getNumber("ACTION_INDEX");return e?e+=1:e=5,yr(this,Ir).setNumber("ACTION_INDEX",e),e}}]),e}(),_r=new WeakMap,$r=function(){function e(){vr(this,e),_r.set(this,{writable:!0,value:void 0}),Er(this,_r,new dr.BpdStorage("local","BPD_SETTINGS"))}return wr(e,[{key:"setSettings",value:function(e){return yr(this,_r).setAny("SETTINGS",e),!0}},{key:"getSettings",value:function(){return yr(this,_r).getAny("SETTINGS")||{darkMode:!1,soundEnabled:!1}}},{key:"setSoundEnabled",value:function(e){var t=this.getSettings();e!==t.soundEnabled&&(t.soundEnabled=e,this.setSettings(t))}},{key:"isSoundEnabled",value:function(){var e;return null===(e=this.getSettings())||void 0===e?void 0:e.soundEnabled}},{key:"setDarkMode",value:function(e){var t=this.getSettings();e!==t.darkMode&&(t.darkMode=e,this.setSettings(t))}},{key:"isDarkMode",value:function(){var e;return null===(e=this.getSettings())||void 0===e?void 0:e.darkMode}},{key:"isWelcomeSet",value:function(){var e;return null===(e=this.getSettings())||void 0===e?void 0:e.isWelcome}},{key:"setIsWelcome",value:function(e){var t=this.getSettings();e!==t.isWelcome&&(t.isWelcome=e,this.setSettings(t))}},{key:"clearSettings",value:function(){this.setSettings(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){hr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},M))}}]),e}(),Lr=n(31),Rr=n(1),Wr=n(19),Fr=n(2),Ur=n(20),Gr=n(6),Br=n(34),Vr=n(5),Hr=n(21),zr=n(4),Yr=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function c(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))},qr=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Qr=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class Kr{constructor(e,t){Or.set(this,void 0),Nr.set(this,void 0),kr.set(this,void 0),jr.set(this,void 0),xr.set(this,void 0),Sr.set(this,void 0),qr(this,Or,e),qr(this,Nr,!1),qr(this,kr,Gr.a.get("ElementManager")),qr(this,xr,t),qr(this,jr,Date.now()),qr(this,Sr,new Hr.a(t.interactions))}toggleClass(e){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(t=>{t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)},"toggleClass")}))}toggleClassAs(e){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(t=>{let n=t.classList;Qr(this,xr).interactions.fetch(()=>{n.contains(e)?Qr(this,xr).interactions.mutate(n.remove,n,e):Qr(this,xr).interactions.mutate(n.add,n,e)},this)},"toggleClassAs")}))}setClass(e){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(t=>{t.classList.contains(e)||t.classList.add(e)},"setClass")}))}setClassAs(e){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(t=>{let n=t.classList;Qr(this,xr).interactions.fetch(()=>{n.contains(e)||Qr(this,xr).interactions.mutate(n.add,n,e)},this)},"setClassAs")}))}removeClass(e){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(t=>{t.classList.contains(e)&&t.classList.remove(e)},"removeClass")}))}removeClassAs(e){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(t=>{let n=t.classList;Qr(this,xr).interactions.fetch(()=>{n.contains(e)&&Qr(this,xr).interactions.mutate(n.remove,n,e)},this)},"removeClass")}))}getAttribute(e){return Object(Rr.x)(e)?Qr(this,Or).reduce((t,n)=>{let i=n.getAttribute(e);return null!=i&&t.push(i),t},[]):[]}setAttribute(e,t){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(n=>{n.setAttribute(e,null!=t?t:"")},"setAttribute")}))}setAttributeAs(e,t){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(n=>{Qr(this,xr).interactions.mutate(n.setAttribute,n,e,null!=t?t:"")},"setAttributeAs")}))}removeAttribute(e){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(t=>{t.removeAttribute(e)},"removeAttribute")}))}removeAttributeAs(e){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(t=>{Qr(this,xr).interactions.mutate(t.removeAttribute,t,e)},"removeAttributeAs")}))}toggleAttribute(e,t){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(n=>{n.hasAttribute(e)?n.removeAttribute(e):n.setAttribute(e,null!=t?t:"")},"toggleAttribute")}))}toggleAttributeAs(e,t){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(n=>{Qr(this,xr).interactions.fetch(()=>{n.hasAttribute(e)?Qr(this,xr).interactions.mutate(n.removeAttribute,n,e):Qr(this,xr).interactions.mutate(n.setAttribute,n,e,null!=t?t:"")},this)},"toggleAttributeAs")}))}click(e){return Yr(this,void 0,void 0,(function*(){return!!Object(Rr.x)(e)&&this.call(t=>{t.addEventListener("click",e)},"click")}))}event(e,t){return Yr(this,void 0,void 0,(function*(){return!(!Object(Rr.x)(e)||!Object(Rr.x)(t))&&this.call(n=>{n.addEventListener(e,t)},"event")}))}call(e,t){return Yr(this,void 0,void 0,(function*(){return Qr(this,Nr)&&Qr(this,kr).error("Element is locked",t),this.lock(),Qr(this,Or).forEach((t,n)=>{e(t,n)}),this.unlock(),!0}))}animate(e,t){return Yr(this,void 0,void 0,(function*(){if(!Object(Rr.x)(e))return!1;const n=null!=t?t:Qr(this,xr).setup.animationTime;return this.call(t=>{this.change(()=>{t.classList.add(e),t.classList.add(Fr.a.animProgress),setTimeout(()=>{this.change(()=>{t.classList.remove(e),t.classList.remove(Fr.a.animProgress)})},n)})})}))}open(e,t,n){return Yr(this,void 0,void 0,(function*(){if(!Object(Rr.b)(e,t))return!1;const i=null!=n?n:Qr(this,xr).setup.animationTime,r=new zr.c(t);return this.call(t=>{Qr(this,Sr).performAction(t,r,null!=i?i:0).then(()=>{t.classList.add(e)})})}))}close(e,t,n){return Yr(this,void 0,void 0,(function*(){if(!Object(Rr.b)(e,t))return!1;const i=null!=n?n:Qr(this,xr).setup.animationTime,r=new zr.c(t);return this.call(t=>{Qr(this,Sr).performAction(t,r,null!=i?i:0).then(()=>{t.classList.remove(e)})})}))}emit(e,...t){Object(Rr.x)(e)?this.call(n=>{let i=n.$cuid;Object(Rr.x)(i)&&(Qr(this,kr).debug(`Emitting event ${e} to ${i}`),Qr(this,xr).bus.emit(e,i,...t))},"emit"):Qr(this,kr).warning("Not enough data to emit event","emit")}on(e,t){let n=[];return Object(Rr.b)(e,t)?(this.call(i=>{let r=i;if(Object(Rr.x)(r)){let i=Qr(this,xr).bus.on(e,t,r);null!=i&&n.push(i)}},"on"),n):(Qr(this,kr).error("Incorrect arguments","on"),n)}detach(e,t){Object(Rr.b)(e,t)||Qr(this,kr).error("Incorrect arguments","detach"),this.call(n=>{let i=n;Object(Rr.x)(i)&&Qr(this,xr).bus.detach(e,t,i)},"detach")}read(e,...t){Qr(this,xr).interactions.fetch(e,this,...t)}change(e,...t){Qr(this,xr).interactions.mutate(e,this,...t)}elements(){return Qr(this,Or)}count(){return Qr(this,Or).length}lock(){qr(this,Nr,!0)}unlock(){qr(this,Nr,!1)}isLocked(){return Qr(this,Nr)}refresh(){return Date.now()-Qr(this,jr)<36e4}}Or=new WeakMap,Nr=new WeakMap,kr=new WeakMap,jr=new WeakMap,xr=new WeakMap,Sr=new WeakMap;var Xr,Jr,Zr,ea,ta,na,ia=n(7),ra=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},aa=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class oa{constructor(e,t,n){Xr.set(this,void 0),Jr.set(this,void 0),Zr.set(this,void 0),ea.set(this,void 0),ta.set(this,void 0),na.set(this,void 0),ra(this,ea,e),ra(this,Xr,ra(this,Zr,ra(this,Jr,void 0))),ra(this,ta,null!=n?n:""),ra(this,na,t)}createHeader(e,t,n){Object(Rr.x)(t)||(t=[]),Object(Rr.x)(n)||(n=[]);let i=new ia.a("div");i.setClasses(aa(this,ea)+"-dialog-header",...t),ra(this,Xr,i.build());let r=new ia.a("span").setClasses(this.getPrefixedString("-dialog-title")).build(e);aa(this,Xr).appendChild(r),this.appendChildrens(aa(this,Xr),...n)}createFooter(e,t){Object(Rr.x)(e)||(e=[]),Object(Rr.x)(t)||(t=[]),ra(this,Zr,new ia.a("div").setClasses(this.getPrefixedString("-dialog-footer"),...e).build()),this.appendChildrens(aa(this,Zr),...t)}createBody(e,t){Object(Rr.x)(e)||(e=[]),Object(Rr.x)(t)||(t=[]),ra(this,Jr,new ia.a("div").setClasses(this.getPrefixedString("-dialog-body"),...e).build()),this.appendChildrens(aa(this,Jr),...t)}build(e){let t=[this.getPrefixedString("-dialog")];aa(this,na)&&t.push(this.getPrefixedString("-reverse-auto"));let n=new ia.a("div").setId(e).setClasses(...t).setAttributes({[this.getPrefixedString("-dialog")]:aa(this,ta)}).build(),i=new ia.a("div").setClasses(this.getPrefixedString("-dialog-container")).build();return aa(this,Xr)&&i.appendChild(aa(this,Xr)),aa(this,Jr)&&i.appendChild(aa(this,Jr)),aa(this,Zr)&&i.appendChild(aa(this,Zr)),n.appendChild(i),n}appendChildrens(e,...t){Object(Rr.x)(t)&&t.forEach(t=>e.appendChild(t))}getPrefixedString(e){return aa(this,ea)+e}}Xr=new WeakMap,Jr=new WeakMap,Zr=new WeakMap,ea=new WeakMap,ta=new WeakMap,na=new WeakMap;var ca,sa,ua,la,fa,da,ma,ha,pa=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},ba=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class va{constructor(e,t,n){ca.set(this,void 0),sa.set(this,void 0),ua.set(this,void 0),la.set(this,void 0),fa.set(this,void 0),pa(this,ca,{yes:n.onYes,no:n.onNo,cancel:n.onCancel,ok:n.onOk}),this.content=n.message,this.title=n.title,this.prefix=e.setup.prefix,pa(this,sa,e),pa(this,ua,t),this.reverse=!1,pa(this,fa,null),this.closeStr=ba(this,sa).setup.prefix+"-close",this.iconStr=ba(this,sa).setup.prefix+"-icon",pa(this,la,void 0)}getId(){return ba(this,ua)}show(e){let t=document.getElementById(ba(this,ua));Object(Rr.x)(t)?this.updateElement(t):(t=this.createElement(),e.appendChild(t)),setTimeout(()=>{pa(this,la,new Kr([t],ba(this,sa)));let e=ba(this,la).on("closed",this.onClose.bind(this));pa(this,fa,e.length>0?e[0]:null),ba(this,la).emit("open")},100)}updateElement(e){let t=e.querySelector(`.${this.prefix}-dialog-title`),n=e.querySelector(`.${this.prefix}-dialog-body>p`);ba(this,sa).interactions.mutate(()=>{t&&(t.innerHTML=this.title),n&&(n.innerHTML=this.content)},null)}onClose(e){try{if(Object(Rr.x)(e)&&e.state&&ba(this,ca)&&Object(Rr.x)(ba(this,ca)[e.state])){let t=ba(this,ca)[e.state];t&&t()}}finally{null!=ba(this,fa)&&(ba(this,la)&&ba(this,la).detach("closed",ba(this,fa)),pa(this,fa,null)),pa(this,la,void 0)}}}ca=new WeakMap,sa=new WeakMap,ua=new WeakMap,la=new WeakMap,fa=new WeakMap;class ga extends va{constructor(e,t,n){var i;super(e,t,n),da.set(this,void 0),pa(this,da,t),this.reverse=null!==(i=n.reverse)&&void 0!==i&&i}createElement(){let e=new oa(this.prefix,this.reverse);return e.createHeader(this.title,[],[new ia.a("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),e.createBody([],[new ia.a("p").build(this.content)]),e.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new ia.a("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: cancel"}).build("Cancel"),new ia.a("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),e.build(ba(this,da))}}da=new WeakMap;class wa extends va{constructor(e,t,n){var i;super(e,t,n),ma.set(this,void 0),pa(this,ma,t),this.content=n.message,this.title=n.title,this.prefix=e.setup.prefix,this.reverse=null!==(i=n.reverse)&&void 0!==i&&i}createElement(){let e=new oa(this.prefix,this.reverse);return e.createHeader(this.title,[]),e.createBody([],[new ia.a("p").build(this.content)]),e.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new ia.a("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),e.build(ba(this,ma))}}ma=new WeakMap;class ya extends va{constructor(e,t,n){var i;super(e,t,n),ha.set(this,void 0),pa(this,ha,t),this.content=n.message,this.title=n.title,this.prefix=e.setup.prefix,this.reverse=null!==(i=n.reverse)&&void 0!==i&&i}createElement(){let e=new oa(this.prefix,this.reverse);return e.createHeader(this.title,[],[new ia.a("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),e.createBody([],[new ia.a("p").build(this.content)]),e.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new ia.a("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: no"}).build("No"),new ia.a("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: yes"}).build("Yes")]),e.build(ba(this,ha))}}ha=new WeakMap;var Ea,Oa,Na,ka,ja,xa=n(16),Sa=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Aa=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class Ta{constructor(e){Ea.set(this,void 0),Oa.set(this,void 0),Na.set(this,void 0),ka.set(this,void 0),ja.set(this,void 0),Sa(this,Ea,e),Sa(this,Oa,new xa.a),Aa(this,Oa).setCallback(this.onMove.bind(this)),Sa(this,ja,void 0),Sa(this,Na,!1),Sa(this,ka,null)}attach(){Aa(this,Oa).isAttached()||(Aa(this,Oa).attach(),Sa(this,ka,Aa(this,Ea).on(Fr.i.MOVE_LOCK,this.onMoveLock.bind(this))))}detach(){Aa(this,Oa).isAttached()&&(Aa(this,Oa).detach(),null!=Aa(this,ka)&&Aa(this,Ea).detach(Fr.i.MOVE_LOCK,Aa(this,ka)))}isAttached(){return Aa(this,Oa).isAttached()}onMove(e){if(!Aa(this,Na))switch(e.type){case"down":Sa(this,ja,e);break;case"move":Aa(this,ja)&&(Aa(this,Ea).emit(Fr.i.GLOBAL_MOVE,null,Aa(this,ja)),Sa(this,ja,void 0)),Aa(this,Ea).emit(Fr.i.GLOBAL_MOVE,null,e);break;case"up":if(Aa(this,ja))return void Sa(this,ja,void 0);Aa(this,Ea).emit(Fr.i.GLOBAL_MOVE,null,e)}}onMoveLock(e){Sa(this,Na,e)}}Ea=new WeakMap,Oa=new WeakMap,Na=new WeakMap,ka=new WeakMap,ja=new WeakMap;var Ca,Ia,Pa,Da,Ma,_a,$a,La,Ra=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function c(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))},Wa=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Fa=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class Ua{constructor(e,t,n){Ca.set(this,void 0),Ia.set(this,void 0),Pa.set(this,void 0),Da.set(this,void 0),Ma.set(this,void 0),_a.set(this,void 0),$a.set(this,void 0),La.set(this,void 0),Wa(this,Ca,e),Wa(this,Ia,`.${t}-toast`),Wa(this,Pa,t+"-toast"),Wa(this,Da,t+"-active"),Wa(this,Ma,n),Wa(this,_a,!1),Wa(this,$a,t+"-toast-animation-in"),Wa(this,La,t+"-toast-animation-out")}show(e){return Ra(this,void 0,void 0,(function*(){if(Fa(this,_a))return!1;Wa(this,_a,!0);let t=document.querySelector(Fa(this,Ia));return Object(Rr.x)(t)||(t=document.createElement("div"),t.classList.add(Fa(this,Pa)),document.body.appendChild(t),yield Object(Rr.F)(10)),Fa(this,Ca).mutate(()=>{t.textContent=e,t.classList.add(Fr.a.animProgress),t.classList.add(Fa(this,$a))},this),yield Object(Rr.F)(Fa(this,Ma)),Fa(this,Ca).mutate(()=>{t.classList.remove(Fr.a.animProgress),t.classList.remove(Fa(this,$a)),t.classList.add(Fa(this,Da))},this),yield Object(Rr.F)(3e3),Fa(this,Ca).mutate(()=>{t.classList.add(Fr.a.animProgress),t.classList.add(Fa(this,La))},this),setTimeout(()=>{Fa(this,Ca).mutate(()=>{t.classList.remove(Fr.a.animProgress),t.classList.remove(Fa(this,La)),t.classList.remove(Fa(this,Da))},this),Wa(this,_a,!1)},Fa(this,Ma)),!0}))}}Ca=new WeakMap,Ia=new WeakMap,Pa=new WeakMap,Da=new WeakMap,Ma=new WeakMap,_a=new WeakMap,$a=new WeakMap,La=new WeakMap;var Ga,Ba,Va,Ha,za,Ya=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function c(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))},qa=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Qa=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class Ka{constructor(e){Ga.set(this,void 0),Ba.set(this,void 0),Va.set(this,void 0),Ha.set(this,void 0),za.set(this,void 0),qa(this,za,e),qa(this,Ba,Gr.a.get("CollectionManager")),qa(this,Ga,[]),qa(this,Va,!1),qa(this,Ha,"")}setElements(e){qa(this,Ga,e)}setToggle(e){qa(this,Ha,e)}addAnimationClass(e,t,n,i){t.classList.add(Fr.a.animProgress),e.classList.add(i),t.classList.add(n)}setFinalClasses(e,t,n,i){t.classList.remove(Fr.a.animProgress),e.classList.remove(i),t.classList.remove(n),e.classList.remove(Qa(this,Ha)),t.classList.add(Qa(this,Ha))}verifyIndex(e,t,n){return e>=0&&e!==t&&e<n}setCurrent(e,t){return Ya(this,void 0,void 0,(function*(){return this.lock(),Qa(this,Ba).debug(`Switching index from: ${t} to ${e}`),t>-1&&Qa(this,Ga)[t].classList.remove(Qa(this,Ha)),Qa(this,Ga)[e].classList.add(Qa(this,Ha)),this.unlock(),!0}))}setCurrentWithAnimation(e,t,n,i,r){return Ya(this,void 0,void 0,(function*(){this.lock(),Qa(this,Ba).debug(`Switching index from: ${r} to ${e}`);const a=Qa(this,Ga)[r],o=Qa(this,Ga)[e];return Qa(this,za).mutate(this.addAnimationClass,this,a,o,t,n),setTimeout(()=>{Qa(this,za).mutate(this.setFinalClasses,this,a,o,t,n),this.unlock()},i),!0}))}getCurrentIndex(){if(!Object(Rr.x)(Qa(this,Ha)))return-1;let e=this.count();for(let t=0;t<e;t++)if(Qa(this,Ga)[t].classList.contains(Qa(this,Ha)))return t;return-1}elements(){return Qa(this,Ga)}check(){return Qa(this,Va)?(Qa(this,Ba).warning("Object locked. Operation in progress","Check"),!1):Object(Rr.x)(Qa(this,Ha))?!(this.count()<=0)||(Qa(this,Ba).warning("Elements list is empty","Check"),!1):(Qa(this,Ba).warning("Toggle is not set. Call setToggleClass","Check"),!1)}count(){return Qa(this,Ga)?Qa(this,Ga).length:-1}lock(){qa(this,Va,!0)}unlock(){qa(this,Va,!1)}}Ga=new WeakMap,Ba=new WeakMap,Va=new WeakMap,Ha=new WeakMap,za=new WeakMap;var Xa,Ja,Za,eo=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function c(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))},to=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},no=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class io{constructor(e,t){Xa.set(this,void 0),Ja.set(this,void 0),Za.set(this,void 0),to(this,Xa,Gr.a.get("CollectionManager")),to(this,Za,new Ka(t)),no(this,Za).setElements(e),to(this,Ja,Date.now())}setToggle(e){no(this,Za).setToggle(e)}setElements(e){no(this,Za).setElements(e)}click(e){no(this,Za).elements().forEach((t,n)=>{t.addEventListener("click",()=>{this.set(n).then(()=>{e&&e(t,n)})})})}next(){return eo(this,void 0,void 0,(function*(){if(!no(this,Za).check())return!1;let e=no(this,Za).getCurrentIndex()+1;return this.set(e>=this.length()?0:e)}))}previous(){return eo(this,void 0,void 0,(function*(){if(!no(this,Za).check())return!1;let e=no(this,Za).getCurrentIndex()-1;return this.set(e<0?this.length()-1:e)}))}set(e){return eo(this,void 0,void 0,(function*(){let t=no(this,Za).getCurrentIndex();return!(!no(this,Za).check()||!no(this,Za).verifyIndex(e,t,this.length()))&&no(this,Za).setCurrent(e,t)}))}setWithAnimation(e,t,n,i){return eo(this,void 0,void 0,(function*(){let r=no(this,Za).getCurrentIndex();return!(!no(this,Za).check()||!no(this,Za).verifyIndex(e,r,this.length()))&&no(this,Za).setCurrentWithAnimation(e,t,n,i,r)}))}getCurrentIndex(){return no(this,Za).getCurrentIndex()}length(){return no(this,Za).count()}refresh(){return this.length()>0&&Date.now()-no(this,Ja)>36e4}}Xa=new WeakMap,Ja=new WeakMap,Za=new WeakMap;var ro,ao,oo,co=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function c(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))},so=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},uo=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class lo{constructor(e){ro.set(this,void 0),ao.set(this,void 0),oo.set(this,void 0),so(this,ro,null!=e?e:[]),so(this,oo,Gr.a.get("CuiPluginManager")),so(this,ao,[])}init(e){uo(this,oo).debug("Plugins initialization started: "+uo(this,ro).length),so(this,ao,uo(this,ro).filter(e=>Object(Rr.x)(e.mutation))),uo(this,ro).forEach(t=>{t.init(e),e.setup.plugins[t.description]=t.setup}),uo(this,oo).debug("Plugins have been initialized")}get(e){if(Object(Rr.x)(e))return uo(this,ro).find(t=>t.name===e)}onMutation(e){return co(this,void 0,void 0,(function*(){let t=[];return uo(this,ao).forEach(n=>{t.push(n.mutation(e))}),!(yield Promise.all(t)).find(e=>{})}))}}ro=new WeakMap,ao=new WeakMap,oo=new WeakMap;var fo,mo,ho,po,bo,vo,go,wo,yo,Eo=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function c(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))},Oo=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},No=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class ko{constructor(e,t,n){fo.set(this,void 0),mo.set(this,void 0),ho.set(this,void 0),po.set(this,void 0),bo.set(this,void 0),vo.set(this,void 0),go.set(this,void 0),wo.set(this,void 0),yo.set(this,void 0),Fr.l.prefix=e.prefix,Fr.l.logLevel=e.logLevel,Oo(this,bo,new lo(t)),Oo(this,vo,null!=n?n:[]),Oo(this,po,new Br.a(e)),Oo(this,fo,Gr.a.get("CuiInstance")),Oo(this,go,e.root),Oo(this,wo,new Ta(No(this,po).bus)),Oo(this,mo,void 0),Oo(this,ho,void 0),Oo(this,yo,[])}init(){var e;if(No(this,fo).debug("Instance started","init"),!Object(Rr.x)(window.MutationObserver))throw new Vr.e("Mutation observer does not exists");Oo(this,ho,new Ua(No(this,po).interactions,No(this,po).setup.prefix,null!==(e=No(this,po).setup.animationTimeLong)&&void 0!==e?e:0)),Oo(this,yo,No(this,vo).map(e=>e.attribute));const t=Object(Rr.x)(No(this,yo))?No(this,go).querySelectorAll(Object(Rr.B)(No(this,yo))):null;if(Object(Rr.x)(t)){No(this,fo).debug(`Initiating ${t.length} elements`);try{t.forEach(e=>{Object(Rr.D)(e,No(this,vo),No(this,yo),No(this,po))})}catch(e){No(this,fo).exception(e)}}return No(this,fo).debug("Init plugins","init"),No(this,bo).init(No(this,po)),Object(Rr.b)(No(this,vo),No(this,yo))&&(No(this,fo).debug("Init mutation observer","init"),Oo(this,mo,new Ur.b(No(this,go),No(this,po))),No(this,mo).setComponents(No(this,vo)).setAttributes(No(this,yo)),No(this,mo).setPlugins(No(this,bo)),No(this,mo).start()),No(this,fo).debug("Setting CSS globals","init"),No(this,po).interactions.mutate(()=>{No(this,po).setProperty(Fr.g.animationTimeLong,No(this,po).setup.animationTimeLong+"ms"),No(this,po).setProperty(Fr.g.animationTime,No(this,po).setup.animationTime+"ms"),No(this,po).setProperty(Fr.g.animationTimeShort,No(this,po).setup.animationTimeShort+"ms")},null),No(this,wo).attach(),No(this,po).bus.emit(Fr.i.INSTANCE_INITIALIZED,null),this}finish(){No(this,mo)&&No(this,mo).stop(),No(this,wo).detach(),No(this,po).bus.emit(Fr.i.INSTANCE_FINISHED,null)}get(e){const t=this.all(e);if(!t)return;return new Kr(t,No(this,po))}collection(e){const t=this.all(e);if(!Object(Rr.x)(t))return;return new io(t,No(this,po).interactions)}toast(e){return Eo(this,void 0,void 0,(function*(){return!!Object(Rr.b)(e,No(this,ho))&&No(this,ho).show(e)}))}select(e){return document.querySelector(e)}all(e){const t=document.querySelectorAll(e);if(Object(Rr.x)(t))return[...t]}getUtils(){return No(this,po)}on(e,t,n){Object(Rr.b)(e,t)||No(this,fo).error("Incorrect arguments","on"),No(this,po).bus.on(e,t,n)}detach(e,t){Object(Rr.b)(e,t)||No(this,fo).error("Incorrect arguments","detach"),No(this,po).bus.detach(e,t)}detachAll(e){Object(Rr.x)(e)||No(this,fo).error("Incorrect arguments","detachAll"),No(this,po).bus.detachAll(e)}emit(e,t,...n){if(!Object(Rr.b)(e,t))return void No(this,fo).warning("Not enough data to emit event","emit");let i=("string"==typeof t?document.querySelector(t):t).$cuid;Object(Rr.x)(i)?No(this,po).bus.emit(e,i,...n):No(this,fo).warning("Element is not a cUI element","emit")}alert(e,t,n){let i=class{static get(e,t,n,i){return"Info"===t?new wa(i,e,n):"YesNoCancel"===t?new ya(i,e,n):"OkCancel"===t?new ga(i,e,n):void 0}}.get(e,t,n,No(this,po));i?i.show(No(this,go)):No(this,fo).error("Possibly incorrect alert type")}getPlugin(e){return No(this,bo).get(e)}createCuiElement(e,t,n){return Object(Rr.x)(t)&&No(this,yo).includes(t)?!!Object(Rr.a)(e,t,n)||(No(this,fo).error("Element cannot be created: Missing data"),!1):(No(this,fo).error("Element cannot be created: Unknown attribute"),!1)}}fo=new WeakMap,mo=new WeakMap,ho=new WeakMap,po=new WeakMap,bo=new WeakMap,vo=new WeakMap,go=new WeakMap,wo=new WeakMap,yo=new WeakMap;var jo,xo=n(14),So=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function c(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))},Ao=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},To=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class Co{constructor(){jo.set(this,void 0),Ao(this,jo,window)}init(e){var t,n;return So(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign({},new Wr.b),e.setup);const r=i.app,a={result:!1};if(Object(Rr.x)(To(this,jo)[r]))return a.message="Instance is already initialized",a;if(Object(Rr.x)(e.icons))for(let t in e.icons)Fr.j[t]=e.icons[t];if(Object(Rr.x)(e.swipeAnimations))for(let t in e.swipeAnimations)xo.a[t]=e.swipeAnimations[t];try{To(this,jo)[r]=new ko(i,null!==(t=e.plugins)&&void 0!==t?t:[],null!==(n=e.components)&&void 0!==n?n:[]),To(this,jo)[r].init()}catch(e){return console.error(e),a.message="An error occured during initialization",a}return a.result=!0,a}))}}jo=new WeakMap;var Io,Po=n(32),Do=n(33),Mo=function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{s(i.next(e))}catch(e){a(e)}}function c(e){try{s(i.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}s((i=i.apply(e,t||[])).next())}))},_o=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},$o=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class Lo{constructor(){Io.set(this,void 0),_o(this,Io,!1)}init(e){var t,n;return Mo(this,void 0,void 0,(function*(){if($o(this,Io))return console.log("Module is already initialized"),!1;const i=new Co,r=Object(Do.a)({autoLight:!0,autoPrint:!0}),a=Object(Po.a)({prefix:null===(t=e.setup)||void 0===t?void 0:t.prefix});let o=r;e.plugins&&(o=Object.assign(Object.assign({},r),e.plugins));let c=yield i.init({setup:e.setup,icons:e.icons,plugins:o,components:Object(Rr.x)(e.components)?[...a,...e.components]:a,swipeAnimations:e.swipeAnimations});return c.result?(_o(this,Io,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(n=c.message)&&void 0!==n?n:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}function Ro(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}Io=new WeakMap;var Wo=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"setNavbarTitle",value:function(e){return null!=e?e:""}}])&&Ro(t.prototype,n),i&&Ro(t,i),e}();function Fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fo(Object(n),!0).forEach((function(t){Go(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Go(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Bo=document.getElementById("loading-indicator"),Vo=document.getElementById("loading-screen");function Ho(e){window.requestAnimationFrame?window.requestAnimationFrame((function(){Bo.textContent=e})):Bo.textContent=e}Promise.all([fetch("/app_settings.json").then((function(e){return e.json()})),fetch("/static/icons/all.json").then((function(e){return e.json()}))]).then((function(e){!function(e,t){Ho("Initializing...");var n=document.getElementById("root"),a=new Lr.a;a.logLevel="production"===(null==e?void 0:e.mode)?"error":"debug",a.root=n,a.busSetup=[{name:"MoveQueue",eventsDef:["global_move"],handler:"tasked",priority:0},{name:"InteractQueue",eventsDef:["open","close","switch"],handler:"tasked",priority:0},{name:"ResponsesQueue",eventsDef:["opened","closed","switched","resize","offset"],handler:"tasked",priority:1},{name:"GlobalSimple",eventsDef:["keydown","scroll","intersection","windowclick"],handler:"tasked",priority:2}];var o={setup:a,icons:Uo(Uo({},lr.a),t)},c=new Cr,s=new ln(c),u=new Mr,l=new et(u),f=new $r,d=new Ii(f),h=new m(new Wo);window.$flow=fr.FlowFactory.create(s.getActions()),window.$actionsFlow=fr.FlowFactory.create(l.getActions()),window.$settingsFlow=fr.FlowFactory.create(d.getActions()),window.$push=fr.FlowFactory.create(h.getActions()),setTimeout((function(){(new Lo).init(o).then((function(t){console.log(e.mode),r.render(i.createElement(sr,{mode:e.mode}),n),Vo.remove(),n.classList.remove("hidden")}))}),100)}(e[0],e[1])})).catch((function(){Bo.classList.add("error"),Ho("Application cannot be loaded!")}))}});
//# sourceMappingURL=stopwatch.index.js.map