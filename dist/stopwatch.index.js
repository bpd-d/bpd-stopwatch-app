!function(e){function t(t){for(var i,a,c=t[0],s=t[1],u=t[2],f=0,d=[];f<c.length;f++)a=c[f],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&d.push(r[a][0]),r[a]=0;for(i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i]);for(l&&l(t);d.length;)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,c=1;c<n.length;c++){var s=n[c];0!==r[s]&&(i=!1)}i&&(o.splice(t--,1),e=a(a.s=n[0]))}return e}var i={},r={0:0},o=[];function a(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=i,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(n,i,function(t){return e[t]}.bind(null,i));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;o.push([46,1]),n()}({39:function(e,t,n){},45:function(e){e.exports=JSON.parse('{"stopwatch":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 200 200\\" width=\\"200\\" height=\\"200\\"><path d=\\"m 87.063507,7.6902003 c -1.894378,0 -3.419455,1.5248948 -3.419455,3.4190467 v 2.279364 c 0,1.894152 1.525077,3.419046 3.419455,3.419046 h 8.377218 v 4.672252 a 85.486373,85.476165 0 0 0 -80.927099,85.353731 85.486373,85.476165 0 0 0 85.486373,85.47617 85.486373,85.476165 0 0 0 85.486371,-85.47617 85.486373,85.476165 0 0 0 -80.9271,-85.353731 v -4.672252 h 8.37722 c 1.89437,0 3.41945,-1.524894 3.41945,-3.419046 v -2.279364 c 0,-1.8941519 -1.52508,-3.4190467 -3.41945,-3.4190467 z\\" class=\\"outer-border\\"></path><path d=\\"M 151.86173,105.12189 A 51.861736,51.855545 0 0 1 99.999992,156.97743 51.861736,51.855545 0 0 1 48.138256,105.12189 51.861736,51.855545 0 0 1 99.999992,53.266342 51.861736,51.855545 0 0 1 151.86173,105.12189\\" class=\\"inner-border\\"></path><path d=\\"m 99.999999,166.66467 v 11.4391\\" class=\\"tick\\"></path><path d=\\"m 99.999999,32.140025 -3e-6,11.439101\\" class=\\"tick\\"></path><path d=\\"M 38.449882,105.1219 H 27.00941\\" class=\\"tick\\"></path><path d=\\"M 172.99058,105.1219 H 161.55011\\" class=\\"tick\\"></path><path d=\\"m 99.999999,60.80568 v 44.10019\\" class=\\"minutes\\"></path><path d=\\"M 125.05857,129.85765 99.926593,104.72867\\" class=\\"hours\\"></path><path d=\\"m 100,101.91334 c 1.662,0 3,1.338 3,3 0,1.662 -1.338,3 -3,3 -1.662,0 -3,-1.338 -3,-3 0,-1.662 1.338,-3 3,-3 z\\" class=\\"center\\"></path></svg>","stopwatch_break":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"20\\" height=\\"20\\"><path d=\\"m 6.9116187,18 v -1.98834 c -4.6e-6,-0.0039 -6.8e-6,-0.0078 -6.8e-6,-0.01166 0,-3.037566 1.362932,-5.5 3.044194,-5.5 C 11.637067,10.5 13,12.962434 13,16 v 0 c 0,0.0039 -2e-6,0.0078 -7e-6,0.01171 V 18\\"></path><path d=\\"m 12.483108,3.9843886 a 2.5,2.5 0 0 1 -2.5000004,2.5 2.5,2.5 0 0 1 -2.5,-2.5 2.5,2.5 0 0 1 2.5,-2.5 2.5,2.5 0 0 1 2.5000004,2.5 z\\"></path><path d=\\"M 15.486422,13 A 5.5,5.5 0 0 0 10,7.886229 a 5.5,5.5 0 0 0 -5.4864663,5.1144\\"></path></svg>","stopwatch_cooldown":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"20\\" height=\\"20\\"><path d=\\"M 18.5,10 A 8.5,8.5 0 0 1 10,18.5 8.5,8.5 0 0 1 1.5,10 8.5,8.5 0 0 1 10,1.5 8.5,8.5 0 0 1 18.5,10 Z\\"></path><path d=\\"M 10 3.5 L 10 10 L 16.5 10 A 6.5 6.5 0 0 0 10 3.5 z \\"></path></svg>","stopwatch_exercise":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"20\\" height=\\"20\\"><path d=\\"m 5.911621,18 v -1.98834 c -6.2e-6,-0.0039 -9.1e-6,-0.0078 -9.1e-6,-0.01166 0,-3.037566 1.8106473,-5.5 4.044194,-5.5 C 12.189352,10.5 14,12.962434 14,16 v 0 c 0,0.0039 -3e-6,0.0078 -9e-6,0.01171 V 18\\"></path><path d=\\"m 12.483108,3.9843886 a 2.5,2.5 0 0 1 -2.5000004,2.5 2.5,2.5 0 0 1 -2.5,-2.5 2.5,2.5 0 0 1 2.5,-2.5 2.5,2.5 0 0 1 2.5000004,2.5 z\\"></path><path d=\\"M 15.486422,4 A 5.5,5.5 0 0 1 10,9.113771 5.5,5.5 0 0 1 4.5135337,3.9993706\\"></path></svg>","stopwatch_ring":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 200 200\\" width=\\"200\\" height=\\"200\\"><path d=\\"M 194,100.00001 A 93.999997,93.999995 0 0 1 99.999998,194 93.999997,93.999995 0 0 1 6.000002,100.00001 93.999997,93.999995 0 0 1 99.999998,6.0000045 93.999997,93.999995 0 0 1 194,100.00001\\" class=\\"inner-border\\"></path></svg>","stopwatch_small":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"20\\" height=\\"20\\"><path d=\\"m 19,10 a 9,9 0 0 1 -9,9 9,9 0 0 1 -9,-9 9,9 0 0 1 9,-9 9,9 0 0 1 9,9 z\\"></path><path d=\\"M 10 16.1875 L 10 17.5 \\"></path><path d=\\"M 10 2.5000001 L 10 3.8125001 \\"></path><path d=\\"M 16.1875 10 L 17.5 10 \\"></path><path d=\\"M 2.5000001 10 L 3.8125001 10 \\"></path><path d=\\"m 9.96875,6 v 4.0625 l 2.984375,2.984375\\"></path></svg>","stopwatch_warmup":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"20\\" height=\\"20\\"><path d=\\"m 7.0000001,18 v -1.98834 c -4.6e-6,-0.0039 -6.7e-6,-0.0078 -6.7e-6,-0.01166 0,-3.037566 1.3233624,-5.5 2.9558126,-5.5 1.63245,0 2.955813,2.462434 2.955813,5.5 v 0 c 0,0.0039 -3e-6,0.0078 -7e-6,0.01171 V 18\\"></path><path d=\\"m 12.483108,3.9843886 a 2.5,2.5 0 0 1 -2.5000004,2.5 2.5,2.5 0 0 1 -2.5,-2.5 2.5,2.5 0 0 1 2.5,-2.5 2.5,2.5 0 0 1 2.5000004,2.5 z\\"></path><path d=\\"M 15.486422,3.886229 A 5.5,5.5 0 0 1 10,9\\"></path><path d=\\"M 10,9 C 3,9 6.20247,11.119178 6,14\\"></path></svg>"}')},46:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n(28),o=(n(39),n(9)),a=n(8),c=n(3);function s(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(e,t){window.$cui.alert("common-info-dialog","Info",{title:e,message:t})}function f(e){return Object(c.c)(e)?e.reduce((function(e,t){return e+Number.parseInt(t.duration)}),0):0}function d(e){if(e<0)return"Error";if(e<60)return"00:"+h(e);if(e<3600){var t=e%60;return h(Math.floor(e/60))+":"+h(t)}var n=e%3600;return h(Math.floor(e/3600))+":"+d(n)}function h(e){return e<0||e>59?"Error":e<10?"0"+e:""+e}function m(e){window.$cui&&window.$cui.getUtils().setLightMode(e?"dark":"light")}function p(e,t){return Math.floor(100*e/t)}function v(e){return e.rounds.reduce((function(e,t){return[e[0]+t.actions.length,e[1]+f(t.actions)]}),[0,0])}function b(e){return"action-background-"+e}function w(e){switch(e){case"warmup":return"cui-text-success";case"break":return"cui-text-error";case"exercise":return"cui-text-accent";case"cooldown":return"cui-text-secondar";default:return""}}function g(e,t,n,i){if(!e||null===e||t<0)return e;var r=null!=i?i:1,o=e.length;if(o<2||t>=o)return s(e);var a=e.splice(t,r),c=o-r,u=n;return u<=0?[].concat(s(a),s(e)):u>=c?[].concat(s(e),s(a)):(e.splice.apply(e,[u,0].concat(s(a))),s(e))}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var E=new WeakMap,O=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,E,t)}var t,n,i;return t=e,(n=[{key:"getRoute",value:function(e){return Object(c.c)(e)?function(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}(this,E)[e]:void 0}},{key:"getUrl",value:function(e){var t=this.getRoute(e);return Object(c.c)(t)?t.url:void 0}},{key:"getName",value:function(e){var t=this.getRoute(e);return Object(c.c)(t)?t.name:void 0}},{key:"renderUrl",value:function(e,t){var n=this.getUrl(e);return Object(c.c)(t)?(Object(c.b)(t,(function(e,t){n=n.replace(":"+e,t)})),n):n}}])&&y(t.prototype,n),i&&y(t,i),e}())({home:{url:"/",name:"Home"},about:{url:"/about",name:"About"},settings:{url:"/settings",name:"Settings"},actions:{url:"/actions",name:"Actions"},newTraining:{url:"/trainings/edit/new",name:"New Training"},editTraining:{url:"/trainings/edit/:id",name:"Edit Training"},perform:{url:"/trainings/perform/:id",name:"Perform Training"}});function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function j(e){return i.createElement("ul",{className:"cui-list cui-hover"},e.list&&e.list.map((function(t){return i.createElement("li",{key:t.id,className:"stopwatch-content-width cui-corner-round"},i.createElement(S,{data:t,onDelete:e.onDelete}))})))}function S(e){var t,n,r,c=Object(a.f)();return i.useEffect((function(){var e=window.$flow.subscribe("DELETE_TRAINING").finish((function(e){window.$flow.perform("GET_TRAININGS")}));return function(){window.$flow.unsubscribe("DELETE_TRAINING",e.id)}})),i.createElement("div",{className:"cui-flex cui-middle cui-animation-fade-in cui-padding-bottom cui-padding-top"},i.createElement("div",{className:"cui-flex-grow",onClick:function(){c.push(O.renderUrl("perform",{id:e.data.id}))}},i.createElement("div",{className:"cui-flex cui-middle cui-nowrap"},i.createElement("div",{className:"training-list-item-icon"},i.createElement("span",{className:"cui-text-bold"},e.data.name[0].toUpperCase())),i.createElement("div",{className:"cui-flex-grow cui-margin-left"},i.createElement("span",null,e.data.name),i.createElement("div",{className:"cui-text-muted cui-text-truncate cui-overflow-hidden"},i.createElement("span",null,(t=e.data,(n=k(function(e){return e.rounds.reduce((function(e,t){return[e[0]+t.actions.length,e[1]+f(t.actions)]}),[0,0])}(t),2))[0],r=n[1],"".concat(r," seconds"))))))),i.createElement("div",{className:"cui-flex-shrink"},i.createElement("div",null,i.createElement(o.b,{to:O.renderUrl("editTraining",{id:e.data.id}),className:"cui-icon-button","cui-icon":"edit"}))))}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function P(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=$(e);if(t){var r=$(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(c,e);var t,n,r,a=D(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),W(L(t=a.call(this,e)),"list",void 0),W(L(t),"subscription",void 0),W(L(t),"onDeleteSubscription",void 0),W(L(t),"state",void 0),t.state={list:[]},t.updateList=t.updateList.bind(L(t)),t.onDeleteTrainingComplete=t.onDeleteTrainingComplete.bind(L(t)),t.deleteTraining=t.deleteTraining.bind(L(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){this.subscription=window.$flow.subscribe("GET_ALL_TRAININGS"),this.subscription.finish(this.updateList),this.onDeleteSubscription=window.$flow.subscribe("DELETE_TRAINING",{finish:this.onDeleteTrainingComplete}),window.$flow.perform("GET_ALL_TRAININGS")}},{key:"componentWillUnmount",value:function(){window.$flow.unsubscribe("GET_ALL_TRAININGS",this.subscription.id),window.$flow.unsubscribe("DELETE_TRAINING",this.onDeleteSubscription.id)}},{key:"deleteTraining",value:function(e){var t=C(this.state.list),n=t.findIndex((function(t){return t.id===e}));n>-1?window.$cui.alert("delete-training-dialog","YesNoCancel",{title:"Delete training",message:"Do you really want to delete training: "+t[n].name+"?",onYes:function(){window.$flow.perform("DELETE_TRAINING",e)}}):l("Delete training","We cannot remove this training. Identified doesn't match.")}},{key:"onDeleteTrainingComplete",value:function(e){e?window.$flow.perform("GET_ALL_TRAININGS"):l("Delete training","Service could not remove training")}},{key:"updateList",value:function(e){this.setState(T(T({},this.state),{},{list:e}))}},{key:"render",value:function(){return i.createElement("div",{className:"stopwatch-page-layout"},i.createElement("div",{className:"stopwatch-page-top cui-container cui-center"},i.createElement("div",null,i.createElement("span",{className:"cui-icon stopwatch-icon","cui-icon":"stopwatch"}),i.createElement("h1",{className:"cui-h3 cui-text-center cui-margin-small-top stopwatch-title"},"Stopwatch"))),i.createElement("div",{className:"stopwatch-page-bottom"},i.createElement("div",{className:"stopwatch-home-list cui-overflow-y-auto"},this.state.list.length>0?i.createElement(j,{list:this.state.list,onDelete:this.deleteTraining}):i.createElement(F,null))),i.createElement("div",{className:"cui-position-float cui-position-bottom cui-position-right cui-margin cui-margin-large--l z-index-100"},i.createElement(o.b,{to:O.renderUrl("newTraining"),className:"cui-button cui-icon cui-icon-margin cui-background-default cui-box-shadow cui-rounded","cui-icon":"plus"},"Add New")))}}])&&P(t.prototype,n),r&&P(t,r),c}(i.Component);function F(){return i.createElement("div",{className:"cui-container cui-center"},i.createElement("p",{className:"cui-text-muted cui-text-center"},"There are no trainings recorded. ",i.createElement(o.b,{className:"cui-link cui-accent",to:O.renderUrl("newTraining")},"Add new")," training to start your execises!"))}function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=Y(e);if(t){var r=Y(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(c,e);var t,n,r,a=H(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),a.call(this,e)}return t=c,(n=[{key:"render",value:function(){return i.createElement("div",{className:"cui-section cui-flex-center cui-height-viewport-1-2"},i.createElement("div",{className:"cui-card cui-large"},i.createElement("div",{className:"cui-card-header cui-text-error"},i.createElement("span",{className:"cui-card-title"},"Error")),i.createElement("div",{className:"cui-card-body"},"It appears that page you looking for does not exist. Try to look for it again or go back to our Home page"),i.createElement("div",{className:"cui-card-footer cui-flex cui-right"},i.createElement(o.b,{to:"/",className:"cui-link"},"Go Home"))))}}])&&U(t.prototype,n),r&&U(t,r),c}(i.Component);function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ee(e);if(t){var r=ee(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return X(this,n)}}function X(e,t){return!t||"object"!==q(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(c,e);var t,n,r,a=Q(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).onClick=t.onClick.bind(Z(t)),t}return t=c,(n=[{key:"onClick",value:function(){this.props.shouldClose&&window.$cui.get("#app-offcanvas").emit("close")}},{key:"render",value:function(){return i.createElement(o.c,{exact:!0,activeClassName:"cui-active",className:this.props.class,to:this.props.url,onClick:this.onClick},this.props.name)}}])&&J(t.prototype,n),r&&J(t,r),c}(i.Component);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ce(e){var t=Object(a.g)(),n=oe(i.useState({currentSite:"",darkMode:!1,soundEnabled:!1}),2),r=n[0],c=n[1];return i.useEffect((function(){var e=t.pathname.split("/");c(ie(ie({},r),{},{currentSite:e.length>1?t.pathname.split("/")[1].toLocaleUpperCase():""}))}),[t]),i.createElement("nav",{className:"cui-navbar cui-sticky cui-box-shadow-remove stopwatch-layout-navigation"},i.createElement("div",{className:"cui-navbar-left cui-width-1-1 cui-width-auto--m cui-flex cui-middle cui-between",id:"navbar-left"},i.createElement("ul",null,r.currentSite&&i.createElement("li",null,i.createElement(o.b,{className:"cui-icon",to:O.renderUrl("home"),"cui-icon":"stopwatch_small"}))),i.createElement("a",{className:"cui-icon cui-padding cui-button cui-hidden--m","cui-icon":"menu","cui-open":"target: #app-offcanvas"})),i.createElement("ul",{className:"cui-navbar-right cui-visible--m"},i.createElement("li",null,i.createElement(te,{class:"cui-navbar-item",url:O.renderUrl("home"),name:O.getName("home")})),i.createElement("li",null,i.createElement(te,{class:"cui-navbar-item",url:O.renderUrl("actions"),name:O.getName("actions")})),i.createElement("li",null,i.createElement(te,{class:"cui-navbar-item",url:O.renderUrl("settings"),name:O.getName("settings")})),i.createElement("li",null,i.createElement(te,{class:"cui-navbar-item",url:O.renderUrl("about"),name:O.getName("about")}))))}function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=he(e);if(t){var r=he(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return de(this,n)}}function de(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function he(e){return(he=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(a,e);var t,n,r,o=fe(a);function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return t=a,(n=[{key:"render",value:function(){return i.createElement("div",{className:"cui-off-canvas",id:"app-offcanvas","cui-off-canvas":"escClose: y; outClose: y"},i.createElement("div",{className:"cui-off-canvas-container cui-card off-canvas-layout"},i.createElement("div",{className:"cui-card-header cui-flex cui-middle cui-right"},i.createElement("a",{href:"#",className:"cui-icon","cui-icon":"close","cui-close":""})),i.createElement("div",{className:"off-canvas-content cui-card-body"},i.createElement("div",{className:"cui-width-1-1"},i.createElement("h3",{className:"cui-h3"},"Menu"),i.createElement("ul",{className:"cui-list cui-interactive cui-margin-top"},i.createElement("li",null,i.createElement(te,{url:O.renderUrl("home"),name:O.getName("home"),shouldClose:!0})),i.createElement("li",null,i.createElement(te,{url:O.renderUrl("actions"),name:O.getName("actions"),shouldClose:!0})),i.createElement("li",null,i.createElement(te,{url:O.renderUrl("settings"),name:O.getName("settings"),shouldClose:!0})),i.createElement("li",null,i.createElement(te,{url:O.renderUrl("about"),name:O.getName("about"),shouldClose:!0})))))))}}])&&ue(t.prototype,n),r&&ue(t,r),a}(i.Component);var pe="exercise",ve="warmup",be=[{name:"Warmup",duration:5,type:ve,removable:!1,editable:!1},{name:"Exercise",duration:30,type:pe,removable:!1,editable:!1},{name:"Break",duration:60,type:"break",removable:!1,editable:!1},{name:"Cooldown",duration:90,type:ve,removable:!1,editable:!1}],we="Training is empty",ge="Training name is not provided",ye="Training has no rounds",Ee="Round is empty",Oe="Round has no actions",ke="Round name is missing",Ne="Action is empty",je="Action name is not provided",Se="Action type is not provided",Ae="Action duration is not correct";function xe(e){return"Round "+e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ie(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var Pe="GET_ALL",Me="SET_ACTION",De="REMOVE_ACTION",_e="CLEAR_ACTIONS",Le=new WeakMap,$e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Le.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,Le,t)}var t,n,i;return t=e,(n=[{key:"getActions",value:function(){var e,t=this;return Te(e={},Pe,(function(){return Ie(t,Le).getAllActions()})),Te(e,Me,(function(e){return Ie(t,Le).setAction(e)})),Te(e,De,(function(e){return Ie(t,Le).removeAction(e)})),Te(e,_e,(function(){return Ie(t,Le).clearActions(),!0})),e}}])&&Ce(t.prototype,n),i&&Ce(t,i),e}();function We(e){return i.createElement("span",{className:"cui-icon cui-tooltip","data-tooltip":e.type,"cui-icon":"stopwatch_".concat(e.type)})}function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=He(e);if(t){var r=He(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Be(this,n)}}function Be(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ye(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Ve(e,t,n){return t&&Ye(e.prototype,t),n&&Ye(e,n),e}var qe=function(){function e(){ze(this,e)}return Ve(e,[{key:"validate",value:function(e){var t={status:!0};try{var n=this.performValidation(e);n&&n.length>0&&(t.status=!1,t.errors=n)}catch(e){var i="An error occured during validation";console.error(i),console.error(e),t.status=!1,t.errors=[i+": "+e.message]}return t}}]),e}(),Je=function(e){Fe(n,e);var t=Ue(n);function n(){return ze(this,n),t.call(this)}return Ve(n,[{key:"performValidation",value:function(e){if(!Object(c.c)(e))return[we];var t=[];return Object(c.c)(e.name)||t.push(ge),Object(c.c)(e.rounds)||t.push(ye),t}}]),n}(qe),Ke=function(e){Fe(n,e);var t=Ue(n);function n(){return ze(this,n),t.call(this)}return Ve(n,[{key:"performValidation",value:function(e){if(!Object(c.c)(e))return[Ee];var t=[];return Object(c.c)(e.name)||t.push(ke),Object(c.c)(e.actions)||t.push(Oe),t}}]),n}(qe),Qe=function(e){Fe(n,e);var t=Ue(n);function n(){return ze(this,n),t.call(this)}return Ve(n,[{key:"performValidation",value:function(e){if(!Object(c.c)(e))return[Ne];var t=[];return Object(c.c)(e.name)||t.push(je),Object(c.c)(e.type)||t.push(Se),e.duration<0&&t.push(Ae),t}}]),n}(qe);function Xe(e){var t;return i.useEffect((function(){}),[e]),i.createElement("div",{className:"cui-dialog ".concat(null!==(t=e.className)&&void 0!==t?t:""),"cui-dialog":"escClose: Y",id:e.id},i.createElement("div",{className:"cui-dialog-container"},i.createElement("div",{className:"cui-dialog-header"},i.createElement("span",{className:"cui-dialog-title"},e.title),i.createElement("a",{className:"cui-icon","cui-icon":"close","cui-close":""})),i.createElement("div",{className:"cui-dialog-body"},e.body),e.footer&&i.createElement("div",{className:"cui-dialog-footer"},e.footer)))}function Ze(e){return i.createElement(i.Fragment,null,e.errors&&e.errors.length>0&&i.createElement("ul",{className:"cui-list"},e.errors.map((function(e,t){return i.createElement("li",{key:t,className:"cui-animation-fade-in"},i.createElement("span",{className:"cui-text-error"},e))}))))}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return rt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ot(e){var t=it(i.useState({name:"",duration:5,removable:!0,editable:!1,type:pe}),2),n=t[0],r=t[1],o=it(i.useState([]),2),a=o[0],c=o[1];function s(e){var t=e.target.name;switch(t){case"name":case"duration":case"type":r(tt(tt({},n),{},nt({},t,e.target.value)));break;case"removable":case"editable":r(tt(tt({},n),{},nt({},t,e.target.checked)))}}return i.useEffect((function(){return e.action&&(r(tt({},e.action)),c([])),function(){}}),[e.action]),i.createElement(Xe,{title:"Add new",id:"add-action-dialog",body:i.createElement(i.Fragment,null,i.createElement("div",{className:"cui-form"},i.createElement("label",{className:"cui-form-label"},"Name"),i.createElement("input",{className:"cui-input stopwatch-input-width",type:"text",name:"name",value:n.name,placeholder:"Name",onChange:s})),i.createElement("div",{className:"cui-form cui-margin-top"},i.createElement("label",{className:"cui-form-label"},"Duration"),i.createElement("input",{className:"cui-input stopwatch-input-width",type:"number",min:"0",max:"100",name:"duration",value:n.duration,placeholder:"Duration",onChange:s})),i.createElement("div",{className:"cui-form cui-margin-top"},i.createElement("label",{className:"cui-form-label"},"Type"),i.createElement("select",{className:"cui-select stopwatch-input-width",value:n.type,name:"type",onChange:s},i.createElement("option",{value:"warmup"},"Warmup"),i.createElement("option",{value:"exercise"},"Exercise"),i.createElement("option",{value:"break"},"Break"),i.createElement("option",{value:"cooldown"},"Cooldown"))),i.createElement("div",{className:"cui-form cui-flex cui-middle cui-reverse cui-margin-top"},i.createElement("input",{type:"checkbox",className:"cui-checkbox",id:"checkbox-1-2",name:"editable",checked:n.editable,onChange:s}),i.createElement("label",{htmlFor:"checkbox-1-2"}," Editable")),i.createElement("div",{className:"cui-form cui-flex cui-middle cui-reverse cui-margin-top"},i.createElement("input",{type:"checkbox",className:"cui-checkbox",id:"checkbox-1-1",name:"removable",checked:n.removable,onChange:s}),i.createElement("label",{htmlFor:"checkbox-1-1"}," Removable")),i.createElement(Ze,{errors:a})),footer:i.createElement("div",{className:"cui-flex cui-right"},i.createElement("button",{className:"cui-button cui-margin-small-right","cui-close":""},"Cancel"),i.createElement("button",{className:"cui-button cui-accent",onClick:function(){if(e.onSave){var t=tt({},n),i=(new Qe).validate(t);if(i.status){var r=window.$cui.get("#add-action-dialog");e.onSave(t),r.emit("close")}c(i.errors)}}},"Save"))})}function at(e){return i.createElement("div",{className:"stopwatch-page-header cui-container cui-center"},i.createElement("div",null,i.createElement("h1",{className:"cui-h1 cui-text-center cui-margin-remove"},e.title),i.createElement("p",{className:"cui-text-center cui-text-muted"},e.description)))}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return st(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function st(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ut(e){var t=ct(i.useState(""),2),n=t[0],r=t[1];function o(t){r(t),Object(c.c)(e.onUpdate)&&e.onUpdate(t)}return i.createElement("div",{className:"cui-input-mix "+e.className},i.createElement("input",{type:"text",className:"cui-input",placeholder:"Filter",value:n,onChange:function(e){o(e.target.value)}}),Object(c.c)(n)&&i.createElement("a",{className:"cui-icon","cui-icon":"close",onClick:function(){return o("")}}))}function lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ft(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(n),!0).forEach((function(t){dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ht(e){return function(e){if(Array.isArray(e))return vt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||pt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||pt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){if(e){if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(e,t):void 0}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var bt={id:void 0,name:"",type:"exercise",duration:"5",removable:!0,editable:!0};function wt(){var e=mt(i.useState({actions:ht(be),current:null}),2),t=e[0],n=e[1],r=mt(i.useState(""),2),o=r[0],a=r[1];function s(e){var t,n;t=e.name,n=function(){window.$actionsFlow.perform(De,e)},window.$cui.alert("delete-action-dialog","YesNoCancel",{title:"Delete action",message:"Do you really want to delete action: "+t,onYes:n})}function u(e){n(ft(ft({},t),{},{actions:[].concat(ht(be),ht(e))}))}function l(e){n(ft(ft({},t),{},{current:e||ft({},bt)})),window.$cui.get("#add-action-dialog").emit("open")}return i.useEffect((function(){var e=window.$actionsFlow.subscribe(Pe,{finish:u}),t=window.$actionsFlow.subscribe(Me),n=window.$actionsFlow.subscribe(De);return window.$actionsFlow.perform(Pe),function(){window.$actionsFlow.unsubscribe(Pe,e.id),window.$actionsFlow.unsubscribe(Me,t.id),window.$actionsFlow.unsubscribe(De,n.id)}}),[t.actions]),i.createElement(i.Fragment,null,i.createElement("div",{className:"stopwatch-content-width"},i.createElement(at,{title:"Activities",description:"Define activies which you want to perform in trainings!"}),i.createElement("div",{className:"cui-container cui-flex cui-middle cui-middle cui-center cui-right--s"},i.createElement(ut,{value:o,onUpdate:function(e){a(e)},className:"cui-width-1-1 cui-width-1-3--m cui-width-1-4--l"})),i.createElement("div",{className:"cui-container cui-flex-grid cui-flex-grid-match cui-child-width-1-2 cui-child-width-1-3--m"},Object(c.c)(t.actions)&&t.actions.map((function(e,t){return function(e){if(!Object(c.c)(o))return!0;var t=e.toLowerCase().match(o.toLowerCase());return Object(c.c)(t)}(e.name)&&i.createElement("div",{key:t,className:"cui-animation-fade-in"},i.createElement("div",{className:"cui-card cui-default cui-hover "+b(e.type),onClick:function(t){e.editable&&(l(e),t.preventDefault())}},i.createElement("div",{className:"cui-card-header cui-flex cui-between cui-nowrap"},i.createElement("span",{className:"cui-card-title cui-text-truncate cui-overflow-hidden"},e.name),i.createElement(We,{type:e.type})),i.createElement("div",{className:"cui-card-body cui-flex cui-middle action-card-height"},i.createElement("div",{className:"cui-flex-grow"},i.createElement("div",{className:"cui-text-muted"},i.createElement("span",null,e.duration," seconds"))),i.createElement("div",{className:"cui-flex-shrink"},i.createElement("ul",{className:"cui-icon-nav"},e.removable&&i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"trash",onClick:function(){e.editable&&s(e)}})))))))}))),i.createElement("div",{className:"cui-position-float cui-position-bottom cui-position-right cui-margin cui-margin-large--l z-index-100"},i.createElement("button",{className:"cui-icon cui-button cui-icon-margin cui-background-default cui-box-shadow cui-rounded","cui-icon":"plus",onClick:function(){l()}},"Add New"))),i.createElement(ot,{action:t.current,onSave:function(e){window.$actionsFlow.perform(Me,e)}}))}var gt=Object(a.i)((function(e){var t=e.history;return i.createElement("button",{className:"cui-button cui-accent",onClick:function(){return t.goBack()}},"Go Back")}));function yt(e){var t;return i.createElement("div",{className:e.classes},i.createElement("h2",{className:"cui-h2 cui-text-center cui-text-error"},e.message),i.createElement("div",{className:""},i.createElement("div",{className:"cui-flex cui-center"},i.createElement(o.b,{to:"/",className:"cui-button cui-margin-small-right"},"Go Home"),null!==(t=e.goBack)&&void 0!==t?t:i.createElement(gt,null))))}function Et(e){return i.createElement("select",{className:"cui-select "+e.className,name:e.name,id:e.id,onChange:function(t){if(e.onSelect){var n=t.target.value;e.onSelect(e.actions.find((function(e){return e.name===n})))}},value:e.value},e.actions&&e.actions.map((function(e){return i.createElement("option",{key:e.name,value:e.name},e.name," (Type: ",e.type,", Duration: ",e.duration,")")})))}function Ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ot(Object(n),!0).forEach((function(t){Nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e){return function(e){if(Array.isArray(e))return xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||At(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||At(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){if(e){if("string"==typeof e)return xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xt(e,t):void 0}}function xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Tt(e){var t,n=St(Object(i.useState)({actions:[],selected:null,errors:[],name:""}),2),r=n[0],o=n[1];function a(t,n){o({actions:t,selected:e.definedActions[0],errors:[],name:n||r.name})}return i.useEffect((function(){var t=e.round&&e.round.name?e.round.name:xe(e.currentCount);return a(Object(c.c)(e.round)?e.round.actions:[],t),function(){}}),[e.round,e.definedActions]),i.createElement(Xe,{id:"edit-round-dialog",title:"Edit Round",body:i.createElement(i.Fragment,null,i.createElement("div",{className:"edit-round-dialog-body"},i.createElement("div",{className:"cui-form"},i.createElement("label",{htmlFor:"",className:"cui-form-label"},"Round name"),i.createElement("input",{type:"text",className:"cui-input",placeholder:"Round name",value:r.name,onChange:function(e){var t=e.target.value,n=[];Object(c.c)(t)||n.push("Name cannot be empty"),o(kt(kt({},r),{},{errors:n,name:t}))}})),i.createElement("ul",{className:"cui-list cui-margin-top"},i.createElement("div",null,"Actions"),r.actions&&r.actions.map((function(e,t){return i.createElement("li",{key:t,className:"animation-fade-in"},i.createElement("div",{className:"cui-flex cui-middle"},i.createElement("div",{className:"cui-flex-grow"},i.createElement("div",{className:"cui-flex cui-middle"},i.createElement("div",{className:"cui-flex-center cui-margin-right"},i.createElement(We,{type:e.type})),i.createElement("div",{className:"cui-flex-grow"},i.createElement("div",{className:""},e.name),i.createElement("div",{className:"cui-text-muted"},"Lasts ",e.duration," seconds")))),i.createElement("ul",{className:"cui-icon-nav"},i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"trash",onClick:function(){!function(e){var t=jt(r.actions);t.splice(e,1),a(t)}(t)}})))))})),i.createElement("li",null,i.createElement("div",{className:"cui-flex cui-middle cui-nowrap"},i.createElement("div",{className:"cui-flex-grow"},i.createElement(Et,{id:"round-action-select",className:"cui-width-1-1 cui-width-5-6--s",name:"action",value:null===(t=r.selected)||void 0===t?void 0:t.name,actions:e.definedActions,onSelect:function(e){e&&o(kt(kt({},r),{},{selected:e}))}})),i.createElement("div",{className:""},i.createElement("a",{"cui-icon":"plus",className:"cui-icon-button",onClick:function(){r.selected&&a([].concat(jt(r.actions),[r.selected]))}}))))),r.errors&&r.errors.length>0&&i.createElement("ul",{className:"cui-list "},r.errors.map((function(e,t){return i.createElement("li",{key:t,className:"cui-animation-slide-in"},i.createElement("span",{className:"cui-text-error"},e))}))))),footer:i.createElement("div",{className:"cui-flex cui-right"},i.createElement("button",{className:"cui-button cui-margin-small-right","cui-close":""},"Cancel"),i.createElement("button",{className:"cui-button cui-accent",onClick:function(){if(e.onSave){var t={actions:jt(r.actions),name:r.name},n=(new Ke).validate(t);if(n.status)return e.onSave(t,e.index),void o(kt(kt({},r),{},{name:xe(e.currentCount+1),selected:null,actions:[]}));o(kt(kt({},r),{},{errors:n.errors}))}}},"Save"))})}function Ct(e){return i.createElement("div",{className:"cui-flex cui-middle cui-nowrap"},i.createElement("div",{className:"cui-flex-grow"},i.createElement("div",null,i.createElement("span",{className:"cui-text-bold"},e.round.name)),i.createElement("div",{className:"cui-text-muted cui-text-small"},i.createElement("span",null,e.round.actions.length," actions, ",f(e.round.actions)," seconds of total length"))),i.createElement("ul",{className:"cui-icon-nav cui-flex-shrink"},!e.isFirst&&i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"chevron_up",onClick:function(){e.onMoveUp(e.round,e.index)}})),!e.isLast&&i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"chevron_down",onClick:function(){e.onMoveDown(e.round,e.index)}})),i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"copy",onClick:function(){e.onClone(e.round,e.index)}})),i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"edit",onClick:function(){e.onEdit(e.round,e.index)}})),i.createElement("li",null,i.createElement("a",{className:"cui-icon","cui-icon":"trash",onClick:function(){e.onDelete(e.round,e.index)}}))))}function It(e){return function(e){if(Array.isArray(e))return $t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Lt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){Dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||Lt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(e,t){if(e){if("string"==typeof e)return $t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$t(e,t):void 0}}function $t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Wt(e){var t=_t(i.useState({training:e.training,currentIndex:-1,currentCount:0,currentRound:null}),2),n=t[0],r=t[1],a=_t(i.useState({actions:[]}),2),u=a[0],f=a[1];function d(e,t){r(Mt(Mt({},n),{},{currentIndex:t,currentRound:e,currentCount:n.training&&n.training.rounds?n.training.rounds.length:0})),window.$cui.get("#edit-round-dialog").emit("open")}function h(e,t){var i;i=function(){var e=It(n.training.rounds);e.splice(t,1),b(e)},window.$cui.alert("delete-round-dialog","YesNoCancel",{title:"Delete round",message:"Do you really want to delete this round?",onYes:i})}function m(e,t){b(g(n.training.rounds,t,t+1))}function p(e,t){b(g(n.training.rounds,t,t-1))}function v(e,t){var i=t+1,r=Object(c.a)(e);b(function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(!e||null===e||!i||null===i||0===i.length)return e;var o=e.length;return!t||0===t||t>=o?[].concat(s(e),i):t<=0?[].concat(i,s(e)):(e.splice.apply(e,[t,0].concat(i)),s(e))}(n.training.rounds,i,r))}function b(e){r(Mt(Mt({},n),{},{training:Mt(Mt({},n.training),{},{rounds:e})}))}function w(e){var t=e.target.name;["name","description"].includes(t)&&r(Mt(Mt({},n),{},{training:Mt(Mt({},n.training),{},Dt({},t,e.target.value))}))}function y(t){e.onCancel()}function E(){window.$flow.perform("DELETE_TRAINING",n.training.id)}function k(e){f({actions:[].concat(It(be),It(e))})}return i.useEffect((function(){var t=window.$flow.subscribe("DELETE_TRAINING",{finish:y}),i=window.$actionsFlow.subscribe(Pe,{finish:k});return window.$actionsFlow.perform(Pe),r(Mt(Mt({},n),{},{training:e.training})),function(){window.$actionsFlow.unsubscribe(Pe,i.id),window.$flow.unsubscribe("DELETE_TRAINING",t.id)}}),[e.training]),i.createElement(i.Fragment,null,n.training.id>-1&&i.createElement("div",{className:"cui-container cui-flex cui-right cui-middle stopwatch-content-width"},i.createElement("ul",{className:"cui-list cui-inline"},i.createElement("li",{className:"cui-padding-remove"},i.createElement(o.b,{to:O.renderUrl("perform",{id:n.training.id}),className:"cui-icon cui-accent cui-icon-margin cui-margin-right","cui-icon":"media_play"},"Run")),i.createElement("li",{className:"cui-padding-remove"},i.createElement("a",{className:"cui-icon cui-icon-margin","cui-icon":"trash",onClick:function(){var e,t;e=n.training.name,t=E,window.$cui.alert("delete-training-dialog","YesNoCancel",{title:"Delete training",message:"Do you really want to delete training: "+e+"?",onYes:t})}},"Delete")))),i.createElement("div",{className:"cui-container stopwatch-content-width cui-flex-grid cui-child-width-1-1 cui-child-width-1-2--m"},i.createElement("div",{className:"cui-padding-small-right"},i.createElement("h3",{className:"cui-h3 cui-text-muted"},"Common"),i.createElement("div",{className:"cui-form"},i.createElement("label",{htmlFor:"",className:"cui-form-label"},"Name"),i.createElement("input",{type:"text",className:"cui-input stopwatch-input-width",placeholder:"Name",name:"name",value:n.training.name,onChange:w})),i.createElement("div",{className:"cui-form cui-margin-top"},i.createElement("label",{htmlFor:"",className:"cui-form-label"},"Description"),i.createElement("textarea",{className:"cui-textarea stopwatch-input-width stopwatch-text-area",placeholder:"Description",name:"description",rows:5,value:n.training.description,onChange:w}))),i.createElement("div",{className:"cui-padding-small-left"},i.createElement("h3",{className:"cui-h3 cui-text-muted"},"Rounds (total count: ",n.training.rounds.length,")"),i.createElement("ul",{className:"cui-list"},n.training&&n.training.rounds.map((function(e,t,n){return i.createElement("li",{key:t,className:"animation-fade-in"},i.createElement(Ct,{index:t,round:e,onEdit:d,onDelete:h,onMoveUp:p,onMoveDown:m,onClone:v,isFirst:0===t,isLast:t===n.length-1}))})),i.createElement("li",null,i.createElement("button",{className:"cui-button cui-icon cui-icon-margin cui-width-1-1","cui-icon":"plus",onClick:function(){d(null,-1)}},"Add New"))))),i.createElement("div",{className:"cui-container stopwatch-content-width cui-flex cui-right"},i.createElement("button",{className:"cui-button cui-margin-small-right",onClick:function(){e.onCancel()}},"Cancel"),i.createElement("button",{className:"cui-button cui-accent",onClick:function(){if(e.onSave){var t=(new Je).validate(n.training);t.status?e.onSave(n.training):l("Training not valid",t.errors.join(", "))}}},"Save")),i.createElement(Tt,{index:n.currentIndex,round:n.currentRound,onSave:function(e,t){b(function(e,t){var i=[];t>-1?(i=It(n.training.rounds))[t]=e:i=[].concat(It(n.training.rounds),[e]);return i}(e,t)),window.$cui.get("#edit-round-dialog").emit("close")},currentCount:n.currentCount,definedActions:u.actions}))}var Rt=Object(a.i)((function(e){var t,n=_t(i.useState({training:{name:"",rounds:[]}}),2),r=n[0],o=n[1],s=Object(a.h)().id;function u(e){e?f():l("Fail","Training was not saved")}function f(){e.history&&e.history.goBack()}function d(e){e?o({training:Mt({},e)}):l("Fail","Training was not found")}return i.useEffect((function(){console.log("Parent redraw");var e=window.$flow.subscribe("UPDATE_TRAINING",{finish:u}),t=window.$flow.subscribe("GET_TRAINING",{finish:d});return s&&window.$flow.perform("GET_TRAINING",s),function(){window.$flow.unsubscribe("UPDATE_TRAINING",e.id),window.$flow.unsubscribe("GET_TRAINING",t.id)}}),[r.training.id]),i.createElement(i.Fragment,null,i.createElement("div",{className:"cui-container stopwatch-content-width"},i.createElement(at,{title:Object(c.c)(null===(t=r.training)||void 0===t?void 0:t.name)?"Update training "+r.training.name:"Define training",description:"Customize your training settings"})),i.createElement("div",{className:""},r.training?i.createElement(Wt,{training:r.training,onSave:function(e){window.$flow.perform("UPDATE_TRAINING",e)},onCancel:f}):i.createElement(yt,{message:"The training you looking for could not be found",classes:""})))}));function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Bt(e,t,n){return t&&Ut(e.prototype,t),n&&Ut(e,n),e}function Ht(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function zt(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var Yt=new WeakMap,Vt=function(){function e(){Gt(this,e),Yt.set(this,{writable:!0,value:void 0}),zt(this,Yt,screen)}return Bt(e,[{key:"activate",value:function(){Ht(this,Yt).keepAwake=!0}},{key:"release",value:function(){Ht(this,Yt).keepAwake=!1}}]),e}(),qt=function(){function e(){Gt(this,e),Ft(this,"element",void 0),this.element=void 0}return Bt(e,[{key:"activate",value:function(){this.element||(this.element=this.createElement("/static/video/Screen.mp4"),document.body.appendChild(this.element))}},{key:"release",value:function(){this.element&&(this.element.remove(),this.element=void 0)}},{key:"createElement",value:function(e){var t=document.createElement("video");return t.autoplay=!0,t.muted=!0,t.loop=!0,t.src=e,t.classList.add("loop-screen"),t.textContent="Not Supported",t}}]),e}(),Jt=new WeakMap,Kt=function(){function e(){Gt(this,e),Jt.set(this,{writable:!0,value:void 0}),zt(this,Jt,this.getToggle())}return Bt(e,[{key:"activate",value:function(){Ht(this,Jt).activate()}},{key:"release",value:function(){Ht(this,Jt).release()}},{key:"getToggle",value:function(){return"keepAwake"in screen?new Vt:new qt}}]),e}();function Qt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Xt(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Zt(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var en="RUNNING",tn="STOPPED",nn="PAUSED",rn=new WeakMap,on=new WeakMap,an=new WeakMap,cn=new WeakMap,sn=new WeakMap,un=new WeakMap,ln=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),rn.set(this,{writable:!0,value:void 0}),on.set(this,{writable:!0,value:void 0}),an.set(this,{writable:!0,value:void 0}),cn.set(this,{writable:!0,value:void 0}),sn.set(this,{writable:!0,value:void 0}),un.set(this,{writable:!0,value:void 0}),Zt(this,on,0),Zt(this,an,0),Zt(this,cn,!1),Zt(this,sn,tn),Zt(this,un,void 0)}var t,n,i;return t=e,(n=[{key:"onTick",value:function(e){Zt(this,rn,e)}},{key:"tick",value:function(){var e=this;Zt(this,un,setTimeout((function(){try{Xt(e,sn)===en&&Xt(e,rn).call(e,Xt(e,on),Xt(e,an),e)?(Xt(e,cn)?(Zt(e,on,0),Zt(e,cn,!1)):(Zt(e,on,Xt(e,on)+1),Zt(e,an,Xt(e,an)+1)),e.tick()):Xt(e,sn)!==nn&&e.stop()}catch(t){console.error("An error occured on stopwatch tick"),console.error(t),e.stop()}}),1e3))}},{key:"reset",value:function(){Zt(this,cn,!0)}},{key:"start",value:function(){return Xt(this,sn)!==en&&(Zt(this,on,0),Zt(this,sn,en),this.tick(),!0)}},{key:"stop",value:function(){return Xt(this,sn)===en&&(this.finish(),Zt(this,sn,tn),!0)}},{key:"pause",value:function(){return Xt(this,sn)===en&&(Zt(this,sn,nn),!0)}},{key:"resume",value:function(){return Xt(this,sn)===nn&&(Zt(this,sn,en),this.tick(),!0)}},{key:"finish",value:function(){Xt(this,un)&&(clearTimeout(Xt(this,un)),Zt(this,un,void 0)),Zt(this,on,0),Zt(this,an,0)}},{key:"getState",value:function(){return Xt(this,sn)}}])&&Qt(t.prototype,n),i&&Qt(t,i),e}();function fn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function hn(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var mn="GET_DARK_MODE",pn="SET_DARK_MODE",vn="GET_SOUND_ENABLED",bn="SET_SOUND_ENABLED",wn="SET_SETTINGS",gn="GET_SETTINGS",yn="GET_IS_WELCOME",En="SET_IS_WELCOME",On="CLEAR_SETTINGS",kn=new WeakMap,Nn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),kn.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,kn,t)}var t,n,i;return t=e,(n=[{key:"getActions",value:function(){var e,t=this;return fn(e={},vn,(function(){return hn(t,kn).isSoundEnabled()})),fn(e,bn,(function(e){hn(t,kn).setSoundEnabled(e)})),fn(e,mn,(function(){return hn(t,kn).isDarkMode()})),fn(e,pn,(function(e){hn(t,kn).setDarkMode(e)})),fn(e,wn,(function(e){hn(t,kn).setSettings(e)})),fn(e,gn,(function(){return hn(t,kn).getSettings()})),fn(e,yn,(function(){return hn(t,kn).isWelcomeSet()})),fn(e,En,(function(e){hn(t,kn).setIsWelcome(e)})),fn(e,On,(function(){return hn(t,kn).clearSettings(),!0})),e}}])&&dn(t.prototype,n),i&&dn(t,i),e}();function jn(e){return i.createElement("span",{className:"cui-svg total-circle-progress","cui-circle-progress":e.watchState.trainingProgress},i.createElement("div",{className:""},i.createElement("span",{className:"cui-svg current-circle-progress","cui-circle-progress":e.watchState.roundProgress},i.createElement("div",null,i.createElement("span",{className:"cui-svg countdown-circle-progress","cui-circle-progress":e.watchState.progress},i.createElement("div",null,i.createElement("span",{className:"cui-block cui-text-small"},e.actionIdx+1),i.createElement("h1",{className:"cui-h1 cui-margin-remove "+e.watchState.timerCls},e.watchState.timer)))))))}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sn(Object(n),!0).forEach((function(t){xn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var In={round:void 0,roundIdx:-1,actionIdx:-1,action:void 0,class:"",roundDuration:0,totalDuration:0};function Pn(){var e,t,n=Tn(i.useState({training:void 0}),2),r=n[0],o=n[1],s=Tn(i.useState(void 0),2),u=s[0],h=s[1],m=Tn(i.useState(In),2),g=m[0],y=m[1],E=Tn(i.useState(!1),2),O=E[0],k=E[1],N=Tn(i.useState({timer:"00:00",state:tn,startBtnCls:G(tn),timerCls:"",progress:100,roundProgress:100,trainingProgress:100}),2),j=N[0],S=N[1],A=Tn(i.useState(""),2),x=A[0],T=A[1],C=Object(a.h)().id,I=i.useRef(g);I.current=g;var P=i.useRef(r.training);P.current=r.training;var M,D=i.useRef(null),_=i.useRef(null);function L(e){var t=(new Je).validate(e);if(t.status){var n=(new Ke).validate(e.rounds[0]);if(n.status){var i=(new Qe).validate(e.rounds[0].actions[0]);i.status?(o(An(An({},r),{},{training:e})),$(e)):l("Incorrect training","Training is not correct: ".concat(i.errors.join(", ")))}else l("Incorrect training","Training is not correct: ".concat(n.errors.join(", ")))}else l("Incorrect training","Training is not correct: ".concat(t.errors.join(", ")))}function $(e){var t=e.rounds[0],n=t.actions[0];y({roundIdx:0,round:t,action:n,actionIdx:0,class:w(n.type),roundDuration:f(t.actions),totalDuration:v(e)[1]})}function W(e,t,n){var i=I.current.action.duration-e,r=p(e,I.current.action.duration);return i>0?(R(n.getState(),{time:i,progress:100-r,ct:e,total:t}),i>0&&i<=3&&F("countdown"),!0):(F("end"),n.reset(),!!function(){var e=I.current.actionIdx+1;if(I.current.round.actions.length>e){var t=I.current.round.actions[e];return y(An(An({},I.current),{},{actionIdx:e,action:t,class:w(t.type)})),!0}var n=I.current.roundIdx+1;if(P.current.rounds.length>n){var i=P.current.rounds[n],r=i.actions[0];return y(An(An({},I.current),{},{round:i,roundIdx:n,actionIdx:0,action:r,class:w(r.type),roundDuration:f(i.actions)})),!0}return $(P.current),!1}()||(R(tn,{time:0,progress:100,ct:0,total:0}),!1))}function R(e,t){if(!Object(c.c)(t)||t.time<0)S(An(An({},j),{},{state:e,startBtnCls:G(e)}));else{var n=100-p(function(e){return I.current.round.actions.reduce((function(e,t,n){return n<I.current.actionIdx?e+t.duration:e}),0)+e}(t.ct),I.current.roundDuration),i=function(e){return 100-p(e,I.current.totalDuration)}(t.total);S({timer:d(t.time),timerCls:(r=t.time,r>0&&r<=3?"cui-text-warning timer-blink-animation":""),state:e,startBtnCls:G(e),progress:t.progress,roundProgress:n,trainingProgress:i})}var r}function F(e){var t=void 0;switch(e){case"countdown":t=D.current;break;case"end":t=_.current}t&&(t.currentTime=0,t.play())}function G(e){return e!==tn?"cui-error":"cui-accent"}function U(e){k(e)}return i.useEffect((function(){var e=window.$flow.subscribe("GET_TRAINING",{finish:L}),t=window.$settingsFlow.subscribe(vn,{finish:U});window.$settingsFlow.perform(vn);var n=new Kt;try{n.activate()}catch(e){T("We could not activate feature to keep your device's screen awake during training performance")}var i=new ln;return i.onTick(W),h(i),C>-1&&window.$flow.perform("GET_TRAINING",C),function(){window.$flow.unsubscribe("GET_TRAINING",e.id),window.$settingsFlow.unsubscribe(vn,t.id),u&&u.stop(),n.release()}}),[C,O]),i.createElement(i.Fragment,null,r.training?i.createElement("div",{className:"stopwatch-layout-content cui-flex-center "+(M=g.action,Object(c.c)(M)?b(M.type):"")},i.createElement("div",{className:"stopwatch-content-width perform-layout cui-text-center animation-fade-in"},i.createElement("div",{className:"perform-main-controls"},i.createElement("h2",{className:"cui-h2 cui-margin-remove"},r.training.name),i.createElement("p",{className:"cui-margin-remove"},null==r||null===(e=r.training)||void 0===e||null===(t=e.rounds[g.roundIdx])||void 0===t?void 0:t.name),i.createElement("p",{className:"cui-text-muted cui-text-small cui-margin-remove"},"Round ",g.roundIdx+1," of ",r.training.rounds.length),i.createElement(jn,{actionIdx:g.actionIdx,watchState:j})),i.createElement("div",{className:"perform-buttons"},i.createElement("div",{className:"cui-width-1-1"},i.createElement("h3",{className:"cui-h3 "+g.class},g.action&&g.action.name),i.createElement("div",{className:"cui-flex cui-center"},j.state!==tn&&i.createElement("button",{className:"cui-button cui-default cui-margin-small-right",onClick:function(){j.state===en&&u.pause()?R(nn):j.state===nn&&u&&u.resume()&&R(en)}},j.state===nn?"Resume":"Pause"),i.createElement("button",{className:"cui-button "+j.startBtnCls,onClick:function(){j.state===tn&&u.start()?R(en):j.state!==tn&&u.stop()&&($(r.training),R(tn,{time:0,progress:100,ct:0,total:0}))}},j.state===tn?"Start":"Stop")),i.createElement("p",{className:"cui-text-muted"},r.training.description),i.createElement("div",{className:""},Object(c.c)(x)&&i.createElement("span",{className:"cui-icon cui-error cui-tooltip","cui-icon":"ban","data-tooltip":x}))))),i.createElement("audio",{ref:D,id:"stopwatch-countdown",src:"/static/audio/stopwatch_countdown.mp3"}),i.createElement("audio",{ref:_,id:"stopwatch-end",src:"/static/audio/stopwatch_end.mp3"})):i.createElement(yt,{message:"We couldn't find training"}))}function Mn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dn(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _n(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var Ln="GET_ALL_TRAININGS",$n="ADD_TRAINING",Wn="UPDATE_TRAINING",Rn="DELETE_TRAINING",Fn="GET_TRAINING",Gn="CLEAR_TRAININGS",Un=new WeakMap,Bn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Un.set(this,{writable:!0,value:void 0}),function(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}}(this,Un,t)}var t,n,i;return t=e,(n=[{key:"getActions",value:function(){var e,t=this;return Mn(e={},Ln,(function(){return _n(t,Un).getAllTrainings()})),Mn(e,$n,(function(e){return _n(t,Un).addTraining(e)})),Mn(e,Wn,(function(e){return _n(t,Un).updateTraining(e)})),Mn(e,Rn,(function(e){return _n(t,Un).deleteTraining(e)})),Mn(e,Fn,(function(e){return _n(t,Un).getTraining(e)})),Mn(e,Gn,(function(){return _n(t,Un).clearTrainings(),!0})),e}}])&&Dn(t.prototype,n),i&&Dn(t,i),e}();function Hn(){function e(){window.$cui.toast("Data cleared")}function t(){console.log("Settings cleared"),window.$settingsFlow.perform(gn)}return i.useEffect((function(){var n=window.$settingsFlow.subscribe(On,{finish:t}),i=window.$actionsFlow.subscribe(_e,{finish:e}),r=window.$flow.subscribe(Gn,{finish:e});return function(){window.$settingsFlow.unsubscribe(On,n.id),window.$actionsFlow.unsubscribe(_e,i.id),window.$flow.unsubscribe(Gn,r.id)}}),[]),i.createElement("div",{className:"cui-section"},i.createElement("h3",{className:"cui-h3"},"Dev tools"),i.createElement("div",{className:"cui-flex"},i.createElement("button",{className:"cui-button cui-margin-small cui-default",onClick:function(){window.$actionsFlow.perform(_e)}},"Clear actions only"),i.createElement("button",{className:"cui-button cui-margin-small cui-default",onClick:function(){window.$flow.perform(Gn)}},"Clear trainings only"),i.createElement("button",{className:"cui-button cui-margin-small cui-default",onClick:function(){window.$settingsFlow.perform(On)}},"Clear settings only"),i.createElement("button",{className:"cui-button cui-margin-small cui-error",onClick:function(){window.$actionsFlow.perform(_e),window.$flow.perform(Gn),window.$settingsFlow.perform(On)}},"Clear data")))}function zn(e){return i.useEffect((function(){}),[e.value,e.name]),i.createElement("div",{className:"cui-flex cui-middle cui-padding-small"},i.createElement("div",{className:"cui-flex-grow"},e.label),i.createElement("div",{className:"cui-input-switch"},i.createElement("input",{type:"checkbox",id:e.name,name:e.name,checked:e.value,onChange:function(t){var n=t.target;e.onUpdate&&e.onUpdate(n.name,n.checked)}}),i.createElement("label",{htmlFor:e.name,className:"cui-content"})))}function Yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Vn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yn(Object(n),!0).forEach((function(t){qn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,c=e[Symbol.iterator]();!(i=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==c.return||c.return()}finally{if(r)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Qn(){var e=Jn(i.useState({soundEnabled:!1,darkMode:!1,isWelcome:!1}),2),t=e[0],n=e[1];function r(e,i){if("soundEnabled"===e||"darkMode"===e){var r=Vn(Vn({},t),{},qn({},e,i));window.$settingsFlow.perform(wn,r),n(r)}}function o(){window.$settingsFlow.perform(gn)}function a(e){e&&(console.log(e),n(e),m(e.darkMode))}return i.useEffect((function(){console.log("Reload");var e=window.$settingsFlow.subscribe(gn,{finish:a}),t=window.$settingsFlow.subscribe(wn,{finish:o});return o(),function(){window.$settingsFlow.unsubscribe(gn,e.id),window.$settingsFlow.unsubscribe(wn,t.id)}}),[t.darkMode,t.soundEnabled]),i.createElement(i.Fragment,null,i.createElement("div",{className:"stopwatch-content-width"},i.createElement(at,{title:"Settings",description:"Change application setup"}),i.createElement("div",{className:"cui-section"},i.createElement("ul",{className:"cui-list"},i.createElement("li",null,i.createElement(zn,{label:"Dark mode",name:"darkMode",value:t.darkMode,onUpdate:r})),i.createElement("li",null,i.createElement(zn,{label:"Play sound",name:"soundEnabled",value:t.soundEnabled,onUpdate:r})),i.createElement("li",null,"Welcome screen status: ",t.isWelcome?"Yes":"No"))),i.createElement(Hn,null)))}function Xn(){return i.createElement(i.Fragment,null,i.createElement("div",{className:"stopwatch-content-width"},i.createElement(at,{title:"About",description:"Some details about the application"}),i.createElement("div",{className:""},i.createElement("div",{className:"cui-container "},i.createElement("h3",{className:"cui-h3"},"Repository"),i.createElement("p",{className:""},"Project sources can be found on Github under following link: ",i.createElement("a",{className:"cui-link cui-accent",href:"https://github.com/bpd-d/bpd-stopwatch-app"},"bpd-stopwatch-app"))),i.createElement("div",{className:"cui-container"},i.createElement("h3",{className:"cui-h3"},"Links"),i.createElement("p",{className:""},"Project uses third party libraries, see following list: "),i.createElement("ul",{className:"cui-list"},i.createElement("li",null,i.createElement("div",{className:""},i.createElement("div",{className:""},i.createElement("span",null,"React")),i.createElement("a",{href:"https://github.com/facebook/react",className:"cui-link"},"Github"),i.createElement("a",{href:"https://reactjs.org/",className:"cui-link cui-margin-left"},"React JS home page"))),i.createElement("li",null,i.createElement("div",{className:""},i.createElement("div",{className:""},i.createElement("span",null,"cUI Light")),i.createElement("a",{href:"https://github.com/bpd-d/cui-light",className:"cui-link"},"cUI Light on Github"),i.createElement("a",{href:"https://github.com/bpd-d/cui-styles",className:"cui-link cui-margin-left"},"cUI Styles on Github"),i.createElement("a",{href:"https://github.com/bpd-d/cui-icons",className:"cui-link cui-margin-left"},"cUI Icons on Github"))),i.createElement("li",null,i.createElement("div",{className:""},i.createElement("div",{className:""},i.createElement("span",null,"BPD Flow")),i.createElement("a",{href:"https://github.com/bpd-d/bpd-flow",className:"cui-link"},"Github"))),i.createElement("li",null,i.createElement("div",{className:""},i.createElement("div",{className:""},i.createElement("span",null,"BPD Storage")),i.createElement("a",{href:"https://github.com/bpd-d/bpd-storage",className:"cui-link"},"Github"))))))))}function Zn(){return i.createElement("div",{className:"stopwatch-footer cui-flex cui-right--l cui-middle"},i.createElement("div",{className:"cui-margin-horizontal"},i.createElement("span",{className:"cui-margin-small-right"},"Copyrights ",(new Date).getFullYear()+""),i.createElement("a",{href:"https://github.com/bpd-d",target:"_blank",className:"cui-link cui-accent"},"BPDDev")))}function ei(e){return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ti(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function ni(e,t){return(ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=ai(e);if(t){var r=ai(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return ri(this,n)}}function ri(e,t){return!t||"object"!==ei(t)&&"function"!=typeof t?oi(e):t}function oi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ai(e){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ci(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var si=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ni(e,t)}(u,e);var t,n,r,s=ii(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),ci(oi(t=s.call(this,e)),"darkModeSub",void 0),ci(oi(t),"welcomeScreenGetSub",void 0),ci(oi(t),"welcomeDialogHandle",void 0),ci(oi(t),"welcomeDialogCloseEventIds",void 0),t.state={currentSite:""},t.darkModeSub=window.$settingsFlow.subscribe(mn,{finish:t.onDarkMode.bind(oi(t))}),t.welcomeScreenGetSub=window.$settingsFlow.subscribe(yn,{finish:t.onWelcomeScreen.bind(oi(t))}),t.welcomeDialogHandle=window.$cui.get("#welcome-dialog"),t.welcomeDialogCloseEventIds=t.welcomeDialogHandle.on("close",t.onWelcomeDialogClose.bind(oi(t))),window.$settingsFlow.perform(yn),window.$settingsFlow.perform(mn),t}return t=u,(n=[{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){var e=this;this.darkModeSub&&window.$settingsFlow.unsubscribe(mn,this.darkModeSub.id),this.welcomeScreenGetSub&&window.$settingsFlow.unsubscribe(yn,this.welcomeScreenGetSub.id),Object(c.c)(this.welcomeDialogCloseEventIds)&&this.welcomeDialogCloseEventIds.forEach((function(t){e.welcomeDialogHandle.detach("close",t)}))}},{key:"onDarkMode",value:function(e){m(e)}},{key:"onWelcomeScreen",value:function(e){var t=this;e||setTimeout((function(){t.welcomeDialogHandle=window.$cui.get("#welcome-dialog"),t.welcomeDialogCloseEventIds=t.welcomeDialogHandle.on("close",t.onWelcomeDialogClose.bind(t)),window.$cui.get("#welcome-dialog").emit("open")}),100)}},{key:"onWelcomeDialogClose",value:function(){window.$settingsFlow.perform(En,!0)}},{key:"render",value:function(){return i.createElement(o.a,null,i.createElement("div",{className:"stopwatch-layout-main"},i.createElement(ce,null),i.createElement("div",{className:"stopwatch-layout-content cui-overflow-y-auto"},i.createElement(a.c,null,i.createElement(a.a,{path:O.getUrl("perform"),component:Pn}),i.createElement(a.a,{path:O.getUrl("newTraining"),component:Rt}),i.createElement(a.a,{path:O.getUrl("editTraining"),component:Rt}),i.createElement(a.a,{path:O.getUrl("actions"),component:wt}),i.createElement(a.a,{path:O.getUrl("settings"),component:Qn}),i.createElement(a.a,{path:O.getUrl("about"),component:Xn}),i.createElement(a.a,{path:O.getUrl("home"),component:R}),i.createElement(a.a,null,i.createElement(V,null)))),i.createElement(Zn,null),i.createElement(me,null),i.createElement(Xe,{id:"welcome-dialog",title:"Welcome"})))}}])&&ti(t.prototype,n),r&&ti(t,r),u}(i.Component),ui=n(30),li=n(21),fi=n(22);function di(e){return function(e){if(Array.isArray(e))return hi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return hi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hi(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function mi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pi(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function vi(e,t,n){return t&&pi(e.prototype,t),n&&pi(e,n),e}function bi(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function wi(e,t,n){var i=t.get(e);if(!i)throw new TypeError("attempted to set private field on non-instance");if(i.set)i.set.call(e,n);else{if(!i.writable)throw new TypeError("attempted to set read only private field");i.value=n}return n}var gi,yi,Ei,Oi,ki,Ni,ji=new WeakMap,Si=new WeakMap,Ai=new WeakMap,xi=new WeakMap,Ti=function(){function e(){mi(this,e),ji.set(this,{writable:!0,value:void 0}),Si.set(this,{writable:!0,value:void 0}),Ai.set(this,{writable:!0,value:void 0}),xi.set(this,{writable:!0,value:void 0}),wi(this,ji,new fi.BpdStorage("local","BPD_TRAININGS")),wi(this,Ai,"Trainings"),wi(this,Si,[]),wi(this,xi,new Je)}return vi(e,[{key:"getAllTrainings",value:function(){return this.getTrainings()}},{key:"addTraining",value:function(e){var t=!1;return this.validate(e)&&this.onAction((function(n){var i=n.length;return e.id?null:(e.id=i>0?n[i-1].id+1:0,n.push(e),t=!0,n)})),t}},{key:"updateTraining",value:function(e){var t=!1;return this.validate(e)&&(!e.id||e.id<0?t=this.addTraining(e):this.onAction((function(n){var i=n.findIndex((function(t){return t.id===e.id}));return i>-1?(n[i]=e,t=!0,n):null}))),t}},{key:"deleteTraining",value:function(e){var t=!1;return!(e<0)&&(this.onAction((function(n){var i=n.findIndex((function(t){return t.id===e}));return i>-1?(n.splice(i,1),t=!0,n):null})),t)}},{key:"getTraining",value:function(e){var t=void 0;return this.onAction((function(n){return t=n.find((function(t){return t.id==e})),null})),t}},{key:"clearTrainings",value:function(){this.onAction((function(e){return[]}))}},{key:"getCurrentTraining",value:function(){throw new Error("Method not implemented.")}},{key:"setCurrentTraining",value:function(e){throw new Error("Method not implemented.")}},{key:"getTrainings",value:function(){var e;if(0===bi(this,Si).length){var t=bi(this,ji).getAny(bi(this,Ai));wi(this,Si,null!=t?t:[])}return null!==(e=bi(this,ji).getAny(bi(this,Ai)))&&void 0!==e?e:[]}},{key:"setTrainings",value:function(e){bi(this,ji).setAny(bi(this,Ai),e)}},{key:"validate",value:function(e){return bi(this,xi).validate(e).status}},{key:"onAction",value:function(e){var t=e(this.getTrainings());null!==t&&this.setTrainings(t)}}]),e}(),Ci=new WeakMap,Ii=new WeakMap,Pi=new WeakMap,Mi=function(){function e(){mi(this,e),Ci.set(this,{writable:!0,value:void 0}),Ii.set(this,{writable:!0,value:void 0}),Pi.set(this,{writable:!0,value:void 0}),wi(this,Ci,new fi.BpdStorage("local","BPD_TRAININGS")),wi(this,Ii,[]),wi(this,Pi,new Qe),this.getActionsFromStorage()}return vi(e,[{key:"getAllActions",value:function(){return di(bi(this,Ii))}},{key:"setAction",value:function(e){if(!bi(this,Pi).validate(e).status)return!1;Object(c.c)(e.id)||(e.id="000"+this.getNextIndex(),bi(this,Ii).push(e));var t=this.getIndex(e);return t>-1?(bi(this,Ii)[t]=e,this.setActionsToStorage(),!0):(console.log("Unknown action id: "+e.id),!1)}},{key:"removeAction",value:function(e){if(!bi(this,Pi).validate(e).status)return!1;var t=this.getIndex(e);return t<0?(console.log("Unknown action id: "+e.id),!1):(bi(this,Ii).splice(t,1),this.setActionsToStorage(),!0)}},{key:"clearActions",value:function(){wi(this,Ii,[]),this.setActionsToStorage()}},{key:"getActionsById",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Object(c.c)(t))return bi(this,Ii).reduce((function(e,n,i){return t.includes(n.id)&&e.push(n),e}),[])}},{key:"getIndex",value:function(e){return bi(this,Ii).findIndex((function(t){return t.id===e.id}))}},{key:"getActionsFromStorage",value:function(){var e=bi(this,Ci).getAny("ACTIONS");wi(this,Ii,null!=e?e:[])}},{key:"setActionsToStorage",value:function(){bi(this,Ci).setAny("ACTIONS",bi(this,Ii))}},{key:"getNextIndex",value:function(){var e=bi(this,Ci).getNumber("ACTION_INDEX");return e?e+=1:e=5,bi(this,Ci).setNumber("ACTION_INDEX",e),e}}]),e}(),Di=new WeakMap,_i=function(){function e(){mi(this,e),Di.set(this,{writable:!0,value:void 0}),wi(this,Di,new fi.BpdStorage("local","BPD_SETTINGS"))}return vi(e,[{key:"setSettings",value:function(e){return bi(this,Di).setAny("SETTINGS",e),!0}},{key:"getSettings",value:function(){return bi(this,Di).getAny("SETTINGS")||{darkMode:!1,soundEnabled:!1}}},{key:"setSoundEnabled",value:function(e){var t=this.getSettings();e!==t.soundEnabled&&(t.soundEnabled=e,this.setSettings(t))}},{key:"isSoundEnabled",value:function(){var e;return null===(e=this.getSettings())||void 0===e?void 0:e.soundEnabled}},{key:"setDarkMode",value:function(e){var t=this.getSettings();e!==t.darkMode&&(t.darkMode=e,this.setSettings(t))}},{key:"isDarkMode",value:function(){var e;return null===(e=this.getSettings())||void 0===e?void 0:e.darkMode}},{key:"isWelcomeSet",value:function(){var e;return null===(e=this.getSettings())||void 0===e?void 0:e.isWelcome}},{key:"setIsWelcome",value:function(e){var t=this.getSettings();e!==t.isWelcome&&(t.isWelcome=e,this.setSettings(t))}},{key:"clearSettings",value:function(){this.setSettings({darkMode:!1,soundEnabled:!1,isWelcome:!1})}}]),e}(),Li=n(31),$i=n(0),Wi=n(18),Ri=n(2),Fi=n(19),Gi=n(6),Ui=n(34),Bi=n(5),Hi=n(20),zi=n(4),Yi=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))},Vi=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},qi=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class Ji{constructor(e,t){gi.set(this,void 0),yi.set(this,void 0),Ei.set(this,void 0),Oi.set(this,void 0),ki.set(this,void 0),Ni.set(this,void 0),Vi(this,gi,e),Vi(this,yi,!1),Vi(this,Ei,Gi.a.get("ElementManager")),Vi(this,ki,t),Vi(this,Oi,Date.now()),Vi(this,Ni,new Hi.a(t.interactions))}toggleClass(e){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(t=>{t.classList.contains(e)?t.classList.remove(e):t.classList.add(e)},"toggleClass")}))}toggleClassAs(e){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(t=>{let n=t.classList;qi(this,ki).interactions.fetch(()=>{n.contains(e)?qi(this,ki).interactions.mutate(n.remove,n,e):qi(this,ki).interactions.mutate(n.add,n,e)},this)},"toggleClassAs")}))}setClass(e){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(t=>{t.classList.contains(e)||t.classList.add(e)},"setClass")}))}setClassAs(e){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(t=>{let n=t.classList;qi(this,ki).interactions.fetch(()=>{n.contains(e)||qi(this,ki).interactions.mutate(n.add,n,e)},this)},"setClassAs")}))}removeClass(e){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(t=>{t.classList.contains(e)&&t.classList.remove(e)},"removeClass")}))}removeClassAs(e){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(t=>{let n=t.classList;qi(this,ki).interactions.fetch(()=>{n.contains(e)&&qi(this,ki).interactions.mutate(n.remove,n,e)},this)},"removeClass")}))}getAttribute(e){return Object($i.w)(e)?qi(this,gi).reduce((t,n)=>{let i=n.getAttribute(e);return null!=i&&t.push(i),t},[]):[]}setAttribute(e,t){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(n=>{n.setAttribute(e,null!=t?t:"")},"setAttribute")}))}setAttributeAs(e,t){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(n=>{qi(this,ki).interactions.mutate(n.setAttribute,n,e,null!=t?t:"")},"setAttributeAs")}))}removeAttribute(e){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(t=>{t.removeAttribute(e)},"removeAttribute")}))}removeAttributeAs(e){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(t=>{qi(this,ki).interactions.mutate(t.removeAttribute,t,e)},"removeAttributeAs")}))}toggleAttribute(e,t){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(n=>{n.hasAttribute(e)?n.removeAttribute(e):n.setAttribute(e,null!=t?t:"")},"toggleAttribute")}))}toggleAttributeAs(e,t){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(n=>{qi(this,ki).interactions.fetch(()=>{n.hasAttribute(e)?qi(this,ki).interactions.mutate(n.removeAttribute,n,e):qi(this,ki).interactions.mutate(n.setAttribute,n,e,null!=t?t:"")},this)},"toggleAttributeAs")}))}click(e){return Yi(this,void 0,void 0,(function*(){return!!Object($i.w)(e)&&this.call(t=>{t.addEventListener("click",e)},"click")}))}event(e,t){return Yi(this,void 0,void 0,(function*(){return!(!Object($i.w)(e)||!Object($i.w)(t))&&this.call(n=>{n.addEventListener(e,t)},"event")}))}call(e,t){return Yi(this,void 0,void 0,(function*(){return qi(this,yi)&&qi(this,Ei).error("Element is locked",t),this.lock(),qi(this,gi).forEach((t,n)=>{e(t,n)}),this.unlock(),!0}))}animate(e,t){return Yi(this,void 0,void 0,(function*(){if(!Object($i.w)(e))return!1;const n=null!=t?t:qi(this,ki).setup.animationTime;return this.call(t=>{this.change(()=>{t.classList.add(e),t.classList.add(Ri.a.animProgress),setTimeout(()=>{this.change(()=>{t.classList.remove(e),t.classList.remove(Ri.a.animProgress)})},n)})})}))}open(e,t,n){return Yi(this,void 0,void 0,(function*(){if(!Object($i.b)(e,t))return!1;const i=null!=n?n:qi(this,ki).setup.animationTime,r=new zi.b(t);return this.call(t=>{qi(this,Ni).performAction(t,r,null!=i?i:0).then(()=>{t.classList.add(e)})})}))}close(e,t,n){return Yi(this,void 0,void 0,(function*(){if(!Object($i.b)(e,t))return!1;const i=null!=n?n:qi(this,ki).setup.animationTime,r=new zi.b(t);return this.call(t=>{qi(this,Ni).performAction(t,r,null!=i?i:0).then(()=>{t.classList.remove(e)})})}))}emit(e,...t){Object($i.w)(e)?this.call(n=>{let i=n.$cuid;Object($i.w)(i)&&(qi(this,Ei).debug(`Emitting event ${e} to ${i}`),qi(this,ki).bus.emit(e,i,...t))},"emit"):qi(this,Ei).warning("Not enough data to emit event","emit")}on(e,t){let n=[];return Object($i.b)(e,t)?(this.call(i=>{let r=i;if(Object($i.w)(r)){let i=qi(this,ki).bus.on(e,t,r);null!=i&&n.push(i)}},"on"),n):(qi(this,Ei).error("Incorrect arguments","on"),n)}detach(e,t){Object($i.b)(e,t)||qi(this,Ei).error("Incorrect arguments","detach"),this.call(n=>{let i=n;Object($i.w)(i)&&qi(this,ki).bus.detach(e,t,i)},"detach")}read(e,...t){qi(this,ki).interactions.fetch(e,this,...t)}change(e,...t){qi(this,ki).interactions.mutate(e,this,...t)}elements(){return qi(this,gi)}count(){return qi(this,gi).length}lock(){Vi(this,yi,!0)}unlock(){Vi(this,yi,!1)}isLocked(){return qi(this,yi)}refresh(){return Date.now()-qi(this,Oi)<36e4}}gi=new WeakMap,yi=new WeakMap,Ei=new WeakMap,Oi=new WeakMap,ki=new WeakMap,Ni=new WeakMap;var Ki,Qi,Xi,Zi,er,tr,nr=n(7),ir=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},rr=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class or{constructor(e,t,n){Ki.set(this,void 0),Qi.set(this,void 0),Xi.set(this,void 0),Zi.set(this,void 0),er.set(this,void 0),tr.set(this,void 0),ir(this,Zi,e),ir(this,Ki,ir(this,Xi,ir(this,Qi,void 0))),ir(this,er,null!=n?n:""),ir(this,tr,t)}createHeader(e,t,n){Object($i.w)(t)||(t=[]),Object($i.w)(n)||(n=[]);let i=new nr.a("div");i.setClasses(rr(this,Zi)+"-dialog-header",...t),ir(this,Ki,i.build());let r=new nr.a("span").setClasses(this.getPrefixedString("-dialog-title")).build(e);rr(this,Ki).appendChild(r),this.appendChildrens(rr(this,Ki),...n)}createFooter(e,t){Object($i.w)(e)||(e=[]),Object($i.w)(t)||(t=[]),ir(this,Xi,new nr.a("div").setClasses(this.getPrefixedString("-dialog-footer"),...e).build()),this.appendChildrens(rr(this,Xi),...t)}createBody(e,t){Object($i.w)(e)||(e=[]),Object($i.w)(t)||(t=[]),ir(this,Qi,new nr.a("div").setClasses(this.getPrefixedString("-dialog-body"),...e).build()),this.appendChildrens(rr(this,Qi),...t)}build(e){let t=[this.getPrefixedString("-dialog")];rr(this,tr)&&t.push(this.getPrefixedString("-reverse-auto"));let n=new nr.a("div").setId(e).setClasses(...t).setAttributes({[this.getPrefixedString("-dialog")]:rr(this,er)}).build(),i=new nr.a("div").setClasses(this.getPrefixedString("-dialog-container")).build();return rr(this,Ki)&&i.appendChild(rr(this,Ki)),rr(this,Qi)&&i.appendChild(rr(this,Qi)),rr(this,Xi)&&i.appendChild(rr(this,Xi)),n.appendChild(i),n}appendChildrens(e,...t){Object($i.w)(t)&&t.forEach(t=>e.appendChild(t))}getPrefixedString(e){return rr(this,Zi)+e}}Ki=new WeakMap,Qi=new WeakMap,Xi=new WeakMap,Zi=new WeakMap,er=new WeakMap,tr=new WeakMap;var ar,cr,sr,ur,lr,fr,dr,hr,mr=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},pr=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class vr{constructor(e,t,n){ar.set(this,void 0),cr.set(this,void 0),sr.set(this,void 0),ur.set(this,void 0),lr.set(this,void 0),mr(this,ar,{yes:n.onYes,no:n.onNo,cancel:n.onCancel,ok:n.onOk}),this.content=n.message,this.title=n.title,this.prefix=e.setup.prefix,mr(this,cr,e),mr(this,sr,t),this.reverse=!1,mr(this,lr,null),this.closeStr=pr(this,cr).setup.prefix+"-close",this.iconStr=pr(this,cr).setup.prefix+"-icon",mr(this,ur,void 0)}getId(){return pr(this,sr)}show(e){let t=document.getElementById(pr(this,sr));Object($i.w)(t)?this.updateElement(t):(t=this.createElement(),e.appendChild(t)),setTimeout(()=>{mr(this,ur,new Ji([t],pr(this,cr)));let e=pr(this,ur).on("closed",this.onClose.bind(this));mr(this,lr,e.length>0?e[0]:null),pr(this,ur).emit("open")},100)}updateElement(e){let t=e.querySelector(`.${this.prefix}-dialog-title`),n=e.querySelector(`.${this.prefix}-dialog-body>p`);pr(this,cr).interactions.mutate(()=>{t&&(t.innerHTML=this.title),n&&(n.innerHTML=this.content)},null)}onClose(e){try{if(Object($i.w)(e)&&e.state&&pr(this,ar)&&Object($i.w)(pr(this,ar)[e.state])){let t=pr(this,ar)[e.state];t&&t()}}finally{null!=pr(this,lr)&&(pr(this,ur)&&pr(this,ur).detach("closed",pr(this,lr)),mr(this,lr,null)),mr(this,ur,void 0)}}}ar=new WeakMap,cr=new WeakMap,sr=new WeakMap,ur=new WeakMap,lr=new WeakMap;class br extends vr{constructor(e,t,n){var i;super(e,t,n),fr.set(this,void 0),mr(this,fr,t),this.reverse=null!==(i=n.reverse)&&void 0!==i&&i}createElement(){let e=new or(this.prefix,this.reverse);return e.createHeader(this.title,[],[new nr.a("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),e.createBody([],[new nr.a("p").build(this.content)]),e.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new nr.a("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: cancel"}).build("Cancel"),new nr.a("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),e.build(pr(this,fr))}}fr=new WeakMap;class wr extends vr{constructor(e,t,n){var i;super(e,t,n),dr.set(this,void 0),mr(this,dr,t),this.content=n.message,this.title=n.title,this.prefix=e.setup.prefix,this.reverse=null!==(i=n.reverse)&&void 0!==i&&i}createElement(){let e=new or(this.prefix,this.reverse);return e.createHeader(this.title,[]),e.createBody([],[new nr.a("p").build(this.content)]),e.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new nr.a("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: ok"}).build("Ok")]),e.build(pr(this,dr))}}dr=new WeakMap;class gr extends vr{constructor(e,t,n){var i;super(e,t,n),hr.set(this,void 0),mr(this,hr,t),this.content=n.message,this.title=n.title,this.prefix=e.setup.prefix,this.reverse=null!==(i=n.reverse)&&void 0!==i&&i}createElement(){let e=new or(this.prefix,this.reverse);return e.createHeader(this.title,[],[new nr.a("a").setClasses(this.prefix+"-icon").setAttributes({[this.closeStr]:"state: cancel",[this.iconStr]:"close"}).build()]),e.createBody([],[new nr.a("p").build(this.content)]),e.createFooter([this.prefix+"-flex",this.prefix+"-right"],[new nr.a("button").setClasses(this.prefix+"-button",this.prefix+"-margin-small-right").setAttributes({[this.closeStr]:"state: no"}).build("No"),new nr.a("button").setClasses(this.prefix+"-button",this.prefix+"-accent").setAttributes({[this.closeStr]:"state: yes"}).build("Yes")]),e.build(pr(this,hr))}}hr=new WeakMap;var yr,Er,Or,kr,Nr,jr=n(16),Sr=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Ar=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class xr{constructor(e){yr.set(this,void 0),Er.set(this,void 0),Or.set(this,void 0),kr.set(this,void 0),Nr.set(this,void 0),Sr(this,yr,e),Sr(this,Er,new jr.a),Ar(this,Er).setCallback(this.onMove.bind(this)),Sr(this,Nr,void 0),Sr(this,Or,!1),Sr(this,kr,null)}attach(){Ar(this,Er).isAttached()||(Ar(this,Er).attach(),Sr(this,kr,Ar(this,yr).on(Ri.i.MOVE_LOCK,this.onMoveLock.bind(this))))}detach(){Ar(this,Er).isAttached()&&(Ar(this,Er).detach(),null!=Ar(this,kr)&&Ar(this,yr).detach(Ri.i.MOVE_LOCK,Ar(this,kr)))}isAttached(){return Ar(this,Er).isAttached()}onMove(e){if(!Ar(this,Or))switch(e.type){case"down":Sr(this,Nr,e);break;case"move":Ar(this,Nr)&&(Ar(this,yr).emit(Ri.i.GLOBAL_MOVE,null,Ar(this,Nr)),Sr(this,Nr,void 0)),Ar(this,yr).emit(Ri.i.GLOBAL_MOVE,null,e);break;case"up":if(Ar(this,Nr))return void Sr(this,Nr,void 0);Ar(this,yr).emit(Ri.i.GLOBAL_MOVE,null,e)}}onMoveLock(e){Sr(this,Or,e)}}yr=new WeakMap,Er=new WeakMap,Or=new WeakMap,kr=new WeakMap,Nr=new WeakMap;var Tr,Cr,Ir,Pr,Mr,Dr,_r,Lr,$r=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))},Wr=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Rr=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class Fr{constructor(e,t,n){Tr.set(this,void 0),Cr.set(this,void 0),Ir.set(this,void 0),Pr.set(this,void 0),Mr.set(this,void 0),Dr.set(this,void 0),_r.set(this,void 0),Lr.set(this,void 0),Wr(this,Tr,e),Wr(this,Cr,`.${t}-toast`),Wr(this,Ir,t+"-toast"),Wr(this,Pr,t+"-active"),Wr(this,Mr,n),Wr(this,Dr,!1),Wr(this,_r,t+"-toast-animation-in"),Wr(this,Lr,t+"-toast-animation-out")}show(e){return $r(this,void 0,void 0,(function*(){if(Rr(this,Dr))return!1;Wr(this,Dr,!0);let t=document.querySelector(Rr(this,Cr));return Object($i.w)(t)||(t=document.createElement("div"),t.classList.add(Rr(this,Ir)),document.body.appendChild(t),yield Object($i.E)(10)),Rr(this,Tr).mutate(()=>{t.textContent=e,t.classList.add(Ri.a.animProgress),t.classList.add(Rr(this,_r))},this),yield Object($i.E)(Rr(this,Mr)),Rr(this,Tr).mutate(()=>{t.classList.remove(Ri.a.animProgress),t.classList.remove(Rr(this,_r)),t.classList.add(Rr(this,Pr))},this),yield Object($i.E)(3e3),Rr(this,Tr).mutate(()=>{t.classList.add(Ri.a.animProgress),t.classList.add(Rr(this,Lr))},this),setTimeout(()=>{Rr(this,Tr).mutate(()=>{t.classList.remove(Ri.a.animProgress),t.classList.remove(Rr(this,Lr)),t.classList.remove(Rr(this,Pr))},this),Wr(this,Dr,!1)},Rr(this,Mr)),!0}))}}Tr=new WeakMap,Cr=new WeakMap,Ir=new WeakMap,Pr=new WeakMap,Mr=new WeakMap,Dr=new WeakMap,_r=new WeakMap,Lr=new WeakMap;var Gr,Ur,Br,Hr,zr,Yr=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))},Vr=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},qr=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class Jr{constructor(e){Gr.set(this,void 0),Ur.set(this,void 0),Br.set(this,void 0),Hr.set(this,void 0),zr.set(this,void 0),Vr(this,zr,e),Vr(this,Ur,Gi.a.get("CollectionManager")),Vr(this,Gr,[]),Vr(this,Br,!1),Vr(this,Hr,"")}setElements(e){Vr(this,Gr,e)}setToggle(e){Vr(this,Hr,e)}addAnimationClass(e,t,n,i){t.classList.add(Ri.a.animProgress),e.classList.add(i),t.classList.add(n)}setFinalClasses(e,t,n,i){t.classList.remove(Ri.a.animProgress),e.classList.remove(i),t.classList.remove(n),e.classList.remove(qr(this,Hr)),t.classList.add(qr(this,Hr))}verifyIndex(e,t,n){return e>=0&&e!==t&&e<n}setCurrent(e,t){return Yr(this,void 0,void 0,(function*(){return this.lock(),qr(this,Ur).debug(`Switching index from: ${t} to ${e}`),t>-1&&qr(this,Gr)[t].classList.remove(qr(this,Hr)),qr(this,Gr)[e].classList.add(qr(this,Hr)),this.unlock(),!0}))}setCurrentWithAnimation(e,t,n,i,r){return Yr(this,void 0,void 0,(function*(){this.lock(),qr(this,Ur).debug(`Switching index from: ${r} to ${e}`);const o=qr(this,Gr)[r],a=qr(this,Gr)[e];return qr(this,zr).mutate(this.addAnimationClass,this,o,a,t,n),setTimeout(()=>{qr(this,zr).mutate(this.setFinalClasses,this,o,a,t,n),this.unlock()},i),!0}))}getCurrentIndex(){if(!Object($i.w)(qr(this,Hr)))return-1;let e=this.count();for(let t=0;t<e;t++)if(qr(this,Gr)[t].classList.contains(qr(this,Hr)))return t;return-1}elements(){return qr(this,Gr)}check(){return qr(this,Br)?(qr(this,Ur).warning("Object locked. Operation in progress","Check"),!1):Object($i.w)(qr(this,Hr))?!(this.count()<=0)||(qr(this,Ur).warning("Elements list is empty","Check"),!1):(qr(this,Ur).warning("Toggle is not set. Call setToggleClass","Check"),!1)}count(){return qr(this,Gr)?qr(this,Gr).length:-1}lock(){Vr(this,Br,!0)}unlock(){Vr(this,Br,!1)}}Gr=new WeakMap,Ur=new WeakMap,Br=new WeakMap,Hr=new WeakMap,zr=new WeakMap;var Kr,Qr,Xr,Zr=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))},eo=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},to=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class no{constructor(e,t){Kr.set(this,void 0),Qr.set(this,void 0),Xr.set(this,void 0),eo(this,Kr,Gi.a.get("CollectionManager")),eo(this,Xr,new Jr(t)),to(this,Xr).setElements(e),eo(this,Qr,Date.now())}setToggle(e){to(this,Xr).setToggle(e)}setElements(e){to(this,Xr).setElements(e)}click(e){to(this,Xr).elements().forEach((t,n)=>{t.addEventListener("click",()=>{this.set(n).then(()=>{e&&e(t,n)})})})}next(){return Zr(this,void 0,void 0,(function*(){if(!to(this,Xr).check())return!1;let e=to(this,Xr).getCurrentIndex()+1;return this.set(e>=this.length()?0:e)}))}previous(){return Zr(this,void 0,void 0,(function*(){if(!to(this,Xr).check())return!1;let e=to(this,Xr).getCurrentIndex()-1;return this.set(e<0?this.length()-1:e)}))}set(e){return Zr(this,void 0,void 0,(function*(){let t=to(this,Xr).getCurrentIndex();return!(!to(this,Xr).check()||!to(this,Xr).verifyIndex(e,t,this.length()))&&to(this,Xr).setCurrent(e,t)}))}setWithAnimation(e,t,n,i){return Zr(this,void 0,void 0,(function*(){let r=to(this,Xr).getCurrentIndex();return!(!to(this,Xr).check()||!to(this,Xr).verifyIndex(e,r,this.length()))&&to(this,Xr).setCurrentWithAnimation(e,t,n,i,r)}))}getCurrentIndex(){return to(this,Xr).getCurrentIndex()}length(){return to(this,Xr).count()}refresh(){return this.length()>0&&Date.now()-to(this,Qr)>36e4}}Kr=new WeakMap,Qr=new WeakMap,Xr=new WeakMap;var io,ro,oo,ao=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))},co=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},so=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class uo{constructor(e){io.set(this,void 0),ro.set(this,void 0),oo.set(this,void 0),co(this,io,null!=e?e:[]),co(this,oo,Gi.a.get("CuiPluginManager")),co(this,ro,[])}init(e){so(this,oo).debug("Plugins initialization started: "+so(this,io).length),co(this,ro,so(this,io).filter(e=>Object($i.w)(e.mutation))),so(this,io).forEach(t=>{t.init(e),e.setup.plugins[t.description]=t.setup}),so(this,oo).debug("Plugins have been initialized")}get(e){if(Object($i.w)(e))return so(this,io).find(t=>t.name===e)}onMutation(e){return ao(this,void 0,void 0,(function*(){let t=[];return so(this,ro).forEach(n=>{t.push(n.mutation(e))}),!(yield Promise.all(t)).find(e=>{})}))}}io=new WeakMap,ro=new WeakMap,oo=new WeakMap;var lo,fo,ho,mo,po,vo,bo,wo,go,yo=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))},Eo=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Oo=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class ko{constructor(e,t,n){lo.set(this,void 0),fo.set(this,void 0),ho.set(this,void 0),mo.set(this,void 0),po.set(this,void 0),vo.set(this,void 0),bo.set(this,void 0),wo.set(this,void 0),go.set(this,void 0),Ri.l.prefix=e.prefix,Ri.l.logLevel=e.logLevel,Eo(this,po,new uo(t)),Eo(this,vo,null!=n?n:[]),Eo(this,mo,new Ui.a(e)),Eo(this,lo,Gi.a.get("CuiInstance")),Eo(this,bo,e.root),Eo(this,wo,new xr(Oo(this,mo).bus)),Eo(this,fo,void 0),Eo(this,ho,void 0),Eo(this,go,[])}init(){var e;if(Oo(this,lo).debug("Instance started","init"),!Object($i.w)(window.MutationObserver))throw new Bi.e("Mutation observer does not exists");Eo(this,ho,new Fr(Oo(this,mo).interactions,Oo(this,mo).setup.prefix,null!==(e=Oo(this,mo).setup.animationTimeLong)&&void 0!==e?e:0)),Eo(this,go,Oo(this,vo).map(e=>e.attribute));const t=Object($i.w)(Oo(this,go))?Oo(this,bo).querySelectorAll(Object($i.A)(Oo(this,go))):null;if(Object($i.w)(t)){Oo(this,lo).debug(`Initiating ${t.length} elements`);try{t.forEach(e=>{Object($i.C)(e,Oo(this,vo),Oo(this,go),Oo(this,mo))})}catch(e){Oo(this,lo).exception(e)}}return Oo(this,lo).debug("Init plugins","init"),Oo(this,po).init(Oo(this,mo)),Object($i.b)(Oo(this,vo),Oo(this,go))&&(Oo(this,lo).debug("Init mutation observer","init"),Eo(this,fo,new Fi.b(Oo(this,bo),Oo(this,mo))),Oo(this,fo).setComponents(Oo(this,vo)).setAttributes(Oo(this,go)),Oo(this,fo).setPlugins(Oo(this,po)),Oo(this,fo).start()),Oo(this,lo).debug("Setting CSS globals","init"),Oo(this,mo).interactions.mutate(()=>{Oo(this,mo).setProperty(Ri.g.animationTimeLong,Oo(this,mo).setup.animationTimeLong+"ms"),Oo(this,mo).setProperty(Ri.g.animationTime,Oo(this,mo).setup.animationTime+"ms"),Oo(this,mo).setProperty(Ri.g.animationTimeShort,Oo(this,mo).setup.animationTimeShort+"ms")},null),Oo(this,wo).attach(),Oo(this,mo).bus.emit(Ri.i.INSTANCE_INITIALIZED,null),this}finish(){Oo(this,fo)&&Oo(this,fo).stop(),Oo(this,wo).detach(),Oo(this,mo).bus.emit(Ri.i.INSTANCE_FINISHED,null)}get(e){const t=this.all(e);if(!t)return;return new Ji(t,Oo(this,mo))}collection(e){const t=this.all(e);if(!Object($i.w)(t))return;return new no(t,Oo(this,mo).interactions)}toast(e){return yo(this,void 0,void 0,(function*(){return!!Object($i.b)(e,Oo(this,ho))&&Oo(this,ho).show(e)}))}select(e){return document.querySelector(e)}all(e){const t=document.querySelectorAll(e);if(Object($i.w)(t))return[...t]}getUtils(){return Oo(this,mo)}on(e,t,n){Object($i.b)(e,t)||Oo(this,lo).error("Incorrect arguments","on"),Oo(this,mo).bus.on(e,t,n)}detach(e,t){Object($i.b)(e,t)||Oo(this,lo).error("Incorrect arguments","detach"),Oo(this,mo).bus.detach(e,t)}detachAll(e){Object($i.w)(e)||Oo(this,lo).error("Incorrect arguments","detachAll"),Oo(this,mo).bus.detachAll(e)}emit(e,t,...n){if(!Object($i.b)(e,t))return void Oo(this,lo).warning("Not enough data to emit event","emit");let i=("string"==typeof t?document.querySelector(t):t).$cuid;Object($i.w)(i)?Oo(this,mo).bus.emit(e,i,...n):Oo(this,lo).warning("Element is not a cUI element","emit")}alert(e,t,n){let i=class{static get(e,t,n,i){return"Info"===t?new wr(i,e,n):"YesNoCancel"===t?new gr(i,e,n):"OkCancel"===t?new br(i,e,n):void 0}}.get(e,t,n,Oo(this,mo));i?i.show(Oo(this,bo)):Oo(this,lo).error("Possibly incorrect alert type")}getPlugin(e){return Oo(this,po).get(e)}createCuiElement(e,t,n){return Object($i.w)(t)&&Oo(this,go).includes(t)?!!Object($i.a)(e,t,n)||(Oo(this,lo).error("Element cannot be created: Missing data"),!1):(Oo(this,lo).error("Element cannot be created: Unknown attribute"),!1)}}lo=new WeakMap,fo=new WeakMap,ho=new WeakMap,mo=new WeakMap,po=new WeakMap,vo=new WeakMap,bo=new WeakMap,wo=new WeakMap,go=new WeakMap;var No,jo=n(14),So=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))},Ao=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},xo=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class To{constructor(){No.set(this,void 0),Ao(this,No,window)}init(e){var t,n;return So(this,void 0,void 0,(function*(){let i=Object.assign(Object.assign({},new Wi.b),e.setup);const r=i.app,o={result:!1};if(Object($i.w)(xo(this,No)[r]))return o.message="Instance is already initialized",o;if(Object($i.w)(e.icons))for(let t in e.icons)Ri.j[t]=e.icons[t];if(Object($i.w)(e.swipeAnimations))for(let t in e.swipeAnimations)jo.a[t]=e.swipeAnimations[t];try{xo(this,No)[r]=new ko(i,null!==(t=e.plugins)&&void 0!==t?t:[],null!==(n=e.components)&&void 0!==n?n:[]),xo(this,No)[r].init()}catch(e){return console.error(e),o.message="An error occured during initialization",o}return o.result=!0,o}))}}No=new WeakMap;var Co,Io=n(32),Po=n(33),Mo=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))},Do=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},_o=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};function Lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lo(Object(n),!0).forEach((function(t){Wo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Co=new WeakMap;var Ro=document.getElementById("root"),Fo=n(45),Go=new Li.a;Go.logLevel="debug",Go.root=Ro,Go.busSetup=[{name:"MoveQueue",eventsDef:["global_move"],handler:"tasked",priority:0},{name:"InteractQueue",eventsDef:["open","close","switch"],handler:"tasked",priority:0},{name:"ResponsesQueue",eventsDef:["opened","closed","switched","resize","offset"],handler:"tasked",priority:1},{name:"GlobalSimple",eventsDef:["keydown","scroll","intersection","windowclick"],handler:"tasked",priority:2}];var Uo={setup:Go,icons:$o($o({},ui.a),Fo)},Bo=new Bn(new Ti),Ho=new $e(new Mi),zo=new Nn(new _i);window.$flow=li.FlowFactory.create(Bo.getActions()),window.$actionsFlow=li.FlowFactory.create(Ho.getActions()),window.$settingsFlow=li.FlowFactory.create(zo.getActions()),(new class{constructor(){Co.set(this,void 0),Do(this,Co,!1)}init(e){var t,n;return Mo(this,void 0,void 0,(function*(){if(_o(this,Co))return console.log("Module is already initialized"),!1;const i=new To,r=Object(Po.a)({autoLight:!0,autoPrint:!0}),o=Object(Io.a)({prefix:null===(t=e.setup)||void 0===t?void 0:t.prefix});let a=r;e.plugins&&(a=Object.assign(Object.assign({},r),e.plugins));let c=yield i.init({setup:e.setup,icons:e.icons,plugins:a,components:Object($i.w)(e.components)?[...o,...e.components]:o,swipeAnimations:e.swipeAnimations});return c.result?(Do(this,Co,!0),!0):(console.error(`A cUI instance failed to initialize: [${null!==(n=c.message)&&void 0!==n?n:"#"}]`),console.log("Cui Light failed to init"),!1)}))}}).init(Uo).then((function(e){r.render(i.createElement(si,null),Ro)}))}});
//# sourceMappingURL=stopwatch.index.js.map