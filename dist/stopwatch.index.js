!function(e){function t(t){for(var r,o,c=t[0],u=t[1],l=t[2],f=0,m=[];f<c.length;f++)o=c[f],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&m.push(i[o][0]),i[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(s&&s(t);m.length;)m.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==i[u]&&(r=!1)}r&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},i={0:0},a=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var l=0;l<c.length;l++)t(c[l]);var s=u;a.push([32,1]),n()}({25:function(e,t,n){},31:function(e){e.exports=JSON.parse('{"stopwatch":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 200 200\\" width=\\"200\\" height=\\"200\\"><path d=\\"m 87.063507,7.6902003 c -1.894378,0 -3.419455,1.5248948 -3.419455,3.4190467 v 2.279364 c 0,1.894152 1.525077,3.419046 3.419455,3.419046 h 8.377218 v 4.672252 a 85.486373,85.476165 0 0 0 -80.927099,85.353731 85.486373,85.476165 0 0 0 85.486373,85.47617 85.486373,85.476165 0 0 0 85.486371,-85.47617 85.486373,85.476165 0 0 0 -80.9271,-85.353731 v -4.672252 h 8.37722 c 1.89437,0 3.41945,-1.524894 3.41945,-3.419046 v -2.279364 c 0,-1.8941519 -1.52508,-3.4190467 -3.41945,-3.4190467 z\\" class=\\"outer-border\\"></path><path d=\\"M 151.86173,105.12189 A 51.861736,51.855545 0 0 1 99.999992,156.97743 51.861736,51.855545 0 0 1 48.138256,105.12189 51.861736,51.855545 0 0 1 99.999992,53.266342 51.861736,51.855545 0 0 1 151.86173,105.12189\\" class=\\"inner-border\\"></path><path d=\\"m 99.999999,166.66467 v 11.4391\\" class=\\"tick\\"></path><path d=\\"m 99.999999,32.140025 -3e-6,11.439101\\" class=\\"tick\\"></path><path d=\\"M 38.449882,105.1219 H 27.00941\\" class=\\"tick\\"></path><path d=\\"M 172.99058,105.1219 H 161.55011\\" class=\\"tick\\"></path><path d=\\"m 99.999999,60.80568 v 44.10019\\" class=\\"minutes\\"></path><path d=\\"M 125.05857,129.85765 99.926593,104.72867\\" class=\\"hours\\"></path><path d=\\"m 100,101.91334 c 1.662,0 3,1.338 3,3 0,1.662 -1.338,3 -3,3 -1.662,0 -3,-1.338 -3,-3 0,-1.662 1.338,-3 3,-3 z\\" class=\\"center\\"></path></svg>","stopwatch_break":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"20\\" height=\\"20\\"><path d=\\"m 6.9116187,18 v -1.98834 c -4.6e-6,-0.0039 -6.8e-6,-0.0078 -6.8e-6,-0.01166 0,-3.037566 1.362932,-5.5 3.044194,-5.5 C 11.637067,10.5 13,12.962434 13,16 v 0 c 0,0.0039 -2e-6,0.0078 -7e-6,0.01171 V 18\\"></path><path d=\\"m 12.483108,3.9843886 a 2.5,2.5 0 0 1 -2.5000004,2.5 2.5,2.5 0 0 1 -2.5,-2.5 2.5,2.5 0 0 1 2.5,-2.5 2.5,2.5 0 0 1 2.5000004,2.5 z\\"></path><path d=\\"M 15.486422,13 A 5.5,5.5 0 0 0 10,7.886229 a 5.5,5.5 0 0 0 -5.4864663,5.1144\\"></path></svg>","stopwatch_cooldown":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"20\\" height=\\"20\\"><path d=\\"M 18.5,10 A 8.5,8.5 0 0 1 10,18.5 8.5,8.5 0 0 1 1.5,10 8.5,8.5 0 0 1 10,1.5 8.5,8.5 0 0 1 18.5,10 Z\\"></path><path d=\\"M 10 3.5 L 10 10 L 16.5 10 A 6.5 6.5 0 0 0 10 3.5 z \\"></path></svg>","stopwatch_exercise":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"20\\" height=\\"20\\"><path d=\\"m 5.911621,18 v -1.98834 c -6.2e-6,-0.0039 -9.1e-6,-0.0078 -9.1e-6,-0.01166 0,-3.037566 1.8106473,-5.5 4.044194,-5.5 C 12.189352,10.5 14,12.962434 14,16 v 0 c 0,0.0039 -3e-6,0.0078 -9e-6,0.01171 V 18\\"></path><path d=\\"m 12.483108,3.9843886 a 2.5,2.5 0 0 1 -2.5000004,2.5 2.5,2.5 0 0 1 -2.5,-2.5 2.5,2.5 0 0 1 2.5,-2.5 2.5,2.5 0 0 1 2.5000004,2.5 z\\"></path><path d=\\"M 15.486422,4 A 5.5,5.5 0 0 1 10,9.113771 5.5,5.5 0 0 1 4.5135337,3.9993706\\"></path></svg>","stopwatch_ring":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 200 200\\" width=\\"200\\" height=\\"200\\"><path d=\\"M 194,100.00001 A 93.999997,93.999995 0 0 1 99.999998,194 93.999997,93.999995 0 0 1 6.000002,100.00001 93.999997,93.999995 0 0 1 99.999998,6.0000045 93.999997,93.999995 0 0 1 194,100.00001\\" class=\\"inner-border\\"></path></svg>","stopwatch_small":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"20\\" height=\\"20\\"><path d=\\"m 19,10 a 9,9 0 0 1 -9,9 9,9 0 0 1 -9,-9 9,9 0 0 1 9,-9 9,9 0 0 1 9,9 z\\"></path><path d=\\"M 10 16.1875 L 10 17.5 \\"></path><path d=\\"M 10 2.5000001 L 10 3.8125001 \\"></path><path d=\\"M 16.1875 10 L 17.5 10 \\"></path><path d=\\"M 2.5000001 10 L 3.8125001 10 \\"></path><path d=\\"m 9.96875,6 v 4.0625 l 2.984375,2.984375\\"></path></svg>","stopwatch_warmup":"<svg xmlns=\\"http://www.w3.org/2000/svg\\" viewBox=\\"0 0 20 20\\" width=\\"20\\" height=\\"20\\"><path d=\\"m 7.0000001,18 v -1.98834 c -4.6e-6,-0.0039 -6.7e-6,-0.0078 -6.7e-6,-0.01166 0,-3.037566 1.3233624,-5.5 2.9558126,-5.5 1.63245,0 2.955813,2.462434 2.955813,5.5 v 0 c 0,0.0039 -3e-6,0.0078 -7e-6,0.01171 V 18\\"></path><path d=\\"m 12.483108,3.9843886 a 2.5,2.5 0 0 1 -2.5000004,2.5 2.5,2.5 0 0 1 -2.5,-2.5 2.5,2.5 0 0 1 2.5,-2.5 2.5,2.5 0 0 1 2.5000004,2.5 z\\"></path><path d=\\"M 15.486422,3.886229 A 5.5,5.5 0 0 1 10,9\\"></path><path d=\\"M 10,9 C 3,9 6.20247,11.119178 6,14\\"></path></svg>"}')},32:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(17),a=(n(25),n(3)),o=n(2),c=n(1);function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){window.$cui.alert("common-info-dialog","Info",{title:e,message:t})}function f(e){return Object(c.c)(e)?e.reduce((function(e,t){return e+t.duration}),0):0}function m(e){if(e<0)return"Error";if(e<60)return"00:"+d(e);if(e<3600){var t=e%60;return d(Math.floor(e/60))+":"+d(t)}var n=e%3600;return d(Math.floor(e/3600))+":"+m(n)}function d(e){return e<0||e>59?"Error":e<10?"0"+e:""+e}function p(e){window.$cui&&window.$cui.getUtils().setLightMode(e?"dark":"light")}function h(e,t){return Math.floor(100*e/t)}function b(e){return e.rounds.reduce((function(e,t){return[e[0]+t.actions.length,e[1]+f(t.actions)]}),[0,0])}function v(e){return"action-background-"+e}function y(e){switch(e){case"warmup":return"cui-text-success";case"break":return"cui-text-error";case"exercise":return"cui-text-accent";case"cooldown":return"cui-text-secondar";default:return""}}function g(e,t,n,r){if(!e||null===e||t<0)return e;var i=null!=r?r:1,a=e.length;if(a<2||t>=a)return u(e);var o=e.splice(t,i),c=a-i,l=n;return l<=0?[].concat(u(o),u(e)):l>=c?[].concat(u(e),u(o)):(e.splice.apply(e,[l,0].concat(u(o))),u(e))}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=new WeakMap,O=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E.set(this,{writable:!0,value:void 0}),function(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(this,E,t)}var t,n,r;return t=e,(n=[{key:"getRoute",value:function(e){return Object(c.c)(e)?function(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}(this,E)[e]:void 0}},{key:"getUrl",value:function(e){var t=this.getRoute(e);return Object(c.c)(t)?t.url:void 0}},{key:"getName",value:function(e){var t=this.getRoute(e);return Object(c.c)(t)?t.name:void 0}},{key:"renderUrl",value:function(e,t){var n=this.getUrl(e);return Object(c.c)(t)?(Object(c.b)(t,(function(e,t){n=n.replace(":"+e,t)})),n):n}}])&&w(t.prototype,n),r&&w(t,r),e}())({home:{url:"/",name:"Home"},about:{url:"/about",name:"About"},settings:{url:"/settings",name:"Settings"},actions:{url:"/actions",name:"Actions"},newTraining:{url:"/trainings/edit/new",name:"New Training"},editTraining:{url:"/trainings/edit/:id",name:"Edit Training"},perform:{url:"/trainings/perform/:id",name:"Perform Training"}});function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){return r.createElement("ul",{className:"cui-list cui-hover"},e.list&&e.list.map((function(t){return r.createElement("li",{key:t.id,className:"stopwatch-content-width"},r.createElement(k,{data:t,onDelete:e.onDelete}))})))}function k(e){var t,n,i,c=Object(o.f)();return r.useEffect((function(){var e=window.$flow.subscribe("DELETE_TRAINING").finish((function(e){window.$flow.perform("GET_TRAININGS")}));return function(){window.$flow.unsubscribe("DELETE_TRAINING",e.id)}})),r.createElement("div",{className:"cui-flex cui-middle cui-animation-fade-in cui-padding-bottom cui-padding-top"},r.createElement("div",{className:"cui-flex-grow",onClick:function(){c.push(O.renderUrl("perform",{id:e.data.id}))}},r.createElement("div",{className:"cui-flex cui-middle cui-nowrap"},r.createElement("div",{className:"training-list-item-icon"},r.createElement("span",{className:"cui-text-bold"},e.data.name[0].toUpperCase())),r.createElement("div",{className:"cui-flex-grow cui-margin-left"},r.createElement("span",null,e.data.name),r.createElement("div",{className:"cui-text-muted cui-text-truncate cui-overflow-hidden"},r.createElement("span",null,(t=e.data,(n=N(function(e){return e.rounds.reduce((function(e,t){return[e[0]+t.actions.length,e[1]+f(t.actions)]}),[0,0])}(t),2))[0],i=n[1],"".concat(i," seconds"))))))),r.createElement("div",{className:"cui-flex-shrink"},r.createElement("div",null,r.createElement(a.b,{to:O.renderUrl("editTraining",{id:e.data.id}),className:"cui-icon-button","cui-icon":"edit"}))))}function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$(e);if(t){var i=$(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(c,e);var t,n,i,o=_(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),U(M(t=o.call(this,e)),"list",void 0),U(M(t),"subscription",void 0),U(M(t),"onDeleteSubscription",void 0),U(M(t),"state",void 0),t.state={list:[]},t.updateList=t.updateList.bind(M(t)),t.onDeleteTrainingComplete=t.onDeleteTrainingComplete.bind(M(t)),t.deleteTraining=t.deleteTraining.bind(M(t)),t}return t=c,(n=[{key:"componentDidMount",value:function(){this.subscription=window.$flow.subscribe("GET_ALL_TRAININGS"),this.subscription.finish(this.updateList),this.onDeleteSubscription=window.$flow.subscribe("DELETE_TRAINING",{finish:this.onDeleteTrainingComplete}),window.$flow.perform("GET_ALL_TRAININGS")}},{key:"componentWillUnmount",value:function(){window.$flow.unsubscribe("GET_ALL_TRAININGS",this.subscription.id),window.$flow.unsubscribe("DELETE_TRAINING",this.onDeleteSubscription.id)}},{key:"deleteTraining",value:function(e){var t=P(this.state.list),n=t.findIndex((function(t){return t.id===e}));n>-1?window.$cui.alert("delete-training-dialog","YesNoCancel",{title:"Delete training",message:"Do you really want to delete training: "+t[n].name+"?",onYes:function(){window.$flow.perform("DELETE_TRAINING",e)}}):s("Delete training","We cannot remove this training. Identified doesn't match.")}},{key:"onDeleteTrainingComplete",value:function(e){e?window.$flow.perform("GET_ALL_TRAININGS"):s("Delete training","Service could not remove training")}},{key:"updateList",value:function(e){this.setState(x(x({},this.state),{},{list:e}))}},{key:"render",value:function(){return r.createElement("div",{className:"stopwatch-page-layout"},r.createElement("div",{className:"stopwatch-page-top cui-container cui-center"},r.createElement("div",null,r.createElement("span",{className:"cui-icon stopwatch-icon","cui-icon":"stopwatch"}),r.createElement("h1",{className:"cui-h3 cui-text-center cui-margin-small-top stopwatch-title"},"Stopwatch"))),r.createElement("div",{className:"stopwatch-page-bottom"},r.createElement("div",{className:"stopwatch-home-list cui-overflow-y-auto"},this.state.list.length>0?r.createElement(S,{list:this.state.list,onDelete:this.deleteTraining}):r.createElement(F,null))),r.createElement("div",{className:"cui-position-float cui-position-bottom cui-position-right cui-margin cui-margin-large--l z-index-100"},r.createElement(a.b,{to:O.renderUrl("newTraining"),className:"cui-button cui-icon cui-icon-margin cui-background-default cui-box-shadow cui-rounded","cui-icon":"plus"},"Add New")))}}])&&D(t.prototype,n),i&&D(t,i),c}(r.Component);function F(){return r.createElement("div",{className:"cui-container cui-center"},r.createElement("p",{className:"cui-text-muted cui-text-center"},"There are no trainings recorded. ",r.createElement(a.b,{className:"cui-link cui-accent",to:O.renderUrl("newTraining")},"Add new")," training to start your execises!"))}function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var i=V(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&W(e,t)}(c,e);var t,n,i,o=z(c);function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),o.call(this,e)}return t=c,(n=[{key:"render",value:function(){return r.createElement("div",{className:"cui-section cui-flex-center cui-height-viewport-1-2"},r.createElement("div",{className:"cui-card cui-large"},r.createElement("div",{className:"cui-card-header cui-text-error"},r.createElement("span",{className:"cui-card-title"},"Error")),r.createElement("div",{className:"cui-card-body"},"It appears that page you looking for does not exist. Try to look for it again or go back to our Home page"),r.createElement("div",{className:"cui-card-footer cui-flex cui-right"},r.createElement(a.b,{to:"/",className:"cui-link"},"Go Home"))))}}])&&B(t.prototype,n),i&&B(t,i),c}(r.Component);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ee(e);if(t){var i=ee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Q(this,n)}}function Q(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(c,e);var t,n,i,o=q(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).onClick=t.onClick.bind(X(t)),t}return t=c,(n=[{key:"onClick",value:function(){this.props.shouldClose&&window.$cui.get("#app-offcanvas").emit("close")}},{key:"render",value:function(){return r.createElement(a.c,{exact:!0,activeClassName:"cui-active",className:this.props.class,to:this.props.url,onClick:this.onClick},this.props.name)}}])&&K(t.prototype,n),i&&K(t,i),c}(r.Component);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(e){var t=Object(o.g)(),n=ae(r.useState({currentSite:"",darkMode:!1,soundEnabled:!1}),2),i=n[0],c=n[1];return r.useEffect((function(){var e=t.pathname.split("/");c(re(re({},i),{},{currentSite:e.length>1?t.pathname.split("/")[1].toLocaleUpperCase():""}))}),[t]),r.createElement("nav",{className:"cui-navbar cui-sticky cui-box-shadow-remove stopwatch-layout-navigation"},r.createElement("div",{className:"cui-navbar-left cui-width-1-1 cui-width-auto--m cui-flex cui-middle cui-between",id:"navbar-left"},r.createElement("ul",null,i.currentSite&&r.createElement("li",null,r.createElement(a.b,{className:"cui-icon",to:O.renderUrl("home"),"cui-icon":"stopwatch_small"}))),r.createElement("a",{className:"cui-icon cui-padding cui-button cui-hidden--m","cui-icon":"menu","cui-open":"target: #app-offcanvas"})),r.createElement("ul",{className:"cui-navbar-right cui-visible--m"},r.createElement("li",null,r.createElement(te,{class:"cui-navbar-item",url:O.renderUrl("home"),name:O.getName("home")})),r.createElement("li",null,r.createElement(te,{class:"cui-navbar-item",url:O.renderUrl("actions"),name:O.getName("actions")})),r.createElement("li",null,r.createElement(te,{class:"cui-navbar-item",url:O.renderUrl("settings"),name:O.getName("settings")})),r.createElement("li",null,r.createElement(te,{class:"cui-navbar-item",url:O.renderUrl("about"),name:O.getName("about")}))))}function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=de(e);if(t){var i=de(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return me(this,n)}}function me(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(o,e);var t,n,i,a=fe(o);function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a.call(this,e)}return t=o,(n=[{key:"render",value:function(){return r.createElement("div",{className:"cui-off-canvas",id:"app-offcanvas","cui-off-canvas":"escClose: y; outClose: y"},r.createElement("div",{className:"cui-off-canvas-container cui-card off-canvas-layout"},r.createElement("div",{className:"cui-card-header cui-flex cui-middle cui-right"},r.createElement("a",{href:"#",className:"cui-icon","cui-icon":"close","cui-close":""})),r.createElement("div",{className:"off-canvas-content cui-card-body"},r.createElement("div",{className:"cui-width-1-1"},r.createElement("h3",{className:"cui-h3"},"Menu"),r.createElement("ul",{className:"cui-list cui-interactive cui-margin-top"},r.createElement("li",null,r.createElement(te,{url:O.renderUrl("home"),name:O.getName("home"),shouldClose:!0})),r.createElement("li",null,r.createElement(te,{url:O.renderUrl("actions"),name:O.getName("actions"),shouldClose:!0})),r.createElement("li",null,r.createElement(te,{url:O.renderUrl("settings"),name:O.getName("settings"),shouldClose:!0})),r.createElement("li",null,r.createElement(te,{url:O.renderUrl("about"),name:O.getName("about"),shouldClose:!0})))))))}}])&&le(t.prototype,n),i&&le(t,i),o}(r.Component);var he="exercise",be="warmup",ve=[{name:"Warmup",duration:5,type:be,removable:!1,editable:!1},{name:"Exercise",duration:30,type:he,removable:!1,editable:!1},{name:"Break",duration:60,type:"break",removable:!1,editable:!1},{name:"Cooldown",duration:90,type:be,removable:!1,editable:!1}],ye="Training is empty",ge="Training name is not provided",we="Training has no rounds",Ee="Round is empty",Oe="Round has no actions",Ne="Action is empty",je="Action name is not provided",Se="Action type is not provided",ke="Action duration is not correct";function Ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xe(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var Pe="GET_ALL",Ie="SET_ACTION",De="REMOVE_ACTION",Ce=new WeakMap,_e=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ce.set(this,{writable:!0,value:void 0}),function(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(this,Ce,t)}var t,n,r;return t=e,(n=[{key:"getActions",value:function(){var e,t=this;return Ae(e={},Pe,(function(){return xe(t,Ce).getAllActions()})),Ae(e,Ie,(function(e){return xe(t,Ce).setAction(e)})),Ae(e,De,(function(e){return xe(t,Ce).removeAction(e)})),e}}])&&Te(t.prototype,n),r&&Te(t,r),e}();function Re(e){return r.createElement("span",{className:"cui-icon cui-tooltip","data-tooltip":e.type,"cui-icon":"stopwatch_".concat(e.type)})}function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Le(e);if(t){var i=Le(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fe(this,n)}}function Fe(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t,n){return t&&We(e.prototype,t),n&&We(e,n),e}var Ye=function(){function e(){Be(this,e)}return ze(e,[{key:"validate",value:function(e){var t={status:!0};try{var n=this.performValidation(e);n&&n.length>0&&(t.status=!1,t.errors=n)}catch(e){var r="An error occured during validation";console.error(r),console.error(e),t.status=!1,t.errors=[r+": "+e.message]}return t}}]),e}(),Ve=function(e){$e(n,e);var t=Ge(n);function n(){return Be(this,n),t.call(this)}return ze(n,[{key:"performValidation",value:function(e){if(!Object(c.c)(e))return[ye];var t=[];return Object(c.c)(e.name)||t.push(ge),Object(c.c)(e.rounds)||t.push(we),t}}]),n}(Ye),He=function(e){$e(n,e);var t=Ge(n);function n(){return Be(this,n),t.call(this)}return ze(n,[{key:"performValidation",value:function(e){return Object(c.c)(e)?Object(c.c)(e.actions)?void 0:[Oe]:[Ee]}}]),n}(Ye),Je=function(e){$e(n,e);var t=Ge(n);function n(){return Be(this,n),t.call(this)}return ze(n,[{key:"performValidation",value:function(e){if(!Object(c.c)(e))return[Ne];var t=[];return Object(c.c)(e.name)||t.push(je),Object(c.c)(e.type)||t.push(Se),e.duration<0&&t.push(ke),t}}]),n}(Ye);function Ke(e){var t;return r.useEffect((function(){}),[e]),r.createElement("div",{className:"cui-dialog ".concat(null!==(t=e.className)&&void 0!==t?t:""),"cui-dialog":"escClose: Y",id:e.id},r.createElement("div",{className:"cui-dialog-container"},r.createElement("div",{className:"cui-dialog-header"},r.createElement("span",{className:"cui-dialog-title"},e.title),r.createElement("a",{className:"cui-icon","cui-icon":"close","cui-close":""})),r.createElement("div",{className:"cui-dialog-body"},e.body),e.footer&&r.createElement("div",{className:"cui-dialog-footer"},e.footer)))}function Ze(e){return r.createElement(r.Fragment,null,e.errors&&e.errors.length>0&&r.createElement("ul",{className:"cui-list"},e.errors.map((function(e,t){return r.createElement("li",{key:t,className:"cui-animation-fade-in"},r.createElement("span",{className:"cui-text-error"},e))}))))}function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nt(e){var t=et(r.useState({name:"",duration:5,removable:!0,editable:!1,type:he}),2),n=t[0],i=t[1],a=et(r.useState([]),2),o=a[0],c=a[1];function u(e){var t=e.target.name;switch(t){case"name":case"duration":case"type":i(Qe(Qe({},n),{},Xe({},t,e.target.value)));break;case"removable":case"editable":i(Qe(Qe({},n),{},Xe({},t,e.target.checked)))}}return r.useEffect((function(){return e.action&&(i(Qe({},e.action)),c([])),function(){}}),[e.action]),r.createElement(Ke,{title:"Add new",id:"add-action-dialog",body:r.createElement(r.Fragment,null,r.createElement("div",{className:"cui-form"},r.createElement("label",{className:"cui-form-label"},"Name"),r.createElement("input",{className:"cui-input stopwatch-input-width",type:"text",name:"name",value:n.name,placeholder:"Name",onChange:u})),r.createElement("div",{className:"cui-form cui-margin-top"},r.createElement("label",{className:"cui-form-label"},"Duration"),r.createElement("input",{className:"cui-input stopwatch-input-width",type:"number",min:"0",max:"100",name:"duration",value:n.duration,placeholder:"Duration",onChange:u})),r.createElement("div",{className:"cui-form cui-margin-top"},r.createElement("label",{className:"cui-form-label"},"Type"),r.createElement("select",{className:"cui-select stopwatch-input-width",value:n.type,name:"type",onChange:u},r.createElement("option",{value:"warmup"},"Warmup"),r.createElement("option",{value:"exercise"},"Exercise"),r.createElement("option",{value:"break"},"Break"),r.createElement("option",{value:"cooldown"},"Cooldown"))),r.createElement("div",{className:"cui-form cui-flex cui-middle cui-reverse cui-margin-top"},r.createElement("input",{type:"checkbox",className:"cui-checkbox",id:"checkbox-1-2",name:"editable",checked:n.editable,onChange:u}),r.createElement("label",{htmlFor:"checkbox-1-2"}," Editable")),r.createElement("div",{className:"cui-form cui-flex cui-middle cui-reverse cui-margin-top"},r.createElement("input",{type:"checkbox",className:"cui-checkbox",id:"checkbox-1-1",name:"removable",checked:n.removable,onChange:u}),r.createElement("label",{htmlFor:"checkbox-1-1"}," Removable")),r.createElement(Ze,{errors:o})),footer:r.createElement("div",{className:"cui-flex cui-right"},r.createElement("button",{className:"cui-button cui-margin-small-right","cui-close":""},"Cancel"),r.createElement("button",{className:"cui-button cui-accent",onClick:function(){if(e.onSave){var t=Qe({},n),r=(new Je).validate(t);if(r.status){var i=window.$cui.get("#add-action-dialog");e.onSave(t),i.emit("close")}c(r.errors)}}},"Save"))})}function rt(e){return r.createElement("div",{className:"stopwatch-page-header cui-container cui-center"},r.createElement("div",null,r.createElement("h1",{className:"cui-h1 cui-text-center cui-margin-remove"},e.title),r.createElement("p",{className:"cui-text-center cui-text-muted"},e.description)))}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return at(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return at(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ot(e){var t=it(r.useState(""),2),n=t[0],i=t[1];function a(t){i(t),Object(c.c)(e.onUpdate)&&e.onUpdate(t)}return r.createElement("div",{className:"cui-input-mix "+e.className},r.createElement("input",{type:"text",className:"cui-input",placeholder:"Filter",value:n,onChange:function(e){a(e.target.value)}}),Object(c.c)(n)&&r.createElement("a",{className:"cui-icon","cui-icon":"close",onClick:function(){return a("")}}))}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||mt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){if(e){if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pt={name:"",type:"exercise",duration:5,removable:!0,editable:!0};function ht(){var e=ft(r.useState({actions:st(ve),current:null}),2),t=e[0],n=e[1],i=ft(r.useState(""),2),a=i[0],o=i[1];function u(e){var t,n;t=e.name,n=function(){window.$actionsFlow.perform(De,e)},window.$cui.alert("delete-action-dialog","YesNoCancel",{title:"Delete action",message:"Do you really want to delete action: "+t,onYes:n})}function l(e){n(ut(ut({},t),{},{actions:[].concat(st(ve),st(e))}))}function s(e){n(ut(ut({},t),{},{current:e||ut({},pt)})),window.$cui.get("#add-action-dialog").emit("open")}return r.useEffect((function(){var e=window.$actionsFlow.subscribe(Pe,{finish:l}),t=window.$actionsFlow.subscribe(Ie),n=window.$actionsFlow.subscribe(De);return window.$actionsFlow.perform(Pe),function(){window.$actionsFlow.unsubscribe(Pe,e.id),window.$actionsFlow.unsubscribe(Ie,t.id),window.$actionsFlow.unsubscribe(De,n.id)}}),[t.actions]),r.createElement(r.Fragment,null,r.createElement("div",{className:"stopwatch-content-width"},r.createElement(rt,{title:"Activities",description:"Define activies which you want to perform in trainings!"}),r.createElement("div",{className:"cui-container cui-flex cui-middle cui-middle cui-center cui-right--s"},r.createElement(ot,{value:a,onUpdate:function(e){o(e)},className:"cui-width-1-1 cui-width-1-3--m cui-width-1-4--l"})),r.createElement("div",{className:"cui-container cui-flex-grid cui-flex-grid-match cui-child-width-1-2 cui-child-width-1-3--m"},Object(c.c)(t.actions)&&t.actions.map((function(e,t){return function(e){if(!Object(c.c)(a))return!0;var t=e.toLowerCase().match(a.toLowerCase());return Object(c.c)(t)}(e.name)&&r.createElement("div",{key:t,className:"cui-animation-fade-in"},r.createElement("div",{className:"cui-card cui-default cui-hover "+v(e.type),onClick:function(){e.editable&&s(e)}},r.createElement("div",{className:"cui-card-header cui-flex cui-between cui-nowrap"},r.createElement("span",{className:"cui-card-title cui-text-truncate cui-overflow-hidden"},e.name),r.createElement(Re,{type:e.type})),r.createElement("div",{className:"cui-card-body cui-flex cui-middle action-card-height"},r.createElement("div",{className:"cui-flex-grow"},r.createElement("div",{className:"cui-text-muted"},r.createElement("span",null,e.duration," seconds"))),r.createElement("div",{className:"cui-flex-shrink"},r.createElement("ul",{className:"cui-icon-nav"},e.removable&&r.createElement("li",null,r.createElement("a",{className:"cui-icon","cui-icon":"trash",onClick:function(){return u(e)}})))))))}))),r.createElement("div",{className:"cui-position-float cui-position-bottom cui-position-right cui-margin cui-margin-large--l z-index-100"},r.createElement("button",{className:"cui-icon cui-button cui-icon-margin cui-background-default cui-box-shadow cui-rounded","cui-icon":"plus",onClick:function(){s()}},"Add New"))),r.createElement(nt,{action:t.current,onSave:function(e){window.$actionsFlow.perform(Ie,e)}}))}var bt=Object(o.i)((function(e){var t=e.history;return r.createElement("button",{className:"cui-button cui-accent",onClick:function(){return t.goBack()}},"Go Back")}));function vt(e){var t;return r.createElement("div",{className:e.classes},r.createElement("h2",{className:"cui-h2 cui-text-center cui-text-error"},e.message),r.createElement("div",{className:""},r.createElement("div",{className:"cui-flex cui-center"},r.createElement(a.b,{to:"/",className:"cui-button cui-margin-small-right"},"Go Home"),null!==(t=e.goBack)&&void 0!==t?t:r.createElement(bt,null))))}function yt(e){return r.createElement("select",{className:"cui-select "+e.className,name:e.name,id:e.id,onChange:function(t){if(e.onSelect){var n=t.target.value;e.onSelect(e.actions.find((function(e){return e.name===n})))}},value:e.value},e.actions&&e.actions.map((function(e){return r.createElement("option",{key:e.name,value:e.name},e.name," (Type: ",e.type,", Duration: ",e.duration,")")})))}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){Et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e){return function(e){if(Array.isArray(e))return St(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||jt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||jt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){if(e){if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kt(e){var t,n=Nt(Object(r.useState)({actions:[],selected:null,errors:[]}),2),i=n[0],a=n[1];function o(t){a({actions:t,selected:e.definedActions[0],errors:[]})}return r.useEffect((function(){return o(e.round&&null!==e.round?e.round.actions:[]),function(){}}),[e.round,e.definedActions]),r.createElement(Ke,{id:"edit-round-dialog",title:"Edit Round",body:r.createElement(r.Fragment,null,r.createElement("div",{className:"edit-round-dialog-body"},r.createElement("ul",{className:"cui-list"},i.actions&&i.actions.map((function(e,t){return r.createElement("li",{key:t,className:"animation-fade-in"},r.createElement("div",{className:"cui-flex cui-middle"},r.createElement("div",{className:"cui-flex-grow"},r.createElement("div",{className:"cui-flex cui-middle"},r.createElement("div",{className:"cui-flex-center cui-margin-right"},r.createElement(Re,{type:e.type})),r.createElement("div",{className:"cui-flex-grow"},r.createElement("div",{className:""},e.name),r.createElement("div",{className:"cui-text-muted"},"Lasts ",e.duration," seconds")))),r.createElement("ul",{className:"cui-icon-nav"},r.createElement("li",null,r.createElement("a",{className:"cui-icon","cui-icon":"trash",onClick:function(){!function(e){var t=Ot(i.actions);t.splice(e,1),o(t)}(t)}})))))})),r.createElement("li",null,r.createElement("div",{className:"cui-flex cui-middle cui-nowrap"},r.createElement("div",{className:"cui-flex-grow"},r.createElement(yt,{id:"round-action-select",className:"cui-width-1-1 cui-width-1-2--s",name:"action",value:null===(t=i.selected)||void 0===t?void 0:t.name,actions:e.definedActions,onSelect:function(e){e&&a(wt(wt({},i),{},{selected:e}))}})),r.createElement("div",{className:""},r.createElement("a",{"cui-icon":"plus",className:"cui-icon-button",onClick:function(){i.selected&&o([].concat(Ot(i.actions),[i.selected]))}}))))),i.errors&&i.errors.length>0&&r.createElement("ul",{className:"cui-list "},i.errors.map((function(e,t){return r.createElement("li",{key:t,className:"cui-animation-slide-in"},r.createElement("span",{className:"cui-text-error"},e))}))))),footer:r.createElement("div",{className:"cui-flex cui-right"},r.createElement("button",{className:"cui-button cui-margin-small-right","cui-close":""},"Cancel"),r.createElement("button",{className:"cui-button cui-accent",onClick:function(){if(e.onSave){var t={actions:Ot(i.actions)},n=(new He).validate(t);if(n.status)return void e.onSave(t,e.index);a(wt(wt({},i),{},{errors:n.errors}))}}},"Save"))})}function At(e){return r.createElement("div",{className:"cui-flex cui-middle cui-nowrap"},r.createElement("div",{className:"cui-flex-grow"},r.createElement("div",null,r.createElement("span",{className:"cui-text-bold"},"Round ",e.index)),r.createElement("div",{className:"cui-text-muted"},r.createElement("span",null,e.round.actions.length," actions, ",f(e.round.actions)," seconds of total length"))),r.createElement("ul",{className:"cui-icon-nav cui-flex-shrink"},!e.isFirst&&r.createElement("li",null,r.createElement("a",{className:"cui-icon","cui-icon":"chevron_up",onClick:function(){e.onMoveUp(e.round,e.index)}})),!e.isLast&&r.createElement("li",null,r.createElement("a",{className:"cui-icon","cui-icon":"chevron_down",onClick:function(){e.onMoveDown(e.round,e.index)}})),r.createElement("li",null,r.createElement("a",{className:"cui-icon","cui-icon":"copy",onClick:function(){e.onClone(e.round,e.index)}})),r.createElement("li",null,r.createElement("a",{className:"cui-icon","cui-icon":"edit",onClick:function(){e.onEdit(e.round,e.index)}})),r.createElement("li",null,r.createElement("a",{className:"cui-icon","cui-icon":"trash",onClick:function(){e.onDelete(e.round,e.index)}}))))}function Tt(e){return function(e){if(Array.isArray(e))return _t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Ct(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xt(Object(n),!0).forEach((function(t){It(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||Ct(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ct(e,t){if(e){if("string"==typeof e)return _t(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rt(e){var t=Dt(r.useState({training:e.training,currentIndex:-1,currentRound:null}),2),n=t[0],i=t[1],o=Dt(r.useState({actions:[]}),2),l=o[0],f=o[1];function m(e,t){i(Pt(Pt({},n),{},{currentIndex:t,currentRound:e})),window.$cui.get("#edit-round-dialog").emit("open")}function d(e,t){var r;r=function(){var e=Tt(n.training.rounds);e.splice(t,1),v(e)},window.$cui.alert("delete-round-dialog","YesNoCancel",{title:"Delete round",message:"Do you really want to delete this round?",onYes:r})}function p(e,t){v(g(n.training.rounds,t,t+1))}function h(e,t){v(g(n.training.rounds,t,t-1))}function b(e,t){var r=t+1,i=Object(c.a)(e);v(function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e||null===e||!r||null===r||0===r.length)return e;var a=e.length;return!t||0===t||t>=a?[].concat(u(e),r):t<=0?[].concat(r,u(e)):(e.splice.apply(e,[t,0].concat(r)),u(e))}(n.training.rounds,r,i))}function v(e){i(Pt(Pt({},n),{},{training:Pt(Pt({},n.training),{},{rounds:e})}))}function y(e){var t=e.target.name;["name","description"].includes(t)&&i(Pt(Pt({},n),{},{training:Pt(Pt({},n.training),{},It({},t,e.target.value))}))}function w(t){e.onCancel()}function E(){window.$flow.perform("DELETE_TRAINING",n.training.id)}function N(e){f({actions:[].concat(Tt(ve),Tt(e))})}return r.useEffect((function(){var t=window.$flow.subscribe("DELETE_TRAINING",{finish:w}),r=window.$actionsFlow.subscribe(Pe,{finish:N});return window.$actionsFlow.perform(Pe),i(Pt(Pt({},n),{},{training:e.training})),function(){window.$actionsFlow.unsubscribe(Pe,r.id),window.$flow.unsubscribe("DELETE_TRAINING",t.id)}}),[e.training]),r.createElement(r.Fragment,null,n.training.id>-1&&r.createElement("div",{className:"cui-container cui-flex cui-right cui-middle stopwatch-content-width"},r.createElement("ul",{className:"cui-list cui-inline"},r.createElement("li",{className:"cui-padding-remove"},r.createElement(a.b,{to:O.renderUrl("perform",{id:n.training.id}),className:"cui-icon cui-accent cui-icon-margin cui-margin-right","cui-icon":"media_play"},"Run")),r.createElement("li",{className:"cui-padding-remove"},r.createElement("a",{className:"cui-icon cui-icon-margin","cui-icon":"trash",onClick:function(){var e,t;e=n.training.name,t=E,window.$cui.alert("delete-training-dialog","YesNoCancel",{title:"Delete training",message:"Do you really want to delete training: "+e+"?",onYes:t})}},"Delete")))),r.createElement("div",{className:"cui-container stopwatch-content-width cui-flex-grid cui-child-width-1-1 cui-child-width-1-2--m"},r.createElement("div",{className:"cui-padding-small-right"},r.createElement("h3",{className:"cui-h3 cui-text-muted"},"Common"),r.createElement("div",{className:"cui-form"},r.createElement("label",{htmlFor:"",className:"cui-form-label"},"Name"),r.createElement("input",{type:"text",className:"cui-input stopwatch-input-width",placeholder:"Name",name:"name",value:n.training.name,onChange:y})),r.createElement("div",{className:"cui-form cui-margin-top"},r.createElement("label",{htmlFor:"",className:"cui-form-label"},"Description"),r.createElement("textarea",{className:"cui-textarea stopwatch-input-width stopwatch-text-area",placeholder:"Description",name:"description",rows:5,value:n.training.description,onChange:y}))),r.createElement("div",{className:"cui-padding-small-left"},r.createElement("h3",{className:"cui-h3 cui-text-muted"},"Rounds (total count: ",n.training.rounds.length,")"),r.createElement("ul",{className:"cui-list"},n.training&&n.training.rounds.map((function(e,t,n){return r.createElement("li",{key:t,className:"animation-fade-in"},r.createElement(At,{index:t,round:e,onEdit:m,onDelete:d,onMoveUp:h,onMoveDown:p,onClone:b,isFirst:0===t,isLast:t===n.length-1}))})),r.createElement("li",null,r.createElement("button",{className:"cui-button cui-icon cui-icon-margin cui-width-1-1","cui-icon":"plus",onClick:function(){m(null,-1)}},"Add New"))))),r.createElement("div",{className:"cui-container stopwatch-content-width cui-flex cui-right"},r.createElement("button",{className:"cui-button cui-margin-small-right",onClick:function(){e.onCancel()}},"Cancel"),r.createElement("button",{className:"cui-button cui-accent",onClick:function(){if(e.onSave){var t=(new Ve).validate(n.training);t.status?e.onSave(n.training):s("Training not valid",t.errors.join(", "))}}},"Save")),r.createElement(kt,{index:n.currentIndex,round:n.currentRound,onSave:function(e,t){v(function(e,t){var r=[];t>-1?(r=Tt(n.training.rounds))[t]=e:r=[].concat(Tt(n.training.rounds),[e]);return r}(e,t)),window.$cui.get("#edit-round-dialog").emit("close")},definedActions:l.actions}))}var Mt=Object(o.i)((function(e){var t,n=Dt(r.useState({training:{name:"",rounds:[]}}),2),i=n[0],a=n[1],u=Object(o.h)().id;function l(e){e?f():s("Fail","Training was not saved")}function f(){e.history&&e.history.goBack()}function m(e){e?a({training:Pt({},e)}):s("Fail","Training was not found")}return r.useEffect((function(){console.log("Parent redraw");var e=window.$flow.subscribe("UPDATE_TRAINING",{finish:l}),t=window.$flow.subscribe("GET_TRAINING",{finish:m});return u&&window.$flow.perform("GET_TRAINING",u),function(){window.$flow.unsubscribe("UPDATE_TRAINING",e.id),window.$flow.unsubscribe("GET_TRAINING",t.id)}}),[i.training.id]),r.createElement(r.Fragment,null,r.createElement("div",{className:"cui-container stopwatch-content-width"},r.createElement(rt,{title:Object(c.c)(null===(t=i.training)||void 0===t?void 0:t.name)?"Update training "+i.training.name:"Define training",description:"Customize your training settings"})),r.createElement("div",{className:""},i.training?r.createElement(Rt,{training:i.training,onSave:function(e){window.$flow.perform("UPDATE_TRAINING",e)},onCancel:f}):r.createElement(vt,{message:"The training you looking for could not be found",classes:""})))}));function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ft(e,t,n){return t&&Gt(e.prototype,t),n&&Gt(e,n),e}function Lt(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Bt(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var Wt=new WeakMap,zt=function(){function e(){Ut(this,e),Wt.set(this,{writable:!0,value:void 0}),Bt(this,Wt,screen)}return Ft(e,[{key:"activate",value:function(){Lt(this,Wt).keepAwake=!0}},{key:"release",value:function(){Lt(this,Wt).keepAwake=!1}}]),e}(),Yt=function(){function e(){Ut(this,e),$t(this,"element",void 0),this.element=void 0}return Ft(e,[{key:"activate",value:function(){this.element||(this.element=this.createElement("/static/video/Screen.mp4"),document.body.appendChild(this.element))}},{key:"release",value:function(){this.element&&(this.element.remove(),this.element=void 0)}},{key:"createElement",value:function(e){var t=document.createElement("video");return t.autoplay=!0,t.muted=!0,t.loop=!0,t.src=e,t.classList.add("loop-screen"),t.textContent="Not Supported",t}}]),e}(),Vt=new WeakMap,Ht=function(){function e(){Ut(this,e),Vt.set(this,{writable:!0,value:void 0}),Bt(this,Vt,this.getToggle())}return Ft(e,[{key:"activate",value:function(){Lt(this,Vt).activate()}},{key:"release",value:function(){Lt(this,Vt).release()}},{key:"getToggle",value:function(){return"keepAwake"in screen?new zt:new Yt}}]),e}();function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kt(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function Zt(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var qt="RUNNING",Qt="STOPPED",Xt="PAUSED",en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakMap,an=new WeakMap,on=new WeakMap,cn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),en.set(this,{writable:!0,value:void 0}),tn.set(this,{writable:!0,value:void 0}),nn.set(this,{writable:!0,value:void 0}),rn.set(this,{writable:!0,value:void 0}),an.set(this,{writable:!0,value:void 0}),on.set(this,{writable:!0,value:void 0}),Zt(this,tn,0),Zt(this,nn,0),Zt(this,rn,!1),Zt(this,an,Qt),Zt(this,on,void 0)}var t,n,r;return t=e,(n=[{key:"onTick",value:function(e){Zt(this,en,e)}},{key:"tick",value:function(){var e=this;Zt(this,on,setTimeout((function(){try{Kt(e,an)===qt&&Kt(e,en).call(e,Kt(e,tn),Kt(e,nn),e)?(Kt(e,rn)?(Zt(e,tn,0),Zt(e,rn,!1)):(Zt(e,tn,Kt(e,tn)+1),Zt(e,nn,Kt(e,nn)+1)),e.tick()):Kt(e,an)!==Xt&&e.stop()}catch(t){console.error("An error occured on stopwatch tick"),console.error(t),e.stop()}}),1e3))}},{key:"reset",value:function(){Zt(this,rn,!0)}},{key:"start",value:function(){return Kt(this,an)!==qt&&(Zt(this,tn,0),Zt(this,an,qt),this.tick(),!0)}},{key:"stop",value:function(){return Kt(this,an)===qt&&(this.finish(),Zt(this,an,Qt),!0)}},{key:"pause",value:function(){return Kt(this,an)===qt&&(Zt(this,an,Xt),!0)}},{key:"resume",value:function(){return Kt(this,an)===Xt&&(Zt(this,an,qt),this.tick(),!0)}},{key:"finish",value:function(){Kt(this,on)&&(clearTimeout(Kt(this,on)),Zt(this,on,void 0)),Zt(this,tn,0),Zt(this,nn,0)}},{key:"getState",value:function(){return Kt(this,an)}}])&&Jt(t.prototype,n),r&&Jt(t,r),e}();function un(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sn(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var fn="GET_DARK_MODE",mn="SET_DARK_MODE",dn="GET_SOUND_ENABLED",pn="SET_SOUND_ENABLED",hn="SET_SETTINGS",bn="GET_SETTINGS",vn=new WeakMap,yn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),vn.set(this,{writable:!0,value:void 0}),function(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(this,vn,t)}var t,n,r;return t=e,(n=[{key:"getActions",value:function(){var e,t=this;return un(e={},dn,(function(){return sn(t,vn).isSoundEnabled()})),un(e,pn,(function(e){sn(t,vn).setSoundEnabled(e)})),un(e,fn,(function(){return sn(t,vn).isDarkMode()})),un(e,mn,(function(e){sn(t,vn).setDarkMode(e)})),un(e,hn,(function(e){sn(t,vn).setSettings(e)})),un(e,bn,(function(){return console.log("getSettings"),sn(t,vn).getSettings()})),e}}])&&ln(t.prototype,n),r&&ln(t,r),e}();function gn(e){return r.createElement("span",{className:"cui-svg total-circle-progress","cui-circle-progress":e.watchState.trainingProgress},r.createElement("div",{className:""},r.createElement("span",{className:"cui-svg current-circle-progress","cui-circle-progress":e.watchState.roundProgress},r.createElement("div",null,r.createElement("span",{className:"cui-svg countdown-circle-progress","cui-circle-progress":e.watchState.progress},r.createElement("div",null,r.createElement("span",{className:"cui-block cui-text-small"},e.actionIdx+1),r.createElement("h1",{className:"cui-h1 cui-margin-remove "+e.watchState.timerCls},e.watchState.timer)))))))}function wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wn(Object(n),!0).forEach((function(t){On(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function On(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Sn={round:void 0,roundIdx:-1,actionIdx:-1,action:void 0,class:"",roundDuration:0,totalDuration:0};function kn(){var e=Nn(r.useState({training:void 0}),2),t=e[0],n=e[1],i=Nn(r.useState(void 0),2),a=i[0],u=i[1],l=Nn(r.useState(Sn),2),d=l[0],p=l[1],g=Nn(r.useState(!1),2),w=g[0],E=g[1],O=Nn(r.useState({timer:"00:00",state:Qt,startBtnCls:G(Qt),timerCls:"",progress:100,roundProgress:100,trainingProgress:100}),2),N=O[0],j=O[1],S=Nn(r.useState(""),2),k=S[0],A=S[1],T=Object(o.h)().id,x=r.useRef(d);x.current=d;var P=r.useRef(t.training);P.current=t.training;var I,D=r.useRef(null),C=r.useRef(null);function _(e){var r=(new Ve).validate(e);if(r.status){var i=(new He).validate(e.rounds[0]);if(i.status){var a=(new Je).validate(e.rounds[0].actions[0]);a.status?(n(En(En({},t),{},{training:e})),R(e)):s("Incorrect training","Training is not correct: ".concat(a.errors.join(", ")))}else s("Incorrect training","Training is not correct: ".concat(i.errors.join(", ")))}else s("Incorrect training","Training is not correct: ".concat(r.errors.join(", ")))}function R(e){var t=e.rounds[0],n=t.actions[0];p({roundIdx:0,round:t,action:n,actionIdx:0,class:y(n.type),roundDuration:f(t.actions),totalDuration:b(e)[1]})}function M(e,t,n){var r=x.current.action.duration-e,i=h(e,x.current.action.duration);return console.log(t),r>0?($(n.getState(),{time:r,progress:100-i,ct:e,total:t}),r>0&&r<=3&&U("countdown"),!0):(U("end"),n.reset(),$(qt,{time:0,progress:100,ct:e,total:t}),!!function(){var e=x.current.actionIdx+1;if(x.current.round.actions.length>e){var t=x.current.round.actions[e];return p(En(En({},x.current),{},{actionIdx:e,action:t,class:y(t.type)})),!0}var n=x.current.roundIdx+1;if(P.current.rounds.length>n){var r=P.current.rounds[n],i=r.actions[0];return p(En(En({},x.current),{},{round:r,roundIdx:n,actionIdx:0,action:i,class:y(i.type),roundDuration:f(r.actions)})),!0}return R(P.current),!1}()||($(Qt,{time:0,progress:100,ct:0,total:0}),!1))}function $(e,t){if(!Object(c.c)(t)||t.time<0)j(En(En({},N),{},{state:e,startBtnCls:G(e)}));else{var n=100-h(function(e){return x.current.round.actions.reduce((function(e,t,n){return n<x.current.actionIdx?e+t.duration:e}),0)+e}(t.ct),x.current.roundDuration),r=function(e){return 100-h(e,x.current.totalDuration)}(t.total);j({timer:m(t.time),timerCls:(i=t.time,i>0&&i<=3?"cui-text-warning timer-blink-animation":""),state:e,startBtnCls:G(e),progress:t.progress,roundProgress:n,trainingProgress:r})}var i}function U(e){var t=void 0;switch(e){case"countdown":t=D.current;break;case"end":t=C.current}t&&(t.currentTime=0,t.play())}function G(e){return e!==Qt?"cui-error":"cui-accent"}function F(e){E(e)}return r.useEffect((function(){var e=window.$flow.subscribe("GET_TRAINING",{finish:_}),t=window.$settingsFlow.subscribe(dn,{finish:F});window.$settingsFlow.perform(dn);var n=new Ht;try{n.activate()}catch(e){A("We could not activate feature to keep your device's screen awake during training performance")}var r=new cn;return r.onTick(M),u(r),T>-1&&window.$flow.perform("GET_TRAINING",T),function(){window.$flow.unsubscribe("GET_TRAINING",e.id),window.$settingsFlow.unsubscribe(dn,t.id),a&&a.stop(),n.release()}}),[T,w]),r.createElement(r.Fragment,null,t.training?r.createElement("div",{className:"stopwatch-layout-content cui-flex-center "+(I=d.action,Object(c.c)(I)?v(I.type):"")},r.createElement("div",{className:"stopwatch-content-width perform-layout cui-text-center animation-fade-in"},r.createElement("div",{className:"perform-main-controls"},r.createElement("h2",{className:"cui-h2 cui-margin-remove"},t.training.name),r.createElement("p",{className:"cui-text-muted cui-text-small cui-margin-remove"},"Round ",d.roundIdx+1," of ",t.training.rounds.length),r.createElement(gn,{actionIdx:d.actionIdx,watchState:N})),r.createElement("div",{className:"perform-buttons"},r.createElement("div",{className:"cui-width-1-1"},r.createElement("h3",{className:"cui-h3 "+d.class},d.action&&d.action.name),r.createElement("div",{className:"cui-flex cui-center"},N.state!==Qt&&r.createElement("button",{className:"cui-button cui-default cui-margin-small-right",onClick:function(){N.state===qt&&a.pause()?$(Xt):N.state===Xt&&a&&a.resume()&&$(qt)}},N.state===Xt?"Resume":"Pause"),r.createElement("button",{className:"cui-button "+N.startBtnCls,onClick:function(){N.state===Qt&&a.start()?$(qt):N.state!==Qt&&a.stop()&&(R(t.training),$(Qt,{time:0,progress:100,ct:0,total:0}))}},N.state===Qt?"Start":"Stop")),r.createElement("p",{className:"cui-text-muted"},t.training.description),r.createElement("div",{className:""},Object(c.c)(k)&&r.createElement("span",{className:"cui-icon cui-error cui-tooltip","cui-icon":"ban","data-tooltip":k}))))),r.createElement("audio",{ref:D,id:"stopwatch-countdown",src:"/static/audio/stopwatch_countdown.mp3"}),r.createElement("audio",{ref:C,id:"stopwatch-end",src:"/static/audio/stopwatch_end.mp3"})):r.createElement(vt,{message:"We couldn't find training"}))}function An(e){return r.useEffect((function(){}),[e.value,e.name]),r.createElement("div",{className:"cui-flex cui-middle cui-padding-small"},r.createElement("div",{className:"cui-flex-grow"},e.label),r.createElement("div",{className:"cui-input-switch"},r.createElement("input",{type:"checkbox",id:e.name,name:e.name,checked:e.value,onChange:function(t){var n=t.target;e.onUpdate&&e.onUpdate(n.name,n.checked)}}),r.createElement("label",{htmlFor:e.name,className:"cui-content"})))}function Tn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tn(Object(n),!0).forEach((function(t){Pn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function In(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,a=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cn(){var e=In(r.useState({soundEnabled:!1,darkMode:!1}),2),t=e[0],n=e[1];function i(e,r){if("soundEnabled"===e||"darkMode"===e){var i=xn(xn({},t),{},Pn({},e,r));window.$settingsFlow.perform(hn,i),n(i)}}function a(){console.log("Update"),window.$settingsFlow.perform(bn)}function o(e){console.log("GetSetting"),e&&(n(e),p(e.darkMode))}return r.useEffect((function(){console.log("Reload");var e=window.$settingsFlow.subscribe(bn,{finish:o}),t=window.$settingsFlow.subscribe(hn,{finish:a});return a(),function(){window.$settingsFlow.unsubscribe(bn,e.id),window.$settingsFlow.unsubscribe(hn,t.id)}}),[t.darkMode,t.soundEnabled]),r.createElement(r.Fragment,null,r.createElement("div",{className:"stopwatch-content-width"},r.createElement(rt,{title:"Settings",description:"Change application setup"}),r.createElement("div",{className:""},r.createElement("ul",{className:"cui-list"},r.createElement("li",null,r.createElement(An,{label:"Dark mode",name:"darkMode",value:t.darkMode,onUpdate:i})),r.createElement("li",null,r.createElement(An,{label:"Play sound",name:"soundEnabled",value:t.soundEnabled,onUpdate:i}))))))}function _n(){return r.createElement(r.Fragment,null,r.createElement("div",{className:"stopwatch-content-width"},r.createElement(rt,{title:"About",description:"Some details about the application"}),r.createElement("div",{className:""},r.createElement("div",{className:"cui-container "},r.createElement("h3",{className:"cui-h3"},"Repository"),r.createElement("p",{className:""},"Project sources can be found on Github under following link: ",r.createElement("a",{className:"cui-link cui-accent",href:"https://github.com/bpd-d/bpd-stopwatch-app"},"bpd-stopwatch-app"))),r.createElement("div",{className:"cui-container"},r.createElement("h3",{className:"cui-h3"},"Links"),r.createElement("p",{className:""},"Project uses third party libraries, see following list: "),r.createElement("ul",{className:"cui-list"},r.createElement("li",null,r.createElement("div",{className:""},r.createElement("div",{className:""},r.createElement("span",null,"React")),r.createElement("a",{href:"https://github.com/facebook/react",className:"cui-link"},"Github"),r.createElement("a",{href:"https://reactjs.org/",className:"cui-link cui-margin-left"},"React JS home page"))),r.createElement("li",null,r.createElement("div",{className:""},r.createElement("div",{className:""},r.createElement("span",null,"cUI Light")),r.createElement("a",{href:"https://github.com/bpd-d/cui-light",className:"cui-link"},"cUI Light on Github"),r.createElement("a",{href:"https://github.com/bpd-d/cui-styles",className:"cui-link cui-margin-left"},"cUI Styles on Github"),r.createElement("a",{href:"https://github.com/bpd-d/cui-icons",className:"cui-link cui-margin-left"},"cUI Icons on Github"))),r.createElement("li",null,r.createElement("div",{className:""},r.createElement("div",{className:""},r.createElement("span",null,"BPD Flow")),r.createElement("a",{href:"https://github.com/bpd-d/bpd-flow",className:"cui-link"},"Github"))),r.createElement("li",null,r.createElement("div",{className:""},r.createElement("div",{className:""},r.createElement("span",null,"BPD Storage")),r.createElement("a",{href:"https://github.com/bpd-d/bpd-storage",className:"cui-link"},"Github"))))))))}function Rn(){return r.createElement("div",{className:"stopwatch-footer cui-flex cui-right--l cui-middle"},r.createElement("div",{className:"cui-margin-horizontal"},r.createElement("span",{className:"cui-margin-small-right"},"Copyrights ",(new Date).getFullYear()+""),r.createElement("a",{href:"https://github.com/bpd-d",target:"_blank",className:"cui-link cui-accent"},"BPDDev")))}function Mn(e){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bn(e);if(t){var i=Bn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Fn(this,n)}}function Fn(e,t){return!t||"object"!==Mn(t)&&"function"!=typeof t?Ln(e):t}function Ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bn(e){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(u,e);var t,n,i,c=Gn(u);function u(e){var t,n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=c.call(this,e),n=Ln(t),i=void 0,(r="darkModeSub")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,t.state={currentSite:""},t.darkModeSub=window.$settingsFlow.subscribe(fn,{finish:t.onDarkMode.bind(Ln(t))}),window.$settingsFlow.perform(fn),t}return t=u,(n=[{key:"componentDidUpdate",value:function(){}},{key:"componentWillUnmount",value:function(){this.darkModeSub&&window.$settingsFlow.unsubscribe(fn,this.darkModeSub.id)}},{key:"onDarkMode",value:function(e){p(e)}},{key:"render",value:function(){return r.createElement(a.a,null,r.createElement("div",{className:"stopwatch-layout-main"},r.createElement(ce,null),r.createElement("div",{className:"stopwatch-layout-content cui-overflow-y-auto"},r.createElement(o.c,null,r.createElement(o.a,{path:O.getUrl("perform"),component:kn}),r.createElement(o.a,{path:O.getUrl("newTraining"),component:Mt}),r.createElement(o.a,{path:O.getUrl("editTraining"),component:Mt}),r.createElement(o.a,{path:O.getUrl("actions"),component:ht}),r.createElement(o.a,{path:O.getUrl("settings"),component:Cn}),r.createElement(o.a,{path:O.getUrl("about"),component:_n}),r.createElement(o.a,{path:O.getUrl("home"),component:G}),r.createElement(o.a,null,r.createElement(H,null)))),r.createElement(Rn,null),r.createElement(pe,null)))}}])&&$n(t.prototype,n),i&&$n(t,i),u}(r.Component),zn=n(19),Yn=n(20),Vn=n(10),Hn=n(11);function Jn(e){return function(e){if(Array.isArray(e))return Kn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qn(e,t,n){return t&&qn(e.prototype,t),n&&qn(e,n),e}function Xn(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}function er(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}return n}var tr=new WeakMap,nr=new WeakMap,rr=new WeakMap,ir=new WeakMap,ar=function(){function e(){Zn(this,e),tr.set(this,{writable:!0,value:void 0}),nr.set(this,{writable:!0,value:void 0}),rr.set(this,{writable:!0,value:void 0}),ir.set(this,{writable:!0,value:void 0}),er(this,tr,new Hn.BpdStorage("local","BPD_TRAININGS")),er(this,rr,"Trainings"),er(this,nr,[]),er(this,ir,new Ve)}return Qn(e,[{key:"getAllTrainings",value:function(){return console.log("Get All"),this.getTrainings()}},{key:"addTraining",value:function(e){var t=!1;return this.validate(e)&&this.onAction((function(n){var r=n.length;return e.id||(e.id=r>0?n[r-1].id+1:0,n.push(e),t=!0),t})),t}},{key:"updateTraining",value:function(e){var t=!1;return this.validate(e)&&(!e.id||e.id<0?t=this.addTraining(e):this.onAction((function(n){var r=n.findIndex((function(t){return t.id===e.id}));return r>-1&&(n[r]=e,t=!0),t}))),t}},{key:"deleteTraining",value:function(e){var t=!1;return!(e<0)&&(this.onAction((function(n){var r=n.findIndex((function(t){return t.id===e}));return r>-1&&(n.splice(r,1),t=!0),t})),t)}},{key:"getTraining",value:function(e){var t=void 0;return this.onAction((function(n){return t=n.find((function(t){return t.id==e})),!1})),t}},{key:"getCurrentTraining",value:function(){throw new Error("Method not implemented.")}},{key:"setCurrentTraining",value:function(e){throw new Error("Method not implemented.")}},{key:"getTrainings",value:function(){var e;if(0===Xn(this,nr).length){var t=Xn(this,tr).getAny(Xn(this,rr));er(this,nr,null!=t?t:[])}return null!==(e=Xn(this,tr).getAny(Xn(this,rr)))&&void 0!==e?e:[]}},{key:"setTrainings",value:function(e){Xn(this,tr).setAny(Xn(this,rr),e)}},{key:"validate",value:function(e){return Xn(this,ir).validate(e).status}},{key:"onAction",value:function(e){var t=this.getTrainings();e(t)&&(console.log(t),this.setTrainings(t))}}]),e}(),or=new WeakMap,cr=new WeakMap,ur=new WeakMap,lr=function(){function e(){Zn(this,e),or.set(this,{writable:!0,value:void 0}),cr.set(this,{writable:!0,value:void 0}),ur.set(this,{writable:!0,value:void 0}),er(this,or,new Hn.BpdStorage("local","BPD_TRAININGS")),er(this,cr,[]),er(this,ur,new Je),this.getActionsFromStorage()}return Qn(e,[{key:"getAllActions",value:function(){return Jn(Xn(this,cr))}},{key:"setAction",value:function(e){if(!Xn(this,ur).validate(e).status)return!1;var t=this.getIndex(e);return t>-1?Xn(this,cr)[t]=e:Xn(this,cr).push(e),this.setActionsToStorage(),!0}},{key:"removeAction",value:function(e){if(!Xn(this,ur).validate(e).status)return!1;var t=this.getIndex(e);return!(t<0)&&(Xn(this,cr).splice(t,1),this.setActionsToStorage(),!0)}},{key:"getIndex",value:function(e){return Xn(this,cr).findIndex((function(t){return t.name===e.name}))}},{key:"getActionsFromStorage",value:function(){var e=Xn(this,or).getAny("ACTIONS");er(this,cr,null!=e?e:[])}},{key:"setActionsToStorage",value:function(){Xn(this,or).setAny("ACTIONS",Xn(this,cr))}}]),e}(),sr=new WeakMap,fr=function(){function e(){Zn(this,e),sr.set(this,{writable:!0,value:void 0}),er(this,sr,new Hn.BpdStorage("local","BPD_SETTINGS"))}return Qn(e,[{key:"setSettings",value:function(e){return Xn(this,sr).setAny("SETTINGS",e),!0}},{key:"getSettings",value:function(){return Xn(this,sr).getAny("SETTINGS")||{darkMode:!1,soundEnabled:!1}}},{key:"setSoundEnabled",value:function(e){var t=this.getSettings();e!==t.soundEnabled&&(t.soundEnabled=e,this.setSettings(t))}},{key:"isSoundEnabled",value:function(){var e;return null===(e=this.getSettings())||void 0===e?void 0:e.soundEnabled}},{key:"setDarkMode",value:function(e){var t=this.getSettings();e!==t.darkMode&&(t.darkMode=e,this.setSettings(t))}},{key:"isDarkMode",value:function(){var e;return null===(e=this.getSettings())||void 0===e?void 0:e.darkMode}}]),e}();function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dr(e,t){var n=t.get(e);if(!n)throw new TypeError("attempted to get private field on non-instance");return n.get?n.get.call(e):n.value}var pr=new WeakMap,hr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pr.set(this,{writable:!0,value:void 0}),function(e,t,n){var r=t.get(e);if(!r)throw new TypeError("attempted to set private field on non-instance");if(r.set)r.set.call(e,n);else{if(!r.writable)throw new TypeError("attempted to set read only private field");r.value=n}}(this,pr,t)}var t,n,r;return t=e,(n=[{key:"getActions",value:function(){var e=this;return{GET_ALL_TRAININGS:function(){return dr(e,pr).getAllTrainings()},ADD_TRAINING:function(t){return dr(e,pr).addTraining(t)},UPDATE_TRAINING:function(t){return dr(e,pr).updateTraining(t)},DELETE_TRAINING:function(t){return dr(e,pr).deleteTraining(t)},GET_TRAINING:function(t){return dr(e,pr).getTraining(t)}}}}])&&mr(t.prototype,n),r&&mr(t,r),e}();function br(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?br(Object(n),!0).forEach((function(t){yr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gr=document.getElementById("root"),wr=n(31),Er=new zn.CuiSetupInit;Er.logLevel="debug",Er.root=gr;var Or={setup:Er,icons:vr(vr({},Yn.a),wr)},Nr=new hr(new ar),jr=new _e(new lr),Sr=new yn(new fr);window.$flow=Vn.FlowFactory.create(Nr.getActions()),window.$actionsFlow=Vn.FlowFactory.create(jr.getActions()),window.$settingsFlow=Vn.FlowFactory.create(Sr.getActions()),window.cuiInit.init(Or).then((function(e){i.render(r.createElement(Wn,null),gr)}))}});
//# sourceMappingURL=stopwatch.index.js.map